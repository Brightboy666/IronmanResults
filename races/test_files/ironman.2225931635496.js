/* ---------------------------------------- /includes/jsbin/modernizr.custom.11348.js ---------------------------------------- */
/* Modernizr 2.5.3 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-fontface-backgroundsize-borderimage-borderradius-boxshadow-flexbox-flexbox_legacy-hsla-multiplebgs-opacity-rgba-textshadow-cssanimations-csscolumns-generatedcontent-cssgradients-applicationcache-canvas-canvastext-hashchange-history-audio-video-touch-shiv-cssclasses-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-load
 */
;window.Modernizr=function(a,b,c){function B(a){j.cssText=a}function C(a,b){return B(n.join(a+";")+(b||""))}function D(a,b){return typeof a===b}function E(a,b){return!!~(""+a).indexOf(b)}function F(a,b){for(var d in a)if(j[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function G(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:D(f,"function")?f.bind(d||b):f}return!1}function H(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+p.join(d+" ")+d).split(" ");return D(b,"string")||D(b,"undefined")?F(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),G(e,b,c))}var d="2.5.3",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={},s={},t={},u=[],v=u.slice,w,x=function(a,c,d,e){var f,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),k.appendChild(j);return f=["&#173;","<style>",a,"</style>"].join(""),k.id=h,(l?k:m).innerHTML+=f,m.appendChild(k),l||(m.style.background="",g.appendChild(m)),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},y=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=D(e[d],"function"),D(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),z={}.hasOwnProperty,A;!D(z,"undefined")&&!D(z.call,"undefined")?A=function(a,b){return z.call(a,b)}:A=function(a,b){return b in a&&D(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=v.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(v.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(v.call(arguments)))};return e});var I=function(c,d){var f=c.join(""),g=d.length;x(f,function(c,d){var f=b.styleSheets[b.styleSheets.length-1],h=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"",i=c.childNodes,j={};while(g--)j[i[g].id]=i[g];e.touch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch||(j.touch&&j.touch.offsetTop)===9,e.generatedcontent=(j.generatedcontent&&j.generatedcontent.offsetHeight)>=1,e.fontface=/src/i.test(h)&&h.indexOf(d.split(" ")[0])===0},g,d)}(['@font-face {font-family:"font";src:url("https://")}',["@media (",n.join("touch-enabled),("),h,")","{#touch{top:9px;position:absolute}}"].join(""),['#generatedcontent:after{content:"',l,'";visibility:hidden}'].join("")],["fontface","touch","generatedcontent"]);r.flexbox=function(){return H("flexOrder")},r["flexbox-legacy"]=function(){return H("boxDirection")},r.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},r.canvastext=function(){return!!e.canvas&&!!D(b.createElement("canvas").getContext("2d").fillText,"function")},r.touch=function(){return e.touch},r.hashchange=function(){return y("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},r.history=function(){return!!a.history&&!!history.pushState},r.rgba=function(){return B("background-color:rgba(150,255,150,.5)"),E(j.backgroundColor,"rgba")},r.hsla=function(){return B("background-color:hsla(120,40%,100%,.5)"),E(j.backgroundColor,"rgba")||E(j.backgroundColor,"hsla")},r.multiplebgs=function(){return B("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},r.backgroundsize=function(){return H("backgroundSize")},r.borderimage=function(){return H("borderImage")},r.borderradius=function(){return H("borderRadius")},r.boxshadow=function(){return H("boxShadow")},r.textshadow=function(){return b.createElement("div").style.textShadow===""},r.opacity=function(){return C("opacity:.55"),/^0.55$/.test(j.opacity)},r.cssanimations=function(){return H("animationName")},r.csscolumns=function(){return H("columnCount")},r.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return B((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),E(j.backgroundImage,"gradient")},r.fontface=function(){return e.fontface},r.generatedcontent=function(){return e.generatedcontent},r.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},r.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},r.applicationcache=function(){return!!a.applicationCache};for(var J in r)A(r,J)&&(w=J.toLowerCase(),e[w]=r[J](),u.push((e[w]?"":"no-")+w));return B(""),i=k=null,function(a,b){function g(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function h(){var a=k.elements;return typeof a=="string"?a.split(" "):a}function i(a){var b={},c=a.createElement,e=a.createDocumentFragment,f=e();a.createElement=function(a){var e=(b[a]||(b[a]=c(a))).cloneNode();return k.shivMethods&&e.canHaveChildren&&!d.test(a)?f.appendChild(e):e},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+h().join().replace(/\w+/g,function(a){return b[a]=c(a),f.createElement(a),'c("'+a+'")'})+");return n}")(k,f)}function j(a){var b;return a.documentShived?a:(k.shivCSS&&!e&&(b=!!g(a,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),f||(b=!i(a)),b&&(a.documentShived=b),a)}var c=a.html5||{},d=/^<|^(?:button|form|map|select|textarea)$/i,e,f;(function(){var a=b.createElement("a");a.innerHTML="<xyz></xyz>",e="hidden"in a,f=a.childNodes.length==1||function(){try{b.createElement("a")}catch(a){return!0}var c=b.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()})();var k={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:j};a.html5=k,j(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.hasEvent=y,e.testProp=function(a){return F([a])},e.testAllProps=H,e.testStyles=x,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+u.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return o.call(a)=="[object Function]"}function e(a){return typeof a=="string"}function f(){}function g(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function h(){var a=p.shift();q=1,a?a.t?m(function(){(a.t=="c"?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){a!="img"&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l={},o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};y[c]===1&&(r=1,y[c]=[],l=b.createElement(a)),a=="object"?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),a!="img"&&(r||y[c]===2?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i(b=="c"?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),p.length==1&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&o.call(a.opera)=="[object Opera]",l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return o.call(a)=="[object Array]"},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,i){var j=b(a),l=j.autoCallback;j.url.split(".").pop().split("?").shift(),j.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]||h),j.instead?j.instead(a,e,f,g,i):(y[j.url]?j.noexec=!0:y[j.url]=1,f.load(j.url,j.forceCSS||!j.forceJS&&"css"==j.url.split(".").pop().split("?").shift()?"c":c,j.noexec,j.attrs,j.timeout),(d(e)||d(l))&&f.load(function(){k(),e&&e(j.origUrl,i,g),l&&l(j.origUrl,i,g),y[j.url]=2})))}function i(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var j,l,m=this.yepnope.loader;if(e(a))g(a,0,m,0);else if(w(a))for(j=0;j<a.length;j++)l=a[j],e(l)?g(l,0,m,0):w(l)?B(l):Object(l)===l&&i(l,m);else Object(a)===a&&i(a,m)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
/* ---------------------------------------- /includes/jsbin/ss-social.js ---------------------------------------- */
/*
* Symbolset
* www.symbolset.com
* Copyright © 2012 Oak Studios LLC
* 
* Upload this file to your web server
* and place this before the closing </body> tag.
* <script src="webfonts/ss-social.js"></script>
*/

if (/(MSIE [7-9]\.|Opera.*Version\/(11|12)\.|Chrome\/([5-9]|10)\.|Version\/(4)[\.0-9]+ Safari\/|Version\/(4|5\.0)[\.0-9]+? Mobile\/.*Safari\/)/.test(navigator.userAgent)) {

  if (typeof ss_legacy !== 'function') {

    /* domready.js */
    !function(a,b){typeof module!="undefined"?module.exports=b():typeof define=="function"&&typeof define.amd=="object"?define(b):this[a]=b()}("ss_ready",function(a){function m(a){l=1;while(a=b.shift())a()}var b=[],c,d=!1,e=document,f=e.documentElement,g=f.doScroll,h="DOMContentLoaded",i="addEventListener",j="onreadystatechange",k="readyState",l=/^loade|c/.test(e[k]);return e[i]&&e[i](h,c=function(){e.removeEventListener(h,c,d),m()},d),g&&e.attachEvent(j,c=function(){/^c/.test(e[k])&&(e.detachEvent(j,c),m())}),a=g?function(c){self!=top?l?c():b.push(c):function(){try{f.doScroll("left")}catch(b){return setTimeout(function(){a(c)},50)}c()}()}:function(a){l?a():b.push(a)}})
    
    var ss_legacy = function(node) {
      
      if (!node instanceof Object) return false;
      
      if (node.length) {
        for (var i=0; i<node.length; i++) {
          ss_legacy(node[i]);
        }
        return;
      };
      
      if (node.value) {
        node.value = ss_liga(node.value);
      } else if (node.nodeValue) {
        node.nodeValue = ss_liga(node.nodeValue);
      } else if (node.innerHTML) {
        node.innerHTML = ss_liga(node.innerHTML);
      }
        
    };
    
    var ss_getElementsByClassName = function(node, classname) {
      var a = [];
      var re = new RegExp('(^| )'+classname+'( |$)');
      var els = node.getElementsByTagName("*");
      for(var i=0,j=els.length; i<j; i++)
          if(re.test(els[i].className))a.push(els[i]);
      return a;
    };
    
    var ss_liga = function(that) {
      var re = new RegExp(ss_keywords.join('|'),"gi");
      return that.replace(re, function(v) { 
        return ss_icons[v.toLowerCase()];
      });
    };
    
    ss_ready(function() {
      if (document.getElementsByClassName) {
        ss_legacy(document.getElementsByClassName('ss-icon'));
      } else {
        ss_legacy(ss_getElementsByClassName(document.body, 'ss-icon'));
      }
    });
  
  }
  
  var ss_set={'foursquare':'\uF690','googleplus':'\uF613','wordpress':'\uF621','pinterest':'\uF650','posterous':'\uF623','instagram':'\uF641','dribbble':'\uF660','linkedin':'\uF612','envelope':'\u2709','facebook':'\uF610','twitter':'\uF611','blogger':'\uF622','google+':'\uF613','behance':'\uF661','youtube':'\uF630','tumblr':'\uF620','github':'\uF670','paypal':'\uF680','flickr':'\uF640','skype':'\uF6A0','email':'\u2709','vimeo':'\uF631','mail':'\u2709'};

  if (typeof ss_icons !== 'object' || typeof ss_icons !== 'object') {
    var ss_icons = ss_set; 
    var ss_keywords = [];
    for (var i in ss_set) { ss_keywords.push(i); };
  } else {
    for (var i in ss_set) { ss_icons[i] = ss_set[i]; ss_keywords.push(i); }
  };
  
};
/* ---------------------------------------- /includes/jsbin/ss-standard.js ---------------------------------------- */
/*
* Symbolset
* www.symbolset.com
* Copyright © 2012 Oak Studios LLC
*
* Upload this file to your web server
* and place this before the closing </body> tag.
* <script src="webfonts/ss-standard.js"></script>
*/

if (/(MSIE [7-9]\.|Opera.*Version\/(10\.[5-9]|(11|12)\.)|Chrome\/([1-9]|10)\.|Version\/[2-4][\.0-9]+ Safari\/|Version\/(4\.0\.[4-9]|4\.[1-9]|5\.0)[\.0-9]+? Mobile\/.*Safari\/|Android [1-2]\.|BlackBerry.*WebKit)/.test(navigator.userAgent) && !/(IEMobile)/.test(navigator.userAgent)) {

  var ss_set={'notifications disabled':'\uD83D\uDD15','notification disabled':'\uD83D\uDD15','notificationsdisabled':'\uD83D\uDD15','notificationdisabled':'\uD83D\uDD15','telephone disabled':'\uE300','telephonedisabled':'\uE300','writing disabled':'\uE071','remove calendar':'\uF071','calendar remove':'\uF071','calendar delete':'\uF073','writingdisabled':'\uE071','delete calendar':'\uF073','pencil disabled':'\uE071','calendarremove':'\uF071','phone disabled':'\uE300','check calendar':'\uF072','navigate right':'\u25BB','pencildisabled':'\uE071','removecalendar':'\uF071','calendar check':'\uF072','deletecalendar':'\uF073','download cloud':'\uEB00','battery medium':'\uEA11','calendardelete':'\uF073','cloud download':'\uEB00','medium battery':'\uEA11','ellipsis chat':'\uE399','mediumbattery':'\uEA11','bell disabled':'\uD83D\uDD15','clouddownload':'\uEB00','shopping cart':'\uE500','calendarcheck':'\uF072','phonedisabled':'\uE300','female avatar':'\uD83D\uDC67','notifications':'\uD83D\uDD14','call disabled':'\uE300','battery empty':'\uEA13','navigateright':'\u25BB','empty battery':'\uEA13','batterymedium':'\uEA11','checkcalendar':'\uF072','navigate down':'\uF501','navigate left':'\u25C5','downloadcloud':'\uEB00','navigateleft':'\u25C5','ellipsischat':'\uE399','navigatedown':'\uF501','batteryempty':'\uEA13','battery high':'\uEA10','notification':'\uD83D\uDD14','battery full':'\uD83D\uDD0B','calldisabled':'\uE300','femaleavatar':'\uD83D\uDC67','rotate right':'\u21BB','calendar add':'\uF070','high battery':'\uEA10','emptybattery':'\uEA13','cloud upload':'\uEB40','direct right':'\u25B9','full battery':'\uD83D\uDD0B','add calendar':'\uF070','upload cloud':'\uEB40','belldisabled':'\uD83D\uDD15','fast forward':'\u23E9','skip forward':'\u23ED','mobile phone':'\uD83D\uDCF1','shoppingcart':'\uE500','direct left':'\u25C3','low battery':'\uEA12','skipforward':'\u23ED','rotateright':'\u21BB','male avatar':'\uD83D\uDC64','direct down':'\u25BE','videocamera':'\uD83D\uDCF9','female user':'\uD83D\uDC67','information':'\u2139','thumbs down':'\uD83D\uDC4E','photographs':'\uD83C\uDF04','calendaradd':'\uF070','rotate left':'\u21BA','high volume':'\uD83D\uDD0A','batteryhigh':'\uEA10','credit card':'\uD83D\uDCB3','batteryfull':'\uD83D\uDD0B','navigate up':'\uF500','dollar sign':'\uD83D\uDCB2','fastforward':'\u23E9','mobilephone':'\uD83D\uDCF1','battery low':'\uEA12','addcalendar':'\uF070','fullbattery':'\uD83D\uDD0B','uploadcloud':'\uEB40','delete date':'\uF073','remove date':'\uF071','volume high':'\uD83D\uDD0A','directright':'\u25B9','cloudupload':'\uEB40','highbattery':'\uEA10','navigation':'\uE670','smartphone':'\uD83D\uDCF1','screenshot':'\u2316','dollarsign':'\uD83D\uDCB2','creditcard':'\uD83D\uDCB3','hard drive':'\uE7B0','femaleuser':'\uD83D\uDC67','maleavatar':'\uD83D\uDC64','removedate':'\uF071','microphone':'\uD83C\uDFA4','low volume':'\uD83D\uDD09','volume low':'\uD83D\uDD09','highvolume':'\uD83D\uDD0A','check date':'\uF072','volumehigh':'\uD83D\uDD0A','deletedate':'\uF073','cell phone':'\uD83D\uDCF1','directions':'\uE672','photograph':'\uD83C\uDF04','half heart':'\uE1A0','thumbsdown':'\uD83D\uDC4E','disapprove':'\uD83D\uDC4E','lowbattery':'\uEA12','down right':'\u2B0A','batterylow':'\uEA12','thumbnails':'\uE9A3','navigateup':'\uF500','attachment':'\uD83D\uDCCE','visibility':'\uD83D\uDC40','pull quote':'\u201C','descending':'\u25BE','directdown':'\u25BE','directleft':'\u25C3','connection':'\uEB85','rotateleft':'\u21BA','eyedropper':'\uE200','volumelow':'\uD83D\uDD09','stopwatch':'\u23F1','warehouse':'\uE602','paperclip':'\uD83D\uDCCE','backspace':'\u232B','ascending':'\u25B4','half star':'\uE1A1','cellphone':'\uD83D\uDCF1','lightbulb':'\uD83D\uDCA1','thumbs up':'\uD83D\uDC4D','down left':'\u2B0B','newspaper':'\uD83D\uDCF0','direct up':'\u25B4','checkdate':'\uF072','halfheart':'\uE1A0','bar chart':'\uD83D\uDCCA','harddrive':'\uE7B0','male user':'\uD83D\uDC64','pie chart':'\uE570','downright':'\u2B0A','skip back':'\u23EE','musicnote':'\u266B','dashboard':'\uF000','briefcase':'\uD83D\uDCBC','pullquote':'\u201C','telephone':'\uD83D\uDCDE','checkmark':'\u2713','lowvolume':'\uD83D\uDD09','buildings':'\uD83C\uDFE2','crosshair':'\u2316','open book':'\uD83D\uDCD6','add date':'\uF070','notebook':'\uD83D\uDCD3','document':'\uD83D\uDCC4','skipback':'\u23EE','typeface':'\uED01','transfer':'\u21C6','redirect':'\u21AA','computer':'\uD83D\uDCBB','contract':'\uEE01','question':'\u2753','sign out':'\uEE02','download':'\uEB01','pictures':'\uD83C\uDF04','subtract':'\u002D','settings':'\u2699','database':'\uE7A0','location':'\uE6D0','signpost':'\uE672','navigate':'\uE670','calendar':'\uD83D\uDCC5','barchart':'\uD83D\uDCCA','openbook':'\uD83D\uDCD6','maleuser':'\uD83D\uDC64','ellipsis':'\u2026','envelope':'\u2709','facetime':'\uE320','end call':'\uE300','halfstar':'\uE1A1','favorite':'\u22C6','thumbsup':'\uD83D\uDC4D','up right':'\u2B08','bookmark':'\uD83D\uDD16','keywords':'\uE100','downleft':'\u2B0B','trashcan':'\uE0D0','insecure':'\uD83D\uDD13','unlocked':'\uD83D\uDD13','previous':'\u25C5','directup':'\u25B4','zoom out':'\uE003','dropdown':'\u25BE','piechart':'\uE570','caution':'\u26D4','desktop':'\uD83D\uDCBB','zoom in':'\uE002','display':'\uD83D\uDCBB','monitor':'\uD83D\uDCBB','windows':'\uE202','warning':'\u26A0','descend':'\u25BE','package':'\uD83D\uDCE6','upright':'\u2B08','droplet':'\uD83D\uDCA7','keyword':'\uE100','printer':'\u2399','private':'\uD83D\uDD12','avatars':'\uD83D\uDC65','dictate':'\uD83C\uDFA4','battery':'\uD83D\uDD0B','zoomout':'\uE003','checked':'\u2713','speaker':'\uD83D\uDD08','comment':'\uD83D\uDCAC','forward':'\u27A1','up left':'\u2B09','approve':'\uD83D\uDC4D','endcall':'\uE300','compass':'\uE671','retweet':'\uF600','loading':'\uEB83','shuffle':'\uD83D\uDD00','syncing':'\uEB82','visible':'\uD83D\uDC40','airplay':'\uE800','adddate':'\uF070','picture':'\uD83C\uDF04','dislike':'\uD83D\uDC4E','compose':'\uD83D\uDCDD','refresh':'\u21BB','columns':'\uE9A2','signout':'\uEE02','log out':'\uEE02','target':'\u25CE','cursor':'\uE001','search':'\uD83D\uDD0E','zoomin':'\uE002','tablet':'\uEA01','laptop':'\uEA00','funnel':'\uE9B0','upload':'\uEB41','attach':'\uD83D\uDCCE','filter':'\uE9B0','pencil':'\u270E','ascend':'\u25B4','eraser':'\u2710','locked':'\uD83D\uDD12','secure':'\uD83D\uDD12','unlock':'\uD83D\uDD13','replay':'\u21BA','public':'\uD83D\uDD13','repeat':'\uD83D\uDD01','folder':'\uD83D\uDCC1','upleft':'\u2B09','iphone':'\uD83D\uDCF1','tagged':'\uE100','rewind':'\u23EA','record':'\u25CF','layout':'\uEDA0','action':'\uEE00','expand':'\u2922','sample':'\uE200','layers':'\uE202','videos':'\uD83D\uDCF9','photos':'\uD83C\uDF04','stroke':'\uE241','logout':'\uEE02','images':'\uD83C\uDF04','hyphen':'\u002D','remove':'\u002D','camera':'\uD83D\uDCF7','volume':'\uD83D\uDD08','delete':'\u2421','avatar':'\uD83D\uDC64','locate':'\uE670','mobile':'\uD83D\uDCF1','pause':'\uE8A0','zelda':'\uE1A0','write':'\u270E','nodes':'\uEB85','merge':'\uEB81','alert':'\u26A0','video':'\uD83D\uDCF9','world':'\uD83C\uDF0E','print':'\u2399','trash':'\uE0D0','photo':'\uD83C\uDF04','right':'\u27A1','image':'\uD83C\uDF04','phone':'\uD83D\uDCDE','reply':'\u21A9','heart':'\u2665','minus':'\u002D','erase':'\u2710','quote':'\u201C','check':'\u2713','sound':'\uD83D\uDD08','flask':'\uF4C0','share':'\uEE00','close':'\u2421','email':'\u2709','inbox':'\uD83D\uDCE5','visit':'\uEE00','audio':'\u266B','music':'\u266B','users':'\uD83D\uDC65','price':'\uD83D\uDCB2','house':'\u2302','timer':'\u23F1','cloud':'\u2601','eject':'\u23CF','earth':'\uD83C\uDF0E','globe':'\uD83C\uDF0E','clock':'\u23F2','list':'\uED50','time':'\u23F2','cell':'\uD83D\uDCF1','zoom':'\uE002','date':'\uD83D\uDCC5','home':'\u2302','ipad':'\uEA01','bell':'\uD83D\uDD14','cost':'\uD83D\uDCB2','cart':'\uE500','view':'\uD83D\uDC40','gear':'\u2699','user':'\uD83D\uDC64','talk':'\uD83D\uDCAC','chat':'\uD83D\uDCAC','look':'\uD83D\uDC40','fork':'\uEB80','mail':'\u2709','send':'\uE350','link':'\uD83D\uDD17','move':'\uE070','call':'\uD83D\uDCDE','plus':'\u002B','exit':'\uEE02','fill':'\uE240','info':'\u2139','crop':'\uE201','play':'\u25B6','star':'\u22C6','help':'\u2753','work':'\uD83D\uDCBC','stop':'\u25A0','drop':'\uD83D\uDCA7','love':'\u2665','edit':'\u270E','rows':'\uE9A1','city':'\uD83C\uDFE2','like':'\uD83D\uDC4D','redo':'\u21BB','flag':'\u2691','font':'\uED01','tags':'\uE100','down':'\u2B07','grid':'\uE9A0','text':'\uED00','left':'\u2B05','back':'\u2B05','skip':'\u23ED','page':'\uD83D\uDCC4','news':'\uD83D\uDCF0','sync':'\uEB82','file':'\uD83D\uDCC4','wifi':'\uEB84','next':'\u25BB','undo':'\u21BA','book':'\uD83D\uDCD5','lock':'\uD83D\uDD12','idea':'\uD83D\uDCA1','key':'\uD83D\uDD11','tag':'\uE100','fax':'\uD83D\uDCE0','map':'\uE673','out':'\uEE00','rss':'\uE310','add':'\u002B','ban':'\uD83D\uDEAB','cog':'\u2699','eye':'\uD83D\uDC40','hdd':'\uE7B0','box':'\uD83D\uDCE6','pin':'\uD83D\uDCCD','mic':'\uD83C\uDFA4','up':'\u2B06'};

  if (typeof ss_icons !== 'object' || typeof ss_icons !== 'object') {
    var ss_icons = ss_set;
    var ss_keywords = [];
    for (var i in ss_set) { ss_keywords.push(i); };
  } else {
    for (var i in ss_set) { ss_icons[i] = ss_set[i]; ss_keywords.push(i); }
  };

  if (typeof ss_legacy !== 'function') {

    /* domready.js */
    !function(a,b){typeof module!="undefined"?module.exports=b():typeof define=="function"&&typeof define.amd=="object"?define(b):this[a]=b()}("ss_ready",function(a){function m(a){l=1;while(a=b.shift())a()}var b=[],c,d=!1,e=document,f=e.documentElement,g=f.doScroll,h="DOMContentLoaded",i="addEventListener",j="onreadystatechange",k="readyState",l=/^loade|c/.test(e[k]);return e[i]&&e[i](h,c=function(){e.removeEventListener(h,c,d),m()},d),g&&e.attachEvent(j,c=function(){/^c/.test(e[k])&&(e.detachEvent(j,c),m())}),a=g?function(c){self!=top?l?c():b.push(c):function(){try{f.doScroll("left")}catch(b){return setTimeout(function(){a(c)},50)}c()}()}:function(a){l?a():b.push(a)}})

    var ss_legacy = function(node) {

      if (!node instanceof Object) return false;

      if (node.length) {
        for (var i=0; i<node.length; i++) {
          ss_legacy(node[i]);
        }
        return;
      };

      if (node.value) {
        node.value = ss_liga(node.value);
      } else if (node.nodeValue) {
        node.nodeValue = ss_liga(node.nodeValue);
      } else if (node.innerHTML) {
        node.innerHTML = ss_liga(node.innerHTML);
      }

    };

    var ss_getElementsByClassName = function(node, classname) {
      if (document.querySelectorAll) {
        return document.querySelectorAll('.'+classname);
      }
      var a = [];
      var re = new RegExp('(^| )'+classname+'( |$)');
      var els = node.getElementsByTagName("*");
      for(var i=0,j=els.length; i<j; i++)
          if(re.test(els[i].className))a.push(els[i]);
      return a;
    };

    var ss_liga = function(that) {
      var re = new RegExp(ss_keywords.join('|').replace(/[-[\]{}()*+?.,\\^$#\s]/g, "\\$&"),"gi");
      return that.replace(re, function(v) {
        return ss_icons[v.toLowerCase()];
      });
    };

    ss_ready(function() {
      if (document.getElementsByClassName) {
        ss_legacy(document.getElementsByClassName('ss-icon'));
      } else {
        ss_legacy(ss_getElementsByClassName(document.body, 'ss-icon'));
      }
    });

  }

};

/* ---------------------------------------- /includes/jsbin/jquery.min.js ---------------------------------------- */
/*! jQuery v1.8.3 jquery.com | jquery.org/license */
(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);
/* ---------------------------------------- /includes/jsbin/jquery-ui.js ---------------------------------------- */
/*! jQuery UI - v1.10.0 - 2013-01-17
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

(function( $, undefined ) {

var uuid = 0,
	runiqueId = /^ui-id-\d+$/;

// prevent duplicate loading
// this is only a problem because we proxy existing functions
// and we don't want to double proxy them
$.ui = $.ui || {};
if ( $.ui.version ) {
	return;
}

$.extend( $.ui, {
	version: "1.10.0",

	keyCode: {
		BACKSPACE: 8,
		COMMA: 188,
		DELETE: 46,
		DOWN: 40,
		END: 35,
		ENTER: 13,
		ESCAPE: 27,
		HOME: 36,
		LEFT: 37,
		NUMPAD_ADD: 107,
		NUMPAD_DECIMAL: 110,
		NUMPAD_DIVIDE: 111,
		NUMPAD_ENTER: 108,
		NUMPAD_MULTIPLY: 106,
		NUMPAD_SUBTRACT: 109,
		PAGE_DOWN: 34,
		PAGE_UP: 33,
		PERIOD: 190,
		RIGHT: 39,
		SPACE: 32,
		TAB: 9,
		UP: 38
	}
});

// plugins
$.fn.extend({
	_focus: $.fn.focus,
	focus: function( delay, fn ) {
		return typeof delay === "number" ?
			this.each(function() {
				var elem = this;
				setTimeout(function() {
					$( elem ).focus();
					if ( fn ) {
						fn.call( elem );
					}
				}, delay );
			}) :
			this._focus.apply( this, arguments );
	},

	scrollParent: function() {
		var scrollParent;
		if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
			scrollParent = this.parents().filter(function() {
				return (/(relative|absolute|fixed)/).test($.css(this,"position")) && (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
			}).eq(0);
		} else {
			scrollParent = this.parents().filter(function() {
				return (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
			}).eq(0);
		}

		return (/fixed/).test(this.css("position")) || !scrollParent.length ? $(document) : scrollParent;
	},

	zIndex: function( zIndex ) {
		if ( zIndex !== undefined ) {
			return this.css( "zIndex", zIndex );
		}

		if ( this.length ) {
			var elem = $( this[ 0 ] ), position, value;
			while ( elem.length && elem[ 0 ] !== document ) {
				// Ignore z-index if position is set to a value where z-index is ignored by the browser
				// This makes behavior of this function consistent across browsers
				// WebKit always returns auto if the element is positioned
				position = elem.css( "position" );
				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
					// IE returns 0 when zIndex is not specified
					// other browsers return a string
					// we ignore the case of nested elements with an explicit value of 0
					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
					value = parseInt( elem.css( "zIndex" ), 10 );
					if ( !isNaN( value ) && value !== 0 ) {
						return value;
					}
				}
				elem = elem.parent();
			}
		}

		return 0;
	},

	uniqueId: function() {
		return this.each(function() {
			if ( !this.id ) {
				this.id = "ui-id-" + (++uuid);
			}
		});
	},

	removeUniqueId: function() {
		return this.each(function() {
			if ( runiqueId.test( this.id ) ) {
				$( this ).removeAttr( "id" );
			}
		});
	}
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
	var map, mapName, img,
		nodeName = element.nodeName.toLowerCase();
	if ( "area" === nodeName ) {
		map = element.parentNode;
		mapName = map.name;
		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
			return false;
		}
		img = $( "img[usemap=#" + mapName + "]" )[0];
		return !!img && visible( img );
	}
	return ( /input|select|textarea|button|object/.test( nodeName ) ?
		!element.disabled :
		"a" === nodeName ?
			element.href || isTabIndexNotNaN :
			isTabIndexNotNaN) &&
		// the element and all of its ancestors must be visible
		visible( element );
}

function visible( element ) {
	return $.expr.filters.visible( element ) &&
		!$( element ).parents().addBack().filter(function() {
			return $.css( this, "visibility" ) === "hidden";
		}).length;
}

$.extend( $.expr[ ":" ], {
	data: $.expr.createPseudo ?
		$.expr.createPseudo(function( dataName ) {
			return function( elem ) {
				return !!$.data( elem, dataName );
			};
		}) :
		// support: jQuery <1.8
		function( elem, i, match ) {
			return !!$.data( elem, match[ 3 ] );
		},

	focusable: function( element ) {
		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
	},

	tabbable: function( element ) {
		var tabIndex = $.attr( element, "tabindex" ),
			isTabIndexNaN = isNaN( tabIndex );
		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
	}
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
	$.each( [ "Width", "Height" ], function( i, name ) {
		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
			type = name.toLowerCase(),
			orig = {
				innerWidth: $.fn.innerWidth,
				innerHeight: $.fn.innerHeight,
				outerWidth: $.fn.outerWidth,
				outerHeight: $.fn.outerHeight
			};

		function reduce( elem, size, border, margin ) {
			$.each( side, function() {
				size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
				if ( border ) {
					size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
				}
				if ( margin ) {
					size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
				}
			});
			return size;
		}

		$.fn[ "inner" + name ] = function( size ) {
			if ( size === undefined ) {
				return orig[ "inner" + name ].call( this );
			}

			return this.each(function() {
				$( this ).css( type, reduce( this, size ) + "px" );
			});
		};

		$.fn[ "outer" + name] = function( size, margin ) {
			if ( typeof size !== "number" ) {
				return orig[ "outer" + name ].call( this, size );
			}

			return this.each(function() {
				$( this).css( type, reduce( this, size, true, margin ) + "px" );
			});
		};
	});
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
	$.fn.removeData = (function( removeData ) {
		return function( key ) {
			if ( arguments.length ) {
				return removeData.call( this, $.camelCase( key ) );
			} else {
				return removeData.call( this );
			}
		};
	})( $.fn.removeData );
}





// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.support.selectstart = "onselectstart" in document.createElement( "div" );
$.fn.extend({
	disableSelection: function() {
		return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
			".ui-disableSelection", function( event ) {
				event.preventDefault();
			});
	},

	enableSelection: function() {
		return this.unbind( ".ui-disableSelection" );
	}
});

$.extend( $.ui, {
	// $.ui.plugin is deprecated.  Use the proxy pattern instead.
	plugin: {
		add: function( module, option, set ) {
			var i,
				proto = $.ui[ module ].prototype;
			for ( i in set ) {
				proto.plugins[ i ] = proto.plugins[ i ] || [];
				proto.plugins[ i ].push( [ option, set[ i ] ] );
			}
		},
		call: function( instance, name, args ) {
			var i,
				set = instance.plugins[ name ];
			if ( !set || !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) {
				return;
			}

			for ( i = 0; i < set.length; i++ ) {
				if ( instance.options[ set[ i ][ 0 ] ] ) {
					set[ i ][ 1 ].apply( instance.element, args );
				}
			}
		}
	},

	// only used by resizable
	hasScroll: function( el, a ) {

		//If overflow is hidden, the element might have extra content, but the user wants to hide it
		if ( $( el ).css( "overflow" ) === "hidden") {
			return false;
		}

		var scroll = ( a && a === "left" ) ? "scrollLeft" : "scrollTop",
			has = false;

		if ( el[ scroll ] > 0 ) {
			return true;
		}

		// TODO: determine which cases actually cause this to happen
		// if the element doesn't have the scroll set, see if it's possible to
		// set the scroll
		el[ scroll ] = 1;
		has = ( el[ scroll ] > 0 );
		el[ scroll ] = 0;
		return has;
	}
});

})( jQuery );

(function( $, undefined ) {

var uuid = 0,
	slice = Array.prototype.slice,
	_cleanData = $.cleanData;
$.cleanData = function( elems ) {
	for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
		try {
			$( elem ).triggerHandler( "remove" );
		// http://bugs.jquery.com/ticket/8235
		} catch( e ) {}
	}
	_cleanData( elems );
};

$.widget = function( name, base, prototype ) {
	var fullName, existingConstructor, constructor, basePrototype,
		// proxiedPrototype allows the provided prototype to remain unmodified
		// so that it can be used as a mixin for multiple widgets (#8876)
		proxiedPrototype = {},
		namespace = name.split( "." )[ 0 ];

	name = name.split( "." )[ 1 ];
	fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	// create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {
		// allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};
	// extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,
		// copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),
		// track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	});

	basePrototype = new base();
	// we need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = (function() {
			var _super = function() {
					return base.prototype[ prop ].apply( this, arguments );
				},
				_superApply = function( args ) {
					return base.prototype[ prop ].apply( this, args );
				};
			return function() {
				var __super = this._super,
					__superApply = this._superApply,
					returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {
		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
		});
		// remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );
};

$.widget.extend = function( target ) {
	var input = slice.call( arguments, 1 ),
		inputIndex = 0,
		inputLength = input.length,
		key,
		value;
	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :
						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );
				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string",
			args = slice.call( arguments, 1 ),
			returnValue = this;

		// allow multiple hashes to be passed on init
		options = !isMethodCall && args.length ?
			$.widget.extend.apply( null, [ options ].concat(args) ) :
			options;

		if ( isMethodCall ) {
			this.each(function() {
				var methodValue,
					instance = $.data( this, fullName );
				if ( !instance ) {
					return $.error( "cannot call methods on " + name + " prior to initialization; " +
						"attempted to call method '" + options + "'" );
				}
				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
				}
				methodValue = instance[ options ].apply( instance, args );
				if ( methodValue !== instance && methodValue !== undefined ) {
					returnValue = methodValue && methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					return false;
				}
			});
		} else {
			this.each(function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} )._init();
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			});
		}

		return returnValue;
	};
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",
	options: {
		disabled: false,

		// callbacks
		create: null
	},
	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = uuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;
		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			});
			this.document = $( element.style ?
				// element within the document
				element.ownerDocument :
				// element is window or document
				element.document || element );
			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
		}

		this._create();
		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: function() {
		this._destroy();
		// we can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.unbind( this.eventNamespace )
			// 1.9 BC for #7810
			// TODO remove dual storage
			.removeData( this.widgetName )
			.removeData( this.widgetFullName )
			// support: jquery <1.6.3
			// http://bugs.jquery.com/ticket/9413
			.removeData( $.camelCase( this.widgetFullName ) );
		this.widget()
			.unbind( this.eventNamespace )
			.removeAttr( "aria-disabled" )
			.removeClass(
				this.widgetFullName + "-disabled " +
				"ui-state-disabled" );

		// clean up events and states
		this.bindings.unbind( this.eventNamespace );
		this.hoverable.removeClass( "ui-state-hover" );
		this.focusable.removeClass( "ui-state-focus" );
	},
	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key,
			parts,
			curOption,
			i;

		if ( arguments.length === 0 ) {
			// don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {
			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( value === undefined ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( value === undefined ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},
	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},
	_setOption: function( key, value ) {
		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this.widget()
				.toggleClass( this.widgetFullName + "-disabled ui-state-disabled", !!value )
				.attr( "aria-disabled", value );
			this.hoverable.removeClass( "ui-state-hover" );
			this.focusable.removeClass( "ui-state-focus" );
		}

		return this;
	},

	enable: function() {
		return this._setOption( "disabled", false );
	},
	disable: function() {
		return this._setOption( "disabled", true );
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement,
			instance = this;

		// no suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// no element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			// accept selectors, DOM elements
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {
				// allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
							$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^(\w+)\s*(.*)$/ ),
				eventName = match[1] + instance.eventNamespace,
				selector = match[2];
			if ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} else {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: function( element, eventName ) {
		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-hover" );
			},
			mouseleave: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-hover" );
			}
		});
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-focus" );
			},
			focusout: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-focus" );
			}
		});
	},

	_trigger: function( type, event, data ) {
		var prop, orig,
			callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();
		// the original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}
		var hasOptions,
			effectName = !options ?
				method :
				options === true || typeof options === "number" ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		if ( options.delay ) {
			element.delay( options.delay );
		}
		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue(function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			});
		}
	};
});

})( jQuery );

(function( $, undefined ) {

var mouseHandled = false;
$( document ).mouseup( function() {
	mouseHandled = false;
});

$.widget("ui.mouse", {
	version: "1.10.0",
	options: {
		cancel: "input,textarea,button,select,option",
		distance: 1,
		delay: 0
	},
	_mouseInit: function() {
		var that = this;

		this.element
			.bind("mousedown."+this.widgetName, function(event) {
				return that._mouseDown(event);
			})
			.bind("click."+this.widgetName, function(event) {
				if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
					$.removeData(event.target, that.widgetName + ".preventClickEvent");
					event.stopImmediatePropagation();
					return false;
				}
			});

		this.started = false;
	},

	// TODO: make sure destroying one instance of mouse doesn't mess with
	// other instances of mouse
	_mouseDestroy: function() {
		this.element.unbind("."+this.widgetName);
		if ( this._mouseMoveDelegate ) {
			$(document)
				.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
				.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);
		}
	},

	_mouseDown: function(event) {
		// don't let more than one widget handle mouseStart
		if( mouseHandled ) { return; }

		// we may have missed mouseup (out of window)
		(this._mouseStarted && this._mouseUp(event));

		this._mouseDownEvent = event;

		var that = this,
			btnIsLeft = (event.which === 1),
			// event.target.nodeName works around a bug in IE 8 with
			// disabled inputs (#7620)
			elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
			return true;
		}

		this.mouseDelayMet = !this.options.delay;
		if (!this.mouseDelayMet) {
			this._mouseDelayTimer = setTimeout(function() {
				that.mouseDelayMet = true;
			}, this.options.delay);
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted = (this._mouseStart(event) !== false);
			if (!this._mouseStarted) {
				event.preventDefault();
				return true;
			}
		}

		// Click event may never have fired (Gecko & Opera)
		if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
			$.removeData(event.target, this.widgetName + ".preventClickEvent");
		}

		// these delegates are required to keep context
		this._mouseMoveDelegate = function(event) {
			return that._mouseMove(event);
		};
		this._mouseUpDelegate = function(event) {
			return that._mouseUp(event);
		};
		$(document)
			.bind("mousemove."+this.widgetName, this._mouseMoveDelegate)
			.bind("mouseup."+this.widgetName, this._mouseUpDelegate);

		event.preventDefault();

		mouseHandled = true;
		return true;
	},

	_mouseMove: function(event) {
		// IE mouseup check - mouseup happened when mouse was out of window
		if ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {
			return this._mouseUp(event);
		}

		if (this._mouseStarted) {
			this._mouseDrag(event);
			return event.preventDefault();
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted =
				(this._mouseStart(this._mouseDownEvent, event) !== false);
			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
		}

		return !this._mouseStarted;
	},

	_mouseUp: function(event) {
		$(document)
			.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
			.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);

		if (this._mouseStarted) {
			this._mouseStarted = false;

			if (event.target === this._mouseDownEvent.target) {
				$.data(event.target, this.widgetName + ".preventClickEvent", true);
			}

			this._mouseStop(event);
		}

		return false;
	},

	_mouseDistanceMet: function(event) {
		return (Math.max(
				Math.abs(this._mouseDownEvent.pageX - event.pageX),
				Math.abs(this._mouseDownEvent.pageY - event.pageY)
			) >= this.options.distance
		);
	},

	_mouseDelayMet: function(/* event */) {
		return this.mouseDelayMet;
	},

	// These are placeholder methods, to be overriden by extending plugin
	_mouseStart: function(/* event */) {},
	_mouseDrag: function(/* event */) {},
	_mouseStop: function(/* event */) {},
	_mouseCapture: function(/* event */) { return true; }
});

})(jQuery);

(function( $, undefined ) {

$.widget("ui.draggable", $.ui.mouse, {
	version: "1.10.0",
	widgetEventPrefix: "drag",
	options: {
		addClasses: true,
		appendTo: "parent",
		axis: false,
		connectToSortable: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		grid: false,
		handle: false,
		helper: "original",
		iframeFix: false,
		opacity: false,
		refreshPositions: false,
		revert: false,
		revertDuration: 500,
		scope: "default",
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		snap: false,
		snapMode: "both",
		snapTolerance: 20,
		stack: false,
		zIndex: false,

		// callbacks
		drag: null,
		start: null,
		stop: null
	},
	_create: function() {

		if (this.options.helper === "original" && !(/^(?:r|a|f)/).test(this.element.css("position"))) {
			this.element[0].style.position = "relative";
		}
		if (this.options.addClasses){
			this.element.addClass("ui-draggable");
		}
		if (this.options.disabled){
			this.element.addClass("ui-draggable-disabled");
		}

		this._mouseInit();

	},

	_destroy: function() {
		this.element.removeClass( "ui-draggable ui-draggable-dragging ui-draggable-disabled" );
		this._mouseDestroy();
	},

	_mouseCapture: function(event) {

		var o = this.options;

		// among others, prevent a drag on a resizable-handle
		if (this.helper || o.disabled || $(event.target).closest(".ui-resizable-handle").length > 0) {
			return false;
		}

		//Quit if we're not on a valid handle
		this.handle = this._getHandle(event);
		if (!this.handle) {
			return false;
		}

		$(o.iframeFix === true ? "iframe" : o.iframeFix).each(function() {
			$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>")
			.css({
				width: this.offsetWidth+"px", height: this.offsetHeight+"px",
				position: "absolute", opacity: "0.001", zIndex: 1000
			})
			.css($(this).offset())
			.appendTo("body");
		});

		return true;

	},

	_mouseStart: function(event) {

		var o = this.options;

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		this.helper.addClass("ui-draggable-dragging");

		//Cache the helper size
		this._cacheHelperProportions();

		//If ddmanager is used for droppables, set the global draggable
		if($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Store the helper's css position
		this.cssPosition = this.helper.css("position");
		this.scrollParent = this.helper.scrollParent();

		//The element's absolute position on the page minus margins
		this.offset = this.positionAbs = this.element.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		$.extend(this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
		});

		//Generate the original position
		this.originalPosition = this.position = this._generatePosition(event);
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Set a containment if given in the options
		if(o.containment) {
			this._setContainment();
		}

		//Trigger event + callbacks
		if(this._trigger("start", event) === false) {
			this._clear();
			return false;
		}

		//Recache the helper size
		this._cacheHelperProportions();

		//Prepare the droppable offsets
		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}


		this._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position

		//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)
		if ( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStart(this, event);
		}

		return true;
	},

	_mouseDrag: function(event, noPropagation) {

		//Compute the helpers position
		this.position = this._generatePosition(event);
		this.positionAbs = this._convertPositionTo("absolute");

		//Call plugins and callbacks and use the resulting position if something is returned
		if (!noPropagation) {
			var ui = this._uiHash();
			if(this._trigger("drag", event, ui) === false) {
				this._mouseUp({});
				return false;
			}
			this.position = ui.position;
		}

		if(!this.options.axis || this.options.axis !== "y") {
			this.helper[0].style.left = this.position.left+"px";
		}
		if(!this.options.axis || this.options.axis !== "x") {
			this.helper[0].style.top = this.position.top+"px";
		}
		if($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		return false;
	},

	_mouseStop: function(event) {

		//If we are using droppables, inform the manager about the drop
		var element,
			that = this,
			elementInDom = false,
			dropped = false;
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			dropped = $.ui.ddmanager.drop(this, event);
		}

		//if a drop comes from outside (a sortable)
		if(this.dropped) {
			dropped = this.dropped;
			this.dropped = false;
		}

		//if the original element is no longer in the DOM don't bother to continue (see #8269)
		element = this.element[0];
		while ( element && (element = element.parentNode) ) {
			if (element === document ) {
				elementInDom = true;
			}
		}
		if ( !elementInDom && this.options.helper === "original" ) {
			return false;
		}

		if((this.options.revert === "invalid" && !dropped) || (this.options.revert === "valid" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {
			$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
				if(that._trigger("stop", event) !== false) {
					that._clear();
				}
			});
		} else {
			if(this._trigger("stop", event) !== false) {
				this._clear();
			}
		}

		return false;
	},

	_mouseUp: function(event) {
		//Remove frame helpers
		$("div.ui-draggable-iframeFix").each(function() {
			this.parentNode.removeChild(this);
		});

		//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)
		if( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStop(this, event);
		}

		return $.ui.mouse.prototype._mouseUp.call(this, event);
	},

	cancel: function() {

		if(this.helper.is(".ui-draggable-dragging")) {
			this._mouseUp({});
		} else {
			this._clear();
		}

		return this;

	},

	_getHandle: function(event) {

		var handle = !this.options.handle || !$(this.options.handle, this.element).length ? true : false;
		$(this.options.handle, this.element)
			.find("*")
			.addBack()
			.each(function() {
				if(this === event.target) {
					handle = true;
				}
			});

		return handle;

	},

	_createHelper: function(event) {

		var o = this.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event])) : (o.helper === "clone" ? this.element.clone().removeAttr("id") : this.element);

		if(!helper.parents("body").length) {
			helper.appendTo((o.appendTo === "parent" ? this.element[0].parentNode : o.appendTo));
		}

		if(helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css("position"))) {
			helper.css("position", "absolute");
		}

		return helper;

	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = {left: +obj[0], top: +obj[1] || 0};
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {

		//Get the offsetParent and cache its position
		this.offsetParent = this.helper.offsetParent();
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		//This needs to be actually done for all browsers, since pageX/pageY includes this information
		//Ugly IE fix
		if((this.offsetParent[0] === document.body) ||
			(this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
		};

	},

	_getRelativeOffset: function() {

		if(this.cssPosition === "relative") {
			var p = this.element.position();
			return {
				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.element.css("marginLeft"),10) || 0),
			top: (parseInt(this.element.css("marginTop"),10) || 0),
			right: (parseInt(this.element.css("marginRight"),10) || 0),
			bottom: (parseInt(this.element.css("marginBottom"),10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var over, c, ce,
			o = this.options;

		if(o.containment === "parent") {
			o.containment = this.helper[0].parentNode;
		}
		if(o.containment === "document" || o.containment === "window") {
			this.containment = [
				o.containment === "document" ? 0 : $(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left,
				o.containment === "document" ? 0 : $(window).scrollTop() - this.offset.relative.top - this.offset.parent.top,
				(o.containment === "document" ? 0 : $(window).scrollLeft()) + $(o.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left,
				(o.containment === "document" ? 0 : $(window).scrollTop()) + ($(o.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
			];
		}

		if(!(/^(document|window|parent)$/).test(o.containment) && o.containment.constructor !== Array) {
			c = $(o.containment);
			ce = c[0];

			if(!ce) {
				return;
			}

			over = ($(ce).css("overflow") !== "hidden");

			this.containment = [
				(parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0),
				(parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0),
				(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right,
				(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top  - this.margins.bottom
			];
			this.relative_container = c;

		} else if(o.containment.constructor === Array) {
			this.containment = o.containment;
		}

	},

	_convertPositionTo: function(d, pos) {

		if(!pos) {
			pos = this.position;
		}

		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
			)
		};

	},

	_generatePosition: function(event) {

		var containment, co, top, left,
			o = this.options,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName),
			pageX = event.pageX,
			pageY = event.pageY;

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		if(this.originalPosition) { //If we are not dragging yet, we won't check for options
			if(this.containment) {
			if (this.relative_container){
				co = this.relative_container.offset();
				containment = [ this.containment[0] + co.left,
					this.containment[1] + co.top,
					this.containment[2] + co.left,
					this.containment[3] + co.top ];
			}
			else {
				containment = this.containment;
			}

				if(event.pageX - this.offset.click.left < containment[0]) {
					pageX = containment[0] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top < containment[1]) {
					pageY = containment[1] + this.offset.click.top;
				}
				if(event.pageX - this.offset.click.left > containment[2]) {
					pageX = containment[2] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top > containment[3]) {
					pageY = containment[3] + this.offset.click.top;
				}
			}

			if(o.grid) {
				//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)
				top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;
				pageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;
				pageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

		}

		return {
			top: (
				pageY -																	// The absolute mouse position
				this.offset.click.top	-												// Click offset (relative to the element)
				this.offset.relative.top -												// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
			),
			left: (
				pageX -																	// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left -												// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
			)
		};

	},

	_clear: function() {
		this.helper.removeClass("ui-draggable-dragging");
		if(this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {
			this.helper.remove();
		}
		this.helper = null;
		this.cancelHelperRemoval = false;
	},

	// From now on bulk stuff - mainly helpers

	_trigger: function(type, event, ui) {
		ui = ui || this._uiHash();
		$.ui.plugin.call(this, type, [event, ui]);
		//The absolute position has to be recalculated after plugins
		if(type === "drag") {
			this.positionAbs = this._convertPositionTo("absolute");
		}
		return $.Widget.prototype._trigger.call(this, type, event, ui);
	},

	plugins: {},

	_uiHash: function() {
		return {
			helper: this.helper,
			position: this.position,
			originalPosition: this.originalPosition,
			offset: this.positionAbs
		};
	}

});

$.ui.plugin.add("draggable", "connectToSortable", {
	start: function(event, ui) {

		var inst = $(this).data("ui-draggable"), o = inst.options,
			uiSortable = $.extend({}, ui, { item: inst.element });
		inst.sortables = [];
		$(o.connectToSortable).each(function() {
			var sortable = $.data(this, "ui-sortable");
			if (sortable && !sortable.options.disabled) {
				inst.sortables.push({
					instance: sortable,
					shouldRevert: sortable.options.revert
				});
				sortable.refreshPositions();	// Call the sortable's refreshPositions at drag start to refresh the containerCache since the sortable container cache is used in drag and needs to be up to date (this will ensure it's initialised as well as being kept in step with any changes that might have happened on the page).
				sortable._trigger("activate", event, uiSortable);
			}
		});

	},
	stop: function(event, ui) {

		//If we are still over the sortable, we fake the stop event of the sortable, but also remove helper
		var inst = $(this).data("ui-draggable"),
			uiSortable = $.extend({}, ui, { item: inst.element });

		$.each(inst.sortables, function() {
			if(this.instance.isOver) {

				this.instance.isOver = 0;

				inst.cancelHelperRemoval = true; //Don't remove the helper in the draggable instance
				this.instance.cancelHelperRemoval = false; //Remove it in the sortable instance (so sortable plugins like revert still work)

				//The sortable revert is supported, and we have to set a temporary dropped variable on the draggable to support revert: "valid/invalid"
				if(this.shouldRevert) {
					this.instance.options.revert = true;
				}

				//Trigger the stop of the sortable
				this.instance._mouseStop(event);

				this.instance.options.helper = this.instance.options._helper;

				//If the helper has been the original item, restore properties in the sortable
				if(inst.options.helper === "original") {
					this.instance.currentItem.css({ top: "auto", left: "auto" });
				}

			} else {
				this.instance.cancelHelperRemoval = false; //Remove the helper in the sortable instance
				this.instance._trigger("deactivate", event, uiSortable);
			}

		});

	},
	drag: function(event, ui) {

		var inst = $(this).data("ui-draggable"), that = this;

		$.each(inst.sortables, function() {

			var innermostIntersecting = false,
				thisSortable = this;

			//Copy over some variables to allow calling the sortable's native _intersectsWith
			this.instance.positionAbs = inst.positionAbs;
			this.instance.helperProportions = inst.helperProportions;
			this.instance.offset.click = inst.offset.click;

			if(this.instance._intersectsWith(this.instance.containerCache)) {
				innermostIntersecting = true;
				$.each(inst.sortables, function () {
					this.instance.positionAbs = inst.positionAbs;
					this.instance.helperProportions = inst.helperProportions;
					this.instance.offset.click = inst.offset.click;
					if (this !== thisSortable &&
						this.instance._intersectsWith(this.instance.containerCache) &&
						$.ui.contains(thisSortable.instance.element[0], this.instance.element[0])
					) {
						innermostIntersecting = false;
					}
					return innermostIntersecting;
				});
			}


			if(innermostIntersecting) {
				//If it intersects, we use a little isOver variable and set it once, so our move-in stuff gets fired only once
				if(!this.instance.isOver) {

					this.instance.isOver = 1;
					//Now we fake the start of dragging for the sortable instance,
					//by cloning the list group item, appending it to the sortable and using it as inst.currentItem
					//We can then fire the start event of the sortable with our passed browser event, and our own helper (so it doesn't create a new one)
					this.instance.currentItem = $(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", true);
					this.instance.options._helper = this.instance.options.helper; //Store helper option to later restore it
					this.instance.options.helper = function() { return ui.helper[0]; };

					event.target = this.instance.currentItem[0];
					this.instance._mouseCapture(event, true);
					this.instance._mouseStart(event, true, true);

					//Because the browser event is way off the new appended portlet, we modify a couple of variables to reflect the changes
					this.instance.offset.click.top = inst.offset.click.top;
					this.instance.offset.click.left = inst.offset.click.left;
					this.instance.offset.parent.left -= inst.offset.parent.left - this.instance.offset.parent.left;
					this.instance.offset.parent.top -= inst.offset.parent.top - this.instance.offset.parent.top;

					inst._trigger("toSortable", event);
					inst.dropped = this.instance.element; //draggable revert needs that
					//hack so receive/update callbacks work (mostly)
					inst.currentItem = inst.element;
					this.instance.fromOutside = inst;

				}

				//Provided we did all the previous steps, we can fire the drag event of the sortable on every draggable drag, when it intersects with the sortable
				if(this.instance.currentItem) {
					this.instance._mouseDrag(event);
				}

			} else {

				//If it doesn't intersect with the sortable, and it intersected before,
				//we fake the drag stop of the sortable, but make sure it doesn't remove the helper by using cancelHelperRemoval
				if(this.instance.isOver) {

					this.instance.isOver = 0;
					this.instance.cancelHelperRemoval = true;

					//Prevent reverting on this forced stop
					this.instance.options.revert = false;

					// The out event needs to be triggered independently
					this.instance._trigger("out", event, this.instance._uiHash(this.instance));

					this.instance._mouseStop(event, true);
					this.instance.options.helper = this.instance.options._helper;

					//Now we remove our currentItem, the list group clone again, and the placeholder, and animate the helper back to it's original size
					this.instance.currentItem.remove();
					if(this.instance.placeholder) {
						this.instance.placeholder.remove();
					}

					inst._trigger("fromSortable", event);
					inst.dropped = false; //draggable revert needs that
				}

			}

		});

	}
});

$.ui.plugin.add("draggable", "cursor", {
	start: function() {
		var t = $("body"), o = $(this).data("ui-draggable").options;
		if (t.css("cursor")) {
			o._cursor = t.css("cursor");
		}
		t.css("cursor", o.cursor);
	},
	stop: function() {
		var o = $(this).data("ui-draggable").options;
		if (o._cursor) {
			$("body").css("cursor", o._cursor);
		}
	}
});

$.ui.plugin.add("draggable", "opacity", {
	start: function(event, ui) {
		var t = $(ui.helper), o = $(this).data("ui-draggable").options;
		if(t.css("opacity")) {
			o._opacity = t.css("opacity");
		}
		t.css("opacity", o.opacity);
	},
	stop: function(event, ui) {
		var o = $(this).data("ui-draggable").options;
		if(o._opacity) {
			$(ui.helper).css("opacity", o._opacity);
		}
	}
});

$.ui.plugin.add("draggable", "scroll", {
	start: function() {
		var i = $(this).data("ui-draggable");
		if(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {
			i.overflowOffset = i.scrollParent.offset();
		}
	},
	drag: function( event ) {

		var i = $(this).data("ui-draggable"), o = i.options, scrolled = false;

		if(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== "HTML") {

			if(!o.axis || o.axis !== "x") {
				if((i.overflowOffset.top + i.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
					i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop + o.scrollSpeed;
				} else if(event.pageY - i.overflowOffset.top < o.scrollSensitivity) {
					i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop - o.scrollSpeed;
				}
			}

			if(!o.axis || o.axis !== "y") {
				if((i.overflowOffset.left + i.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
					i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft + o.scrollSpeed;
				} else if(event.pageX - i.overflowOffset.left < o.scrollSensitivity) {
					i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft - o.scrollSpeed;
				}
			}

		} else {

			if(!o.axis || o.axis !== "x") {
				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}
			}

			if(!o.axis || o.axis !== "y") {
				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}
			}

		}

		if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(i, event);
		}

	}
});

$.ui.plugin.add("draggable", "snap", {
	start: function() {

		var i = $(this).data("ui-draggable"),
			o = i.options;

		i.snapElements = [];

		$(o.snap.constructor !== String ? ( o.snap.items || ":data(ui-draggable)" ) : o.snap).each(function() {
			var $t = $(this),
				$o = $t.offset();
			if(this !== i.element[0]) {
				i.snapElements.push({
					item: this,
					width: $t.outerWidth(), height: $t.outerHeight(),
					top: $o.top, left: $o.left
				});
			}
		});

	},
	drag: function(event, ui) {

		var ts, bs, ls, rs, l, r, t, b, i, first,
			inst = $(this).data("ui-draggable"),
			o = inst.options,
			d = o.snapTolerance,
			x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
			y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;

		for (i = inst.snapElements.length - 1; i >= 0; i--){

			l = inst.snapElements[i].left;
			r = l + inst.snapElements[i].width;
			t = inst.snapElements[i].top;
			b = t + inst.snapElements[i].height;

			//Yes, I know, this is insane ;)
			if(!((l-d < x1 && x1 < r+d && t-d < y1 && y1 < b+d) || (l-d < x1 && x1 < r+d && t-d < y2 && y2 < b+d) || (l-d < x2 && x2 < r+d && t-d < y1 && y1 < b+d) || (l-d < x2 && x2 < r+d && t-d < y2 && y2 < b+d))) {
				if(inst.snapElements[i].snapping) {
					(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
				}
				inst.snapElements[i].snapping = false;
				continue;
			}

			if(o.snapMode !== "inner") {
				ts = Math.abs(t - y2) <= d;
				bs = Math.abs(b - y1) <= d;
				ls = Math.abs(l - x2) <= d;
				rs = Math.abs(r - x1) <= d;
				if(ts) {
					ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
				}
				if(bs) {
					ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top - inst.margins.top;
				}
				if(ls) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left - inst.margins.left;
				}
				if(rs) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left - inst.margins.left;
				}
			}

			first = (ts || bs || ls || rs);

			if(o.snapMode !== "outer") {
				ts = Math.abs(t - y1) <= d;
				bs = Math.abs(b - y2) <= d;
				ls = Math.abs(l - x1) <= d;
				rs = Math.abs(r - x2) <= d;
				if(ts) {
					ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top - inst.margins.top;
				}
				if(bs) {
					ui.position.top = inst._convertPositionTo("relative", { top: b - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
				}
				if(ls) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left - inst.margins.left;
				}
				if(rs) {
					ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left - inst.margins.left;
				}
			}

			if(!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {
				(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
			}
			inst.snapElements[i].snapping = (ts || bs || ls || rs || first);

		}

	}
});

$.ui.plugin.add("draggable", "stack", {
	start: function() {

		var min,
			o = $(this).data("ui-draggable").options,
			group = $.makeArray($(o.stack)).sort(function(a,b) {
				return (parseInt($(a).css("zIndex"),10) || 0) - (parseInt($(b).css("zIndex"),10) || 0);
			});

		if (!group.length) { return; }

		min = parseInt(group[0].style.zIndex, 10) || 0;
		$(group).each(function(i) {
			this.style.zIndex = min + i;
		});

		this[0].style.zIndex = min + group.length;

	}
});

$.ui.plugin.add("draggable", "zIndex", {
	start: function(event, ui) {
		var t = $(ui.helper), o = $(this).data("ui-draggable").options;
		if(t.css("zIndex")) {
			o._zIndex = t.css("zIndex");
		}
		t.css("zIndex", o.zIndex);
	},
	stop: function(event, ui) {
		var o = $(this).data("ui-draggable").options;
		if(o._zIndex) {
			$(ui.helper).css("zIndex", o._zIndex);
		}
	}
});

})(jQuery);

(function( $, undefined ) {

function isOverAxis( x, reference, size ) {
	return ( x > reference ) && ( x < ( reference + size ) );
}

$.widget("ui.droppable", {
	version: "1.10.0",
	widgetEventPrefix: "drop",
	options: {
		accept: "*",
		activeClass: false,
		addClasses: true,
		greedy: false,
		hoverClass: false,
		scope: "default",
		tolerance: "intersect",

		// callbacks
		activate: null,
		deactivate: null,
		drop: null,
		out: null,
		over: null
	},
	_create: function() {

		var o = this.options,
			accept = o.accept;

		this.isover = false;
		this.isout = true;

		this.accept = $.isFunction(accept) ? accept : function(d) {
			return d.is(accept);
		};

		//Store the droppable's proportions
		this.proportions = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight };

		// Add the reference and positions to the manager
		$.ui.ddmanager.droppables[o.scope] = $.ui.ddmanager.droppables[o.scope] || [];
		$.ui.ddmanager.droppables[o.scope].push(this);

		(o.addClasses && this.element.addClass("ui-droppable"));

	},

	_destroy: function() {
		var i = 0,
			drop = $.ui.ddmanager.droppables[this.options.scope];

		for ( ; i < drop.length; i++ ) {
			if ( drop[i] === this ) {
				drop.splice(i, 1);
			}
		}

		this.element.removeClass("ui-droppable ui-droppable-disabled");
	},

	_setOption: function(key, value) {

		if(key === "accept") {
			this.accept = $.isFunction(value) ? value : function(d) {
				return d.is(value);
			};
		}
		$.Widget.prototype._setOption.apply(this, arguments);
	},

	_activate: function(event) {
		var draggable = $.ui.ddmanager.current;
		if(this.options.activeClass) {
			this.element.addClass(this.options.activeClass);
		}
		if(draggable){
			this._trigger("activate", event, this.ui(draggable));
		}
	},

	_deactivate: function(event) {
		var draggable = $.ui.ddmanager.current;
		if(this.options.activeClass) {
			this.element.removeClass(this.options.activeClass);
		}
		if(draggable){
			this._trigger("deactivate", event, this.ui(draggable));
		}
	},

	_over: function(event) {

		var draggable = $.ui.ddmanager.current;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return;
		}

		if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.hoverClass) {
				this.element.addClass(this.options.hoverClass);
			}
			this._trigger("over", event, this.ui(draggable));
		}

	},

	_out: function(event) {

		var draggable = $.ui.ddmanager.current;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return;
		}

		if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.hoverClass) {
				this.element.removeClass(this.options.hoverClass);
			}
			this._trigger("out", event, this.ui(draggable));
		}

	},

	_drop: function(event,custom) {

		var draggable = custom || $.ui.ddmanager.current,
			childrenIntersection = false;

		// Bail if draggable and droppable are same element
		if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
			return false;
		}

		this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
			var inst = $.data(this, "ui-droppable");
			if(
				inst.options.greedy &&
				!inst.options.disabled &&
				inst.options.scope === draggable.options.scope &&
				inst.accept.call(inst.element[0], (draggable.currentItem || draggable.element)) &&
				$.ui.intersect(draggable, $.extend(inst, { offset: inst.element.offset() }), inst.options.tolerance)
			) { childrenIntersection = true; return false; }
		});
		if(childrenIntersection) {
			return false;
		}

		if(this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
			if(this.options.activeClass) {
				this.element.removeClass(this.options.activeClass);
			}
			if(this.options.hoverClass) {
				this.element.removeClass(this.options.hoverClass);
			}
			this._trigger("drop", event, this.ui(draggable));
			return this.element;
		}

		return false;

	},

	ui: function(c) {
		return {
			draggable: (c.currentItem || c.element),
			helper: c.helper,
			position: c.position,
			offset: c.positionAbs
		};
	}

});

$.ui.intersect = function(draggable, droppable, toleranceMode) {

	if (!droppable.offset) {
		return false;
	}

	var draggableLeft, draggableTop,
		x1 = (draggable.positionAbs || draggable.position.absolute).left, x2 = x1 + draggable.helperProportions.width,
		y1 = (draggable.positionAbs || draggable.position.absolute).top, y2 = y1 + draggable.helperProportions.height,
		l = droppable.offset.left, r = l + droppable.proportions.width,
		t = droppable.offset.top, b = t + droppable.proportions.height;

	switch (toleranceMode) {
		case "fit":
			return (l <= x1 && x2 <= r && t <= y1 && y2 <= b);
		case "intersect":
			return (l < x1 + (draggable.helperProportions.width / 2) && // Right Half
				x2 - (draggable.helperProportions.width / 2) < r && // Left Half
				t < y1 + (draggable.helperProportions.height / 2) && // Bottom Half
				y2 - (draggable.helperProportions.height / 2) < b ); // Top Half
		case "pointer":
			draggableLeft = ((draggable.positionAbs || draggable.position.absolute).left + (draggable.clickOffset || draggable.offset.click).left);
			draggableTop = ((draggable.positionAbs || draggable.position.absolute).top + (draggable.clickOffset || draggable.offset.click).top);
			return isOverAxis( draggableTop, t, droppable.proportions.height ) && isOverAxis( draggableLeft, l, droppable.proportions.width );
		case "touch":
			return (
				(y1 >= t && y1 <= b) ||	// Top edge touching
				(y2 >= t && y2 <= b) ||	// Bottom edge touching
				(y1 < t && y2 > b)		// Surrounded vertically
			) && (
				(x1 >= l && x1 <= r) ||	// Left edge touching
				(x2 >= l && x2 <= r) ||	// Right edge touching
				(x1 < l && x2 > r)		// Surrounded horizontally
			);
		default:
			return false;
		}

};

/*
	This manager tracks offsets of draggables and droppables
*/
$.ui.ddmanager = {
	current: null,
	droppables: { "default": [] },
	prepareOffsets: function(t, event) {

		var i, j,
			m = $.ui.ddmanager.droppables[t.options.scope] || [],
			type = event ? event.type : null, // workaround for #2317
			list = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();

		droppablesLoop: for (i = 0; i < m.length; i++) {

			//No disabled and non-accepted
			if(m[i].options.disabled || (t && !m[i].accept.call(m[i].element[0],(t.currentItem || t.element)))) {
				continue;
			}

			// Filter out elements in the current dragged item
			for (j=0; j < list.length; j++) {
				if(list[j] === m[i].element[0]) {
					m[i].proportions.height = 0;
					continue droppablesLoop;
				}
			}

			m[i].visible = m[i].element.css("display") !== "none";
			if(!m[i].visible) {
				continue;
			}

			//Activate the droppable if used directly from draggables
			if(type === "mousedown") {
				m[i]._activate.call(m[i], event);
			}

			m[i].offset = m[i].element.offset();
			m[i].proportions = { width: m[i].element[0].offsetWidth, height: m[i].element[0].offsetHeight };

		}

	},
	drop: function(draggable, event) {

		var dropped = false;
		$.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {

			if(!this.options) {
				return;
			}
			if (!this.options.disabled && this.visible && $.ui.intersect(draggable, this, this.options.tolerance)) {
				dropped = this._drop.call(this, event) || dropped;
			}

			if (!this.options.disabled && this.visible && this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
				this.isout = true;
				this.isover = false;
				this._deactivate.call(this, event);
			}

		});
		return dropped;

	},
	dragStart: function( draggable, event ) {
		//Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)
		draggable.element.parentsUntil( "body" ).bind( "scroll.droppable", function() {
			if( !draggable.options.refreshPositions ) {
				$.ui.ddmanager.prepareOffsets( draggable, event );
			}
		});
	},
	drag: function(draggable, event) {

		//If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.
		if(draggable.options.refreshPositions) {
			$.ui.ddmanager.prepareOffsets(draggable, event);
		}

		//Run through all droppables and check their positions based on specific tolerance options
		$.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {

			if(this.options.disabled || this.greedyChild || !this.visible) {
				return;
			}

			var parentInstance, scope, parent,
				intersects = $.ui.intersect(draggable, this, this.options.tolerance),
				c = !intersects && this.isover ? "isout" : (intersects && !this.isover ? "isover" : null);
			if(!c) {
				return;
			}

			if (this.options.greedy) {
				// find droppable parents with same scope
				scope = this.options.scope;
				parent = this.element.parents(":data(ui-droppable)").filter(function () {
					return $.data(this, "ui-droppable").options.scope === scope;
				});

				if (parent.length) {
					parentInstance = $.data(parent[0], "ui-droppable");
					parentInstance.greedyChild = (c === "isover");
				}
			}

			// we just moved into a greedy child
			if (parentInstance && c === "isover") {
				parentInstance.isover = false;
				parentInstance.isout = true;
				parentInstance._out.call(parentInstance, event);
			}

			this[c] = true;
			this[c === "isout" ? "isover" : "isout"] = false;
			this[c === "isover" ? "_over" : "_out"].call(this, event);

			// we just moved out of a greedy child
			if (parentInstance && c === "isout") {
				parentInstance.isout = false;
				parentInstance.isover = true;
				parentInstance._over.call(parentInstance, event);
			}
		});

	},
	dragStop: function( draggable, event ) {
		draggable.element.parentsUntil( "body" ).unbind( "scroll.droppable" );
		//Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)
		if( !draggable.options.refreshPositions ) {
			$.ui.ddmanager.prepareOffsets( draggable, event );
		}
	}
};

})(jQuery);

(function( $, undefined ) {

function num(v) {
	return parseInt(v, 10) || 0;
}

function isNumber(value) {
	return !isNaN(parseInt(value, 10));
}

$.widget("ui.resizable", $.ui.mouse, {
	version: "1.10.0",
	widgetEventPrefix: "resize",
	options: {
		alsoResize: false,
		animate: false,
		animateDuration: "slow",
		animateEasing: "swing",
		aspectRatio: false,
		autoHide: false,
		containment: false,
		ghost: false,
		grid: false,
		handles: "e,s,se",
		helper: false,
		maxHeight: null,
		maxWidth: null,
		minHeight: 10,
		minWidth: 10,
		// See #7960
		zIndex: 90,

		// callbacks
		resize: null,
		start: null,
		stop: null
	},
	_create: function() {

		var n, i, handle, axis, hname,
			that = this,
			o = this.options;
		this.element.addClass("ui-resizable");

		$.extend(this, {
			_aspectRatio: !!(o.aspectRatio),
			aspectRatio: o.aspectRatio,
			originalElement: this.element,
			_proportionallyResizeElements: [],
			_helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null
		});

		//Wrap the element if it cannot hold child nodes
		if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)) {

			//Create a wrapper element and set the wrapper to the new current internal element
			this.element.wrap(
				$("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
					position: this.element.css("position"),
					width: this.element.outerWidth(),
					height: this.element.outerHeight(),
					top: this.element.css("top"),
					left: this.element.css("left")
				})
			);

			//Overwrite the original this.element
			this.element = this.element.parent().data(
				"ui-resizable", this.element.data("ui-resizable")
			);

			this.elementIsWrapper = true;

			//Move margins to the wrapper
			this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") });
			this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0});

			//Prevent Safari textarea resize
			this.originalResizeStyle = this.originalElement.css("resize");
			this.originalElement.css("resize", "none");

			//Push the actual element to our proportionallyResize internal array
			this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" }));

			// avoid IE jump (hard set the margin)
			this.originalElement.css({ margin: this.originalElement.css("margin") });

			// fix handlers offset
			this._proportionallyResize();

		}

		this.handles = o.handles || (!$(".ui-resizable-handle", this.element).length ? "e,s,se" : { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" });
		if(this.handles.constructor === String) {

			if ( this.handles === "all") {
				this.handles = "n,e,s,w,se,sw,ne,nw";
			}

			n = this.handles.split(",");
			this.handles = {};

			for(i = 0; i < n.length; i++) {

				handle = $.trim(n[i]);
				hname = "ui-resizable-"+handle;
				axis = $("<div class='ui-resizable-handle " + hname + "'></div>");

				// Apply zIndex to all handles - see #7960
				axis.css({ zIndex: o.zIndex });

				//TODO : What's going on here?
				if ("se" === handle) {
					axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
				}

				//Insert into internal handles object and append to element
				this.handles[handle] = ".ui-resizable-"+handle;
				this.element.append(axis);
			}

		}

		this._renderAxis = function(target) {

			var i, axis, padPos, padWrapper;

			target = target || this.element;

			for(i in this.handles) {

				if(this.handles[i].constructor === String) {
					this.handles[i] = $(this.handles[i], this.element).show();
				}

				//Apply pad to wrapper element, needed to fix axis position (textarea, inputs, scrolls)
				if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {

					axis = $(this.handles[i], this.element);

					//Checking the correct pad and border
					padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();

					//The padding type i have to apply...
					padPos = [ "padding",
						/ne|nw|n/.test(i) ? "Top" :
						/se|sw|s/.test(i) ? "Bottom" :
						/^e$/.test(i) ? "Right" : "Left" ].join("");

					target.css(padPos, padWrapper);

					this._proportionallyResize();

				}

				//TODO: What's that good for? There's not anything to be executed left
				if(!$(this.handles[i]).length) {
					continue;
				}
			}
		};

		//TODO: make renderAxis a prototype function
		this._renderAxis(this.element);

		this._handles = $(".ui-resizable-handle", this.element)
			.disableSelection();

		//Matching axis name
		this._handles.mouseover(function() {
			if (!that.resizing) {
				if (this.className) {
					axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
				}
				//Axis, default = se
				that.axis = axis && axis[1] ? axis[1] : "se";
			}
		});

		//If we want to auto hide the elements
		if (o.autoHide) {
			this._handles.hide();
			$(this.element)
				.addClass("ui-resizable-autohide")
				.mouseenter(function() {
					if (o.disabled) {
						return;
					}
					$(this).removeClass("ui-resizable-autohide");
					that._handles.show();
				})
				.mouseleave(function(){
					if (o.disabled) {
						return;
					}
					if (!that.resizing) {
						$(this).addClass("ui-resizable-autohide");
						that._handles.hide();
					}
				});
		}

		//Initialize the mouse interaction
		this._mouseInit();

	},

	_destroy: function() {

		this._mouseDestroy();

		var wrapper,
			_destroy = function(exp) {
				$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing")
					.removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
			};

		//TODO: Unwrap at same DOM position
		if (this.elementIsWrapper) {
			_destroy(this.element);
			wrapper = this.element;
			this.originalElement.css({
				position: wrapper.css("position"),
				width: wrapper.outerWidth(),
				height: wrapper.outerHeight(),
				top: wrapper.css("top"),
				left: wrapper.css("left")
			}).insertAfter( wrapper );
			wrapper.remove();
		}

		this.originalElement.css("resize", this.originalResizeStyle);
		_destroy(this.originalElement);

		return this;
	},

	_mouseCapture: function(event) {
		var i, handle,
			capture = false;

		for (i in this.handles) {
			handle = $(this.handles[i])[0];
			if (handle === event.target || $.contains(handle, event.target)) {
				capture = true;
			}
		}

		return !this.options.disabled && capture;
	},

	_mouseStart: function(event) {

		var curleft, curtop, cursor,
			o = this.options,
			iniPos = this.element.position(),
			el = this.element;

		this.resizing = true;

		// bugfix for http://dev.jquery.com/ticket/1749
		if ( (/absolute/).test( el.css("position") ) ) {
			el.css({ position: "absolute", top: el.css("top"), left: el.css("left") });
		} else if (el.is(".ui-draggable")) {
			el.css({ position: "absolute", top: iniPos.top, left: iniPos.left });
		}

		this._renderProxy();

		curleft = num(this.helper.css("left"));
		curtop = num(this.helper.css("top"));

		if (o.containment) {
			curleft += $(o.containment).scrollLeft() || 0;
			curtop += $(o.containment).scrollTop() || 0;
		}

		//Store needed variables
		this.offset = this.helper.offset();
		this.position = { left: curleft, top: curtop };
		this.size = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
		this.originalSize = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
		this.originalPosition = { left: curleft, top: curtop };
		this.sizeDiff = { width: el.outerWidth() - el.width(), height: el.outerHeight() - el.height() };
		this.originalMousePosition = { left: event.pageX, top: event.pageY };

		//Aspect Ratio
		this.aspectRatio = (typeof o.aspectRatio === "number") ? o.aspectRatio : ((this.originalSize.width / this.originalSize.height) || 1);

		cursor = $(".ui-resizable-" + this.axis).css("cursor");
		$("body").css("cursor", cursor === "auto" ? this.axis + "-resize" : cursor);

		el.addClass("ui-resizable-resizing");
		this._propagate("start", event);
		return true;
	},

	_mouseDrag: function(event) {

		//Increase performance, avoid regex
		var data,
			el = this.helper, props = {},
			smp = this.originalMousePosition,
			a = this.axis,
			prevTop = this.position.top,
			prevLeft = this.position.left,
			prevWidth = this.size.width,
			prevHeight = this.size.height,
			dx = (event.pageX-smp.left)||0,
			dy = (event.pageY-smp.top)||0,
			trigger = this._change[a];

		if (!trigger) {
			return false;
		}

		// Calculate the attrs that will be change
		data = trigger.apply(this, [event, dx, dy]);

		// Put this in the mouseDrag handler since the user can start pressing shift while resizing
		this._updateVirtualBoundaries(event.shiftKey);
		if (this._aspectRatio || event.shiftKey) {
			data = this._updateRatio(data, event);
		}

		data = this._respectSize(data, event);

		this._updateCache(data);

		// plugins callbacks need to be called first
		this._propagate("resize", event);

		if (this.position.top !== prevTop) {
			props.top = this.position.top + "px";
		}
		if (this.position.left !== prevLeft) {
			props.left = this.position.left + "px";
		}
		if (this.size.width !== prevWidth) {
			props.width = this.size.width + "px";
		}
		if (this.size.height !== prevHeight) {
			props.height = this.size.height + "px";
		}
		el.css(props);

		if (!this._helper && this._proportionallyResizeElements.length) {
			this._proportionallyResize();
		}

		// Call the user callback if the element was resized
		if ( ! $.isEmptyObject(props) ) {
			this._trigger("resize", event, this.ui());
		}

		return false;
	},

	_mouseStop: function(event) {

		this.resizing = false;
		var pr, ista, soffseth, soffsetw, s, left, top,
			o = this.options, that = this;

		if(this._helper) {

			pr = this._proportionallyResizeElements;
			ista = pr.length && (/textarea/i).test(pr[0].nodeName);
			soffseth = ista && $.ui.hasScroll(pr[0], "left") /* TODO - jump height */ ? 0 : that.sizeDiff.height;
			soffsetw = ista ? 0 : that.sizeDiff.width;

			s = { width: (that.helper.width()  - soffsetw), height: (that.helper.height() - soffseth) };
			left = (parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left)) || null;
			top = (parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top)) || null;

			if (!o.animate) {
				this.element.css($.extend(s, { top: top, left: left }));
			}

			that.helper.height(that.size.height);
			that.helper.width(that.size.width);

			if (this._helper && !o.animate) {
				this._proportionallyResize();
			}
		}

		$("body").css("cursor", "auto");

		this.element.removeClass("ui-resizable-resizing");

		this._propagate("stop", event);

		if (this._helper) {
			this.helper.remove();
		}

		return false;

	},

	_updateVirtualBoundaries: function(forceAspectRatio) {
		var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,
			o = this.options;

		b = {
			minWidth: isNumber(o.minWidth) ? o.minWidth : 0,
			maxWidth: isNumber(o.maxWidth) ? o.maxWidth : Infinity,
			minHeight: isNumber(o.minHeight) ? o.minHeight : 0,
			maxHeight: isNumber(o.maxHeight) ? o.maxHeight : Infinity
		};

		if(this._aspectRatio || forceAspectRatio) {
			// We want to create an enclosing box whose aspect ration is the requested one
			// First, compute the "projected" size for each dimension based on the aspect ratio and other dimension
			pMinWidth = b.minHeight * this.aspectRatio;
			pMinHeight = b.minWidth / this.aspectRatio;
			pMaxWidth = b.maxHeight * this.aspectRatio;
			pMaxHeight = b.maxWidth / this.aspectRatio;

			if(pMinWidth > b.minWidth) {
				b.minWidth = pMinWidth;
			}
			if(pMinHeight > b.minHeight) {
				b.minHeight = pMinHeight;
			}
			if(pMaxWidth < b.maxWidth) {
				b.maxWidth = pMaxWidth;
			}
			if(pMaxHeight < b.maxHeight) {
				b.maxHeight = pMaxHeight;
			}
		}
		this._vBoundaries = b;
	},

	_updateCache: function(data) {
		this.offset = this.helper.offset();
		if (isNumber(data.left)) {
			this.position.left = data.left;
		}
		if (isNumber(data.top)) {
			this.position.top = data.top;
		}
		if (isNumber(data.height)) {
			this.size.height = data.height;
		}
		if (isNumber(data.width)) {
			this.size.width = data.width;
		}
	},

	_updateRatio: function( data ) {

		var cpos = this.position,
			csize = this.size,
			a = this.axis;

		if (isNumber(data.height)) {
			data.width = (data.height * this.aspectRatio);
		} else if (isNumber(data.width)) {
			data.height = (data.width / this.aspectRatio);
		}

		if (a === "sw") {
			data.left = cpos.left + (csize.width - data.width);
			data.top = null;
		}
		if (a === "nw") {
			data.top = cpos.top + (csize.height - data.height);
			data.left = cpos.left + (csize.width - data.width);
		}

		return data;
	},

	_respectSize: function( data ) {

		var o = this._vBoundaries,
			a = this.axis,
			ismaxw = isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width), ismaxh = isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),
			isminw = isNumber(data.width) && o.minWidth && (o.minWidth > data.width), isminh = isNumber(data.height) && o.minHeight && (o.minHeight > data.height),
			dw = this.originalPosition.left + this.originalSize.width,
			dh = this.position.top + this.size.height,
			cw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);
		if (isminw) {
			data.width = o.minWidth;
		}
		if (isminh) {
			data.height = o.minHeight;
		}
		if (ismaxw) {
			data.width = o.maxWidth;
		}
		if (ismaxh) {
			data.height = o.maxHeight;
		}

		if (isminw && cw) {
			data.left = dw - o.minWidth;
		}
		if (ismaxw && cw) {
			data.left = dw - o.maxWidth;
		}
		if (isminh && ch) {
			data.top = dh - o.minHeight;
		}
		if (ismaxh && ch) {
			data.top = dh - o.maxHeight;
		}

		// fixing jump error on top/left - bug #2330
		if (!data.width && !data.height && !data.left && data.top) {
			data.top = null;
		} else if (!data.width && !data.height && !data.top && data.left) {
			data.left = null;
		}

		return data;
	},

	_proportionallyResize: function() {

		if (!this._proportionallyResizeElements.length) {
			return;
		}

		var i, j, borders, paddings, prel,
			element = this.helper || this.element;

		for ( i=0; i < this._proportionallyResizeElements.length; i++) {

			prel = this._proportionallyResizeElements[i];

			if (!this.borderDif) {
				this.borderDif = [];
				borders = [prel.css("borderTopWidth"), prel.css("borderRightWidth"), prel.css("borderBottomWidth"), prel.css("borderLeftWidth")];
				paddings = [prel.css("paddingTop"), prel.css("paddingRight"), prel.css("paddingBottom"), prel.css("paddingLeft")];

				for ( j = 0; j < borders.length; j++ ) {
					this.borderDif[ j ] = ( parseInt( borders[ j ], 10 ) || 0 ) + ( parseInt( paddings[ j ], 10 ) || 0 );
				}
			}

			prel.css({
				height: (element.height() - this.borderDif[0] - this.borderDif[2]) || 0,
				width: (element.width() - this.borderDif[1] - this.borderDif[3]) || 0
			});

		}

	},

	_renderProxy: function() {

		var el = this.element, o = this.options;
		this.elementOffset = el.offset();

		if(this._helper) {

			this.helper = this.helper || $("<div style='overflow:hidden;'></div>");

			this.helper.addClass(this._helper).css({
				width: this.element.outerWidth() - 1,
				height: this.element.outerHeight() - 1,
				position: "absolute",
				left: this.elementOffset.left +"px",
				top: this.elementOffset.top +"px",
				zIndex: ++o.zIndex //TODO: Don't modify option
			});

			this.helper
				.appendTo("body")
				.disableSelection();

		} else {
			this.helper = this.element;
		}

	},

	_change: {
		e: function(event, dx) {
			return { width: this.originalSize.width + dx };
		},
		w: function(event, dx) {
			var cs = this.originalSize, sp = this.originalPosition;
			return { left: sp.left + dx, width: cs.width - dx };
		},
		n: function(event, dx, dy) {
			var cs = this.originalSize, sp = this.originalPosition;
			return { top: sp.top + dy, height: cs.height - dy };
		},
		s: function(event, dx, dy) {
			return { height: this.originalSize.height + dy };
		},
		se: function(event, dx, dy) {
			return $.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
		},
		sw: function(event, dx, dy) {
			return $.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
		},
		ne: function(event, dx, dy) {
			return $.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
		},
		nw: function(event, dx, dy) {
			return $.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
		}
	},

	_propagate: function(n, event) {
		$.ui.plugin.call(this, n, [event, this.ui()]);
		(n !== "resize" && this._trigger(n, event, this.ui()));
	},

	plugins: {},

	ui: function() {
		return {
			originalElement: this.originalElement,
			element: this.element,
			helper: this.helper,
			position: this.position,
			size: this.size,
			originalSize: this.originalSize,
			originalPosition: this.originalPosition
		};
	}

});

/*
 * Resizable Extensions
 */

$.ui.plugin.add("resizable", "animate", {

	stop: function( event ) {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			pr = that._proportionallyResizeElements,
			ista = pr.length && (/textarea/i).test(pr[0].nodeName),
			soffseth = ista && $.ui.hasScroll(pr[0], "left") /* TODO - jump height */ ? 0 : that.sizeDiff.height,
			soffsetw = ista ? 0 : that.sizeDiff.width,
			style = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },
			left = (parseInt(that.element.css("left"), 10) + (that.position.left - that.originalPosition.left)) || null,
			top = (parseInt(that.element.css("top"), 10) + (that.position.top - that.originalPosition.top)) || null;

		that.element.animate(
			$.extend(style, top && left ? { top: top, left: left } : {}), {
				duration: o.animateDuration,
				easing: o.animateEasing,
				step: function() {

					var data = {
						width: parseInt(that.element.css("width"), 10),
						height: parseInt(that.element.css("height"), 10),
						top: parseInt(that.element.css("top"), 10),
						left: parseInt(that.element.css("left"), 10)
					};

					if (pr && pr.length) {
						$(pr[0]).css({ width: data.width, height: data.height });
					}

					// propagating resize, and updating values for each animation step
					that._updateCache(data);
					that._propagate("resize", event);

				}
			}
		);
	}

});

$.ui.plugin.add("resizable", "containment", {

	start: function() {
		var element, p, co, ch, cw, width, height,
			that = $(this).data("ui-resizable"),
			o = that.options,
			el = that.element,
			oc = o.containment,
			ce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ? el.parent().get(0) : oc;

		if (!ce) {
			return;
		}

		that.containerElement = $(ce);

		if (/document/.test(oc) || oc === document) {
			that.containerOffset = { left: 0, top: 0 };
			that.containerPosition = { left: 0, top: 0 };

			that.parentData = {
				element: $(document), left: 0, top: 0,
				width: $(document).width(), height: $(document).height() || document.body.parentNode.scrollHeight
			};
		}

		// i'm a node, so compute top, left, right, bottom
		else {
			element = $(ce);
			p = [];
			$([ "Top", "Right", "Left", "Bottom" ]).each(function(i, name) { p[i] = num(element.css("padding" + name)); });

			that.containerOffset = element.offset();
			that.containerPosition = element.position();
			that.containerSize = { height: (element.innerHeight() - p[3]), width: (element.innerWidth() - p[1]) };

			co = that.containerOffset;
			ch = that.containerSize.height;
			cw = that.containerSize.width;
			width = ($.ui.hasScroll(ce, "left") ? ce.scrollWidth : cw );
			height = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);

			that.parentData = {
				element: ce, left: co.left, top: co.top, width: width, height: height
			};
		}
	},

	resize: function( event ) {
		var woset, hoset, isParent, isOffsetRelative,
			that = $(this).data("ui-resizable"),
			o = that.options,
			co = that.containerOffset, cp = that.position,
			pRatio = that._aspectRatio || event.shiftKey,
			cop = { top:0, left:0 }, ce = that.containerElement;

		if (ce[0] !== document && (/static/).test(ce.css("position"))) {
			cop = co;
		}

		if (cp.left < (that._helper ? co.left : 0)) {
			that.size.width = that.size.width + (that._helper ? (that.position.left - co.left) : (that.position.left - cop.left));
			if (pRatio) {
				that.size.height = that.size.width / that.aspectRatio;
			}
			that.position.left = o.helper ? co.left : 0;
		}

		if (cp.top < (that._helper ? co.top : 0)) {
			that.size.height = that.size.height + (that._helper ? (that.position.top - co.top) : that.position.top);
			if (pRatio) {
				that.size.width = that.size.height * that.aspectRatio;
			}
			that.position.top = that._helper ? co.top : 0;
		}

		that.offset.left = that.parentData.left+that.position.left;
		that.offset.top = that.parentData.top+that.position.top;

		woset = Math.abs( (that._helper ? that.offset.left - cop.left : (that.offset.left - cop.left)) + that.sizeDiff.width );
		hoset = Math.abs( (that._helper ? that.offset.top - cop.top : (that.offset.top - co.top)) + that.sizeDiff.height );

		isParent = that.containerElement.get(0) === that.element.parent().get(0);
		isOffsetRelative = /relative|absolute/.test(that.containerElement.css("position"));

		if(isParent && isOffsetRelative) {
			woset -= that.parentData.left;
		}

		if (woset + that.size.width >= that.parentData.width) {
			that.size.width = that.parentData.width - woset;
			if (pRatio) {
				that.size.height = that.size.width / that.aspectRatio;
			}
		}

		if (hoset + that.size.height >= that.parentData.height) {
			that.size.height = that.parentData.height - hoset;
			if (pRatio) {
				that.size.width = that.size.height * that.aspectRatio;
			}
		}
	},

	stop: function(){
		var that = $(this).data("ui-resizable"),
			o = that.options,
			co = that.containerOffset,
			cop = that.containerPosition,
			ce = that.containerElement,
			helper = $(that.helper),
			ho = helper.offset(),
			w = helper.outerWidth() - that.sizeDiff.width,
			h = helper.outerHeight() - that.sizeDiff.height;

		if (that._helper && !o.animate && (/relative/).test(ce.css("position"))) {
			$(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });
		}

		if (that._helper && !o.animate && (/static/).test(ce.css("position"))) {
			$(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });
		}

	}
});

$.ui.plugin.add("resizable", "alsoResize", {

	start: function () {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			_store = function (exp) {
				$(exp).each(function() {
					var el = $(this);
					el.data("ui-resizable-alsoresize", {
						width: parseInt(el.width(), 10), height: parseInt(el.height(), 10),
						left: parseInt(el.css("left"), 10), top: parseInt(el.css("top"), 10)
					});
				});
			};

		if (typeof(o.alsoResize) === "object" && !o.alsoResize.parentNode) {
			if (o.alsoResize.length) { o.alsoResize = o.alsoResize[0]; _store(o.alsoResize); }
			else { $.each(o.alsoResize, function (exp) { _store(exp); }); }
		}else{
			_store(o.alsoResize);
		}
	},

	resize: function (event, ui) {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			os = that.originalSize,
			op = that.originalPosition,
			delta = {
				height: (that.size.height - os.height) || 0, width: (that.size.width - os.width) || 0,
				top: (that.position.top - op.top) || 0, left: (that.position.left - op.left) || 0
			},

			_alsoResize = function (exp, c) {
				$(exp).each(function() {
					var el = $(this), start = $(this).data("ui-resizable-alsoresize"), style = {},
						css = c && c.length ? c : el.parents(ui.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];

					$.each(css, function (i, prop) {
						var sum = (start[prop]||0) + (delta[prop]||0);
						if (sum && sum >= 0) {
							style[prop] = sum || null;
						}
					});

					el.css(style);
				});
			};

		if (typeof(o.alsoResize) === "object" && !o.alsoResize.nodeType) {
			$.each(o.alsoResize, function (exp, c) { _alsoResize(exp, c); });
		}else{
			_alsoResize(o.alsoResize);
		}
	},

	stop: function () {
		$(this).removeData("resizable-alsoresize");
	}
});

$.ui.plugin.add("resizable", "ghost", {

	start: function() {

		var that = $(this).data("ui-resizable"), o = that.options, cs = that.size;

		that.ghost = that.originalElement.clone();
		that.ghost
			.css({ opacity: 0.25, display: "block", position: "relative", height: cs.height, width: cs.width, margin: 0, left: 0, top: 0 })
			.addClass("ui-resizable-ghost")
			.addClass(typeof o.ghost === "string" ? o.ghost : "");

		that.ghost.appendTo(that.helper);

	},

	resize: function(){
		var that = $(this).data("ui-resizable");
		if (that.ghost) {
			that.ghost.css({ position: "relative", height: that.size.height, width: that.size.width });
		}
	},

	stop: function() {
		var that = $(this).data("ui-resizable");
		if (that.ghost && that.helper) {
			that.helper.get(0).removeChild(that.ghost.get(0));
		}
	}

});

$.ui.plugin.add("resizable", "grid", {

	resize: function() {
		var that = $(this).data("ui-resizable"),
			o = that.options,
			cs = that.size,
			os = that.originalSize,
			op = that.originalPosition,
			a = that.axis,
			grid = typeof o.grid === "number" ? [o.grid, o.grid] : o.grid,
			gridX = (grid[0]||1),
			gridY = (grid[1]||1),
			ox = Math.round((cs.width - os.width) / gridX) * gridX,
			oy = Math.round((cs.height - os.height) / gridY) * gridY,
			newWidth = os.width + ox,
			newHeight = os.height + oy,
			isMaxWidth = o.maxWidth && (o.maxWidth < newWidth),
			isMaxHeight = o.maxHeight && (o.maxHeight < newHeight),
			isMinWidth = o.minWidth && (o.minWidth > newWidth),
			isMinHeight = o.minHeight && (o.minHeight > newHeight);

		o.grid = grid;

		if (isMinWidth) {
			newWidth = newWidth + gridX;
		}
		if (isMinHeight) {
			newHeight = newHeight + gridY;
		}
		if (isMaxWidth) {
			newWidth = newWidth - gridX;
		}
		if (isMaxHeight) {
			newHeight = newHeight - gridY;
		}

		if (/^(se|s|e)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
		} else if (/^(ne)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
		} else if (/^(sw)$/.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.left = op.left - ox;
		} else {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
			that.position.left = op.left - ox;
		}
	}

});

})(jQuery);

(function( $, undefined ) {

$.widget("ui.selectable", $.ui.mouse, {
	version: "1.10.0",
	options: {
		appendTo: "body",
		autoRefresh: true,
		distance: 0,
		filter: "*",
		tolerance: "touch",

		// callbacks
		selected: null,
		selecting: null,
		start: null,
		stop: null,
		unselected: null,
		unselecting: null
	},
	_create: function() {
		var selectees,
			that = this;

		this.element.addClass("ui-selectable");

		this.dragged = false;

		// cache selectee children based on filter
		this.refresh = function() {
			selectees = $(that.options.filter, that.element[0]);
			selectees.addClass("ui-selectee");
			selectees.each(function() {
				var $this = $(this),
					pos = $this.offset();
				$.data(this, "selectable-item", {
					element: this,
					$element: $this,
					left: pos.left,
					top: pos.top,
					right: pos.left + $this.outerWidth(),
					bottom: pos.top + $this.outerHeight(),
					startselected: false,
					selected: $this.hasClass("ui-selected"),
					selecting: $this.hasClass("ui-selecting"),
					unselecting: $this.hasClass("ui-unselecting")
				});
			});
		};
		this.refresh();

		this.selectees = selectees.addClass("ui-selectee");

		this._mouseInit();

		this.helper = $("<div class='ui-selectable-helper'></div>");
	},

	_destroy: function() {
		this.selectees
			.removeClass("ui-selectee")
			.removeData("selectable-item");
		this.element
			.removeClass("ui-selectable ui-selectable-disabled");
		this._mouseDestroy();
	},

	_mouseStart: function(event) {
		var that = this,
			options = this.options;

		this.opos = [event.pageX, event.pageY];

		if (this.options.disabled) {
			return;
		}

		this.selectees = $(options.filter, this.element[0]);

		this._trigger("start", event);

		$(options.appendTo).append(this.helper);
		// position helper (lasso)
		this.helper.css({
			"left": event.pageX,
			"top": event.pageY,
			"width": 0,
			"height": 0
		});

		if (options.autoRefresh) {
			this.refresh();
		}

		this.selectees.filter(".ui-selected").each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.startselected = true;
			if (!event.metaKey && !event.ctrlKey) {
				selectee.$element.removeClass("ui-selected");
				selectee.selected = false;
				selectee.$element.addClass("ui-unselecting");
				selectee.unselecting = true;
				// selectable UNSELECTING callback
				that._trigger("unselecting", event, {
					unselecting: selectee.element
				});
			}
		});

		$(event.target).parents().addBack().each(function() {
			var doSelect,
				selectee = $.data(this, "selectable-item");
			if (selectee) {
				doSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass("ui-selected");
				selectee.$element
					.removeClass(doSelect ? "ui-unselecting" : "ui-selected")
					.addClass(doSelect ? "ui-selecting" : "ui-unselecting");
				selectee.unselecting = !doSelect;
				selectee.selecting = doSelect;
				selectee.selected = doSelect;
				// selectable (UN)SELECTING callback
				if (doSelect) {
					that._trigger("selecting", event, {
						selecting: selectee.element
					});
				} else {
					that._trigger("unselecting", event, {
						unselecting: selectee.element
					});
				}
				return false;
			}
		});

	},

	_mouseDrag: function(event) {

		this.dragged = true;

		if (this.options.disabled) {
			return;
		}

		var tmp,
			that = this,
			options = this.options,
			x1 = this.opos[0],
			y1 = this.opos[1],
			x2 = event.pageX,
			y2 = event.pageY;

		if (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }
		if (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }
		this.helper.css({left: x1, top: y1, width: x2-x1, height: y2-y1});

		this.selectees.each(function() {
			var selectee = $.data(this, "selectable-item"),
				hit = false;

			//prevent helper from being selected if appendTo: selectable
			if (!selectee || selectee.element === that.element[0]) {
				return;
			}

			if (options.tolerance === "touch") {
				hit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );
			} else if (options.tolerance === "fit") {
				hit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);
			}

			if (hit) {
				// SELECT
				if (selectee.selected) {
					selectee.$element.removeClass("ui-selected");
					selectee.selected = false;
				}
				if (selectee.unselecting) {
					selectee.$element.removeClass("ui-unselecting");
					selectee.unselecting = false;
				}
				if (!selectee.selecting) {
					selectee.$element.addClass("ui-selecting");
					selectee.selecting = true;
					// selectable SELECTING callback
					that._trigger("selecting", event, {
						selecting: selectee.element
					});
				}
			} else {
				// UNSELECT
				if (selectee.selecting) {
					if ((event.metaKey || event.ctrlKey) && selectee.startselected) {
						selectee.$element.removeClass("ui-selecting");
						selectee.selecting = false;
						selectee.$element.addClass("ui-selected");
						selectee.selected = true;
					} else {
						selectee.$element.removeClass("ui-selecting");
						selectee.selecting = false;
						if (selectee.startselected) {
							selectee.$element.addClass("ui-unselecting");
							selectee.unselecting = true;
						}
						// selectable UNSELECTING callback
						that._trigger("unselecting", event, {
							unselecting: selectee.element
						});
					}
				}
				if (selectee.selected) {
					if (!event.metaKey && !event.ctrlKey && !selectee.startselected) {
						selectee.$element.removeClass("ui-selected");
						selectee.selected = false;

						selectee.$element.addClass("ui-unselecting");
						selectee.unselecting = true;
						// selectable UNSELECTING callback
						that._trigger("unselecting", event, {
							unselecting: selectee.element
						});
					}
				}
			}
		});

		return false;
	},

	_mouseStop: function(event) {
		var that = this;

		this.dragged = false;

		$(".ui-unselecting", this.element[0]).each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.$element.removeClass("ui-unselecting");
			selectee.unselecting = false;
			selectee.startselected = false;
			that._trigger("unselected", event, {
				unselected: selectee.element
			});
		});
		$(".ui-selecting", this.element[0]).each(function() {
			var selectee = $.data(this, "selectable-item");
			selectee.$element.removeClass("ui-selecting").addClass("ui-selected");
			selectee.selecting = false;
			selectee.selected = true;
			selectee.startselected = true;
			that._trigger("selected", event, {
				selected: selectee.element
			});
		});
		this._trigger("stop", event);

		this.helper.remove();

		return false;
	}

});

})(jQuery);

(function( $, undefined ) {

/*jshint loopfunc: true */

function isOverAxis( x, reference, size ) {
	return ( x > reference ) && ( x < ( reference + size ) );
}

$.widget("ui.sortable", $.ui.mouse, {
	version: "1.10.0",
	widgetEventPrefix: "sort",
	ready: false,
	options: {
		appendTo: "parent",
		axis: false,
		connectWith: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		dropOnEmpty: true,
		forcePlaceholderSize: false,
		forceHelperSize: false,
		grid: false,
		handle: false,
		helper: "original",
		items: "> *",
		opacity: false,
		placeholder: false,
		revert: false,
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		scope: "default",
		tolerance: "intersect",
		zIndex: 1000,

		// callbacks
		activate: null,
		beforeStop: null,
		change: null,
		deactivate: null,
		out: null,
		over: null,
		receive: null,
		remove: null,
		sort: null,
		start: null,
		stop: null,
		update: null
	},
	_create: function() {

		var o = this.options;
		this.containerCache = {};
		this.element.addClass("ui-sortable");

		//Get the items
		this.refresh();

		//Let's determine if the items are being displayed horizontally
		this.floating = this.items.length ? o.axis === "x" || (/left|right/).test(this.items[0].item.css("float")) || (/inline|table-cell/).test(this.items[0].item.css("display")) : false;

		//Let's determine the parent's offset
		this.offset = this.element.offset();

		//Initialize mouse events for interaction
		this._mouseInit();

		//We're ready to go
		this.ready = true;

	},

	_destroy: function() {
		this.element
			.removeClass("ui-sortable ui-sortable-disabled");
		this._mouseDestroy();

		for ( var i = this.items.length - 1; i >= 0; i-- ) {
			this.items[i].item.removeData(this.widgetName + "-item");
		}

		return this;
	},

	_setOption: function(key, value){
		if ( key === "disabled" ) {
			this.options[ key ] = value;

			this.widget().toggleClass( "ui-sortable-disabled", !!value );
		} else {
			// Don't call widget base _setOption for disable as it adds ui-state-disabled class
			$.Widget.prototype._setOption.apply(this, arguments);
		}
	},

	_mouseCapture: function(event, overrideHandle) {
		var currentItem = null,
			validHandle = false,
			that = this;

		if (this.reverting) {
			return false;
		}

		if(this.options.disabled || this.options.type === "static") {
			return false;
		}

		//We have to refresh the items data once first
		this._refreshItems(event);

		//Find out if the clicked node (or one of its parents) is a actual item in this.items
		$(event.target).parents().each(function() {
			if($.data(this, that.widgetName + "-item") === that) {
				currentItem = $(this);
				return false;
			}
		});
		if($.data(event.target, that.widgetName + "-item") === that) {
			currentItem = $(event.target);
		}

		if(!currentItem) {
			return false;
		}
		if(this.options.handle && !overrideHandle) {
			$(this.options.handle, currentItem).find("*").addBack().each(function() {
				if(this === event.target) {
					validHandle = true;
				}
			});
			if(!validHandle) {
				return false;
			}
		}

		this.currentItem = currentItem;
		this._removeCurrentsFromItems();
		return true;

	},

	_mouseStart: function(event, overrideHandle, noActivation) {

		var i,
			o = this.options;

		this.currentContainer = this;

		//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture
		this.refreshPositions();

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		//Cache the helper size
		this._cacheHelperProportions();

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Get the next scrolling parent
		this.scrollParent = this.helper.scrollParent();

		//The element's absolute position on the page minus margins
		this.offset = this.currentItem.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		$.extend(this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
		});

		// Only after we got the offset, we can change the helper's position to absolute
		// TODO: Still need to figure out a way to make relative sorting possible
		this.helper.css("position", "absolute");
		this.cssPosition = this.helper.css("position");

		//Generate the original position
		this.originalPosition = this._generatePosition(event);
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Cache the former DOM position
		this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };

		//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way
		if(this.helper[0] !== this.currentItem[0]) {
			this.currentItem.hide();
		}

		//Create the placeholder
		this._createPlaceholder();

		//Set a containment if given in the options
		if(o.containment) {
			this._setContainment();
		}

		if(o.cursor) { // cursor option
			if ($("body").css("cursor")) {
				this._storedCursor = $("body").css("cursor");
			}
			$("body").css("cursor", o.cursor);
		}

		if(o.opacity) { // opacity option
			if (this.helper.css("opacity")) {
				this._storedOpacity = this.helper.css("opacity");
			}
			this.helper.css("opacity", o.opacity);
		}

		if(o.zIndex) { // zIndex option
			if (this.helper.css("zIndex")) {
				this._storedZIndex = this.helper.css("zIndex");
			}
			this.helper.css("zIndex", o.zIndex);
		}

		//Prepare scrolling
		if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
			this.overflowOffset = this.scrollParent.offset();
		}

		//Call callbacks
		this._trigger("start", event, this._uiHash());

		//Recache the helper size
		if(!this._preserveHelperProportions) {
			this._cacheHelperProportions();
		}


		//Post "activate" events to possible containers
		if( !noActivation ) {
			for ( i = this.containers.length - 1; i >= 0; i-- ) {
				this.containers[ i ]._trigger( "activate", event, this._uiHash( this ) );
			}
		}

		//Prepare possible droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}

		this.dragging = true;

		this.helper.addClass("ui-sortable-helper");
		this._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position
		return true;

	},

	_mouseDrag: function(event) {
		var i, item, itemElement, intersection,
			o = this.options,
			scrolled = false;

		//Compute the helpers position
		this.position = this._generatePosition(event);
		this.positionAbs = this._convertPositionTo("absolute");

		if (!this.lastPositionAbs) {
			this.lastPositionAbs = this.positionAbs;
		}

		//Do scrolling
		if(this.options.scroll) {
			if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {

				if((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
				} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;
				}

				if((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
				} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;
				}

			} else {

				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}

				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}

			}

			if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
				$.ui.ddmanager.prepareOffsets(this, event);
			}
		}

		//Regenerate the absolute position used for position checks
		this.positionAbs = this._convertPositionTo("absolute");

		//Set the helper position
		if(!this.options.axis || this.options.axis !== "y") {
			this.helper[0].style.left = this.position.left+"px";
		}
		if(!this.options.axis || this.options.axis !== "x") {
			this.helper[0].style.top = this.position.top+"px";
		}

		//Rearrange
		for (i = this.items.length - 1; i >= 0; i--) {

			//Cache variables and intersection, continue if no intersection
			item = this.items[i];
			itemElement = item.item[0];
			intersection = this._intersectsWithPointer(item);
			if (!intersection) {
				continue;
			}

			// Only put the placeholder inside the current Container, skip all
			// items form other containers. This works because when moving
			// an item from one container to another the
			// currentContainer is switched before the placeholder is moved.
			//
			// Without this moving items in "sub-sortables" can cause the placeholder to jitter
			// beetween the outer and inner container.
			if (item.instance !== this.currentContainer) {
				continue;
			}

			// cannot intersect with itself
			// no useless actions that have been done before
			// no action if the item moved is the parent of the item checked
			if (itemElement !== this.currentItem[0] &&
				this.placeholder[intersection === 1 ? "next" : "prev"]()[0] !== itemElement &&
				!$.contains(this.placeholder[0], itemElement) &&
				(this.options.type === "semi-dynamic" ? !$.contains(this.element[0], itemElement) : true)
			) {

				this.direction = intersection === 1 ? "down" : "up";

				if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
					this._rearrange(event, item);
				} else {
					break;
				}

				this._trigger("change", event, this._uiHash());
				break;
			}
		}

		//Post events to containers
		this._contactContainers(event);

		//Interconnect with droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		//Call callbacks
		this._trigger("sort", event, this._uiHash());

		this.lastPositionAbs = this.positionAbs;
		return false;

	},

	_mouseStop: function(event, noPropagation) {

		if(!event) {
			return;
		}

		//If we are using droppables, inform the manager about the drop
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			$.ui.ddmanager.drop(this, event);
		}

		if(this.options.revert) {
			var that = this,
				cur = this.placeholder.offset();

			this.reverting = true;

			$(this.helper).animate({
				left: cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft),
				top: cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)
			}, parseInt(this.options.revert, 10) || 500, function() {
				that._clear(event);
			});
		} else {
			this._clear(event, noPropagation);
		}

		return false;

	},

	cancel: function() {

		if(this.dragging) {

			this._mouseUp({ target: null });

			if(this.options.helper === "original") {
				this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
			} else {
				this.currentItem.show();
			}

			//Post deactivating events to containers
			for (var i = this.containers.length - 1; i >= 0; i--){
				this.containers[i]._trigger("deactivate", null, this._uiHash(this));
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", null, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		if (this.placeholder) {
			//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
			if(this.placeholder[0].parentNode) {
				this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
			}
			if(this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
				this.helper.remove();
			}

			$.extend(this, {
				helper: null,
				dragging: false,
				reverting: false,
				_noFinalSort: null
			});

			if(this.domPosition.prev) {
				$(this.domPosition.prev).after(this.currentItem);
			} else {
				$(this.domPosition.parent).prepend(this.currentItem);
			}
		}

		return this;

	},

	serialize: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			str = [];
		o = o || {};

		$(items).each(function() {
			var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[\-=_](.+)/));
			if (res) {
				str.push((o.key || res[1]+"[]")+"="+(o.key && o.expression ? res[1] : res[2]));
			}
		});

		if(!str.length && o.key) {
			str.push(o.key + "=");
		}

		return str.join("&");

	},

	toArray: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			ret = [];

		o = o || {};

		items.each(function() { ret.push($(o.item || this).attr(o.attribute || "id") || ""); });
		return ret;

	},

	/* Be careful with the following core functions */
	_intersectsWith: function(item) {

		var x1 = this.positionAbs.left,
			x2 = x1 + this.helperProportions.width,
			y1 = this.positionAbs.top,
			y2 = y1 + this.helperProportions.height,
			l = item.left,
			r = l + item.width,
			t = item.top,
			b = t + item.height,
			dyClick = this.offset.click.top,
			dxClick = this.offset.click.left,
			isOverElement = (y1 + dyClick) > t && (y1 + dyClick) < b && (x1 + dxClick) > l && (x1 + dxClick) < r;

		if ( this.options.tolerance === "pointer" ||
			this.options.forcePointerForContainers ||
			(this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"])
		) {
			return isOverElement;
		} else {

			return (l < x1 + (this.helperProportions.width / 2) && // Right Half
				x2 - (this.helperProportions.width / 2) < r && // Left Half
				t < y1 + (this.helperProportions.height / 2) && // Bottom Half
				y2 - (this.helperProportions.height / 2) < b ); // Top Half

		}
	},

	_intersectsWithPointer: function(item) {

		var isOverElementHeight = (this.options.axis === "x") || isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),
			isOverElementWidth = (this.options.axis === "y") || isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),
			isOverElement = isOverElementHeight && isOverElementWidth,
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (!isOverElement) {
			return false;
		}

		return this.floating ?
			( ((horizontalDirection && horizontalDirection === "right") || verticalDirection === "down") ? 2 : 1 )
			: ( verticalDirection && (verticalDirection === "down" ? 2 : 1) );

	},

	_intersectsWithSides: function(item) {

		var isOverBottomHalf = isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),
			isOverRightHalf = isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (this.floating && horizontalDirection) {
			return ((horizontalDirection === "right" && isOverRightHalf) || (horizontalDirection === "left" && !isOverRightHalf));
		} else {
			return verticalDirection && ((verticalDirection === "down" && isOverBottomHalf) || (verticalDirection === "up" && !isOverBottomHalf));
		}

	},

	_getDragVerticalDirection: function() {
		var delta = this.positionAbs.top - this.lastPositionAbs.top;
		return delta !== 0 && (delta > 0 ? "down" : "up");
	},

	_getDragHorizontalDirection: function() {
		var delta = this.positionAbs.left - this.lastPositionAbs.left;
		return delta !== 0 && (delta > 0 ? "right" : "left");
	},

	refresh: function(event) {
		this._refreshItems(event);
		this.refreshPositions();
		return this;
	},

	_connectWith: function() {
		var options = this.options;
		return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;
	},

	_getItemsAsjQuery: function(connected) {

		var i, j, cur, inst,
			items = [],
			queries = [],
			connectWith = this._connectWith();

		if(connectWith && connected) {
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i]);
				for ( j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
					}
				}
			}
		}

		queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);

		for (i = queries.length - 1; i >= 0; i--){
			queries[i][0].each(function() {
				items.push(this);
			});
		}

		return $(items);

	},

	_removeCurrentsFromItems: function() {

		var list = this.currentItem.find(":data(" + this.widgetName + "-item)");

		this.items = $.grep(this.items, function (item) {
			for (var j=0; j < list.length; j++) {
				if(list[j] === item.item[0]) {
					return false;
				}
			}
			return true;
		});

	},

	_refreshItems: function(event) {

		this.items = [];
		this.containers = [this];

		var i, j, cur, inst, targetData, _queries, item, queriesLength,
			items = this.items,
			queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],
			connectWith = this._connectWith();

		if(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i]);
				for (j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);
						this.containers.push(inst);
					}
				}
			}
		}

		for (i = queries.length - 1; i >= 0; i--) {
			targetData = queries[i][1];
			_queries = queries[i][0];

			for (j=0, queriesLength = _queries.length; j < queriesLength; j++) {
				item = $(_queries[j]);

				item.data(this.widgetName + "-item", targetData); // Data for target checking (mouse manager)

				items.push({
					item: item,
					instance: targetData,
					width: 0, height: 0,
					left: 0, top: 0
				});
			}
		}

	},

	refreshPositions: function(fast) {

		//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change
		if(this.offsetParent && this.helper) {
			this.offset.parent = this._getParentOffset();
		}

		var i, item, t, p;

		for (i = this.items.length - 1; i >= 0; i--){
			item = this.items[i];

			//We ignore calculating positions of all connected containers when we're not over them
			if(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {
				continue;
			}

			t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;

			if (!fast) {
				item.width = t.outerWidth();
				item.height = t.outerHeight();
			}

			p = t.offset();
			item.left = p.left;
			item.top = p.top;
		}

		if(this.options.custom && this.options.custom.refreshContainers) {
			this.options.custom.refreshContainers.call(this);
		} else {
			for (i = this.containers.length - 1; i >= 0; i--){
				p = this.containers[i].element.offset();
				this.containers[i].containerCache.left = p.left;
				this.containers[i].containerCache.top = p.top;
				this.containers[i].containerCache.width	= this.containers[i].element.outerWidth();
				this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
			}
		}

		return this;
	},

	_createPlaceholder: function(that) {
		that = that || this;
		var className,
			o = that.options;

		if(!o.placeholder || o.placeholder.constructor === String) {
			className = o.placeholder;
			o.placeholder = {
				element: function() {

					var el = $(document.createElement(that.currentItem[0].nodeName))
						.addClass(className || that.currentItem[0].className+" ui-sortable-placeholder")
						.removeClass("ui-sortable-helper")[0];

					if(!className) {
						el.style.visibility = "hidden";
					}

					return el;
				},
				update: function(container, p) {

					// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that
					// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified
					if(className && !o.forcePlaceholderSize) {
						return;
					}

					//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item
					if(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop")||0, 10) - parseInt(that.currentItem.css("paddingBottom")||0, 10)); }
					if(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft")||0, 10) - parseInt(that.currentItem.css("paddingRight")||0, 10)); }
				}
			};
		}

		//Create the placeholder
		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));

		//Append it after the actual current item
		that.currentItem.after(that.placeholder);

		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
		o.placeholder.update(that, that.placeholder);

	},

	_contactContainers: function(event) {
		var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom,
			innermostContainer = null,
			innermostIndex = null;

		// get innermost container that intersects with item
		for (i = this.containers.length - 1; i >= 0; i--) {

			// never consider a container that's located within the item itself
			if($.contains(this.currentItem[0], this.containers[i].element[0])) {
				continue;
			}

			if(this._intersectsWith(this.containers[i].containerCache)) {

				// if we've already found a container and it's more "inner" than this, then continue
				if(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {
					continue;
				}

				innermostContainer = this.containers[i];
				innermostIndex = i;

			} else {
				// container doesn't intersect. trigger "out" event if necessary
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", event, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		// if no intersecting containers found, return
		if(!innermostContainer) {
			return;
		}

		// move the item into the container if it's not there already
		if(this.containers.length === 1) {
			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
			this.containers[innermostIndex].containerCache.over = 1;
		} else {

			//When entering a new container, we will find the item with the least distance and append our item near it
			dist = 10000;
			itemWithLeastDistance = null;
			posProperty = this.containers[innermostIndex].floating ? "left" : "top";
			sizeProperty = this.containers[innermostIndex].floating ? "width" : "height";
			base = this.positionAbs[posProperty] + this.offset.click[posProperty];
			for (j = this.items.length - 1; j >= 0; j--) {
				if(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {
					continue;
				}
				if(this.items[j].item[0] === this.currentItem[0]) {
					continue;
				}
				cur = this.items[j].item.offset()[posProperty];
				nearBottom = false;
				if(Math.abs(cur - base) > Math.abs(cur + this.items[j][sizeProperty] - base)){
					nearBottom = true;
					cur += this.items[j][sizeProperty];
				}

				if(Math.abs(cur - base) < dist) {
					dist = Math.abs(cur - base); itemWithLeastDistance = this.items[j];
					this.direction = nearBottom ? "up": "down";
				}
			}

			//Check if dropOnEmpty is enabled
			if(!itemWithLeastDistance && !this.options.dropOnEmpty) {
				return;
			}

			this.currentContainer = this.containers[innermostIndex];
			itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);
			this._trigger("change", event, this._uiHash());
			this.containers[innermostIndex]._trigger("change", event, this._uiHash(this));

			//Update the placeholder
			this.options.placeholder.update(this.currentContainer, this.placeholder);

			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
			this.containers[innermostIndex].containerCache.over = 1;
		}


	},

	_createHelper: function(event) {

		var o = this.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === "clone" ? this.currentItem.clone() : this.currentItem);

		//Add the helper to the DOM if that didn't happen already
		if(!helper.parents("body").length) {
			$(o.appendTo !== "parent" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);
		}

		if(helper[0] === this.currentItem[0]) {
			this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };
		}

		if(!helper[0].style.width || o.forceHelperSize) {
			helper.width(this.currentItem.width());
		}
		if(!helper[0].style.height || o.forceHelperSize) {
			helper.height(this.currentItem.height());
		}

		return helper;

	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = {left: +obj[0], top: +obj[1] || 0};
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {


		//Get the offsetParent and cache its position
		this.offsetParent = this.helper.offsetParent();
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		// This needs to be actually done for all browsers, since pageX/pageY includes this information
		// with an ugly IE fix
		if( this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
		};

	},

	_getRelativeOffset: function() {

		if(this.cssPosition === "relative") {
			var p = this.currentItem.position();
			return {
				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.currentItem.css("marginLeft"),10) || 0),
			top: (parseInt(this.currentItem.css("marginTop"),10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var ce, co, over,
			o = this.options;
		if(o.containment === "parent") {
			o.containment = this.helper[0].parentNode;
		}
		if(o.containment === "document" || o.containment === "window") {
			this.containment = [
				0 - this.offset.relative.left - this.offset.parent.left,
				0 - this.offset.relative.top - this.offset.parent.top,
				$(o.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left,
				($(o.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
			];
		}

		if(!(/^(document|window|parent)$/).test(o.containment)) {
			ce = $(o.containment)[0];
			co = $(o.containment).offset();
			over = ($(ce).css("overflow") !== "hidden");

			this.containment = [
				co.left + (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0) - this.margins.left,
				co.top + (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0) - this.margins.top,
				co.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left,
				co.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top
			];
		}

	},

	_convertPositionTo: function(d, pos) {

		if(!pos) {
			pos = this.position;
		}
		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -											// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
			)
		};

	},

	_generatePosition: function(event) {

		var top, left,
			o = this.options,
			pageX = event.pageX,
			pageY = event.pageY,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		// This is another very weird special case that only happens for relative elements:
		// 1. If the css position is relative
		// 2. and the scroll parent is the document or similar to the offset parent
		// we have to refresh the relative offset during the scroll so there are no jumps
		if(this.cssPosition === "relative" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {
			this.offset.relative = this._getRelativeOffset();
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		if(this.originalPosition) { //If we are not dragging yet, we won't check for options

			if(this.containment) {
				if(event.pageX - this.offset.click.left < this.containment[0]) {
					pageX = this.containment[0] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top < this.containment[1]) {
					pageY = this.containment[1] + this.offset.click.top;
				}
				if(event.pageX - this.offset.click.left > this.containment[2]) {
					pageX = this.containment[2] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top > this.containment[3]) {
					pageY = this.containment[3] + this.offset.click.top;
				}
			}

			if(o.grid) {
				top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
				pageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
				pageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

		}

		return {
			top: (
				pageY -																// The absolute mouse position
				this.offset.click.top -													// Click offset (relative to the element)
				this.offset.relative.top	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
			),
			left: (
				pageX -																// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
			)
		};

	},

	_rearrange: function(event, i, a, hardRefresh) {

		a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling));

		//Various things done here to improve the performance:
		// 1. we create a setTimeout, that calls refreshPositions
		// 2. on the instance, we have a counter variable, that get's higher after every append
		// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same
		// 4. this lets only the last addition to the timeout stack through
		this.counter = this.counter ? ++this.counter : 1;
		var counter = this.counter;

		this._delay(function() {
			if(counter === this.counter) {
				this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove
			}
		});

	},

	_clear: function(event, noPropagation) {

		this.reverting = false;
		// We delay all events that have to be triggered to after the point where the placeholder has been removed and
		// everything else normalized again
		var i,
			delayedTriggers = [];

		// We first have to update the dom position of the actual currentItem
		// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)
		if(!this._noFinalSort && this.currentItem.parent().length) {
			this.placeholder.before(this.currentItem);
		}
		this._noFinalSort = null;

		if(this.helper[0] === this.currentItem[0]) {
			for(i in this._storedCSS) {
				if(this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
					this._storedCSS[i] = "";
				}
			}
			this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
		} else {
			this.currentItem.show();
		}

		if(this.fromOutside && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("receive", event, this._uiHash(this.fromOutside)); });
		}
		if((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("update", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed
		}

		// Check if the items Container has Changed and trigger appropriate
		// events.
		if (this !== this.currentContainer) {
			if(!noPropagation) {
				delayedTriggers.push(function(event) { this._trigger("remove", event, this._uiHash()); });
				delayedTriggers.push((function(c) { return function(event) { c._trigger("receive", event, this._uiHash(this)); };  }).call(this, this.currentContainer));
				delayedTriggers.push((function(c) { return function(event) { c._trigger("update", event, this._uiHash(this));  }; }).call(this, this.currentContainer));
			}
		}


		//Post events to containers
		for (i = this.containers.length - 1; i >= 0; i--){
			if(!noPropagation) {
				delayedTriggers.push((function(c) { return function(event) { c._trigger("deactivate", event, this._uiHash(this)); };  }).call(this, this.containers[i]));
			}
			if(this.containers[i].containerCache.over) {
				delayedTriggers.push((function(c) { return function(event) { c._trigger("out", event, this._uiHash(this)); };  }).call(this, this.containers[i]));
				this.containers[i].containerCache.over = 0;
			}
		}

		//Do what was originally in plugins
		if(this._storedCursor) {
			$("body").css("cursor", this._storedCursor);
		}
		if(this._storedOpacity) {
			this.helper.css("opacity", this._storedOpacity);
		}
		if(this._storedZIndex) {
			this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex);
		}

		this.dragging = false;
		if(this.cancelHelperRemoval) {
			if(!noPropagation) {
				this._trigger("beforeStop", event, this._uiHash());
				for (i=0; i < delayedTriggers.length; i++) {
					delayedTriggers[i].call(this, event);
				} //Trigger all delayed events
				this._trigger("stop", event, this._uiHash());
			}

			this.fromOutside = false;
			return false;
		}

		if(!noPropagation) {
			this._trigger("beforeStop", event, this._uiHash());
		}

		//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
		this.placeholder[0].parentNode.removeChild(this.placeholder[0]);

		if(this.helper[0] !== this.currentItem[0]) {
			this.helper.remove();
		}
		this.helper = null;

		if(!noPropagation) {
			for (i=0; i < delayedTriggers.length; i++) {
				delayedTriggers[i].call(this, event);
			} //Trigger all delayed events
			this._trigger("stop", event, this._uiHash());
		}

		this.fromOutside = false;
		return true;

	},

	_trigger: function() {
		if ($.Widget.prototype._trigger.apply(this, arguments) === false) {
			this.cancel();
		}
	},

	_uiHash: function(_inst) {
		var inst = _inst || this;
		return {
			helper: inst.helper,
			placeholder: inst.placeholder || $([]),
			position: inst.position,
			originalPosition: inst.originalPosition,
			offset: inst.positionAbs,
			item: inst.currentItem,
			sender: _inst ? _inst.element : null
		};
	}

});

})(jQuery);

;(jQuery.effects || (function($, undefined) {

var dataSpace = "ui-effects-";

$.effects = {
	effect: {}
};

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function( jQuery, undefined ) {

	var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",

	// plusequals test for += 100 -= 100
	rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,
	// a set of RE's that can match strings and generate color tuples.
	stringParsers = [{
			re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ],
					execResult[ 3 ],
					execResult[ 4 ]
				];
			}
		}, {
			re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ] * 2.55,
					execResult[ 2 ] * 2.55,
					execResult[ 3 ] * 2.55,
					execResult[ 4 ]
				];
			}
		}, {
			// this regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ], 16 )
				];
			}
		}, {
			// this regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ] + execResult[ 3 ], 16 )
				];
			}
		}, {
			re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			space: "hsla",
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ] / 100,
					execResult[ 3 ] / 100,
					execResult[ 4 ]
				];
			}
		}],

	// jQuery.Color( )
	color = jQuery.Color = function( color, green, blue, alpha ) {
		return new jQuery.Color.fn.parse( color, green, blue, alpha );
	},
	spaces = {
		rgba: {
			props: {
				red: {
					idx: 0,
					type: "byte"
				},
				green: {
					idx: 1,
					type: "byte"
				},
				blue: {
					idx: 2,
					type: "byte"
				}
			}
		},

		hsla: {
			props: {
				hue: {
					idx: 0,
					type: "degrees"
				},
				saturation: {
					idx: 1,
					type: "percent"
				},
				lightness: {
					idx: 2,
					type: "percent"
				}
			}
		}
	},
	propTypes = {
		"byte": {
			floor: true,
			max: 255
		},
		"percent": {
			max: 1
		},
		"degrees": {
			mod: 360,
			floor: true
		}
	},
	support = color.support = {},

	// element for support tests
	supportElem = jQuery( "<p>" )[ 0 ],

	// colors = jQuery.Color.names
	colors,

	// local aliases of functions called often
	each = jQuery.each;

// determine rgba support immediately
supportElem.style.cssText = "background-color:rgba(1,1,1,.5)";
support.rgba = supportElem.style.backgroundColor.indexOf( "rgba" ) > -1;

// define cache name and alpha properties
// for rgba and hsla spaces
each( spaces, function( spaceName, space ) {
	space.cache = "_" + spaceName;
	space.props.alpha = {
		idx: 3,
		type: "percent",
		def: 1
	};
});

function clamp( value, prop, allowEmpty ) {
	var type = propTypes[ prop.type ] || {};

	if ( value == null ) {
		return (allowEmpty || !prop.def) ? null : prop.def;
	}

	// ~~ is an short way of doing floor for positive numbers
	value = type.floor ? ~~value : parseFloat( value );

	// IE will pass in empty strings as value for alpha,
	// which will hit this case
	if ( isNaN( value ) ) {
		return prop.def;
	}

	if ( type.mod ) {
		// we add mod before modding to make sure that negatives values
		// get converted properly: -10 -> 350
		return (value + type.mod) % type.mod;
	}

	// for now all property types without mod have min and max
	return 0 > value ? 0 : type.max < value ? type.max : value;
}

function stringParse( string ) {
	var inst = color(),
		rgba = inst._rgba = [];

	string = string.toLowerCase();

	each( stringParsers, function( i, parser ) {
		var parsed,
			match = parser.re.exec( string ),
			values = match && parser.parse( match ),
			spaceName = parser.space || "rgba";

		if ( values ) {
			parsed = inst[ spaceName ]( values );

			// if this was an rgba parse the assignment might happen twice
			// oh well....
			inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
			rgba = inst._rgba = parsed._rgba;

			// exit each( stringParsers ) here because we matched
			return false;
		}
	});

	// Found a stringParser that handled it
	if ( rgba.length ) {

		// if this came from a parsed string, force "transparent" when alpha is 0
		// chrome, (and maybe others) return "transparent" as rgba(0,0,0,0)
		if ( rgba.join() === "0,0,0,0" ) {
			jQuery.extend( rgba, colors.transparent );
		}
		return inst;
	}

	// named colors
	return colors[ string ];
}

color.fn = jQuery.extend( color.prototype, {
	parse: function( red, green, blue, alpha ) {
		if ( red === undefined ) {
			this._rgba = [ null, null, null, null ];
			return this;
		}
		if ( red.jquery || red.nodeType ) {
			red = jQuery( red ).css( green );
			green = undefined;
		}

		var inst = this,
			type = jQuery.type( red ),
			rgba = this._rgba = [];

		// more than 1 argument specified - assume ( red, green, blue, alpha )
		if ( green !== undefined ) {
			red = [ red, green, blue, alpha ];
			type = "array";
		}

		if ( type === "string" ) {
			return this.parse( stringParse( red ) || colors._default );
		}

		if ( type === "array" ) {
			each( spaces.rgba.props, function( key, prop ) {
				rgba[ prop.idx ] = clamp( red[ prop.idx ], prop );
			});
			return this;
		}

		if ( type === "object" ) {
			if ( red instanceof color ) {
				each( spaces, function( spaceName, space ) {
					if ( red[ space.cache ] ) {
						inst[ space.cache ] = red[ space.cache ].slice();
					}
				});
			} else {
				each( spaces, function( spaceName, space ) {
					var cache = space.cache;
					each( space.props, function( key, prop ) {

						// if the cache doesn't exist, and we know how to convert
						if ( !inst[ cache ] && space.to ) {

							// if the value was null, we don't need to copy it
							// if the key was alpha, we don't need to copy it either
							if ( key === "alpha" || red[ key ] == null ) {
								return;
							}
							inst[ cache ] = space.to( inst._rgba );
						}

						// this is the only case where we allow nulls for ALL properties.
						// call clamp with alwaysAllowEmpty
						inst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );
					});

					// everything defined but alpha?
					if ( inst[ cache ] && jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {
						// use the default of 1
						inst[ cache ][ 3 ] = 1;
						if ( space.from ) {
							inst._rgba = space.from( inst[ cache ] );
						}
					}
				});
			}
			return this;
		}
	},
	is: function( compare ) {
		var is = color( compare ),
			same = true,
			inst = this;

		each( spaces, function( _, space ) {
			var localCache,
				isCache = is[ space.cache ];
			if (isCache) {
				localCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];
				each( space.props, function( _, prop ) {
					if ( isCache[ prop.idx ] != null ) {
						same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
						return same;
					}
				});
			}
			return same;
		});
		return same;
	},
	_space: function() {
		var used = [],
			inst = this;
		each( spaces, function( spaceName, space ) {
			if ( inst[ space.cache ] ) {
				used.push( spaceName );
			}
		});
		return used.pop();
	},
	transition: function( other, distance ) {
		var end = color( other ),
			spaceName = end._space(),
			space = spaces[ spaceName ],
			startColor = this.alpha() === 0 ? color( "transparent" ) : this,
			start = startColor[ space.cache ] || space.to( startColor._rgba ),
			result = start.slice();

		end = end[ space.cache ];
		each( space.props, function( key, prop ) {
			var index = prop.idx,
				startValue = start[ index ],
				endValue = end[ index ],
				type = propTypes[ prop.type ] || {};

			// if null, don't override start value
			if ( endValue === null ) {
				return;
			}
			// if null - use end
			if ( startValue === null ) {
				result[ index ] = endValue;
			} else {
				if ( type.mod ) {
					if ( endValue - startValue > type.mod / 2 ) {
						startValue += type.mod;
					} else if ( startValue - endValue > type.mod / 2 ) {
						startValue -= type.mod;
					}
				}
				result[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );
			}
		});
		return this[ spaceName ]( result );
	},
	blend: function( opaque ) {
		// if we are already opaque - return ourself
		if ( this._rgba[ 3 ] === 1 ) {
			return this;
		}

		var rgb = this._rgba.slice(),
			a = rgb.pop(),
			blend = color( opaque )._rgba;

		return color( jQuery.map( rgb, function( v, i ) {
			return ( 1 - a ) * blend[ i ] + a * v;
		}));
	},
	toRgbaString: function() {
		var prefix = "rgba(",
			rgba = jQuery.map( this._rgba, function( v, i ) {
				return v == null ? ( i > 2 ? 1 : 0 ) : v;
			});

		if ( rgba[ 3 ] === 1 ) {
			rgba.pop();
			prefix = "rgb(";
		}

		return prefix + rgba.join() + ")";
	},
	toHslaString: function() {
		var prefix = "hsla(",
			hsla = jQuery.map( this.hsla(), function( v, i ) {
				if ( v == null ) {
					v = i > 2 ? 1 : 0;
				}

				// catch 1 and 2
				if ( i && i < 3 ) {
					v = Math.round( v * 100 ) + "%";
				}
				return v;
			});

		if ( hsla[ 3 ] === 1 ) {
			hsla.pop();
			prefix = "hsl(";
		}
		return prefix + hsla.join() + ")";
	},
	toHexString: function( includeAlpha ) {
		var rgba = this._rgba.slice(),
			alpha = rgba.pop();

		if ( includeAlpha ) {
			rgba.push( ~~( alpha * 255 ) );
		}

		return "#" + jQuery.map( rgba, function( v ) {

			// default to 0 when nulls exist
			v = ( v || 0 ).toString( 16 );
			return v.length === 1 ? "0" + v : v;
		}).join("");
	},
	toString: function() {
		return this._rgba[ 3 ] === 0 ? "transparent" : this.toRgbaString();
	}
});
color.fn.parse.prototype = color.fn;

// hsla conversions adapted from:
// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021

function hue2rgb( p, q, h ) {
	h = ( h + 1 ) % 1;
	if ( h * 6 < 1 ) {
		return p + (q - p) * h * 6;
	}
	if ( h * 2 < 1) {
		return q;
	}
	if ( h * 3 < 2 ) {
		return p + (q - p) * ((2/3) - h) * 6;
	}
	return p;
}

spaces.hsla.to = function ( rgba ) {
	if ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {
		return [ null, null, null, rgba[ 3 ] ];
	}
	var r = rgba[ 0 ] / 255,
		g = rgba[ 1 ] / 255,
		b = rgba[ 2 ] / 255,
		a = rgba[ 3 ],
		max = Math.max( r, g, b ),
		min = Math.min( r, g, b ),
		diff = max - min,
		add = max + min,
		l = add * 0.5,
		h, s;

	if ( min === max ) {
		h = 0;
	} else if ( r === max ) {
		h = ( 60 * ( g - b ) / diff ) + 360;
	} else if ( g === max ) {
		h = ( 60 * ( b - r ) / diff ) + 120;
	} else {
		h = ( 60 * ( r - g ) / diff ) + 240;
	}

	// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
	// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)
	if ( diff === 0 ) {
		s = 0;
	} else if ( l <= 0.5 ) {
		s = diff / add;
	} else {
		s = diff / ( 2 - add );
	}
	return [ Math.round(h) % 360, s, l, a == null ? 1 : a ];
};

spaces.hsla.from = function ( hsla ) {
	if ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {
		return [ null, null, null, hsla[ 3 ] ];
	}
	var h = hsla[ 0 ] / 360,
		s = hsla[ 1 ],
		l = hsla[ 2 ],
		a = hsla[ 3 ],
		q = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,
		p = 2 * l - q;

	return [
		Math.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),
		Math.round( hue2rgb( p, q, h ) * 255 ),
		Math.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),
		a
	];
};


each( spaces, function( spaceName, space ) {
	var props = space.props,
		cache = space.cache,
		to = space.to,
		from = space.from;

	// makes rgba() and hsla()
	color.fn[ spaceName ] = function( value ) {

		// generate a cache for this space if it doesn't exist
		if ( to && !this[ cache ] ) {
			this[ cache ] = to( this._rgba );
		}
		if ( value === undefined ) {
			return this[ cache ].slice();
		}

		var ret,
			type = jQuery.type( value ),
			arr = ( type === "array" || type === "object" ) ? value : arguments,
			local = this[ cache ].slice();

		each( props, function( key, prop ) {
			var val = arr[ type === "object" ? key : prop.idx ];
			if ( val == null ) {
				val = local[ prop.idx ];
			}
			local[ prop.idx ] = clamp( val, prop );
		});

		if ( from ) {
			ret = color( from( local ) );
			ret[ cache ] = local;
			return ret;
		} else {
			return color( local );
		}
	};

	// makes red() green() blue() alpha() hue() saturation() lightness()
	each( props, function( key, prop ) {
		// alpha is included in more than one space
		if ( color.fn[ key ] ) {
			return;
		}
		color.fn[ key ] = function( value ) {
			var vtype = jQuery.type( value ),
				fn = ( key === "alpha" ? ( this._hsla ? "hsla" : "rgba" ) : spaceName ),
				local = this[ fn ](),
				cur = local[ prop.idx ],
				match;

			if ( vtype === "undefined" ) {
				return cur;
			}

			if ( vtype === "function" ) {
				value = value.call( this, cur );
				vtype = jQuery.type( value );
			}
			if ( value == null && prop.empty ) {
				return this;
			}
			if ( vtype === "string" ) {
				match = rplusequals.exec( value );
				if ( match ) {
					value = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === "+" ? 1 : -1 );
				}
			}
			local[ prop.idx ] = value;
			return this[ fn ]( local );
		};
	});
});

// add cssHook and .fx.step function for each named hook.
// accept a space separated string of properties
color.hook = function( hook ) {
	var hooks = hook.split( " " );
	each( hooks, function( i, hook ) {
		jQuery.cssHooks[ hook ] = {
			set: function( elem, value ) {
				var parsed, curElem,
					backgroundColor = "";

				if ( value !== "transparent" && ( jQuery.type( value ) !== "string" || ( parsed = stringParse( value ) ) ) ) {
					value = color( parsed || value );
					if ( !support.rgba && value._rgba[ 3 ] !== 1 ) {
						curElem = hook === "backgroundColor" ? elem.parentNode : elem;
						while (
							(backgroundColor === "" || backgroundColor === "transparent") &&
							curElem && curElem.style
						) {
							try {
								backgroundColor = jQuery.css( curElem, "backgroundColor" );
								curElem = curElem.parentNode;
							} catch ( e ) {
							}
						}

						value = value.blend( backgroundColor && backgroundColor !== "transparent" ?
							backgroundColor :
							"_default" );
					}

					value = value.toRgbaString();
				}
				try {
					elem.style[ hook ] = value;
				} catch( e ) {
					// wrapped to prevent IE from throwing errors on "invalid" values like 'auto' or 'inherit'
				}
			}
		};
		jQuery.fx.step[ hook ] = function( fx ) {
			if ( !fx.colorInit ) {
				fx.start = color( fx.elem, hook );
				fx.end = color( fx.end );
				fx.colorInit = true;
			}
			jQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );
		};
	});

};

color.hook( stepHooks );

jQuery.cssHooks.borderColor = {
	expand: function( value ) {
		var expanded = {};

		each( [ "Top", "Right", "Bottom", "Left" ], function( i, part ) {
			expanded[ "border" + part + "Color" ] = value;
		});
		return expanded;
	}
};

// Basic color names only.
// Usage of any of the other color names requires adding yourself or including
// jquery.color.svg-names.js.
colors = jQuery.Color.names = {
	// 4.1. Basic color keywords
	aqua: "#00ffff",
	black: "#000000",
	blue: "#0000ff",
	fuchsia: "#ff00ff",
	gray: "#808080",
	green: "#008000",
	lime: "#00ff00",
	maroon: "#800000",
	navy: "#000080",
	olive: "#808000",
	purple: "#800080",
	red: "#ff0000",
	silver: "#c0c0c0",
	teal: "#008080",
	white: "#ffffff",
	yellow: "#ffff00",

	// 4.2.3. "transparent" color keyword
	transparent: [ null, null, null, 0 ],

	_default: "#ffffff"
};

})( jQuery );


/******************************************************************************/
/****************************** CLASS ANIMATIONS ******************************/
/******************************************************************************/
(function() {

var classAnimationActions = [ "add", "remove", "toggle" ],
	shorthandStyles = {
		border: 1,
		borderBottom: 1,
		borderColor: 1,
		borderLeft: 1,
		borderRight: 1,
		borderTop: 1,
		borderWidth: 1,
		margin: 1,
		padding: 1
	};

$.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function( _, prop ) {
	$.fx.step[ prop ] = function( fx ) {
		if ( fx.end !== "none" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {
			jQuery.style( fx.elem, prop, fx.end );
			fx.setAttr = true;
		}
	};
});

function getElementStyles( elem ) {
	var key, len,
		style = elem.ownerDocument.defaultView ?
			elem.ownerDocument.defaultView.getComputedStyle( elem, null ) :
			elem.currentStyle,
		styles = {};

	if ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {
		len = style.length;
		while ( len-- ) {
			key = style[ len ];
			if ( typeof style[ key ] === "string" ) {
				styles[ $.camelCase( key ) ] = style[ key ];
			}
		}
	// support: Opera, IE <9
	} else {
		for ( key in style ) {
			if ( typeof style[ key ] === "string" ) {
				styles[ key ] = style[ key ];
			}
		}
	}

	return styles;
}


function styleDifference( oldStyle, newStyle ) {
	var diff = {},
		name, value;

	for ( name in newStyle ) {
		value = newStyle[ name ];
		if ( oldStyle[ name ] !== value ) {
			if ( !shorthandStyles[ name ] ) {
				if ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {
					diff[ name ] = value;
				}
			}
		}
	}

	return diff;
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

$.effects.animateClass = function( value, duration, easing, callback ) {
	var o = $.speed( duration, easing, callback );

	return this.queue( function() {
		var animated = $( this ),
			baseClass = animated.attr( "class" ) || "",
			applyClassChange,
			allAnimations = o.children ? animated.find( "*" ).addBack() : animated;

		// map the animated objects to store the original styles.
		allAnimations = allAnimations.map(function() {
			var el = $( this );
			return {
				el: el,
				start: getElementStyles( this )
			};
		});

		// apply class change
		applyClassChange = function() {
			$.each( classAnimationActions, function(i, action) {
				if ( value[ action ] ) {
					animated[ action + "Class" ]( value[ action ] );
				}
			});
		};
		applyClassChange();

		// map all animated objects again - calculate new styles and diff
		allAnimations = allAnimations.map(function() {
			this.end = getElementStyles( this.el[ 0 ] );
			this.diff = styleDifference( this.start, this.end );
			return this;
		});

		// apply original class
		animated.attr( "class", baseClass );

		// map all animated objects again - this time collecting a promise
		allAnimations = allAnimations.map(function() {
			var styleInfo = this,
				dfd = $.Deferred(),
				opts = $.extend({}, o, {
					queue: false,
					complete: function() {
						dfd.resolve( styleInfo );
					}
				});

			this.el.animate( this.diff, opts );
			return dfd.promise();
		});

		// once all animations have completed:
		$.when.apply( $, allAnimations.get() ).done(function() {

			// set the final class
			applyClassChange();

			// for each animated element,
			// clear all css properties that were animated
			$.each( arguments, function() {
				var el = this.el;
				$.each( this.diff, function(key) {
					el.css( key, "" );
				});
			});

			// this is guarnteed to be there if you use jQuery.speed()
			// it also handles dequeuing the next anim...
			o.complete.call( animated[ 0 ] );
		});
	});
};

$.fn.extend({
	_addClass: $.fn.addClass,
	addClass: function( classNames, speed, easing, callback ) {
		return speed ?
			$.effects.animateClass.call( this,
				{ add: classNames }, speed, easing, callback ) :
			this._addClass( classNames );
	},

	_removeClass: $.fn.removeClass,
	removeClass: function( classNames, speed, easing, callback ) {
		return speed ?
			$.effects.animateClass.call( this,
				{ remove: classNames }, speed, easing, callback ) :
			this._removeClass( classNames );
	},

	_toggleClass: $.fn.toggleClass,
	toggleClass: function( classNames, force, speed, easing, callback ) {
		if ( typeof force === "boolean" || force === undefined ) {
			if ( !speed ) {
				// without speed parameter
				return this._toggleClass( classNames, force );
			} else {
				return $.effects.animateClass.call( this,
					(force ? { add: classNames } : { remove: classNames }),
					speed, easing, callback );
			}
		} else {
			// without force parameter
			return $.effects.animateClass.call( this,
				{ toggle: classNames }, force, speed, easing );
		}
	},

	switchClass: function( remove, add, speed, easing, callback) {
		return $.effects.animateClass.call( this, {
			add: add,
			remove: remove
		}, speed, easing, callback );
	}
});

})();

/******************************************************************************/
/*********************************** EFFECTS **********************************/
/******************************************************************************/

(function() {

$.extend( $.effects, {
	version: "1.10.0",

	// Saves a set of properties in a data storage
	save: function( element, set ) {
		for( var i=0; i < set.length; i++ ) {
			if ( set[ i ] !== null ) {
				element.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );
			}
		}
	},

	// Restores a set of previously saved properties from a data storage
	restore: function( element, set ) {
		var val, i;
		for( i=0; i < set.length; i++ ) {
			if ( set[ i ] !== null ) {
				val = element.data( dataSpace + set[ i ] );
				// support: jQuery 1.6.2
				// http://bugs.jquery.com/ticket/9917
				// jQuery 1.6.2 incorrectly returns undefined for any falsy value.
				// We can't differentiate between "" and 0 here, so we just assume
				// empty string since it's likely to be a more common value...
				if ( val === undefined ) {
					val = "";
				}
				element.css( set[ i ], val );
			}
		}
	},

	setMode: function( el, mode ) {
		if (mode === "toggle") {
			mode = el.is( ":hidden" ) ? "show" : "hide";
		}
		return mode;
	},

	// Translates a [top,left] array into a baseline value
	// this should be a little more flexible in the future to handle a string & hash
	getBaseline: function( origin, original ) {
		var y, x;
		switch ( origin[ 0 ] ) {
			case "top": y = 0; break;
			case "middle": y = 0.5; break;
			case "bottom": y = 1; break;
			default: y = origin[ 0 ] / original.height;
		}
		switch ( origin[ 1 ] ) {
			case "left": x = 0; break;
			case "center": x = 0.5; break;
			case "right": x = 1; break;
			default: x = origin[ 1 ] / original.width;
		}
		return {
			x: x,
			y: y
		};
	},

	// Wraps the element around a wrapper that copies position properties
	createWrapper: function( element ) {

		// if the element is already wrapped, return it
		if ( element.parent().is( ".ui-effects-wrapper" )) {
			return element.parent();
		}

		// wrap the element
		var props = {
				width: element.outerWidth(true),
				height: element.outerHeight(true),
				"float": element.css( "float" )
			},
			wrapper = $( "<div></div>" )
				.addClass( "ui-effects-wrapper" )
				.css({
					fontSize: "100%",
					background: "transparent",
					border: "none",
					margin: 0,
					padding: 0
				}),
			// Store the size in case width/height are defined in % - Fixes #5245
			size = {
				width: element.width(),
				height: element.height()
			},
			active = document.activeElement;

		// support: Firefox
		// Firefox incorrectly exposes anonymous content
		// https://bugzilla.mozilla.org/show_bug.cgi?id=561664
		try {
			active.id;
		} catch( e ) {
			active = document.body;
		}

		element.wrap( wrapper );

		// Fixes #7595 - Elements lose focus when wrapped.
		if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
			$( active ).focus();
		}

		wrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element

		// transfer positioning properties to the wrapper
		if ( element.css( "position" ) === "static" ) {
			wrapper.css({ position: "relative" });
			element.css({ position: "relative" });
		} else {
			$.extend( props, {
				position: element.css( "position" ),
				zIndex: element.css( "z-index" )
			});
			$.each([ "top", "left", "bottom", "right" ], function(i, pos) {
				props[ pos ] = element.css( pos );
				if ( isNaN( parseInt( props[ pos ], 10 ) ) ) {
					props[ pos ] = "auto";
				}
			});
			element.css({
				position: "relative",
				top: 0,
				left: 0,
				right: "auto",
				bottom: "auto"
			});
		}
		element.css(size);

		return wrapper.css( props ).show();
	},

	removeWrapper: function( element ) {
		var active = document.activeElement;

		if ( element.parent().is( ".ui-effects-wrapper" ) ) {
			element.parent().replaceWith( element );

			// Fixes #7595 - Elements lose focus when wrapped.
			if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
				$( active ).focus();
			}
		}


		return element;
	},

	setTransition: function( element, list, factor, value ) {
		value = value || {};
		$.each( list, function( i, x ) {
			var unit = element.cssUnit( x );
			if ( unit[ 0 ] > 0 ) {
				value[ x ] = unit[ 0 ] * factor + unit[ 1 ];
			}
		});
		return value;
	}
});

// return an effect options object for the given parameters:
function _normalizeArguments( effect, options, speed, callback ) {

	// allow passing all options as the first parameter
	if ( $.isPlainObject( effect ) ) {
		options = effect;
		effect = effect.effect;
	}

	// convert to an object
	effect = { effect: effect };

	// catch (effect, null, ...)
	if ( options == null ) {
		options = {};
	}

	// catch (effect, callback)
	if ( $.isFunction( options ) ) {
		callback = options;
		speed = null;
		options = {};
	}

	// catch (effect, speed, ?)
	if ( typeof options === "number" || $.fx.speeds[ options ] ) {
		callback = speed;
		speed = options;
		options = {};
	}

	// catch (effect, options, callback)
	if ( $.isFunction( speed ) ) {
		callback = speed;
		speed = null;
	}

	// add options to effect
	if ( options ) {
		$.extend( effect, options );
	}

	speed = speed || options.duration;
	effect.duration = $.fx.off ? 0 :
		typeof speed === "number" ? speed :
		speed in $.fx.speeds ? $.fx.speeds[ speed ] :
		$.fx.speeds._default;

	effect.complete = callback || options.complete;

	return effect;
}

function standardSpeed( speed ) {
	// valid standard speeds
	if ( !speed || typeof speed === "number" || $.fx.speeds[ speed ] ) {
		return true;
	}

	// invalid strings - treat as "normal" speed
	return typeof speed === "string" && !$.effects.effect[ speed ];
}

$.fn.extend({
	effect: function( /* effect, options, speed, callback */ ) {
		var args = _normalizeArguments.apply( this, arguments ),
			mode = args.mode,
			queue = args.queue,
			effectMethod = $.effects.effect[ args.effect ];

		if ( $.fx.off || !effectMethod ) {
			// delegate to the original method (e.g., .show()) if possible
			if ( mode ) {
				return this[ mode ]( args.duration, args.complete );
			} else {
				return this.each( function() {
					if ( args.complete ) {
						args.complete.call( this );
					}
				});
			}
		}

		function run( next ) {
			var elem = $( this ),
				complete = args.complete,
				mode = args.mode;

			function done() {
				if ( $.isFunction( complete ) ) {
					complete.call( elem[0] );
				}
				if ( $.isFunction( next ) ) {
					next();
				}
			}

			// if the element is hiddden and mode is hide,
			// or element is visible and mode is show
			if ( elem.is( ":hidden" ) ? mode === "hide" : mode === "show" ) {
				done();
			} else {
				effectMethod.call( elem[0], args, done );
			}
		}

		return queue === false ? this.each( run ) : this.queue( queue || "fx", run );
	},

	_show: $.fn.show,
	show: function( speed ) {
		if ( standardSpeed( speed ) ) {
			return this._show.apply( this, arguments );
		} else {
			var args = _normalizeArguments.apply( this, arguments );
			args.mode = "show";
			return this.effect.call( this, args );
		}
	},

	_hide: $.fn.hide,
	hide: function( speed ) {
		if ( standardSpeed( speed ) ) {
			return this._hide.apply( this, arguments );
		} else {
			var args = _normalizeArguments.apply( this, arguments );
			args.mode = "hide";
			return this.effect.call( this, args );
		}
	},

	// jQuery core overloads toggle and creates _toggle
	__toggle: $.fn.toggle,
	toggle: function( speed ) {
		if ( standardSpeed( speed ) || typeof speed === "boolean" || $.isFunction( speed ) ) {
			return this.__toggle.apply( this, arguments );
		} else {
			var args = _normalizeArguments.apply( this, arguments );
			args.mode = "toggle";
			return this.effect.call( this, args );
		}
	},

	// helper functions
	cssUnit: function(key) {
		var style = this.css( key ),
			val = [];

		$.each( [ "em", "px", "%", "pt" ], function( i, unit ) {
			if ( style.indexOf( unit ) > 0 ) {
				val = [ parseFloat( style ), unit ];
			}
		});
		return val;
	}
});

})();

/******************************************************************************/
/*********************************** EASING ***********************************/
/******************************************************************************/

(function() {

// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)

var baseEasings = {};

$.each( [ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function( i, name ) {
	baseEasings[ name ] = function( p ) {
		return Math.pow( p, i + 2 );
	};
});

$.extend( baseEasings, {
	Sine: function ( p ) {
		return 1 - Math.cos( p * Math.PI / 2 );
	},
	Circ: function ( p ) {
		return 1 - Math.sqrt( 1 - p * p );
	},
	Elastic: function( p ) {
		return p === 0 || p === 1 ? p :
			-Math.pow( 2, 8 * (p - 1) ) * Math.sin( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );
	},
	Back: function( p ) {
		return p * p * ( 3 * p - 2 );
	},
	Bounce: function ( p ) {
		var pow2,
			bounce = 4;

		while ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}
		return 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );
	}
});

$.each( baseEasings, function( name, easeIn ) {
	$.easing[ "easeIn" + name ] = easeIn;
	$.easing[ "easeOut" + name ] = function( p ) {
		return 1 - easeIn( 1 - p );
	};
	$.easing[ "easeInOut" + name ] = function( p ) {
		return p < 0.5 ?
			easeIn( p * 2 ) / 2 :
			1 - easeIn( p * -2 + 2 ) / 2;
	};
});

})();

})(jQuery));

(function( $, undefined ) {

var uid = 0,
	hideProps = {},
	showProps = {};

hideProps.height = hideProps.paddingTop = hideProps.paddingBottom =
	hideProps.borderTopWidth = hideProps.borderBottomWidth = "hide";
showProps.height = showProps.paddingTop = showProps.paddingBottom =
	showProps.borderTopWidth = showProps.borderBottomWidth = "show";

$.widget( "ui.accordion", {
	version: "1.10.0",
	options: {
		active: 0,
		animate: {},
		collapsible: false,
		event: "click",
		header: "> li > :first-child,> :not(li):even",
		heightStyle: "auto",
		icons: {
			activeHeader: "ui-icon-triangle-1-s",
			header: "ui-icon-triangle-1-e"
		},

		// callbacks
		activate: null,
		beforeActivate: null
	},

	_create: function() {
		var options = this.options;
		this.prevShow = this.prevHide = $();
		this.element.addClass( "ui-accordion ui-widget ui-helper-reset" )
			// ARIA
			.attr( "role", "tablist" );

		// don't allow collapsible: false and active: false / null
		if ( !options.collapsible && (options.active === false || options.active == null) ) {
			options.active = 0;
		}

		this._processPanels();
		// handle negative values
		if ( options.active < 0 ) {
			options.active += this.headers.length;
		}
		this._refresh();
	},

	_getCreateEventData: function() {
		return {
			header: this.active,
			content: !this.active.length ? $() : this.active.next()
		};
	},

	_createIcons: function() {
		var icons = this.options.icons;
		if ( icons ) {
			$( "<span>" )
				.addClass( "ui-accordion-header-icon ui-icon " + icons.header )
				.prependTo( this.headers );
			this.active.children( ".ui-accordion-header-icon" )
				.removeClass( icons.header )
				.addClass( icons.activeHeader );
			this.headers.addClass( "ui-accordion-icons" );
		}
	},

	_destroyIcons: function() {
		this.headers
			.removeClass( "ui-accordion-icons" )
			.children( ".ui-accordion-header-icon" )
				.remove();
	},

	_destroy: function() {
		var contents;

		// clean up main element
		this.element
			.removeClass( "ui-accordion ui-widget ui-helper-reset" )
			.removeAttr( "role" );

		// clean up headers
		this.headers
			.removeClass( "ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top" )
			.removeAttr( "role" )
			.removeAttr( "aria-selected" )
			.removeAttr( "aria-controls" )
			.removeAttr( "tabIndex" )
			.each(function() {
				if ( /^ui-accordion/.test( this.id ) ) {
					this.removeAttribute( "id" );
				}
			});
		this._destroyIcons();

		// clean up content panels
		contents = this.headers.next()
			.css( "display", "" )
			.removeAttr( "role" )
			.removeAttr( "aria-expanded" )
			.removeAttr( "aria-hidden" )
			.removeAttr( "aria-labelledby" )
			.removeClass( "ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled" )
			.each(function() {
				if ( /^ui-accordion/.test( this.id ) ) {
					this.removeAttribute( "id" );
				}
			});
		if ( this.options.heightStyle !== "content" ) {
			contents.css( "height", "" );
		}
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {
			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		if ( key === "event" ) {
			if ( this.options.event ) {
				this._off( this.headers, this.options.event );
			}
			this._setupEvents( value );
		}

		this._super( key, value );

		// setting collapsible: false while collapsed; open first panel
		if ( key === "collapsible" && !value && this.options.active === false ) {
			this._activate( 0 );
		}

		if ( key === "icons" ) {
			this._destroyIcons();
			if ( value ) {
				this._createIcons();
			}
		}

		// #5332 - opacity doesn't cascade to positioned elements in IE
		// so we need to add the disabled class to the headers and panels
		if ( key === "disabled" ) {
			this.headers.add( this.headers.next() )
				.toggleClass( "ui-state-disabled", !!value );
		}
	},

	_keydown: function( event ) {
		/*jshint maxcomplexity:15*/
		if ( event.altKey || event.ctrlKey ) {
			return;
		}

		var keyCode = $.ui.keyCode,
			length = this.headers.length,
			currentIndex = this.headers.index( event.target ),
			toFocus = false;

		switch ( event.keyCode ) {
			case keyCode.RIGHT:
			case keyCode.DOWN:
				toFocus = this.headers[ ( currentIndex + 1 ) % length ];
				break;
			case keyCode.LEFT:
			case keyCode.UP:
				toFocus = this.headers[ ( currentIndex - 1 + length ) % length ];
				break;
			case keyCode.SPACE:
			case keyCode.ENTER:
				this._eventHandler( event );
				break;
			case keyCode.HOME:
				toFocus = this.headers[ 0 ];
				break;
			case keyCode.END:
				toFocus = this.headers[ length - 1 ];
				break;
		}

		if ( toFocus ) {
			$( event.target ).attr( "tabIndex", -1 );
			$( toFocus ).attr( "tabIndex", 0 );
			toFocus.focus();
			event.preventDefault();
		}
	},

	_panelKeyDown : function( event ) {
		if ( event.keyCode === $.ui.keyCode.UP && event.ctrlKey ) {
			$( event.currentTarget ).prev().focus();
		}
	},

	refresh: function() {
		var options = this.options;
		this._processPanels();

		// was collapsed or no panel
		if ( ( options.active === false && options.collapsible === true ) || !this.headers.length ) {
			options.active = false;
			this.active = $();
		// active false only when collapsible is true
		} if ( options.active === false ) {
			this._activate( 0 );
		// was active, but active panel is gone
		} else if ( this.active.length && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
			// all remaining panel are disabled
			if ( this.headers.length === this.headers.find(".ui-state-disabled").length ) {
				options.active = false;
				this.active = $();
			// activate previous panel
			} else {
				this._activate( Math.max( 0, options.active - 1 ) );
			}
		// was active, active panel still exists
		} else {
			// make sure active index is correct
			options.active = this.headers.index( this.active );
		}

		this._destroyIcons();

		this._refresh();
	},

	_processPanels: function() {
		this.headers = this.element.find( this.options.header )
			.addClass( "ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" );

		this.headers.next()
			.addClass( "ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" )
			.filter(":not(.ui-accordion-content-active)")
			.hide();
	},

	_refresh: function() {
		var maxHeight,
			options = this.options,
			heightStyle = options.heightStyle,
			parent = this.element.parent(),
			accordionId = this.accordionId = "ui-accordion-" +
				(this.element.attr( "id" ) || ++uid);

		this.active = this._findActive( options.active )
			.addClass( "ui-accordion-header-active ui-state-active" )
			.toggleClass( "ui-corner-all ui-corner-top" );
		this.active.next()
			.addClass( "ui-accordion-content-active" )
			.show();

		this.headers
			.attr( "role", "tab" )
			.each(function( i ) {
				var header = $( this ),
					headerId = header.attr( "id" ),
					panel = header.next(),
					panelId = panel.attr( "id" );
				if ( !headerId ) {
					headerId = accordionId + "-header-" + i;
					header.attr( "id", headerId );
				}
				if ( !panelId ) {
					panelId = accordionId + "-panel-" + i;
					panel.attr( "id", panelId );
				}
				header.attr( "aria-controls", panelId );
				panel.attr( "aria-labelledby", headerId );
			})
			.next()
				.attr( "role", "tabpanel" );

		this.headers
			.not( this.active )
			.attr({
				"aria-selected": "false",
				tabIndex: -1
			})
			.next()
				.attr({
					"aria-expanded": "false",
					"aria-hidden": "true"
				})
				.hide();

		// make sure at least one header is in the tab order
		if ( !this.active.length ) {
			this.headers.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active.attr({
				"aria-selected": "true",
				tabIndex: 0
			})
			.next()
				.attr({
					"aria-expanded": "true",
					"aria-hidden": "false"
				});
		}

		this._createIcons();

		this._setupEvents( options.event );

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			this.element.siblings( ":visible" ).each(function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			});

			this.headers.each(function() {
				maxHeight -= $( this ).outerHeight( true );
			});

			this.headers.next()
				.each(function() {
					$( this ).height( Math.max( 0, maxHeight -
						$( this ).innerHeight() + $( this ).height() ) );
				})
				.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.headers.next()
				.each(function() {
					maxHeight = Math.max( maxHeight, $( this ).css( "height", "" ).height() );
				})
				.height( maxHeight );
		}
	},

	_activate: function( index ) {
		var active = this._findActive( index )[ 0 ];

		// trying to activate the already active panel
		if ( active === this.active[ 0 ] ) {
			return;
		}

		// trying to collapse, simulate a click on the currently active header
		active = active || this.active[ 0 ];

		this._eventHandler({
			target: active,
			currentTarget: active,
			preventDefault: $.noop
		});
	},

	_findActive: function( selector ) {
		return typeof selector === "number" ? this.headers.eq( selector ) : $();
	},

	_setupEvents: function( event ) {
		var events = {
			keydown: "_keydown"
		};
		if ( event ) {
			$.each( event.split(" "), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			});
		}

		this._off( this.headers.add( this.headers.next() ) );
		this._on( this.headers, events );
		this._on( this.headers.next(), { keydown: "_panelKeyDown" });
		this._hoverable( this.headers );
		this._focusable( this.headers );
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			clicked = $( event.currentTarget ),
			clickedIsActive = clicked[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : clicked.next(),
			toHide = active.next(),
			eventData = {
				oldHeader: active,
				oldPanel: toHide,
				newHeader: collapsing ? $() : clicked,
				newPanel: toShow
			};

		event.preventDefault();

		if (
				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||
				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.headers.index( clicked );

		// when the call to ._toggle() comes after the class changes
		// it causes a very odd bug in IE 8 (see #6720)
		this.active = clickedIsActive ? $() : clicked;
		this._toggle( eventData );

		// switch classes
		// corner classes on the previously active header stay after the animation
		active.removeClass( "ui-accordion-header-active ui-state-active" );
		if ( options.icons ) {
			active.children( ".ui-accordion-header-icon" )
				.removeClass( options.icons.activeHeader )
				.addClass( options.icons.header );
		}

		if ( !clickedIsActive ) {
			clicked
				.removeClass( "ui-corner-all" )
				.addClass( "ui-accordion-header-active ui-state-active ui-corner-top" );
			if ( options.icons ) {
				clicked.children( ".ui-accordion-header-icon" )
					.removeClass( options.icons.header )
					.addClass( options.icons.activeHeader );
			}

			clicked
				.next()
				.addClass( "ui-accordion-content-active" );
		}
	},

	_toggle: function( data ) {
		var toShow = data.newPanel,
			toHide = this.prevShow.length ? this.prevShow : data.oldPanel;

		// handle activating a panel during the animation for another activation
		this.prevShow.add( this.prevHide ).stop( true, true );
		this.prevShow = toShow;
		this.prevHide = toHide;

		if ( this.options.animate ) {
			this._animate( toShow, toHide, data );
		} else {
			toHide.hide();
			toShow.show();
			this._toggleComplete( data );
		}

		toHide.attr({
			"aria-expanded": "false",
			"aria-hidden": "true"
		});
		toHide.prev().attr( "aria-selected", "false" );
		// if we're switching panels, remove the old header from the tab order
		// if we're opening from collapsed state, remove the previous header from the tab order
		// if we're collapsing, then keep the collapsing header in the tab order
		if ( toShow.length && toHide.length ) {
			toHide.prev().attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.headers.filter(function() {
				return $( this ).attr( "tabIndex" ) === 0;
			})
			.attr( "tabIndex", -1 );
		}

		toShow
			.attr({
				"aria-expanded": "true",
				"aria-hidden": "false"
			})
			.prev()
				.attr({
					"aria-selected": "true",
					tabIndex: 0
				});
	},

	_animate: function( toShow, toHide, data ) {
		var total, easing, duration,
			that = this,
			adjust = 0,
			down = toShow.length &&
				( !toHide.length || ( toShow.index() < toHide.index() ) ),
			animate = this.options.animate || {},
			options = down && animate.down || animate,
			complete = function() {
				that._toggleComplete( data );
			};

		if ( typeof options === "number" ) {
			duration = options;
		}
		if ( typeof options === "string" ) {
			easing = options;
		}
		// fall back from options to animation in case of partial down settings
		easing = easing || options.easing || animate.easing;
		duration = duration || options.duration || animate.duration;

		if ( !toHide.length ) {
			return toShow.animate( showProps, duration, easing, complete );
		}
		if ( !toShow.length ) {
			return toHide.animate( hideProps, duration, easing, complete );
		}

		total = toShow.show().outerHeight();
		toHide.animate( hideProps, {
			duration: duration,
			easing: easing,
			step: function( now, fx ) {
				fx.now = Math.round( now );
			}
		});
		toShow
			.hide()
			.animate( showProps, {
				duration: duration,
				easing: easing,
				complete: complete,
				step: function( now, fx ) {
					fx.now = Math.round( now );
					if ( fx.prop !== "height" ) {
						adjust += fx.now;
					} else if ( that.options.heightStyle !== "content" ) {
						fx.now = Math.round( total - toHide.outerHeight() - adjust );
						adjust = 0;
					}
				}
			});
	},

	_toggleComplete: function( data ) {
		var toHide = data.oldPanel;

		toHide
			.removeClass( "ui-accordion-content-active" )
			.prev()
				.removeClass( "ui-corner-top" )
				.addClass( "ui-corner-all" );

		// Work around for rendering bug in IE (#5421)
		if ( toHide.length ) {
			toHide.parent()[0].className = toHide.parent()[0].className;
		}

		this._trigger( "activate", null, data );
	}
});

})( jQuery );

(function( $, undefined ) {

// used to prevent race conditions with remote data sources
var requestIndex = 0;

$.widget( "ui.autocomplete", {
	version: "1.10.0",
	defaultElement: "<input>",
	options: {
		appendTo: null,
		autoFocus: false,
		delay: 300,
		minLength: 1,
		position: {
			my: "left top",
			at: "left bottom",
			collision: "none"
		},
		source: null,

		// callbacks
		change: null,
		close: null,
		focus: null,
		open: null,
		response: null,
		search: null,
		select: null
	},

	pending: 0,

	_create: function() {
		// Some browsers only repeat keydown events, not keypress events,
		// so we use the suppressKeyPress flag to determine if we've already
		// handled the keydown event. #7269
		// Unfortunately the code for & in keypress is the same as the up arrow,
		// so we use the suppressKeyPressRepeat flag to avoid handling keypress
		// events when we know the keydown event was used to modify the
		// search term. #7799
		var suppressKeyPress, suppressKeyPressRepeat, suppressInput;

		this.isMultiLine = this._isMultiLine();
		this.valueMethod = this.element[ this.element.is( "input,textarea" ) ? "val" : "text" ];
		this.isNewMenu = true;

		this.element
			.addClass( "ui-autocomplete-input" )
			.attr( "autocomplete", "off" );

		this._on( this.element, {
			keydown: function( event ) {
				/*jshint maxcomplexity:15*/
				if ( this.element.prop( "readOnly" ) ) {
					suppressKeyPress = true;
					suppressInput = true;
					suppressKeyPressRepeat = true;
					return;
				}

				suppressKeyPress = false;
				suppressInput = false;
				suppressKeyPressRepeat = false;
				var keyCode = $.ui.keyCode;
				switch( event.keyCode ) {
				case keyCode.PAGE_UP:
					suppressKeyPress = true;
					this._move( "previousPage", event );
					break;
				case keyCode.PAGE_DOWN:
					suppressKeyPress = true;
					this._move( "nextPage", event );
					break;
				case keyCode.UP:
					suppressKeyPress = true;
					this._keyEvent( "previous", event );
					break;
				case keyCode.DOWN:
					suppressKeyPress = true;
					this._keyEvent( "next", event );
					break;
				case keyCode.ENTER:
				case keyCode.NUMPAD_ENTER:
					// when menu is open and has focus
					if ( this.menu.active ) {
						// #6055 - Opera still allows the keypress to occur
						// which causes forms to submit
						suppressKeyPress = true;
						event.preventDefault();
						this.menu.select( event );
					}
					break;
				case keyCode.TAB:
					if ( this.menu.active ) {
						this.menu.select( event );
					}
					break;
				case keyCode.ESCAPE:
					if ( this.menu.element.is( ":visible" ) ) {
						this._value( this.term );
						this.close( event );
						// Different browsers have different default behavior for escape
						// Single press can mean undo or clear
						// Double press in IE means clear the whole form
						event.preventDefault();
					}
					break;
				default:
					suppressKeyPressRepeat = true;
					// search timeout should be triggered before the input value is changed
					this._searchTimeout( event );
					break;
				}
			},
			keypress: function( event ) {
				if ( suppressKeyPress ) {
					suppressKeyPress = false;
					event.preventDefault();
					return;
				}
				if ( suppressKeyPressRepeat ) {
					return;
				}

				// replicate some key handlers to allow them to repeat in Firefox and Opera
				var keyCode = $.ui.keyCode;
				switch( event.keyCode ) {
				case keyCode.PAGE_UP:
					this._move( "previousPage", event );
					break;
				case keyCode.PAGE_DOWN:
					this._move( "nextPage", event );
					break;
				case keyCode.UP:
					this._keyEvent( "previous", event );
					break;
				case keyCode.DOWN:
					this._keyEvent( "next", event );
					break;
				}
			},
			input: function( event ) {
				if ( suppressInput ) {
					suppressInput = false;
					event.preventDefault();
					return;
				}
				this._searchTimeout( event );
			},
			focus: function() {
				this.selectedItem = null;
				this.previous = this._value();
			},
			blur: function( event ) {
				if ( this.cancelBlur ) {
					delete this.cancelBlur;
					return;
				}

				clearTimeout( this.searching );
				this.close( event );
				this._change( event );
			}
		});

		this._initSource();
		this.menu = $( "<ul>" )
			.addClass( "ui-autocomplete" )
			.appendTo( this._appendTo() )
			.menu({
				// custom key handling for now
				input: $(),
				// disable ARIA support, the live region takes care of that
				role: null
			})
			.zIndex( this.element.zIndex() + 1 )
			.hide()
			.data( "ui-menu" );

		this._on( this.menu.element, {
			mousedown: function( event ) {
				// prevent moving focus out of the text field
				event.preventDefault();

				// IE doesn't prevent moving focus even with event.preventDefault()
				// so we set a flag to know when we should ignore the blur event
				this.cancelBlur = true;
				this._delay(function() {
					delete this.cancelBlur;
				});

				// clicking on the scrollbar causes focus to shift to the body
				// but we can't detect a mouseup or a click immediately afterward
				// so we have to track the next mousedown and close the menu if
				// the user clicks somewhere outside of the autocomplete
				var menuElement = this.menu.element[ 0 ];
				if ( !$( event.target ).closest( ".ui-menu-item" ).length ) {
					this._delay(function() {
						var that = this;
						this.document.one( "mousedown", function( event ) {
							if ( event.target !== that.element[ 0 ] &&
									event.target !== menuElement &&
									!$.contains( menuElement, event.target ) ) {
								that.close();
							}
						});
					});
				}
			},
			menufocus: function( event, ui ) {
				// #7024 - Prevent accidental activation of menu items in Firefox
				if ( this.isNewMenu ) {
					this.isNewMenu = false;
					if ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {
						this.menu.blur();

						this.document.one( "mousemove", function() {
							$( event.target ).trigger( event.originalEvent );
						});

						return;
					}
				}

				var item = ui.item.data( "ui-autocomplete-item" );
				if ( false !== this._trigger( "focus", event, { item: item } ) ) {
					// use value to match what will end up in the input, if it was a key event
					if ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {
						this._value( item.value );
					}
				} else {
					// Normally the input is populated with the item's value as the
					// menu is navigated, causing screen readers to notice a change and
					// announce the item. Since the focus event was canceled, this doesn't
					// happen, so we update the live region so that screen readers can
					// still notice the change and announce it.
					this.liveRegion.text( item.value );
				}
			},
			menuselect: function( event, ui ) {
				var item = ui.item.data( "ui-autocomplete-item" ),
					previous = this.previous;

				// only trigger when focus was lost (click on menu)
				if ( this.element[0] !== this.document[0].activeElement ) {
					this.element.focus();
					this.previous = previous;
					// #6109 - IE triggers two focus events and the second
					// is asynchronous, so we need to reset the previous
					// term synchronously and asynchronously :-(
					this._delay(function() {
						this.previous = previous;
						this.selectedItem = item;
					});
				}

				if ( false !== this._trigger( "select", event, { item: item } ) ) {
					this._value( item.value );
				}
				// reset the term after the select event
				// this allows custom select handling to work properly
				this.term = this._value();

				this.close( event );
				this.selectedItem = item;
			}
		});

		this.liveRegion = $( "<span>", {
				role: "status",
				"aria-live": "polite"
			})
			.addClass( "ui-helper-hidden-accessible" )
			.insertAfter( this.element );

		// turning off autocomplete prevents the browser from remembering the
		// value when navigating through history, so we re-enable autocomplete
		// if the page is unloaded before the widget is destroyed. #7790
		this._on( this.window, {
			beforeunload: function() {
				this.element.removeAttr( "autocomplete" );
			}
		});
	},

	_destroy: function() {
		clearTimeout( this.searching );
		this.element
			.removeClass( "ui-autocomplete-input" )
			.removeAttr( "autocomplete" );
		this.menu.element.remove();
		this.liveRegion.remove();
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "source" ) {
			this._initSource();
		}
		if ( key === "appendTo" ) {
			this.menu.element.appendTo( this._appendTo() );
		}
		if ( key === "disabled" && value && this.xhr ) {
			this.xhr.abort();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;

		if ( element ) {
			element = element.jquery || element.nodeType ?
				$( element ) :
				this.document.find( element ).eq( 0 );
		}

		if ( !element ) {
			element = this.element.closest( ".ui-front" );
		}

		if ( !element.length ) {
			element = this.document[0].body;
		}

		return element;
	},

	_isMultiLine: function() {
		// Textareas are always multi-line
		if ( this.element.is( "textarea" ) ) {
			return true;
		}
		// Inputs are always single-line, even if inside a contentEditable element
		// IE also treats inputs as contentEditable
		if ( this.element.is( "input" ) ) {
			return false;
		}
		// All other element types are determined by whether or not they're contentEditable
		return this.element.prop( "isContentEditable" );
	},

	_initSource: function() {
		var array, url,
			that = this;
		if ( $.isArray(this.options.source) ) {
			array = this.options.source;
			this.source = function( request, response ) {
				response( $.ui.autocomplete.filter( array, request.term ) );
			};
		} else if ( typeof this.options.source === "string" ) {
			url = this.options.source;
			this.source = function( request, response ) {
				if ( that.xhr ) {
					that.xhr.abort();
				}
				that.xhr = $.ajax({
					url: url,
					data: request,
					dataType: "json",
					success: function( data ) {
						response( data );
					},
					error: function() {
						response( [] );
					}
				});
			};
		} else {
			this.source = this.options.source;
		}
	},

	_searchTimeout: function( event ) {
		clearTimeout( this.searching );
		this.searching = this._delay(function() {
			// only search if the value has changed
			if ( this.term !== this._value() ) {
				this.selectedItem = null;
				this.search( null, event );
			}
		}, this.options.delay );
	},

	search: function( value, event ) {
		value = value != null ? value : this._value();

		// always save the actual value, not the one passed as an argument
		this.term = this._value();

		if ( value.length < this.options.minLength ) {
			return this.close( event );
		}

		if ( this._trigger( "search", event ) === false ) {
			return;
		}

		return this._search( value );
	},

	_search: function( value ) {
		this.pending++;
		this.element.addClass( "ui-autocomplete-loading" );
		this.cancelSearch = false;

		this.source( { term: value }, this._response() );
	},

	_response: function() {
		var that = this,
			index = ++requestIndex;

		return function( content ) {
			if ( index === requestIndex ) {
				that.__response( content );
			}

			that.pending--;
			if ( !that.pending ) {
				that.element.removeClass( "ui-autocomplete-loading" );
			}
		};
	},

	__response: function( content ) {
		if ( content ) {
			content = this._normalize( content );
		}
		this._trigger( "response", null, { content: content } );
		if ( !this.options.disabled && content && content.length && !this.cancelSearch ) {
			this._suggest( content );
			this._trigger( "open" );
		} else {
			// use ._close() instead of .close() so we don't cancel future searches
			this._close();
		}
	},

	close: function( event ) {
		this.cancelSearch = true;
		this._close( event );
	},

	_close: function( event ) {
		if ( this.menu.element.is( ":visible" ) ) {
			this.menu.element.hide();
			this.menu.blur();
			this.isNewMenu = true;
			this._trigger( "close", event );
		}
	},

	_change: function( event ) {
		if ( this.previous !== this._value() ) {
			this._trigger( "change", event, { item: this.selectedItem } );
		}
	},

	_normalize: function( items ) {
		// assume all items have the right format when the first item is complete
		if ( items.length && items[0].label && items[0].value ) {
			return items;
		}
		return $.map( items, function( item ) {
			if ( typeof item === "string" ) {
				return {
					label: item,
					value: item
				};
			}
			return $.extend({
				label: item.label || item.value,
				value: item.value || item.label
			}, item );
		});
	},

	_suggest: function( items ) {
		var ul = this.menu.element
			.empty()
			.zIndex( this.element.zIndex() + 1 );
		this._renderMenu( ul, items );
		this.menu.refresh();

		// size and position menu
		ul.show();
		this._resizeMenu();
		ul.position( $.extend({
			of: this.element
		}, this.options.position ));

		if ( this.options.autoFocus ) {
			this.menu.next();
		}
	},

	_resizeMenu: function() {
		var ul = this.menu.element;
		ul.outerWidth( Math.max(
			// Firefox wraps long text (possibly a rounding bug)
			// so we add 1px to avoid the wrapping (#7513)
			ul.width( "" ).outerWidth() + 1,
			this.element.outerWidth()
		) );
	},

	_renderMenu: function( ul, items ) {
		var that = this;
		$.each( items, function( index, item ) {
			that._renderItemData( ul, item );
		});
	},

	_renderItemData: function( ul, item ) {
		return this._renderItem( ul, item ).data( "ui-autocomplete-item", item );
	},

	_renderItem: function( ul, item ) {
		return $( "<li>" )
			.append( $( "<a>" ).text( item.label ) )
			.appendTo( ul );
	},

	_move: function( direction, event ) {
		if ( !this.menu.element.is( ":visible" ) ) {
			this.search( null, event );
			return;
		}
		if ( this.menu.isFirstItem() && /^previous/.test( direction ) ||
				this.menu.isLastItem() && /^next/.test( direction ) ) {
			this._value( this.term );
			this.menu.blur();
			return;
		}
		this.menu[ direction ]( event );
	},

	widget: function() {
		return this.menu.element;
	},

	_value: function() {
		return this.valueMethod.apply( this.element, arguments );
	},

	_keyEvent: function( keyEvent, event ) {
		if ( !this.isMultiLine || this.menu.element.is( ":visible" ) ) {
			this._move( keyEvent, event );

			// prevents moving cursor to beginning/end of the text field in some browsers
			event.preventDefault();
		}
	}
});

$.extend( $.ui.autocomplete, {
	escapeRegex: function( value ) {
		return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
	},
	filter: function(array, term) {
		var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), "i" );
		return $.grep( array, function(value) {
			return matcher.test( value.label || value.value || value );
		});
	}
});


// live region extension, adding a `messages` option
// NOTE: This is an experimental API. We are still investigating
// a full solution for string manipulation and internationalization.
$.widget( "ui.autocomplete", $.ui.autocomplete, {
	options: {
		messages: {
			noResults: "No search results.",
			results: function( amount ) {
				return amount + ( amount > 1 ? " results are" : " result is" ) +
					" available, use up and down arrow keys to navigate.";
			}
		}
	},

	__response: function( content ) {
		var message;
		this._superApply( arguments );
		if ( this.options.disabled || this.cancelSearch ) {
			return;
		}
		if ( content && content.length ) {
			message = this.options.messages.results( content.length );
		} else {
			message = this.options.messages.noResults;
		}
		this.liveRegion.text( message );
	}
});

}( jQuery ));

(function( $, undefined ) {

var lastActive, startXPos, startYPos, clickDragged,
	baseClasses = "ui-button ui-widget ui-state-default ui-corner-all",
	stateClasses = "ui-state-hover ui-state-active ",
	typeClasses = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
	formResetHandler = function() {
		var buttons = $( this ).find( ":ui-button" );
		setTimeout(function() {
			buttons.button( "refresh" );
		}, 1 );
	},
	radioGroup = function( radio ) {
		var name = radio.name,
			form = radio.form,
			radios = $( [] );
		if ( name ) {
			name = name.replace( /'/g, "\\'" );
			if ( form ) {
				radios = $( form ).find( "[name='" + name + "']" );
			} else {
				radios = $( "[name='" + name + "']", radio.ownerDocument )
					.filter(function() {
						return !this.form;
					});
			}
		}
		return radios;
	};

$.widget( "ui.button", {
	version: "1.10.0",
	defaultElement: "<button>",
	options: {
		disabled: null,
		text: true,
		label: null,
		icons: {
			primary: null,
			secondary: null
		}
	},
	_create: function() {
		this.element.closest( "form" )
			.unbind( "reset" + this.eventNamespace )
			.bind( "reset" + this.eventNamespace, formResetHandler );

		if ( typeof this.options.disabled !== "boolean" ) {
			this.options.disabled = !!this.element.prop( "disabled" );
		} else {
			this.element.prop( "disabled", this.options.disabled );
		}

		this._determineButtonType();
		this.hasTitle = !!this.buttonElement.attr( "title" );

		var that = this,
			options = this.options,
			toggleButton = this.type === "checkbox" || this.type === "radio",
			activeClass = !toggleButton ? "ui-state-active" : "",
			focusClass = "ui-state-focus";

		if ( options.label === null ) {
			options.label = (this.type === "input" ? this.buttonElement.val() : this.buttonElement.html());
		}

		this._hoverable( this.buttonElement );

		this.buttonElement
			.addClass( baseClasses )
			.attr( "role", "button" )
			.bind( "mouseenter" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return;
				}
				if ( this === lastActive ) {
					$( this ).addClass( "ui-state-active" );
				}
			})
			.bind( "mouseleave" + this.eventNamespace, function() {
				if ( options.disabled ) {
					return;
				}
				$( this ).removeClass( activeClass );
			})
			.bind( "click" + this.eventNamespace, function( event ) {
				if ( options.disabled ) {
					event.preventDefault();
					event.stopImmediatePropagation();
				}
			});

		this.element
			.bind( "focus" + this.eventNamespace, function() {
				// no need to check disabled, focus won't be triggered anyway
				that.buttonElement.addClass( focusClass );
			})
			.bind( "blur" + this.eventNamespace, function() {
				that.buttonElement.removeClass( focusClass );
			});

		if ( toggleButton ) {
			this.element.bind( "change" + this.eventNamespace, function() {
				if ( clickDragged ) {
					return;
				}
				that.refresh();
			});
			// if mouse moves between mousedown and mouseup (drag) set clickDragged flag
			// prevents issue where button state changes but checkbox/radio checked state
			// does not in Firefox (see ticket #6970)
			this.buttonElement
				.bind( "mousedown" + this.eventNamespace, function( event ) {
					if ( options.disabled ) {
						return;
					}
					clickDragged = false;
					startXPos = event.pageX;
					startYPos = event.pageY;
				})
				.bind( "mouseup" + this.eventNamespace, function( event ) {
					if ( options.disabled ) {
						return;
					}
					if ( startXPos !== event.pageX || startYPos !== event.pageY ) {
						clickDragged = true;
					}
			});
		}

		if ( this.type === "checkbox" ) {
			this.buttonElement.bind( "click" + this.eventNamespace, function() {
				if ( options.disabled || clickDragged ) {
					return false;
				}
			});
		} else if ( this.type === "radio" ) {
			this.buttonElement.bind( "click" + this.eventNamespace, function() {
				if ( options.disabled || clickDragged ) {
					return false;
				}
				$( this ).addClass( "ui-state-active" );
				that.buttonElement.attr( "aria-pressed", "true" );

				var radio = that.element[ 0 ];
				radioGroup( radio )
					.not( radio )
					.map(function() {
						return $( this ).button( "widget" )[ 0 ];
					})
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", "false" );
			});
		} else {
			this.buttonElement
				.bind( "mousedown" + this.eventNamespace, function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).addClass( "ui-state-active" );
					lastActive = this;
					that.document.one( "mouseup", function() {
						lastActive = null;
					});
				})
				.bind( "mouseup" + this.eventNamespace, function() {
					if ( options.disabled ) {
						return false;
					}
					$( this ).removeClass( "ui-state-active" );
				})
				.bind( "keydown" + this.eventNamespace, function(event) {
					if ( options.disabled ) {
						return false;
					}
					if ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {
						$( this ).addClass( "ui-state-active" );
					}
				})
				// see #8559, we bind to blur here in case the button element loses
				// focus between keydown and keyup, it would be left in an "active" state
				.bind( "keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
					$( this ).removeClass( "ui-state-active" );
				});

			if ( this.buttonElement.is("a") ) {
				this.buttonElement.keyup(function(event) {
					if ( event.keyCode === $.ui.keyCode.SPACE ) {
						// TODO pass through original event correctly (just as 2nd argument doesn't work)
						$( this ).click();
					}
				});
			}
		}

		// TODO: pull out $.Widget's handling for the disabled option into
		// $.Widget.prototype._setOptionDisabled so it's easy to proxy and can
		// be overridden by individual plugins
		this._setOption( "disabled", options.disabled );
		this._resetButton();
	},

	_determineButtonType: function() {
		var ancestor, labelSelector, checked;

		if ( this.element.is("[type=checkbox]") ) {
			this.type = "checkbox";
		} else if ( this.element.is("[type=radio]") ) {
			this.type = "radio";
		} else if ( this.element.is("input") ) {
			this.type = "input";
		} else {
			this.type = "button";
		}

		if ( this.type === "checkbox" || this.type === "radio" ) {
			// we don't search against the document in case the element
			// is disconnected from the DOM
			ancestor = this.element.parents().last();
			labelSelector = "label[for='" + this.element.attr("id") + "']";
			this.buttonElement = ancestor.find( labelSelector );
			if ( !this.buttonElement.length ) {
				ancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();
				this.buttonElement = ancestor.filter( labelSelector );
				if ( !this.buttonElement.length ) {
					this.buttonElement = ancestor.find( labelSelector );
				}
			}
			this.element.addClass( "ui-helper-hidden-accessible" );

			checked = this.element.is( ":checked" );
			if ( checked ) {
				this.buttonElement.addClass( "ui-state-active" );
			}
			this.buttonElement.prop( "aria-pressed", checked );
		} else {
			this.buttonElement = this.element;
		}
	},

	widget: function() {
		return this.buttonElement;
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-helper-hidden-accessible" );
		this.buttonElement
			.removeClass( baseClasses + " " + stateClasses + " " + typeClasses )
			.removeAttr( "role" )
			.removeAttr( "aria-pressed" )
			.html( this.buttonElement.find(".ui-button-text").html() );

		if ( !this.hasTitle ) {
			this.buttonElement.removeAttr( "title" );
		}
	},

	_setOption: function( key, value ) {
		this._super( key, value );
		if ( key === "disabled" ) {
			if ( value ) {
				this.element.prop( "disabled", true );
			} else {
				this.element.prop( "disabled", false );
			}
			return;
		}
		this._resetButton();
	},

	refresh: function() {
		//See #8237 & #8828
		var isDisabled = this.element.is( "input, button" ) ? this.element.is( ":disabled" ) : this.element.hasClass( "ui-button-disabled" );

		if ( isDisabled !== this.options.disabled ) {
			this._setOption( "disabled", isDisabled );
		}
		if ( this.type === "radio" ) {
			radioGroup( this.element[0] ).each(function() {
				if ( $( this ).is( ":checked" ) ) {
					$( this ).button( "widget" )
						.addClass( "ui-state-active" )
						.attr( "aria-pressed", "true" );
				} else {
					$( this ).button( "widget" )
						.removeClass( "ui-state-active" )
						.attr( "aria-pressed", "false" );
				}
			});
		} else if ( this.type === "checkbox" ) {
			if ( this.element.is( ":checked" ) ) {
				this.buttonElement
					.addClass( "ui-state-active" )
					.attr( "aria-pressed", "true" );
			} else {
				this.buttonElement
					.removeClass( "ui-state-active" )
					.attr( "aria-pressed", "false" );
			}
		}
	},

	_resetButton: function() {
		if ( this.type === "input" ) {
			if ( this.options.label ) {
				this.element.val( this.options.label );
			}
			return;
		}
		var buttonElement = this.buttonElement.removeClass( typeClasses ),
			buttonText = $( "<span></span>", this.document[0] )
				.addClass( "ui-button-text" )
				.html( this.options.label )
				.appendTo( buttonElement.empty() )
				.text(),
			icons = this.options.icons,
			multipleIcons = icons.primary && icons.secondary,
			buttonClasses = [];

		if ( icons.primary || icons.secondary ) {
			if ( this.options.text ) {
				buttonClasses.push( "ui-button-text-icon" + ( multipleIcons ? "s" : ( icons.primary ? "-primary" : "-secondary" ) ) );
			}

			if ( icons.primary ) {
				buttonElement.prepend( "<span class='ui-button-icon-primary ui-icon " + icons.primary + "'></span>" );
			}

			if ( icons.secondary ) {
				buttonElement.append( "<span class='ui-button-icon-secondary ui-icon " + icons.secondary + "'></span>" );
			}

			if ( !this.options.text ) {
				buttonClasses.push( multipleIcons ? "ui-button-icons-only" : "ui-button-icon-only" );

				if ( !this.hasTitle ) {
					buttonElement.attr( "title", $.trim( buttonText ) );
				}
			}
		} else {
			buttonClasses.push( "ui-button-text-only" );
		}
		buttonElement.addClass( buttonClasses.join( " " ) );
	}
});

$.widget( "ui.buttonset", {
	version: "1.10.0",
	options: {
		items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
	},

	_create: function() {
		this.element.addClass( "ui-buttonset" );
	},

	_init: function() {
		this.refresh();
	},

	_setOption: function( key, value ) {
		if ( key === "disabled" ) {
			this.buttons.button( "option", key, value );
		}

		this._super( key, value );
	},

	refresh: function() {
		var rtl = this.element.css( "direction" ) === "rtl";

		this.buttons = this.element.find( this.options.items )
			.filter( ":ui-button" )
				.button( "refresh" )
			.end()
			.not( ":ui-button" )
				.button()
			.end()
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-all ui-corner-left ui-corner-right" )
				.filter( ":first" )
					.addClass( rtl ? "ui-corner-right" : "ui-corner-left" )
				.end()
				.filter( ":last" )
					.addClass( rtl ? "ui-corner-left" : "ui-corner-right" )
				.end()
			.end();
	},

	_destroy: function() {
		this.element.removeClass( "ui-buttonset" );
		this.buttons
			.map(function() {
				return $( this ).button( "widget" )[ 0 ];
			})
				.removeClass( "ui-corner-left ui-corner-right" )
			.end()
			.button( "destroy" );
	}
});

}( jQuery ) );

(function( $, undefined ) {

$.extend($.ui, { datepicker: { version: "1.10.0" } });

var PROP_NAME = "datepicker",
	dpuuid = new Date().getTime(),
	instActive;

/* Date picker manager.
   Use the singleton instance of this class, $.datepicker, to interact with the date picker.
   Settings for (groups of) date pickers are maintained in an instance object,
   allowing multiple different settings on the same page. */

function Datepicker() {
	this._curInst = null; // The current instance in use
	this._keyEvent = false; // If the last event was a key event
	this._disabledInputs = []; // List of date picker inputs that have been disabled
	this._datepickerShowing = false; // True if the popup picker is showing , false if not
	this._inDialog = false; // True if showing within a "dialog", false if not
	this._mainDivId = "ui-datepicker-div"; // The ID of the main datepicker division
	this._inlineClass = "ui-datepicker-inline"; // The name of the inline marker class
	this._appendClass = "ui-datepicker-append"; // The name of the append marker class
	this._triggerClass = "ui-datepicker-trigger"; // The name of the trigger marker class
	this._dialogClass = "ui-datepicker-dialog"; // The name of the dialog marker class
	this._disableClass = "ui-datepicker-disabled"; // The name of the disabled covering marker class
	this._unselectableClass = "ui-datepicker-unselectable"; // The name of the unselectable cell marker class
	this._currentClass = "ui-datepicker-current-day"; // The name of the current day marker class
	this._dayOverClass = "ui-datepicker-days-cell-over"; // The name of the day hover marker class
	this.regional = []; // Available regional settings, indexed by language code
	this.regional[""] = { // Default regional settings
		closeText: "Done", // Display text for close link
		prevText: "Prev", // Display text for previous month link
		nextText: "Next", // Display text for next month link
		currentText: "Today", // Display text for current month link
		monthNames: ["January","February","March","April","May","June",
			"July","August","September","October","November","December"], // Names of months for drop-down and formatting
		monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], // For formatting
		dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], // For formatting
		dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], // For formatting
		dayNamesMin: ["Su","Mo","Tu","We","Th","Fr","Sa"], // Column headings for days starting at Sunday
		weekHeader: "Wk", // Column header for week of the year
		dateFormat: "mm/dd/yy", // See format options on parseDate
		firstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...
		isRTL: false, // True if right-to-left language, false if left-to-right
		showMonthAfterYear: false, // True if the year select precedes month, false for month then year
		yearSuffix: "" // Additional text to append to the year in the month headers
	};
	this._defaults = { // Global defaults for all the date picker instances
		showOn: "focus", // "focus" for popup on focus,
			// "button" for trigger button, or "both" for either
		showAnim: "fadeIn", // Name of jQuery animation for popup
		showOptions: {}, // Options for enhanced animations
		defaultDate: null, // Used when field is blank: actual date,
			// +/-number for offset from today, null for today
		appendText: "", // Display text following the input box, e.g. showing the format
		buttonText: "...", // Text for trigger button
		buttonImage: "", // URL for trigger button image
		buttonImageOnly: false, // True if the image appears alone, false if it appears on a button
		hideIfNoPrevNext: false, // True to hide next/previous month links
			// if not applicable, false to just disable them
		navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links
		gotoCurrent: false, // True if today link goes back to current selection instead
		changeMonth: false, // True if month can be selected directly, false if only prev/next
		changeYear: false, // True if year can be selected directly, false if only prev/next
		yearRange: "c-10:c+10", // Range of years to display in drop-down,
			// either relative to today's year (-nn:+nn), relative to currently displayed year
			// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)
		showOtherMonths: false, // True to show dates in other months, false to leave blank
		selectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable
		showWeek: false, // True to show week of the year, false to not show it
		calculateWeek: this.iso8601Week, // How to calculate the week of the year,
			// takes a Date and returns the number of the week for it
		shortYearCutoff: "+10", // Short year values < this are in the current century,
			// > this are in the previous century,
			// string value starting with "+" for current year + value
		minDate: null, // The earliest selectable date, or null for no limit
		maxDate: null, // The latest selectable date, or null for no limit
		duration: "fast", // Duration of display/closure
		beforeShowDay: null, // Function that takes a date and returns an array with
			// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or "",
			// [2] = cell title (optional), e.g. $.datepicker.noWeekends
		beforeShow: null, // Function that takes an input field and
			// returns a set of custom settings for the date picker
		onSelect: null, // Define a callback function when a date is selected
		onChangeMonthYear: null, // Define a callback function when the month or year is changed
		onClose: null, // Define a callback function when the datepicker is closed
		numberOfMonths: 1, // Number of months to show at a time
		showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)
		stepMonths: 1, // Number of months to step back/forward
		stepBigMonths: 12, // Number of months to step back/forward for the big links
		altField: "", // Selector for an alternate field to store selected dates into
		altFormat: "", // The date format to use for the alternate field
		constrainInput: true, // The input is constrained by the current date format
		showButtonPanel: false, // True to show button panel, false to not show it
		autoSize: false, // True to size the input for the date format, false to leave as is
		disabled: false // The initial disabled state
	};
	$.extend(this._defaults, this.regional[""]);
	this.dpDiv = bindHover($("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
}

$.extend(Datepicker.prototype, {
	/* Class name added to elements to indicate already configured with a date picker. */
	markerClassName: "hasDatepicker",

	//Keep track of the maximum number of rows displayed (see #7043)
	maxRows: 4,

	// TODO rename to "widget" when switching to widget factory
	_widgetDatepicker: function() {
		return this.dpDiv;
	},

	/* Override the default settings for all instances of the date picker.
	 * @param  settings  object - the new settings to use as defaults (anonymous object)
	 * @return the manager object
	 */
	setDefaults: function(settings) {
		extendRemove(this._defaults, settings || {});
		return this;
	},

	/* Attach the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 * @param  settings  object - the new settings to use for this date picker instance (anonymous)
	 */
	_attachDatepicker: function(target, settings) {
		var nodeName, inline, inst;
		nodeName = target.nodeName.toLowerCase();
		inline = (nodeName === "div" || nodeName === "span");
		if (!target.id) {
			this.uuid += 1;
			target.id = "dp" + this.uuid;
		}
		inst = this._newInst($(target), inline);
		inst.settings = $.extend({}, settings || {});
		if (nodeName === "input") {
			this._connectDatepicker(target, inst);
		} else if (inline) {
			this._inlineDatepicker(target, inst);
		}
	},

	/* Create a new instance object. */
	_newInst: function(target, inline) {
		var id = target[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"); // escape jQuery meta chars
		return {id: id, input: target, // associated target
			selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection
			drawMonth: 0, drawYear: 0, // month being drawn
			inline: inline, // is datepicker inline or not
			dpDiv: (!inline ? this.dpDiv : // presentation div
			bindHover($("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};
	},

	/* Attach the date picker to an input field. */
	_connectDatepicker: function(target, inst) {
		var input = $(target);
		inst.append = $([]);
		inst.trigger = $([]);
		if (input.hasClass(this.markerClassName)) {
			return;
		}
		this._attachments(input, inst);
		input.addClass(this.markerClassName).keydown(this._doKeyDown).
			keypress(this._doKeyPress).keyup(this._doKeyUp);
		this._autoSize(inst);
		$.data(target, PROP_NAME, inst);
		//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)
		if( inst.settings.disabled ) {
			this._disableDatepicker( target );
		}
	},

	/* Make attachments based on settings. */
	_attachments: function(input, inst) {
		var showOn, buttonText, buttonImage,
			appendText = this._get(inst, "appendText"),
			isRTL = this._get(inst, "isRTL");

		if (inst.append) {
			inst.append.remove();
		}
		if (appendText) {
			inst.append = $("<span class='" + this._appendClass + "'>" + appendText + "</span>");
			input[isRTL ? "before" : "after"](inst.append);
		}

		input.unbind("focus", this._showDatepicker);

		if (inst.trigger) {
			inst.trigger.remove();
		}

		showOn = this._get(inst, "showOn");
		if (showOn === "focus" || showOn === "both") { // pop-up date picker when in the marked field
			input.focus(this._showDatepicker);
		}
		if (showOn === "button" || showOn === "both") { // pop-up date picker when button clicked
			buttonText = this._get(inst, "buttonText");
			buttonImage = this._get(inst, "buttonImage");
			inst.trigger = $(this._get(inst, "buttonImageOnly") ?
				$("<img/>").addClass(this._triggerClass).
					attr({ src: buttonImage, alt: buttonText, title: buttonText }) :
				$("<button type='button'></button>").addClass(this._triggerClass).
					html(!buttonImage ? buttonText : $("<img/>").attr(
					{ src:buttonImage, alt:buttonText, title:buttonText })));
			input[isRTL ? "before" : "after"](inst.trigger);
			inst.trigger.click(function() {
				if ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {
					$.datepicker._hideDatepicker();
				} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {
					$.datepicker._hideDatepicker();
					$.datepicker._showDatepicker(input[0]);
				} else {
					$.datepicker._showDatepicker(input[0]);
				}
				return false;
			});
		}
	},

	/* Apply the maximum length for the date format. */
	_autoSize: function(inst) {
		if (this._get(inst, "autoSize") && !inst.inline) {
			var findMax, max, maxI, i,
				date = new Date(2009, 12 - 1, 20), // Ensure double digits
				dateFormat = this._get(inst, "dateFormat");

			if (dateFormat.match(/[DM]/)) {
				findMax = function(names) {
					max = 0;
					maxI = 0;
					for (i = 0; i < names.length; i++) {
						if (names[i].length > max) {
							max = names[i].length;
							maxI = i;
						}
					}
					return maxI;
				};
				date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?
					"monthNames" : "monthNamesShort"))));
				date.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?
					"dayNames" : "dayNamesShort"))) + 20 - date.getDay());
			}
			inst.input.attr("size", this._formatDate(inst, date).length);
		}
	},

	/* Attach an inline date picker to a div. */
	_inlineDatepicker: function(target, inst) {
		var divSpan = $(target);
		if (divSpan.hasClass(this.markerClassName)) {
			return;
		}
		divSpan.addClass(this.markerClassName).append(inst.dpDiv);
		$.data(target, PROP_NAME, inst);
		this._setDate(inst, this._getDefaultDate(inst), true);
		this._updateDatepicker(inst);
		this._updateAlternate(inst);
		//If disabled option is true, disable the datepicker before showing it (see ticket #5665)
		if( inst.settings.disabled ) {
			this._disableDatepicker( target );
		}
		// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements
		// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height
		inst.dpDiv.css( "display", "block" );
	},

	/* Pop-up the date picker in a "dialog" box.
	 * @param  input element - ignored
	 * @param  date	string or Date - the initial date to display
	 * @param  onSelect  function - the function to call when a date is selected
	 * @param  settings  object - update the dialog date picker instance's settings (anonymous object)
	 * @param  pos int[2] - coordinates for the dialog's position within the screen or
	 *					event - with x/y coordinates or
	 *					leave empty for default (screen centre)
	 * @return the manager object
	 */
	_dialogDatepicker: function(input, date, onSelect, settings, pos) {
		var id, browserWidth, browserHeight, scrollX, scrollY,
			inst = this._dialogInst; // internal instance

		if (!inst) {
			this.uuid += 1;
			id = "dp" + this.uuid;
			this._dialogInput = $("<input type='text' id='" + id +
				"' style='position: absolute; top: -100px; width: 0px;'/>");
			this._dialogInput.keydown(this._doKeyDown);
			$("body").append(this._dialogInput);
			inst = this._dialogInst = this._newInst(this._dialogInput, false);
			inst.settings = {};
			$.data(this._dialogInput[0], PROP_NAME, inst);
		}
		extendRemove(inst.settings, settings || {});
		date = (date && date.constructor === Date ? this._formatDate(inst, date) : date);
		this._dialogInput.val(date);

		this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);
		if (!this._pos) {
			browserWidth = document.documentElement.clientWidth;
			browserHeight = document.documentElement.clientHeight;
			scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
			scrollY = document.documentElement.scrollTop || document.body.scrollTop;
			this._pos = // should use actual width/height below
				[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];
		}

		// move input on screen for focus, but hidden behind dialog
		this._dialogInput.css("left", (this._pos[0] + 20) + "px").css("top", this._pos[1] + "px");
		inst.settings.onSelect = onSelect;
		this._inDialog = true;
		this.dpDiv.addClass(this._dialogClass);
		this._showDatepicker(this._dialogInput[0]);
		if ($.blockUI) {
			$.blockUI(this.dpDiv);
		}
		$.data(this._dialogInput[0], PROP_NAME, inst);
		return this;
	},

	/* Detach a datepicker from its control.
	 * @param  target	element - the target input field or division or span
	 */
	_destroyDatepicker: function(target) {
		var nodeName,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		$.removeData(target, PROP_NAME);
		if (nodeName === "input") {
			inst.append.remove();
			inst.trigger.remove();
			$target.removeClass(this.markerClassName).
				unbind("focus", this._showDatepicker).
				unbind("keydown", this._doKeyDown).
				unbind("keypress", this._doKeyPress).
				unbind("keyup", this._doKeyUp);
		} else if (nodeName === "div" || nodeName === "span") {
			$target.removeClass(this.markerClassName).empty();
		}
	},

	/* Enable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */
	_enableDatepicker: function(target) {
		var nodeName, inline,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		if (nodeName === "input") {
			target.disabled = false;
			inst.trigger.filter("button").
				each(function() { this.disabled = false; }).end().
				filter("img").css({opacity: "1.0", cursor: ""});
		} else if (nodeName === "div" || nodeName === "span") {
			inline = $target.children("." + this._inlineClass);
			inline.children().removeClass("ui-state-disabled");
			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
				prop("disabled", false);
		}
		this._disabledInputs = $.map(this._disabledInputs,
			function(value) { return (value === target ? null : value); }); // delete entry
	},

	/* Disable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */
	_disableDatepicker: function(target) {
		var nodeName, inline,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		if (!$target.hasClass(this.markerClassName)) {
			return;
		}

		nodeName = target.nodeName.toLowerCase();
		if (nodeName === "input") {
			target.disabled = true;
			inst.trigger.filter("button").
				each(function() { this.disabled = true; }).end().
				filter("img").css({opacity: "0.5", cursor: "default"});
		} else if (nodeName === "div" || nodeName === "span") {
			inline = $target.children("." + this._inlineClass);
			inline.children().addClass("ui-state-disabled");
			inline.find("select.ui-datepicker-month, select.ui-datepicker-year").
				prop("disabled", true);
		}
		this._disabledInputs = $.map(this._disabledInputs,
			function(value) { return (value === target ? null : value); }); // delete entry
		this._disabledInputs[this._disabledInputs.length] = target;
	},

	/* Is the first field in a jQuery collection disabled as a datepicker?
	 * @param  target	element - the target input field or division or span
	 * @return boolean - true if disabled, false if enabled
	 */
	_isDisabledDatepicker: function(target) {
		if (!target) {
			return false;
		}
		for (var i = 0; i < this._disabledInputs.length; i++) {
			if (this._disabledInputs[i] === target) {
				return true;
			}
		}
		return false;
	},

	/* Retrieve the instance data for the target control.
	 * @param  target  element - the target input field or division or span
	 * @return  object - the associated instance data
	 * @throws  error if a jQuery problem getting data
	 */
	_getInst: function(target) {
		try {
			return $.data(target, PROP_NAME);
		}
		catch (err) {
			throw "Missing instance data for this datepicker";
		}
	},

	/* Update or retrieve the settings for a date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 * @param  name	object - the new settings to update or
	 *				string - the name of the setting to change or retrieve,
	 *				when retrieving also "all" for all instance settings or
	 *				"defaults" for all global defaults
	 * @param  value   any - the new value for the setting
	 *				(omit if above is an object or to retrieve a value)
	 */
	_optionDatepicker: function(target, name, value) {
		var settings, date, minDate, maxDate,
			inst = this._getInst(target);

		if (arguments.length === 2 && typeof name === "string") {
			return (name === "defaults" ? $.extend({}, $.datepicker._defaults) :
				(inst ? (name === "all" ? $.extend({}, inst.settings) :
				this._get(inst, name)) : null));
		}

		settings = name || {};
		if (typeof name === "string") {
			settings = {};
			settings[name] = value;
		}

		if (inst) {
			if (this._curInst === inst) {
				this._hideDatepicker();
			}

			date = this._getDateDatepicker(target, true);
			minDate = this._getMinMaxDate(inst, "min");
			maxDate = this._getMinMaxDate(inst, "max");
			extendRemove(inst.settings, settings);
			// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided
			if (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {
				inst.settings.minDate = this._formatDate(inst, minDate);
			}
			if (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {
				inst.settings.maxDate = this._formatDate(inst, maxDate);
			}
			if ( "disabled" in settings ) {
				if ( settings.disabled ) {
					this._disableDatepicker(target);
				} else {
					this._enableDatepicker(target);
				}
			}
			this._attachments($(target), inst);
			this._autoSize(inst);
			this._setDate(inst, date);
			this._updateAlternate(inst);
			this._updateDatepicker(inst);
		}
	},

	// change method deprecated
	_changeDatepicker: function(target, name, value) {
		this._optionDatepicker(target, name, value);
	},

	/* Redraw the date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 */
	_refreshDatepicker: function(target) {
		var inst = this._getInst(target);
		if (inst) {
			this._updateDatepicker(inst);
		}
	},

	/* Set the dates for a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  date	Date - the new date
	 */
	_setDateDatepicker: function(target, date) {
		var inst = this._getInst(target);
		if (inst) {
			this._setDate(inst, date);
			this._updateDatepicker(inst);
			this._updateAlternate(inst);
		}
	},

	/* Get the date(s) for the first entry in a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  noDefault boolean - true if no default date is to be used
	 * @return Date - the current date
	 */
	_getDateDatepicker: function(target, noDefault) {
		var inst = this._getInst(target);
		if (inst && !inst.inline) {
			this._setDateFromField(inst, noDefault);
		}
		return (inst ? this._getDate(inst) : null);
	},

	/* Handle keystrokes. */
	_doKeyDown: function(event) {
		var onSelect, dateStr, sel,
			inst = $.datepicker._getInst(event.target),
			handled = true,
			isRTL = inst.dpDiv.is(".ui-datepicker-rtl");

		inst._keyEvent = true;
		if ($.datepicker._datepickerShowing) {
			switch (event.keyCode) {
				case 9: $.datepicker._hideDatepicker();
						handled = false;
						break; // hide on tab out
				case 13: sel = $("td." + $.datepicker._dayOverClass + ":not(." +
									$.datepicker._currentClass + ")", inst.dpDiv);
						if (sel[0]) {
							$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
						}

						onSelect = $.datepicker._get(inst, "onSelect");
						if (onSelect) {
							dateStr = $.datepicker._formatDate(inst);

							// trigger custom callback
							onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
						} else {
							$.datepicker._hideDatepicker();
						}

						return false; // don't submit the form
				case 27: $.datepicker._hideDatepicker();
						break; // hide on escape
				case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							-$.datepicker._get(inst, "stepBigMonths") :
							-$.datepicker._get(inst, "stepMonths")), "M");
						break; // previous month/year on page up/+ ctrl
				case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							+$.datepicker._get(inst, "stepBigMonths") :
							+$.datepicker._get(inst, "stepMonths")), "M");
						break; // next month/year on page down/+ ctrl
				case 35: if (event.ctrlKey || event.metaKey) {
							$.datepicker._clearDate(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						break; // clear on ctrl or command +end
				case 36: if (event.ctrlKey || event.metaKey) {
							$.datepicker._gotoToday(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						break; // current on ctrl or command +home
				case 37: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), "D");
						}
						handled = event.ctrlKey || event.metaKey;
						// -1 day on ctrl or command +left
						if (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								-$.datepicker._get(inst, "stepBigMonths") :
								-$.datepicker._get(inst, "stepMonths")), "M");
						}
						// next month/year on alt +left on Mac
						break;
				case 38: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, -7, "D");
						}
						handled = event.ctrlKey || event.metaKey;
						break; // -1 week on ctrl or command +up
				case 39: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), "D");
						}
						handled = event.ctrlKey || event.metaKey;
						// +1 day on ctrl or command +right
						if (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								+$.datepicker._get(inst, "stepBigMonths") :
								+$.datepicker._get(inst, "stepMonths")), "M");
						}
						// next month/year on alt +right
						break;
				case 40: if (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, +7, "D");
						}
						handled = event.ctrlKey || event.metaKey;
						break; // +1 week on ctrl or command +down
				default: handled = false;
			}
		} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home
			$.datepicker._showDatepicker(this);
		} else {
			handled = false;
		}

		if (handled) {
			event.preventDefault();
			event.stopPropagation();
		}
	},

	/* Filter entered characters - based on date format. */
	_doKeyPress: function(event) {
		var chars, chr,
			inst = $.datepicker._getInst(event.target);

		if ($.datepicker._get(inst, "constrainInput")) {
			chars = $.datepicker._possibleChars($.datepicker._get(inst, "dateFormat"));
			chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);
			return event.ctrlKey || event.metaKey || (chr < " " || !chars || chars.indexOf(chr) > -1);
		}
	},

	/* Synchronise manual entry and field/alternate field. */
	_doKeyUp: function(event) {
		var date,
			inst = $.datepicker._getInst(event.target);

		if (inst.input.val() !== inst.lastVal) {
			try {
				date = $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
					(inst.input ? inst.input.val() : null),
					$.datepicker._getFormatConfig(inst));

				if (date) { // only if valid
					$.datepicker._setDateFromField(inst);
					$.datepicker._updateAlternate(inst);
					$.datepicker._updateDatepicker(inst);
				}
			}
			catch (err) {
			}
		}
		return true;
	},

	/* Pop-up the date picker for a given input field.
	 * If false returned from beforeShow event handler do not show.
	 * @param  input  element - the input field attached to the date picker or
	 *					event - if triggered by focus
	 */
	_showDatepicker: function(input) {
		input = input.target || input;
		if (input.nodeName.toLowerCase() !== "input") { // find from button/image trigger
			input = $("input", input.parentNode)[0];
		}

		if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here
			return;
		}

		var inst, beforeShow, beforeShowSettings, isFixed,
			offset, showAnim, duration;

		inst = $.datepicker._getInst(input);
		if ($.datepicker._curInst && $.datepicker._curInst !== inst) {
			$.datepicker._curInst.dpDiv.stop(true, true);
			if ( inst && $.datepicker._datepickerShowing ) {
				$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );
			}
		}

		beforeShow = $.datepicker._get(inst, "beforeShow");
		beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
		if(beforeShowSettings === false){
			return;
		}
		extendRemove(inst.settings, beforeShowSettings);

		inst.lastVal = null;
		$.datepicker._lastInput = input;
		$.datepicker._setDateFromField(inst);

		if ($.datepicker._inDialog) { // hide cursor
			input.value = "";
		}
		if (!$.datepicker._pos) { // position below input
			$.datepicker._pos = $.datepicker._findPos(input);
			$.datepicker._pos[1] += input.offsetHeight; // add the height
		}

		isFixed = false;
		$(input).parents().each(function() {
			isFixed |= $(this).css("position") === "fixed";
			return !isFixed;
		});

		offset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};
		$.datepicker._pos = null;
		//to avoid flashes on Firefox
		inst.dpDiv.empty();
		// determine sizing offscreen
		inst.dpDiv.css({position: "absolute", display: "block", top: "-1000px"});
		$.datepicker._updateDatepicker(inst);
		// fix width for dynamic number of date pickers
		// and adjust position before showing
		offset = $.datepicker._checkOffset(inst, offset, isFixed);
		inst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?
			"static" : (isFixed ? "fixed" : "absolute")), display: "none",
			left: offset.left + "px", top: offset.top + "px"});

		if (!inst.inline) {
			showAnim = $.datepicker._get(inst, "showAnim");
			duration = $.datepicker._get(inst, "duration");
			inst.dpDiv.zIndex($(input).zIndex()+1);
			$.datepicker._datepickerShowing = true;

			if ( $.effects && $.effects.effect[ showAnim ] ) {
				inst.dpDiv.show(showAnim, $.datepicker._get(inst, "showOptions"), duration);
			} else {
				inst.dpDiv[showAnim || "show"](showAnim ? duration : null);
			}

			if (inst.input.is(":visible") && !inst.input.is(":disabled")) {
				inst.input.focus();
			}
			$.datepicker._curInst = inst;
		}
	},

	/* Generate the date picker content. */
	_updateDatepicker: function(inst) {
		this.maxRows = 4; //Reset the max number of rows being displayed (see #7043)
		instActive = inst; // for delegate hover events
		inst.dpDiv.empty().append(this._generateHTML(inst));
		this._attachHandlers(inst);
		inst.dpDiv.find("." + this._dayOverClass + " a").mouseover();

		var origyearshtml,
			numMonths = this._getNumberOfMonths(inst),
			cols = numMonths[1],
			width = 17;

		inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
		if (cols > 1) {
			inst.dpDiv.addClass("ui-datepicker-multi-" + cols).css("width", (width * cols) + "em");
		}
		inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? "add" : "remove") +
			"Class"]("ui-datepicker-multi");
		inst.dpDiv[(this._get(inst, "isRTL") ? "add" : "remove") +
			"Class"]("ui-datepicker-rtl");

		// #6694 - don't focus the input if it's already focused
		// this breaks the change event in IE
		if (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && inst.input &&
			inst.input.is(":visible") && !inst.input.is(":disabled") && inst.input[0] !== document.activeElement) {
			inst.input.focus();
		}

		// deffered render of the years select (to avoid flashes on Firefox)
		if( inst.yearshtml ){
			origyearshtml = inst.yearshtml;
			setTimeout(function(){
				//assure that inst.yearshtml didn't change.
				if( origyearshtml === inst.yearshtml && inst.yearshtml ){
					inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);
				}
				origyearshtml = inst.yearshtml = null;
			}, 0);
		}
	},

	/* Retrieve the size of left and top borders for an element.
	 * @param  elem  (jQuery object) the element of interest
	 * @return  (number[2]) the left and top borders
	 */
	_getBorders: function(elem) {
		var convert = function(value) {
			return {thin: 1, medium: 2, thick: 3}[value] || value;
		};
		return [parseFloat(convert(elem.css("border-left-width"))),
			parseFloat(convert(elem.css("border-top-width")))];
	},

	/* Check positioning to remain on screen. */
	_checkOffset: function(inst, offset, isFixed) {
		var dpWidth = inst.dpDiv.outerWidth(),
			dpHeight = inst.dpDiv.outerHeight(),
			inputWidth = inst.input ? inst.input.outerWidth() : 0,
			inputHeight = inst.input ? inst.input.outerHeight() : 0,
			viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),
			viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());

		offset.left -= (this._get(inst, "isRTL") ? (dpWidth - inputWidth) : 0);
		offset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;
		offset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;

		// now check if datepicker is showing outside window viewport - move to a better place if so.
		offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?
			Math.abs(offset.left + dpWidth - viewWidth) : 0);
		offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?
			Math.abs(dpHeight + inputHeight) : 0);

		return offset;
	},

	/* Find an object's position on the screen. */
	_findPos: function(obj) {
		var position,
			inst = this._getInst(obj),
			isRTL = this._get(inst, "isRTL");

		while (obj && (obj.type === "hidden" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {
			obj = obj[isRTL ? "previousSibling" : "nextSibling"];
		}

		position = $(obj).offset();
		return [position.left, position.top];
	},

	/* Hide the date picker from view.
	 * @param  input  element - the input field attached to the date picker
	 */
	_hideDatepicker: function(input) {
		var showAnim, duration, postProcess, onClose,
			inst = this._curInst;

		if (!inst || (input && inst !== $.data(input, PROP_NAME))) {
			return;
		}

		if (this._datepickerShowing) {
			showAnim = this._get(inst, "showAnim");
			duration = this._get(inst, "duration");
			postProcess = function() {
				$.datepicker._tidyDialog(inst);
			};

			// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed
			if ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {
				inst.dpDiv.hide(showAnim, $.datepicker._get(inst, "showOptions"), duration, postProcess);
			} else {
				inst.dpDiv[(showAnim === "slideDown" ? "slideUp" :
					(showAnim === "fadeIn" ? "fadeOut" : "hide"))]((showAnim ? duration : null), postProcess);
			}

			if (!showAnim) {
				postProcess();
			}
			this._datepickerShowing = false;

			onClose = this._get(inst, "onClose");
			if (onClose) {
				onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ""), inst]);
			}

			this._lastInput = null;
			if (this._inDialog) {
				this._dialogInput.css({ position: "absolute", left: "0", top: "-100px" });
				if ($.blockUI) {
					$.unblockUI();
					$("body").append(this.dpDiv);
				}
			}
			this._inDialog = false;
		}
	},

	/* Tidy up after a dialog display. */
	_tidyDialog: function(inst) {
		inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
	},

	/* Close date picker if clicked elsewhere. */
	_checkExternalClick: function(event) {
		if (!$.datepicker._curInst) {
			return;
		}

		var $target = $(event.target),
			inst = $.datepicker._getInst($target[0]);

		if ( ( ( $target[0].id !== $.datepicker._mainDivId &&
				$target.parents("#" + $.datepicker._mainDivId).length === 0 &&
				!$target.hasClass($.datepicker.markerClassName) &&
				!$target.closest("." + $.datepicker._triggerClass).length &&
				$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||
			( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {
				$.datepicker._hideDatepicker();
		}
	},

	/* Adjust one of the date sub-fields. */
	_adjustDate: function(id, offset, period) {
		var target = $(id),
			inst = this._getInst(target[0]);

		if (this._isDisabledDatepicker(target[0])) {
			return;
		}
		this._adjustInstDate(inst, offset +
			(period === "M" ? this._get(inst, "showCurrentAtPos") : 0), // undo positioning
			period);
		this._updateDatepicker(inst);
	},

	/* Action for current link. */
	_gotoToday: function(id) {
		var date,
			target = $(id),
			inst = this._getInst(target[0]);

		if (this._get(inst, "gotoCurrent") && inst.currentDay) {
			inst.selectedDay = inst.currentDay;
			inst.drawMonth = inst.selectedMonth = inst.currentMonth;
			inst.drawYear = inst.selectedYear = inst.currentYear;
		} else {
			date = new Date();
			inst.selectedDay = date.getDate();
			inst.drawMonth = inst.selectedMonth = date.getMonth();
			inst.drawYear = inst.selectedYear = date.getFullYear();
		}
		this._notifyChange(inst);
		this._adjustDate(target);
	},

	/* Action for selecting a new month/year. */
	_selectMonthYear: function(id, select, period) {
		var target = $(id),
			inst = this._getInst(target[0]);

		inst["selected" + (period === "M" ? "Month" : "Year")] =
		inst["draw" + (period === "M" ? "Month" : "Year")] =
			parseInt(select.options[select.selectedIndex].value,10);

		this._notifyChange(inst);
		this._adjustDate(target);
	},

	/* Action for selecting a day. */
	_selectDay: function(id, month, year, td) {
		var inst,
			target = $(id);

		if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
			return;
		}

		inst = this._getInst(target[0]);
		inst.selectedDay = inst.currentDay = $("a", td).html();
		inst.selectedMonth = inst.currentMonth = month;
		inst.selectedYear = inst.currentYear = year;
		this._selectDate(id, this._formatDate(inst,
			inst.currentDay, inst.currentMonth, inst.currentYear));
	},

	/* Erase the input field and hide the date picker. */
	_clearDate: function(id) {
		var target = $(id);
		this._selectDate(target, "");
	},

	/* Update the input field with the selected date. */
	_selectDate: function(id, dateStr) {
		var onSelect,
			target = $(id),
			inst = this._getInst(target[0]);

		dateStr = (dateStr != null ? dateStr : this._formatDate(inst));
		if (inst.input) {
			inst.input.val(dateStr);
		}
		this._updateAlternate(inst);

		onSelect = this._get(inst, "onSelect");
		if (onSelect) {
			onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback
		} else if (inst.input) {
			inst.input.trigger("change"); // fire the change event
		}

		if (inst.inline){
			this._updateDatepicker(inst);
		} else {
			this._hideDatepicker();
			this._lastInput = inst.input[0];
			if (typeof(inst.input[0]) !== "object") {
				inst.input.focus(); // restore focus
			}
			this._lastInput = null;
		}
	},

	/* Update any alternate field to synchronise with the main field. */
	_updateAlternate: function(inst) {
		var altFormat, date, dateStr,
			altField = this._get(inst, "altField");

		if (altField) { // update alternate field too
			altFormat = this._get(inst, "altFormat") || this._get(inst, "dateFormat");
			date = this._getDate(inst);
			dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));
			$(altField).each(function() { $(this).val(dateStr); });
		}
	},

	/* Set as beforeShowDay function to prevent selection of weekends.
	 * @param  date  Date - the date to customise
	 * @return [boolean, string] - is this date selectable?, what is its CSS class?
	 */
	noWeekends: function(date) {
		var day = date.getDay();
		return [(day > 0 && day < 6), ""];
	},

	/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
	 * @param  date  Date - the date to get the week for
	 * @return  number - the number of the week within the year that contains this date
	 */
	iso8601Week: function(date) {
		var time,
			checkDate = new Date(date.getTime());

		// Find Thursday of this week starting on Monday
		checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));

		time = checkDate.getTime();
		checkDate.setMonth(0); // Compare with Jan 1
		checkDate.setDate(1);
		return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
	},

	/* Parse a string value into a date object.
	 * See formatDate below for the possible formats.
	 *
	 * @param  format string - the expected format of the date
	 * @param  value string - the date in the above format
	 * @param  settings Object - attributes include:
	 *					shortYearCutoff  number - the cutoff year for determining the century (optional)
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  Date - the extracted date value or null if value is blank
	 */
	parseDate: function (format, value, settings) {
		if (format == null || value == null) {
			throw "Invalid arguments";
		}

		value = (typeof value === "object" ? value.toString() : value + "");
		if (value === "") {
			return null;
		}

		var iFormat, dim, extra,
			iValue = 0,
			shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,
			shortYearCutoff = (typeof shortYearCutoffTemp !== "string" ? shortYearCutoffTemp :
				new Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),
			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
			year = -1,
			month = -1,
			day = -1,
			doy = -1,
			literal = false,
			date,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			},
			// Extract a number from the string value
			getNumber = function(match) {
				var isDoubled = lookAhead(match),
					size = (match === "@" ? 14 : (match === "!" ? 20 :
					(match === "y" && isDoubled ? 4 : (match === "o" ? 3 : 2)))),
					digits = new RegExp("^\\d{1," + size + "}"),
					num = value.substring(iValue).match(digits);
				if (!num) {
					throw "Missing number at position " + iValue;
				}
				iValue += num[0].length;
				return parseInt(num[0], 10);
			},
			// Extract a name from the string value and convert to an index
			getName = function(match, shortNames, longNames) {
				var index = -1,
					names = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {
						return [ [k, v] ];
					}).sort(function (a, b) {
						return -(a[1].length - b[1].length);
					});

				$.each(names, function (i, pair) {
					var name = pair[1];
					if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {
						index = pair[0];
						iValue += name.length;
						return false;
					}
				});
				if (index !== -1) {
					return index + 1;
				} else {
					throw "Unknown name at position " + iValue;
				}
			},
			// Confirm that a literal character matches the string value
			checkLiteral = function() {
				if (value.charAt(iValue) !== format.charAt(iFormat)) {
					throw "Unexpected literal at position " + iValue;
				}
				iValue++;
			};

		for (iFormat = 0; iFormat < format.length; iFormat++) {
			if (literal) {
				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
					literal = false;
				} else {
					checkLiteral();
				}
			} else {
				switch (format.charAt(iFormat)) {
					case "d":
						day = getNumber("d");
						break;
					case "D":
						getName("D", dayNamesShort, dayNames);
						break;
					case "o":
						doy = getNumber("o");
						break;
					case "m":
						month = getNumber("m");
						break;
					case "M":
						month = getName("M", monthNamesShort, monthNames);
						break;
					case "y":
						year = getNumber("y");
						break;
					case "@":
						date = new Date(getNumber("@"));
						year = date.getFullYear();
						month = date.getMonth() + 1;
						day = date.getDate();
						break;
					case "!":
						date = new Date((getNumber("!") - this._ticksTo1970) / 10000);
						year = date.getFullYear();
						month = date.getMonth() + 1;
						day = date.getDate();
						break;
					case "'":
						if (lookAhead("'")){
							checkLiteral();
						} else {
							literal = true;
						}
						break;
					default:
						checkLiteral();
				}
			}
		}

		if (iValue < value.length){
			extra = value.substr(iValue);
			if (!/^\s+/.test(extra)) {
				throw "Extra/unparsed characters found in date: " + extra;
			}
		}

		if (year === -1) {
			year = new Date().getFullYear();
		} else if (year < 100) {
			year += new Date().getFullYear() - new Date().getFullYear() % 100 +
				(year <= shortYearCutoff ? 0 : -100);
		}

		if (doy > -1) {
			month = 1;
			day = doy;
			do {
				dim = this._getDaysInMonth(year, month - 1);
				if (day <= dim) {
					break;
				}
				month++;
				day -= dim;
			} while (true);
		}

		date = this._daylightSavingAdjust(new Date(year, month - 1, day));
		if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {
			throw "Invalid date"; // E.g. 31/02/00
		}
		return date;
	},

	/* Standard date formats. */
	ATOM: "yy-mm-dd", // RFC 3339 (ISO 8601)
	COOKIE: "D, dd M yy",
	ISO_8601: "yy-mm-dd",
	RFC_822: "D, d M y",
	RFC_850: "DD, dd-M-y",
	RFC_1036: "D, d M y",
	RFC_1123: "D, d M yy",
	RFC_2822: "D, d M yy",
	RSS: "D, d M y", // RFC 822
	TICKS: "!",
	TIMESTAMP: "@",
	W3C: "yy-mm-dd", // ISO 8601

	_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +
		Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),

	/* Format a date object into a string value.
	 * The format can be combinations of the following:
	 * d  - day of month (no leading zero)
	 * dd - day of month (two digit)
	 * o  - day of year (no leading zeros)
	 * oo - day of year (three digit)
	 * D  - day name short
	 * DD - day name long
	 * m  - month of year (no leading zero)
	 * mm - month of year (two digit)
	 * M  - month name short
	 * MM - month name long
	 * y  - year (two digit)
	 * yy - year (four digit)
	 * @ - Unix timestamp (ms since 01/01/1970)
	 * ! - Windows ticks (100ns since 01/01/0001)
	 * "..." - literal text
	 * '' - single quote
	 *
	 * @param  format string - the desired format of the date
	 * @param  date Date - the date value to format
	 * @param  settings Object - attributes include:
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  string - the date in the above format
	 */
	formatDate: function (format, date, settings) {
		if (!date) {
			return "";
		}

		var iFormat,
			dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			},
			// Format a number, with leading zero if necessary
			formatNumber = function(match, value, len) {
				var num = "" + value;
				if (lookAhead(match)) {
					while (num.length < len) {
						num = "0" + num;
					}
				}
				return num;
			},
			// Format a name, short or long as requested
			formatName = function(match, value, shortNames, longNames) {
				return (lookAhead(match) ? longNames[value] : shortNames[value]);
			},
			output = "",
			literal = false;

		if (date) {
			for (iFormat = 0; iFormat < format.length; iFormat++) {
				if (literal) {
					if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
						literal = false;
					} else {
						output += format.charAt(iFormat);
					}
				} else {
					switch (format.charAt(iFormat)) {
						case "d":
							output += formatNumber("d", date.getDate(), 2);
							break;
						case "D":
							output += formatName("D", date.getDay(), dayNamesShort, dayNames);
							break;
						case "o":
							output += formatNumber("o",
								Math.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);
							break;
						case "m":
							output += formatNumber("m", date.getMonth() + 1, 2);
							break;
						case "M":
							output += formatName("M", date.getMonth(), monthNamesShort, monthNames);
							break;
						case "y":
							output += (lookAhead("y") ? date.getFullYear() :
								(date.getYear() % 100 < 10 ? "0" : "") + date.getYear() % 100);
							break;
						case "@":
							output += date.getTime();
							break;
						case "!":
							output += date.getTime() * 10000 + this._ticksTo1970;
							break;
						case "'":
							if (lookAhead("'")) {
								output += "'";
							} else {
								literal = true;
							}
							break;
						default:
							output += format.charAt(iFormat);
					}
				}
			}
		}
		return output;
	},

	/* Extract all possible characters from the date format. */
	_possibleChars: function (format) {
		var iFormat,
			chars = "",
			literal = false,
			// Check whether a format character is doubled
			lookAhead = function(match) {
				var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);
				if (matches) {
					iFormat++;
				}
				return matches;
			};

		for (iFormat = 0; iFormat < format.length; iFormat++) {
			if (literal) {
				if (format.charAt(iFormat) === "'" && !lookAhead("'")) {
					literal = false;
				} else {
					chars += format.charAt(iFormat);
				}
			} else {
				switch (format.charAt(iFormat)) {
					case "d": case "m": case "y": case "@":
						chars += "0123456789";
						break;
					case "D": case "M":
						return null; // Accept anything
					case "'":
						if (lookAhead("'")) {
							chars += "'";
						} else {
							literal = true;
						}
						break;
					default:
						chars += format.charAt(iFormat);
				}
			}
		}
		return chars;
	},

	/* Get a setting value, defaulting if necessary. */
	_get: function(inst, name) {
		return inst.settings[name] !== undefined ?
			inst.settings[name] : this._defaults[name];
	},

	/* Parse existing date and initialise date picker. */
	_setDateFromField: function(inst, noDefault) {
		if (inst.input.val() === inst.lastVal) {
			return;
		}

		var dateFormat = this._get(inst, "dateFormat"),
			dates = inst.lastVal = inst.input ? inst.input.val() : null,
			defaultDate = this._getDefaultDate(inst),
			date = defaultDate,
			settings = this._getFormatConfig(inst);

		try {
			date = this.parseDate(dateFormat, dates, settings) || defaultDate;
		} catch (event) {
			dates = (noDefault ? "" : dates);
		}
		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		inst.currentDay = (dates ? date.getDate() : 0);
		inst.currentMonth = (dates ? date.getMonth() : 0);
		inst.currentYear = (dates ? date.getFullYear() : 0);
		this._adjustInstDate(inst);
	},

	/* Retrieve the default date shown on opening. */
	_getDefaultDate: function(inst) {
		return this._restrictMinMax(inst,
			this._determineDate(inst, this._get(inst, "defaultDate"), new Date()));
	},

	/* A date may be specified as an exact value or a relative one. */
	_determineDate: function(inst, date, defaultDate) {
		var offsetNumeric = function(offset) {
				var date = new Date();
				date.setDate(date.getDate() + offset);
				return date;
			},
			offsetString = function(offset) {
				try {
					return $.datepicker.parseDate($.datepicker._get(inst, "dateFormat"),
						offset, $.datepicker._getFormatConfig(inst));
				}
				catch (e) {
					// Ignore
				}

				var date = (offset.toLowerCase().match(/^c/) ?
					$.datepicker._getDate(inst) : null) || new Date(),
					year = date.getFullYear(),
					month = date.getMonth(),
					day = date.getDate(),
					pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
					matches = pattern.exec(offset);

				while (matches) {
					switch (matches[2] || "d") {
						case "d" : case "D" :
							day += parseInt(matches[1],10); break;
						case "w" : case "W" :
							day += parseInt(matches[1],10) * 7; break;
						case "m" : case "M" :
							month += parseInt(matches[1],10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
							break;
						case "y": case "Y" :
							year += parseInt(matches[1],10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month));
							break;
					}
					matches = pattern.exec(offset);
				}
				return new Date(year, month, day);
			},
			newDate = (date == null || date === "" ? defaultDate : (typeof date === "string" ? offsetString(date) :
				(typeof date === "number" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));

		newDate = (newDate && newDate.toString() === "Invalid Date" ? defaultDate : newDate);
		if (newDate) {
			newDate.setHours(0);
			newDate.setMinutes(0);
			newDate.setSeconds(0);
			newDate.setMilliseconds(0);
		}
		return this._daylightSavingAdjust(newDate);
	},

	/* Handle switch to/from daylight saving.
	 * Hours may be non-zero on daylight saving cut-over:
	 * > 12 when midnight changeover, but then cannot generate
	 * midnight datetime, so jump to 1AM, otherwise reset.
	 * @param  date  (Date) the date to check
	 * @return  (Date) the corrected date
	 */
	_daylightSavingAdjust: function(date) {
		if (!date) {
			return null;
		}
		date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);
		return date;
	},

	/* Set the date(s) directly. */
	_setDate: function(inst, date, noChange) {
		var clear = !date,
			origMonth = inst.selectedMonth,
			origYear = inst.selectedYear,
			newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));

		inst.selectedDay = inst.currentDay = newDate.getDate();
		inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
		inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
		if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {
			this._notifyChange(inst);
		}
		this._adjustInstDate(inst);
		if (inst.input) {
			inst.input.val(clear ? "" : this._formatDate(inst));
		}
	},

	/* Retrieve the date(s) directly. */
	_getDate: function(inst) {
		var startDate = (!inst.currentYear || (inst.input && inst.input.val() === "") ? null :
			this._daylightSavingAdjust(new Date(
			inst.currentYear, inst.currentMonth, inst.currentDay)));
			return startDate;
	},

	/* Attach the onxxx handlers.  These are declared statically so
	 * they work with static code transformers like Caja.
	 */
	_attachHandlers: function(inst) {
		var stepMonths = this._get(inst, "stepMonths"),
			id = "#" + inst.id.replace( /\\\\/g, "\\" );
		inst.dpDiv.find("[data-handler]").map(function () {
			var handler = {
				prev: function () {
					window["DP_jQuery_" + dpuuid].datepicker._adjustDate(id, -stepMonths, "M");
				},
				next: function () {
					window["DP_jQuery_" + dpuuid].datepicker._adjustDate(id, +stepMonths, "M");
				},
				hide: function () {
					window["DP_jQuery_" + dpuuid].datepicker._hideDatepicker();
				},
				today: function () {
					window["DP_jQuery_" + dpuuid].datepicker._gotoToday(id);
				},
				selectDay: function () {
					window["DP_jQuery_" + dpuuid].datepicker._selectDay(id, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this);
					return false;
				},
				selectMonth: function () {
					window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(id, this, "M");
					return false;
				},
				selectYear: function () {
					window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(id, this, "Y");
					return false;
				}
			};
			$(this).bind(this.getAttribute("data-event"), handler[this.getAttribute("data-handler")]);
		});
	},

	/* Generate the HTML for the current state of the date picker. */
	_generateHTML: function(inst) {
		var maxDraw, prevText, prev, nextText, next, currentText, gotoDate,
			controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,
			monthNames, monthNamesShort, beforeShowDay, showOtherMonths,
			selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,
			cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,
			printDate, dRow, tbody, daySettings, otherMonth, unselectable,
			tempDate = new Date(),
			today = this._daylightSavingAdjust(
				new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time
			isRTL = this._get(inst, "isRTL"),
			showButtonPanel = this._get(inst, "showButtonPanel"),
			hideIfNoPrevNext = this._get(inst, "hideIfNoPrevNext"),
			navigationAsDateFormat = this._get(inst, "navigationAsDateFormat"),
			numMonths = this._getNumberOfMonths(inst),
			showCurrentAtPos = this._get(inst, "showCurrentAtPos"),
			stepMonths = this._get(inst, "stepMonths"),
			isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),
			currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :
				new Date(inst.currentYear, inst.currentMonth, inst.currentDay))),
			minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			drawMonth = inst.drawMonth - showCurrentAtPos,
			drawYear = inst.drawYear;

		if (drawMonth < 0) {
			drawMonth += 12;
			drawYear--;
		}
		if (maxDate) {
			maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
				maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));
			maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);
			while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {
				drawMonth--;
				if (drawMonth < 0) {
					drawMonth = 11;
					drawYear--;
				}
			}
		}
		inst.drawMonth = drawMonth;
		inst.drawYear = drawYear;

		prevText = this._get(inst, "prevText");
		prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),
			this._getFormatConfig(inst)));

		prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?
			"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'" +
			" title='" + prevText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>" :
			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+ prevText +"'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "e" : "w") + "'>" + prevText + "</span></a>"));

		nextText = this._get(inst, "nextText");
		nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),
			this._getFormatConfig(inst)));

		next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?
			"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'" +
			" title='" + nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>" :
			(hideIfNoPrevNext ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+ nextText + "'><span class='ui-icon ui-icon-circle-triangle-" + ( isRTL ? "w" : "e") + "'>" + nextText + "</span></a>"));

		currentText = this._get(inst, "currentText");
		gotoDate = (this._get(inst, "gotoCurrent") && inst.currentDay ? currentDate : today);
		currentText = (!navigationAsDateFormat ? currentText :
			this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));

		controls = (!inst.inline ? "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" +
			this._get(inst, "closeText") + "</button>" : "");

		buttonPanel = (showButtonPanel) ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (isRTL ? controls : "") +
			(this._isInRange(inst, gotoDate) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'" +
			">" + currentText + "</button>" : "") + (isRTL ? "" : controls) + "</div>" : "";

		firstDay = parseInt(this._get(inst, "firstDay"),10);
		firstDay = (isNaN(firstDay) ? 0 : firstDay);

		showWeek = this._get(inst, "showWeek");
		dayNames = this._get(inst, "dayNames");
		dayNamesMin = this._get(inst, "dayNamesMin");
		monthNames = this._get(inst, "monthNames");
		monthNamesShort = this._get(inst, "monthNamesShort");
		beforeShowDay = this._get(inst, "beforeShowDay");
		showOtherMonths = this._get(inst, "showOtherMonths");
		selectOtherMonths = this._get(inst, "selectOtherMonths");
		defaultDate = this._getDefaultDate(inst);
		html = "";
		dow;
		for (row = 0; row < numMonths[0]; row++) {
			group = "";
			this.maxRows = 4;
			for (col = 0; col < numMonths[1]; col++) {
				selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));
				cornerClass = " ui-corner-all";
				calender = "";
				if (isMultiMonth) {
					calender += "<div class='ui-datepicker-group";
					if (numMonths[1] > 1) {
						switch (col) {
							case 0: calender += " ui-datepicker-group-first";
								cornerClass = " ui-corner-" + (isRTL ? "right" : "left"); break;
							case numMonths[1]-1: calender += " ui-datepicker-group-last";
								cornerClass = " ui-corner-" + (isRTL ? "left" : "right"); break;
							default: calender += " ui-datepicker-group-middle"; cornerClass = ""; break;
						}
					}
					calender += "'>";
				}
				calender += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + cornerClass + "'>" +
					(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : "") +
					(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : "") +
					this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
					row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers
					"</div><table class='ui-datepicker-calendar'><thead>" +
					"<tr>";
				thead = (showWeek ? "<th class='ui-datepicker-week-col'>" + this._get(inst, "weekHeader") + "</th>" : "");
				for (dow = 0; dow < 7; dow++) { // days of the week
					day = (dow + firstDay) % 7;
					thead += "<th" + ((dow + firstDay + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" +
						"<span title='" + dayNames[day] + "'>" + dayNamesMin[day] + "</span></th>";
				}
				calender += thead + "</tr></thead><tbody>";
				daysInMonth = this._getDaysInMonth(drawYear, drawMonth);
				if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {
					inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);
				}
				leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;
				curRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate
				numRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)
				this.maxRows = numRows;
				printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));
				for (dRow = 0; dRow < numRows; dRow++) { // create date picker rows
					calender += "<tr>";
					tbody = (!showWeek ? "" : "<td class='ui-datepicker-week-col'>" +
						this._get(inst, "calculateWeek")(printDate) + "</td>");
					for (dow = 0; dow < 7; dow++) { // create date picker days
						daySettings = (beforeShowDay ?
							beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, ""]);
						otherMonth = (printDate.getMonth() !== drawMonth);
						unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||
							(minDate && printDate < minDate) || (maxDate && printDate > maxDate);
						tbody += "<td class='" +
							((dow + firstDay + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + // highlight weekends
							(otherMonth ? " ui-datepicker-other-month" : "") + // highlight days from other months
							((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key
							(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?
							// or defaultDate is current printedDate and defaultDate is selectedDate
							" " + this._dayOverClass : "") + // highlight selected day
							(unselectable ? " " + this._unselectableClass + " ui-state-disabled": "") +  // highlight unselectable days
							(otherMonth && !showOtherMonths ? "" : " " + daySettings[1] + // highlight custom dates
							(printDate.getTime() === currentDate.getTime() ? " " + this._currentClass : "") + // highlight selected day
							(printDate.getTime() === today.getTime() ? " ui-datepicker-today" : "")) + "'" + // highlight today (if different)
							((!otherMonth || showOtherMonths) && daySettings[2] ? " title='" + daySettings[2] + "'" : "") + // cell title
							(unselectable ? "" : " data-handler='selectDay' data-event='click' data-month='" + printDate.getMonth() + "' data-year='" + printDate.getFullYear() + "'") + ">" + // actions
							(otherMonth && !showOtherMonths ? "&#xa0;" : // display for other months
							(unselectable ? "<span class='ui-state-default'>" + printDate.getDate() + "</span>" : "<a class='ui-state-default" +
							(printDate.getTime() === today.getTime() ? " ui-state-highlight" : "") +
							(printDate.getTime() === currentDate.getTime() ? " ui-state-active" : "") + // highlight selected day
							(otherMonth ? " ui-priority-secondary" : "") + // distinguish dates from other months
							"' href='#'>" + printDate.getDate() + "</a>")) + "</td>"; // display selectable date
						printDate.setDate(printDate.getDate() + 1);
						printDate = this._daylightSavingAdjust(printDate);
					}
					calender += tbody + "</tr>";
				}
				drawMonth++;
				if (drawMonth > 11) {
					drawMonth = 0;
					drawYear++;
				}
				calender += "</tbody></table>" + (isMultiMonth ? "</div>" +
							((numMonths[0] > 0 && col === numMonths[1]-1) ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
				group += calender;
			}
			html += group;
		}
		html += buttonPanel;
		inst._keyEvent = false;
		return html;
	},

	/* Generate the month and year header. */
	_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,
			secondary, monthNames, monthNamesShort) {

		var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,
			changeMonth = this._get(inst, "changeMonth"),
			changeYear = this._get(inst, "changeYear"),
			showMonthAfterYear = this._get(inst, "showMonthAfterYear"),
			html = "<div class='ui-datepicker-title'>",
			monthHtml = "";

		// month selection
		if (secondary || !changeMonth) {
			monthHtml += "<span class='ui-datepicker-month'>" + monthNames[drawMonth] + "</span>";
		} else {
			inMinYear = (minDate && minDate.getFullYear() === drawYear);
			inMaxYear = (maxDate && maxDate.getFullYear() === drawYear);
			monthHtml += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
			for ( month = 0; month < 12; month++) {
				if ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {
					monthHtml += "<option value='" + month + "'" +
						(month === drawMonth ? " selected='selected'" : "") +
						">" + monthNamesShort[month] + "</option>";
				}
			}
			monthHtml += "</select>";
		}

		if (!showMonthAfterYear) {
			html += monthHtml + (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "");
		}

		// year selection
		if ( !inst.yearshtml ) {
			inst.yearshtml = "";
			if (secondary || !changeYear) {
				html += "<span class='ui-datepicker-year'>" + drawYear + "</span>";
			} else {
				// determine range of years to display
				years = this._get(inst, "yearRange").split(":");
				thisYear = new Date().getFullYear();
				determineYear = function(value) {
					var year = (value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) :
						(value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) :
						parseInt(value, 10)));
					return (isNaN(year) ? thisYear : year);
				};
				year = determineYear(years[0]);
				endYear = Math.max(year, determineYear(years[1] || ""));
				year = (minDate ? Math.max(year, minDate.getFullYear()) : year);
				endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);
				inst.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
				for (; year <= endYear; year++) {
					inst.yearshtml += "<option value='" + year + "'" +
						(year === drawYear ? " selected='selected'" : "") +
						">" + year + "</option>";
				}
				inst.yearshtml += "</select>";

				html += inst.yearshtml;
				inst.yearshtml = null;
			}
		}

		html += this._get(inst, "yearSuffix");
		if (showMonthAfterYear) {
			html += (secondary || !(changeMonth && changeYear) ? "&#xa0;" : "") + monthHtml;
		}
		html += "</div>"; // Close datepicker_header
		return html;
	},

	/* Adjust one of the date sub-fields. */
	_adjustInstDate: function(inst, offset, period) {
		var year = inst.drawYear + (period === "Y" ? offset : 0),
			month = inst.drawMonth + (period === "M" ? offset : 0),
			day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === "D" ? offset : 0),
			date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));

		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		if (period === "M" || period === "Y") {
			this._notifyChange(inst);
		}
	},

	/* Ensure a date is within any min/max bounds. */
	_restrictMinMax: function(inst, date) {
		var minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			newDate = (minDate && date < minDate ? minDate : date);
		return (maxDate && newDate > maxDate ? maxDate : newDate);
	},

	/* Notify change of month/year. */
	_notifyChange: function(inst) {
		var onChange = this._get(inst, "onChangeMonthYear");
		if (onChange) {
			onChange.apply((inst.input ? inst.input[0] : null),
				[inst.selectedYear, inst.selectedMonth + 1, inst]);
		}
	},

	/* Determine the number of months to show. */
	_getNumberOfMonths: function(inst) {
		var numMonths = this._get(inst, "numberOfMonths");
		return (numMonths == null ? [1, 1] : (typeof numMonths === "number" ? [1, numMonths] : numMonths));
	},

	/* Determine the current maximum date - ensure no time components are set. */
	_getMinMaxDate: function(inst, minMax) {
		return this._determineDate(inst, this._get(inst, minMax + "Date"), null);
	},

	/* Find the number of days in a given month. */
	_getDaysInMonth: function(year, month) {
		return 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();
	},

	/* Find the day of the week of the first of a month. */
	_getFirstDayOfMonth: function(year, month) {
		return new Date(year, month, 1).getDay();
	},

	/* Determines if we should allow a "next/prev" month display change. */
	_canAdjustMonth: function(inst, offset, curYear, curMonth) {
		var numMonths = this._getNumberOfMonths(inst),
			date = this._daylightSavingAdjust(new Date(curYear,
			curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));

		if (offset < 0) {
			date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));
		}
		return this._isInRange(inst, date);
	},

	/* Is the given date in the accepted range? */
	_isInRange: function(inst, date) {
		var yearSplit, currentYear,
			minDate = this._getMinMaxDate(inst, "min"),
			maxDate = this._getMinMaxDate(inst, "max"),
			minYear = null,
			maxYear = null,
			years = this._get(inst, "yearRange");
			if (years){
				yearSplit = years.split(":");
				currentYear = new Date().getFullYear();
				minYear = parseInt(yearSplit[0], 10) + currentYear;
				maxYear = parseInt(yearSplit[1], 10) + currentYear;
			}

		return ((!minDate || date.getTime() >= minDate.getTime()) &&
			(!maxDate || date.getTime() <= maxDate.getTime()) &&
			(!minYear || date.getFullYear() >= minYear) &&
			(!maxYear || date.getFullYear() <= maxYear));
	},

	/* Provide the configuration settings for formatting/parsing. */
	_getFormatConfig: function(inst) {
		var shortYearCutoff = this._get(inst, "shortYearCutoff");
		shortYearCutoff = (typeof shortYearCutoff !== "string" ? shortYearCutoff :
			new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
		return {shortYearCutoff: shortYearCutoff,
			dayNamesShort: this._get(inst, "dayNamesShort"), dayNames: this._get(inst, "dayNames"),
			monthNamesShort: this._get(inst, "monthNamesShort"), monthNames: this._get(inst, "monthNames")};
	},

	/* Format the given date for display. */
	_formatDate: function(inst, day, month, year) {
		if (!day) {
			inst.currentDay = inst.selectedDay;
			inst.currentMonth = inst.selectedMonth;
			inst.currentYear = inst.selectedYear;
		}
		var date = (day ? (typeof day === "object" ? day :
			this._daylightSavingAdjust(new Date(year, month, day))) :
			this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));
		return this.formatDate(this._get(inst, "dateFormat"), date, this._getFormatConfig(inst));
	}
});

/*
 * Bind hover events for datepicker elements.
 * Done via delegate so the binding only occurs once in the lifetime of the parent div.
 * Global instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.
 */
function bindHover(dpDiv) {
	var selector = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
	return dpDiv.delegate(selector, "mouseout", function() {
			$(this).removeClass("ui-state-hover");
			if (this.className.indexOf("ui-datepicker-prev") !== -1) {
				$(this).removeClass("ui-datepicker-prev-hover");
			}
			if (this.className.indexOf("ui-datepicker-next") !== -1) {
				$(this).removeClass("ui-datepicker-next-hover");
			}
		})
		.delegate(selector, "mouseover", function(){
			if (!$.datepicker._isDisabledDatepicker( instActive.inline ? dpDiv.parent()[0] : instActive.input[0])) {
				$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
				$(this).addClass("ui-state-hover");
				if (this.className.indexOf("ui-datepicker-prev") !== -1) {
					$(this).addClass("ui-datepicker-prev-hover");
				}
				if (this.className.indexOf("ui-datepicker-next") !== -1) {
					$(this).addClass("ui-datepicker-next-hover");
				}
			}
		});
}

/* jQuery extend now ignores nulls! */
function extendRemove(target, props) {
	$.extend(target, props);
	for (var name in props) {
		if (props[name] == null) {
			target[name] = props[name];
		}
	}
	return target;
}

/* Invoke the datepicker functionality.
   @param  options  string - a command, optionally followed by additional parameters or
					Object - settings for attaching new datepicker functionality
   @return  jQuery object */
$.fn.datepicker = function(options){

	/* Verify an empty collection wasn't passed - Fixes #6976 */
	if ( !this.length ) {
		return this;
	}

	/* Initialise the date picker. */
	if (!$.datepicker.initialized) {
		$(document).mousedown($.datepicker._checkExternalClick);
		$.datepicker.initialized = true;
	}

	/* Append datepicker main container to body if not exist. */
	if ($("#"+$.datepicker._mainDivId).length === 0) {
		$("body").append($.datepicker.dpDiv);
	}

	var otherArgs = Array.prototype.slice.call(arguments, 1);
	if (typeof options === "string" && (options === "isDisabled" || options === "getDate" || options === "widget")) {
		return $.datepicker["_" + options + "Datepicker"].
			apply($.datepicker, [this[0]].concat(otherArgs));
	}
	if (options === "option" && arguments.length === 2 && typeof arguments[1] === "string") {
		return $.datepicker["_" + options + "Datepicker"].
			apply($.datepicker, [this[0]].concat(otherArgs));
	}
	return this.each(function() {
		typeof options === "string" ?
			$.datepicker["_" + options + "Datepicker"].
				apply($.datepicker, [this].concat(otherArgs)) :
			$.datepicker._attachDatepicker(this, options);
	});
};

$.datepicker = new Datepicker(); // singleton instance
$.datepicker.initialized = false;
$.datepicker.uuid = new Date().getTime();
$.datepicker.version = "1.10.0";

// Workaround for #4055
// Add another global to avoid noConflict issues with inline event handlers
window["DP_jQuery_" + dpuuid] = $;

})(jQuery);

(function( $, undefined ) {

var sizeRelatedOptions = {
		buttons: true,
		height: true,
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true,
		width: true
	},
	resizableRelatedOptions = {
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true
	};

$.widget( "ui.dialog", {
	version: "1.10.0",
	options: {
		appendTo: "body",
		autoOpen: true,
		buttons: [],
		closeOnEscape: true,
		closeText: "close",
		dialogClass: "",
		draggable: true,
		hide: null,
		height: "auto",
		maxHeight: null,
		maxWidth: null,
		minHeight: 150,
		minWidth: 150,
		modal: false,
		position: {
			my: "center",
			at: "center",
			of: window,
			collision: "fit",
			// Ensure the titlebar is always visible
			using: function( pos ) {
				var topOffset = $( this ).css( pos ).offset().top;
				if ( topOffset < 0 ) {
					$( this ).css( "top", pos.top - topOffset );
				}
			}
		},
		resizable: true,
		show: null,
		title: null,
		width: 300,

		// callbacks
		beforeClose: null,
		close: null,
		drag: null,
		dragStart: null,
		dragStop: null,
		focus: null,
		open: null,
		resize: null,
		resizeStart: null,
		resizeStop: null
	},

	_create: function() {
		this.originalCss = {
			display: this.element[0].style.display,
			width: this.element[0].style.width,
			minHeight: this.element[0].style.minHeight,
			maxHeight: this.element[0].style.maxHeight,
			height: this.element[0].style.height
		};
		this.originalPosition = {
			parent: this.element.parent(),
			index: this.element.parent().children().index( this.element )
		};
		this.originalTitle = this.element.attr("title");
		this.options.title = this.options.title || this.originalTitle;

		this._createWrapper();

		this.element
			.show()
			.removeAttr("title")
			.addClass("ui-dialog-content ui-widget-content")
			.appendTo( this.uiDialog );

		this._createTitlebar();
		this._createButtonPane();

		if ( this.options.draggable && $.fn.draggable ) {
			this._makeDraggable();
		}
		if ( this.options.resizable && $.fn.resizable ) {
			this._makeResizable();
		}

		this._isOpen = false;
	},

	_init: function() {
		if ( this.options.autoOpen ) {
			this.open();
		}
	},

	_appendTo: function() {
		var element = this.options.appendTo;
		if ( element && (element.jquery || element.nodeType) ) {
			return $( element );
		}
		return this.document.find( element || "body" ).eq( 0 );
	},

	_destroy: function() {
		var next,
			originalPosition = this.originalPosition;

		this._destroyOverlay();

		this.element
			.removeUniqueId()
			.removeClass("ui-dialog-content ui-widget-content")
			.css( this.originalCss )
			// Without detaching first, the following becomes really slow
			.detach();

		this.uiDialog.stop( true, true ).remove();

		if ( this.originalTitle ) {
			this.element.attr( "title", this.originalTitle );
		}

		next = originalPosition.parent.children().eq( originalPosition.index );
		// Don't try to place the dialog next to itself (#8613)
		if ( next.length && next[0] !== this.element[0] ) {
			next.before( this.element );
		} else {
			originalPosition.parent.append( this.element );
		}
	},

	widget: function() {
		return this.uiDialog;
	},

	disable: $.noop,
	enable: $.noop,

	close: function( event ) {
		var that = this;

		if ( !this._isOpen || this._trigger( "beforeClose", event ) === false ) {
			return;
		}

		this._isOpen = false;
		this._destroyOverlay();

		if ( !this.opener.filter(":focusable").focus().length ) {
			// Hiding a focused element doesn't trigger blur in WebKit
			// so in case we have nothing to focus on, explicitly blur the active element
			// https://bugs.webkit.org/show_bug.cgi?id=47182
			$( this.document[0].activeElement ).blur();
		}

		this._hide( this.uiDialog, this.options.hide, function() {
			that._trigger( "close", event );
		});
	},

	isOpen: function() {
		return this._isOpen;
	},

	moveToTop: function() {
		this._moveToTop();
	},

	_moveToTop: function( event, silent ) {
		var moved = !!this.uiDialog.nextAll(":visible").insertBefore( this.uiDialog ).length;
		if ( moved && !silent ) {
			this._trigger( "focus", event );
		}
		return moved;
	},

	open: function() {
		if ( this._isOpen ) {
			if ( this._moveToTop() ) {
				this._focusTabbable();
			}
			return;
		}

		this.opener = $( this.document[0].activeElement );

		this._size();
		this._position();
		this._createOverlay();
		this._moveToTop( null, true );
		this._show( this.uiDialog, this.options.show );

		this._focusTabbable();

		this._isOpen = true;
		this._trigger("open");
		this._trigger("focus");
	},

	_focusTabbable: function() {
		// Set focus to the first match:
		// 1. First element inside the dialog matching [autofocus]
		// 2. Tabbable element inside the content element
		// 3. Tabbable element inside the buttonpane
		// 4. The close button
		// 5. The dialog itself
		var hasFocus = this.element.find("[autofocus]");
		if ( !hasFocus.length ) {
			hasFocus = this.element.find(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialogButtonPane.find(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialogTitlebarClose.filter(":tabbable");
		}
		if ( !hasFocus.length ) {
			hasFocus = this.uiDialog;
		}
		hasFocus.eq( 0 ).focus();
	},

	_keepFocus: function( event ) {
		function checkFocus() {
			var activeElement = this.document[0].activeElement,
				isActive = this.uiDialog[0] === activeElement ||
					$.contains( this.uiDialog[0], activeElement );
			if ( !isActive ) {
				this._focusTabbable();
			}
		}
		event.preventDefault();
		checkFocus.call( this );
		// support: IE
		// IE <= 8 doesn't prevent moving focus even with event.preventDefault()
		// so we check again later
		this._delay( checkFocus );
	},

	_createWrapper: function() {
		this.uiDialog = $("<div>")
			.addClass( "ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " +
				this.options.dialogClass )
			.hide()
			.attr({
				// Setting tabIndex makes the div focusable
				tabIndex: -1,
				role: "dialog"
			})
			.appendTo( this._appendTo() );

		this._on( this.uiDialog, {
			keydown: function( event ) {
				if ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&
						event.keyCode === $.ui.keyCode.ESCAPE ) {
					event.preventDefault();
					this.close( event );
					return;
				}

				// prevent tabbing out of dialogs
				if ( event.keyCode !== $.ui.keyCode.TAB ) {
					return;
				}
				var tabbables = this.uiDialog.find(":tabbable"),
					first = tabbables.filter(":first"),
					last  = tabbables.filter(":last");

				if ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {
					first.focus( 1 );
					event.preventDefault();
				} else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {
					last.focus( 1 );
					event.preventDefault();
				}
			},
			mousedown: function( event ) {
				if ( this._moveToTop( event ) ) {
					this._focusTabbable();
				}
			}
		});

		// We assume that any existing aria-describedby attribute means
		// that the dialog content is marked up properly
		// otherwise we brute force the content as the description
		if ( !this.element.find("[aria-describedby]").length ) {
			this.uiDialog.attr({
				"aria-describedby": this.element.uniqueId().attr("id")
			});
		}
	},

	_createTitlebar: function() {
		var uiDialogTitle;

		this.uiDialogTitlebar = $("<div>")
			.addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix")
			.prependTo( this.uiDialog );
		this._on( this.uiDialogTitlebar, {
			mousedown: function( event ) {
				// Don't prevent click on close button (#8838)
				// Focusing a dialog that is partially scrolled out of view
				// causes the browser to scroll it into view, preventing the click event
				if ( !$( event.target ).closest(".ui-dialog-titlebar-close") ) {
					// Dialog isn't getting focus when dragging (#8063)
					this.uiDialog.focus();
				}
			}
		});

		this.uiDialogTitlebarClose = $("<button></button>")
			.button({
				label: this.options.closeText,
				icons: {
					primary: "ui-icon-closethick"
				},
				text: false
			})
			.addClass("ui-dialog-titlebar-close")
			.appendTo( this.uiDialogTitlebar );
		this._on( this.uiDialogTitlebarClose, {
			click: function( event ) {
				event.preventDefault();
				this.close( event );
			}
		});

		uiDialogTitle = $("<span>")
			.uniqueId()
			.addClass("ui-dialog-title")
			.prependTo( this.uiDialogTitlebar );
		this._title( uiDialogTitle );

		this.uiDialog.attr({
			"aria-labelledby": uiDialogTitle.attr("id")
		});
	},

	_title: function( title ) {
		if ( !this.options.title ) {
			title.html("&#160;");
		}
		title.text( this.options.title );
	},

	_createButtonPane: function() {
		this.uiDialogButtonPane = $("<div>")
			.addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");

		this.uiButtonSet = $("<div>")
			.addClass("ui-dialog-buttonset")
			.appendTo( this.uiDialogButtonPane );

		this._createButtons();
	},

	_createButtons: function() {
		var that = this,
			buttons = this.options.buttons;

		// if we already have a button pane, remove it
		this.uiDialogButtonPane.remove();
		this.uiButtonSet.empty();

		if ( $.isEmptyObject( buttons ) ) {
			this.uiDialog.removeClass("ui-dialog-buttons");
			return;
		}

		$.each( buttons, function( name, props ) {
			var click, buttonOptions;
			props = $.isFunction( props ) ?
				{ click: props, text: name } :
				props;
			// Default to a non-submitting button
			props = $.extend( { type: "button" }, props );
			// Change the context for the click callback to be the main element
			click = props.click;
			props.click = function() {
				click.apply( that.element[0], arguments );
			};
			buttonOptions = {
				icons: props.icons,
				text: props.showText
			};
			delete props.icons;
			delete props.showText;
			$( "<button></button>", props )
				.button( buttonOptions )
				.appendTo( that.uiButtonSet );
		});
		this.uiDialog.addClass("ui-dialog-buttons");
		this.uiDialogButtonPane.appendTo( this.uiDialog );
	},

	_makeDraggable: function() {
		var that = this,
			options = this.options;

		function filteredUi( ui ) {
			return {
				position: ui.position,
				offset: ui.offset
			};
		}

		this.uiDialog.draggable({
			cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
			handle: ".ui-dialog-titlebar",
			containment: "document",
			start: function( event, ui ) {
				$( this ).addClass("ui-dialog-dragging");
				that._trigger( "dragStart", event, filteredUi( ui ) );
			},
			drag: function( event, ui ) {
				that._trigger( "drag", event, filteredUi( ui ) );
			},
			stop: function( event, ui ) {
				options.position = [
					ui.position.left - that.document.scrollLeft(),
					ui.position.top - that.document.scrollTop()
				];
				$( this ).removeClass("ui-dialog-dragging");
				that._trigger( "dragStop", event, filteredUi( ui ) );
			}
		});
	},

	_makeResizable: function() {
		var that = this,
			options = this.options,
			handles = options.resizable,
			// .ui-resizable has position: relative defined in the stylesheet
			// but dialogs have to use absolute or fixed positioning
			position = this.uiDialog.css("position"),
			resizeHandles = typeof handles === "string" ?
				handles	:
				"n,e,s,w,se,sw,ne,nw";

		function filteredUi( ui ) {
			return {
				originalPosition: ui.originalPosition,
				originalSize: ui.originalSize,
				position: ui.position,
				size: ui.size
			};
		}

		this.uiDialog.resizable({
			cancel: ".ui-dialog-content",
			containment: "document",
			alsoResize: this.element,
			maxWidth: options.maxWidth,
			maxHeight: options.maxHeight,
			minWidth: options.minWidth,
			minHeight: this._minHeight(),
			handles: resizeHandles,
			start: function( event, ui ) {
				$( this ).addClass("ui-dialog-resizing");
				that._trigger( "resizeStart", event, filteredUi( ui ) );
			},
			resize: function( event, ui ) {
				that._trigger( "resize", event, filteredUi( ui ) );
			},
			stop: function( event, ui ) {
				options.height = $( this ).height();
				options.width = $( this ).width();
				$( this ).removeClass("ui-dialog-resizing");
				that._trigger( "resizeStop", event, filteredUi( ui ) );
			}
		})
		.css( "position", position );
	},

	_minHeight: function() {
		var options = this.options;

		return options.height === "auto" ?
			options.minHeight :
			Math.min( options.minHeight, options.height );
	},

	_position: function() {
		// Need to show the dialog to get the actual offset in the position plugin
		var isVisible = this.uiDialog.is(":visible");
		if ( !isVisible ) {
			this.uiDialog.show();
		}
		this.uiDialog.position( this.options.position );
		if ( !isVisible ) {
			this.uiDialog.hide();
		}
	},

	_setOptions: function( options ) {
		var that = this,
			resize = false,
			resizableOptions = {};

		$.each( options, function( key, value ) {
			that._setOption( key, value );

			if ( key in sizeRelatedOptions ) {
				resize = true;
			}
			if ( key in resizableRelatedOptions ) {
				resizableOptions[ key ] = value;
			}
		});

		if ( resize ) {
			this._size();
			this._position();
		}
		if ( this.uiDialog.is(":data(ui-resizable)") ) {
			this.uiDialog.resizable( "option", resizableOptions );
		}
	},

	_setOption: function( key, value ) {
		/*jshint maxcomplexity:15*/
		var isDraggable, isResizable,
			uiDialog = this.uiDialog;

		if ( key === "dialogClass" ) {
			uiDialog
				.removeClass( this.options.dialogClass )
				.addClass( value );
		}

		if ( key === "disabled" ) {
			return;
		}

		this._super( key, value );

		if ( key === "appendTo" ) {
			this.uiDialog.appendTo( this._appendTo() );
		}

		if ( key === "buttons" ) {
			this._createButtons();
		}

		if ( key === "closeText" ) {
			this.uiDialogTitlebarClose.button({
				// Ensure that we always pass a string
				label: "" + value
			});
		}

		if ( key === "draggable" ) {
			isDraggable = uiDialog.is(":data(ui-draggable)");
			if ( isDraggable && !value ) {
				uiDialog.draggable("destroy");
			}

			if ( !isDraggable && value ) {
				this._makeDraggable();
			}
		}

		if ( key === "position" ) {
			this._position();
		}

		if ( key === "resizable" ) {
			// currently resizable, becoming non-resizable
			isResizable = uiDialog.is(":data(ui-resizable)");
			if ( isResizable && !value ) {
				uiDialog.resizable("destroy");
			}

			// currently resizable, changing handles
			if ( isResizable && typeof value === "string" ) {
				uiDialog.resizable( "option", "handles", value );
			}

			// currently non-resizable, becoming resizable
			if ( !isResizable && value !== false ) {
				this._makeResizable();
			}
		}

		if ( key === "title" ) {
			this._title( this.uiDialogTitlebar.find(".ui-dialog-title") );
		}
	},

	_size: function() {
		// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content
		// divs will both have width and height set, so we need to reset them
		var nonContentHeight, minContentHeight, maxContentHeight,
			options = this.options;

		// Reset content sizing
		this.element.show().css({
			width: "auto",
			minHeight: 0,
			maxHeight: "none",
			height: 0
		});

		if ( options.minWidth > options.width ) {
			options.width = options.minWidth;
		}

		// reset wrapper sizing
		// determine the height of all the non-content elements
		nonContentHeight = this.uiDialog.css({
				height: "auto",
				width: options.width
			})
			.outerHeight();
		minContentHeight = Math.max( 0, options.minHeight - nonContentHeight );
		maxContentHeight = typeof options.maxHeight === "number" ?
			Math.max( 0, options.maxHeight - nonContentHeight ) :
			"none";

		if ( options.height === "auto" ) {
			this.element.css({
				minHeight: minContentHeight,
				maxHeight: maxContentHeight,
				height: "auto"
			});
		} else {
			this.element.height( Math.max( 0, options.height - nonContentHeight ) );
		}

		if (this.uiDialog.is(":data(ui-resizable)") ) {
			this.uiDialog.resizable( "option", "minHeight", this._minHeight() );
		}
	},

	_createOverlay: function() {
		if ( !this.options.modal ) {
			return;
		}

		if ( !$.ui.dialog.overlayInstances ) {
			// Prevent use of anchors and inputs.
			// We use a delay in case the overlay is created from an
			// event that we're going to be cancelling. (#2804)
			this._delay(function() {
				// Handle .dialog().dialog("close") (#4065)
				if ( $.ui.dialog.overlayInstances ) {
					this._on( this.document, {
						focusin: function( event ) {
							if ( !$( event.target ).closest(".ui-dialog").length ) {
								event.preventDefault();
								$(".ui-dialog:visible:last .ui-dialog-content")
									.data("ui-dialog")._focusTabbable();
							}
						}
					});
				}
			});
		}

		this.overlay = $("<div>")
			.addClass("ui-widget-overlay ui-front")
			.appendTo( this.document[0].body );
		this._on( this.overlay, {
			mousedown: "_keepFocus"
		});
		$.ui.dialog.overlayInstances++;
	},

	_destroyOverlay: function() {
		if ( !this.options.modal ) {
			return;
		}

		$.ui.dialog.overlayInstances--;
		if ( !$.ui.dialog.overlayInstances ) {
			this._off( this.document, "focusin" );
		}
		this.overlay.remove();
	}
});

$.ui.dialog.overlayInstances = 0;

// DEPRECATED
if ( $.uiBackCompat !== false ) {
	// position option with array notation
	// just override with old implementation
	$.widget( "ui.dialog", $.ui.dialog, {
		_position: function() {
			var position = this.options.position,
				myAt = [],
				offset = [ 0, 0 ],
				isVisible;

			if ( position ) {
				if ( typeof position === "string" || (typeof position === "object" && "0" in position ) ) {
					myAt = position.split ? position.split(" ") : [ position[0], position[1] ];
					if ( myAt.length === 1 ) {
						myAt[1] = myAt[0];
					}

					$.each( [ "left", "top" ], function( i, offsetPosition ) {
						if ( +myAt[ i ] === myAt[ i ] ) {
							offset[ i ] = myAt[ i ];
							myAt[ i ] = offsetPosition;
						}
					});

					position = {
						my: myAt[0] + (offset[0] < 0 ? offset[0] : "+" + offset[0]) + " " +
							myAt[1] + (offset[1] < 0 ? offset[1] : "+" + offset[1]),
						at: myAt.join(" ")
					};
				}

				position = $.extend( {}, $.ui.dialog.prototype.options.position, position );
			} else {
				position = $.ui.dialog.prototype.options.position;
			}

			// need to show the dialog to get the actual offset in the position plugin
			isVisible = this.uiDialog.is(":visible");
			if ( !isVisible ) {
				this.uiDialog.show();
			}
			this.uiDialog.position( position );
			if ( !isVisible ) {
				this.uiDialog.hide();
			}
		}
	});
}

}( jQuery ) );

(function( $, undefined ) {

var rvertical = /up|down|vertical/,
	rpositivemotion = /up|left|vertical|horizontal/;

$.effects.effect.blind = function( o, done ) {
	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		direction = o.direction || "up",
		vertical = rvertical.test( direction ),
		ref = vertical ? "height" : "width",
		ref2 = vertical ? "top" : "left",
		motion = rpositivemotion.test( direction ),
		animation = {},
		show = mode === "show",
		wrapper, distance, margin;

	// if already wrapped, the wrapper's properties are my property. #6245
	if ( el.parent().is( ".ui-effects-wrapper" ) ) {
		$.effects.save( el.parent(), props );
	} else {
		$.effects.save( el, props );
	}
	el.show();
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});

	distance = wrapper[ ref ]();
	margin = parseFloat( wrapper.css( ref2 ) ) || 0;

	animation[ ref ] = show ? distance : 0;
	if ( !motion ) {
		el
			.css( vertical ? "bottom" : "right", 0 )
			.css( vertical ? "top" : "left", "auto" )
			.css({ position: "absolute" });

		animation[ ref2 ] = show ? margin : distance + margin;
	}

	// start at 0 if we are showing
	if ( show ) {
		wrapper.css( ref, 0 );
		if ( ! motion ) {
			wrapper.css( ref2, margin + distance );
		}
	}

	// Animate
	wrapper.animate( animation, {
		duration: o.duration,
		easing: o.easing,
		queue: false,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.bounce = function( o, done ) {
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],

		// defaults:
		mode = $.effects.setMode( el, o.mode || "effect" ),
		hide = mode === "hide",
		show = mode === "show",
		direction = o.direction || "up",
		distance = o.distance,
		times = o.times || 5,

		// number of internal animations
		anims = times * 2 + ( show || hide ? 1 : 0 ),
		speed = o.duration / anims,
		easing = o.easing,

		// utility:
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		motion = ( direction === "up" || direction === "left" ),
		i,
		upAnim,
		downAnim,

		// we will need to re-assemble the queue to stack our animations in place
		queue = el.queue(),
		queuelen = queue.length;

	// Avoid touching opacity to prevent clearType and PNG issues in IE
	if ( show || hide ) {
		props.push( "opacity" );
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el ); // Create Wrapper

	// default distance for the BIGGEST bounce is the outer Distance / 3
	if ( !distance ) {
		distance = el[ ref === "top" ? "outerHeight" : "outerWidth" ]() / 3;
	}

	if ( show ) {
		downAnim = { opacity: 1 };
		downAnim[ ref ] = 0;

		// if we are showing, force opacity 0 and set the initial position
		// then do the "first" animation
		el.css( "opacity", 0 )
			.css( ref, motion ? -distance * 2 : distance * 2 )
			.animate( downAnim, speed, easing );
	}

	// start at the smallest distance if we are hiding
	if ( hide ) {
		distance = distance / Math.pow( 2, times - 1 );
	}

	downAnim = {};
	downAnim[ ref ] = 0;
	// Bounces up/down/left/right then back to 0 -- times * 2 animations happen here
	for ( i = 0; i < times; i++ ) {
		upAnim = {};
		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;

		el.animate( upAnim, speed, easing )
			.animate( downAnim, speed, easing );

		distance = hide ? distance * 2 : distance / 2;
	}

	// Last Bounce when Hiding
	if ( hide ) {
		upAnim = { opacity: 0 };
		upAnim[ ref ] = ( motion ? "-=" : "+=" ) + distance;

		el.animate( upAnim, speed, easing );
	}

	el.queue(function() {
		if ( hide ) {
			el.hide();
		}
		$.effects.restore( el, props );
		$.effects.removeWrapper( el );
		done();
	});

	// inject all the animations we just queued to be first in line (after "inprogress")
	if ( queuelen > 1) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	el.dequeue();

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.clip = function( o, done ) {
	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		direction = o.direction || "vertical",
		vert = direction === "vertical",
		size = vert ? "height" : "width",
		position = vert ? "top" : "left",
		animation = {},
		wrapper, animate, distance;

	// Save & Show
	$.effects.save( el, props );
	el.show();

	// Create Wrapper
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});
	animate = ( el[0].tagName === "IMG" ) ? wrapper : el;
	distance = animate[ size ]();

	// Shift
	if ( show ) {
		animate.css( size, 0 );
		animate.css( position, distance / 2 );
	}

	// Create Animation Object:
	animation[ size ] = show ? distance : 0;
	animation[ position ] = show ? 0 : distance / 2;

	// Animate
	animate.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( !show ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.drop = function( o, done ) {

	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		direction = o.direction || "left",
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		motion = ( direction === "up" || direction === "left" ) ? "pos" : "neg",
		animation = {
			opacity: show ? 1 : 0
		},
		distance;

	// Adjust
	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	distance = o.distance || el[ ref === "top" ? "outerHeight": "outerWidth" ]( true ) / 2;

	if ( show ) {
		el
			.css( "opacity", 0 )
			.css( ref, motion === "pos" ? -distance : distance );
	}

	// Animation
	animation[ ref ] = ( show ?
		( motion === "pos" ? "+=" : "-=" ) :
		( motion === "pos" ? "-=" : "+=" ) ) +
		distance;

	// Animate
	el.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.explode = function( o, done ) {

	var rows = o.pieces ? Math.round( Math.sqrt( o.pieces ) ) : 3,
		cells = rows,
		el = $( this ),
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",

		// show and then visibility:hidden the element before calculating offset
		offset = el.show().css( "visibility", "hidden" ).offset(),

		// width and height of a piece
		width = Math.ceil( el.outerWidth() / cells ),
		height = Math.ceil( el.outerHeight() / rows ),
		pieces = [],

		// loop
		i, j, left, top, mx, my;

	// children animate complete:
	function childComplete() {
		pieces.push( this );
		if ( pieces.length === rows * cells ) {
			animComplete();
		}
	}

	// clone the element for each row and cell.
	for( i = 0; i < rows ; i++ ) { // ===>
		top = offset.top + i * height;
		my = i - ( rows - 1 ) / 2 ;

		for( j = 0; j < cells ; j++ ) { // |||
			left = offset.left + j * width;
			mx = j - ( cells - 1 ) / 2 ;

			// Create a clone of the now hidden main element that will be absolute positioned
			// within a wrapper div off the -left and -top equal to size of our pieces
			el
				.clone()
				.appendTo( "body" )
				.wrap( "<div></div>" )
				.css({
					position: "absolute",
					visibility: "visible",
					left: -j * width,
					top: -i * height
				})

			// select the wrapper - make it overflow: hidden and absolute positioned based on
			// where the original was located +left and +top equal to the size of pieces
				.parent()
				.addClass( "ui-effects-explode" )
				.css({
					position: "absolute",
					overflow: "hidden",
					width: width,
					height: height,
					left: left + ( show ? mx * width : 0 ),
					top: top + ( show ? my * height : 0 ),
					opacity: show ? 0 : 1
				}).animate({
					left: left + ( show ? 0 : mx * width ),
					top: top + ( show ? 0 : my * height ),
					opacity: show ? 1 : 0
				}, o.duration || 500, o.easing, childComplete );
		}
	}

	function animComplete() {
		el.css({
			visibility: "visible"
		});
		$( pieces ).remove();
		if ( !show ) {
			el.hide();
		}
		done();
	}
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.fade = function( o, done ) {
	var el = $( this ),
		mode = $.effects.setMode( el, o.mode || "toggle" );

	el.animate({
		opacity: mode
	}, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: done
	});
};

})( jQuery );

(function( $, undefined ) {

$.effects.effect.fold = function( o, done ) {

	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "hide" ),
		show = mode === "show",
		hide = mode === "hide",
		size = o.size || 15,
		percent = /([0-9]+)%/.exec( size ),
		horizFirst = !!o.horizFirst,
		widthFirst = show !== horizFirst,
		ref = widthFirst ? [ "width", "height" ] : [ "height", "width" ],
		duration = o.duration / 2,
		wrapper, distance,
		animation1 = {},
		animation2 = {};

	$.effects.save( el, props );
	el.show();

	// Create Wrapper
	wrapper = $.effects.createWrapper( el ).css({
		overflow: "hidden"
	});
	distance = widthFirst ?
		[ wrapper.width(), wrapper.height() ] :
		[ wrapper.height(), wrapper.width() ];

	if ( percent ) {
		size = parseInt( percent[ 1 ], 10 ) / 100 * distance[ hide ? 0 : 1 ];
	}
	if ( show ) {
		wrapper.css( horizFirst ? {
			height: 0,
			width: size
		} : {
			height: size,
			width: 0
		});
	}

	// Animation
	animation1[ ref[ 0 ] ] = show ? distance[ 0 ] : size;
	animation2[ ref[ 1 ] ] = show ? distance[ 1 ] : 0;

	// Animate
	wrapper
		.animate( animation1, duration, o.easing )
		.animate( animation2, duration, o.easing, function() {
			if ( hide ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.highlight = function( o, done ) {
	var elem = $( this ),
		props = [ "backgroundImage", "backgroundColor", "opacity" ],
		mode = $.effects.setMode( elem, o.mode || "show" ),
		animation = {
			backgroundColor: elem.css( "backgroundColor" )
		};

	if (mode === "hide") {
		animation.opacity = 0;
	}

	$.effects.save( elem, props );

	elem
		.show()
		.css({
			backgroundImage: "none",
			backgroundColor: o.color || "#ffff99"
		})
		.animate( animation, {
			queue: false,
			duration: o.duration,
			easing: o.easing,
			complete: function() {
				if ( mode === "hide" ) {
					elem.hide();
				}
				$.effects.restore( elem, props );
				done();
			}
		});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.pulsate = function( o, done ) {
	var elem = $( this ),
		mode = $.effects.setMode( elem, o.mode || "show" ),
		show = mode === "show",
		hide = mode === "hide",
		showhide = ( show || mode === "hide" ),

		// showing or hiding leaves of the "last" animation
		anims = ( ( o.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),
		duration = o.duration / anims,
		animateTo = 0,
		queue = elem.queue(),
		queuelen = queue.length,
		i;

	if ( show || !elem.is(":visible")) {
		elem.css( "opacity", 0 ).show();
		animateTo = 1;
	}

	// anims - 1 opacity "toggles"
	for ( i = 1; i < anims; i++ ) {
		elem.animate({
			opacity: animateTo
		}, duration, o.easing );
		animateTo = 1 - animateTo;
	}

	elem.animate({
		opacity: animateTo
	}, duration, o.easing);

	elem.queue(function() {
		if ( hide ) {
			elem.hide();
		}
		done();
	});

	// We just queued up "anims" animations, we need to put them next in the queue
	if ( queuelen > 1 ) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	elem.dequeue();
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.puff = function( o, done ) {
	var elem = $( this ),
		mode = $.effects.setMode( elem, o.mode || "hide" ),
		hide = mode === "hide",
		percent = parseInt( o.percent, 10 ) || 150,
		factor = percent / 100,
		original = {
			height: elem.height(),
			width: elem.width(),
			outerHeight: elem.outerHeight(),
			outerWidth: elem.outerWidth()
		};

	$.extend( o, {
		effect: "scale",
		queue: false,
		fade: true,
		mode: mode,
		complete: done,
		percent: hide ? percent : 100,
		from: hide ?
			original :
			{
				height: original.height * factor,
				width: original.width * factor,
				outerHeight: original.outerHeight * factor,
				outerWidth: original.outerWidth * factor
			}
	});

	elem.effect( o );
};

$.effects.effect.scale = function( o, done ) {

	// Create element
	var el = $( this ),
		options = $.extend( true, {}, o ),
		mode = $.effects.setMode( el, o.mode || "effect" ),
		percent = parseInt( o.percent, 10 ) ||
			( parseInt( o.percent, 10 ) === 0 ? 0 : ( mode === "hide" ? 0 : 100 ) ),
		direction = o.direction || "both",
		origin = o.origin,
		original = {
			height: el.height(),
			width: el.width(),
			outerHeight: el.outerHeight(),
			outerWidth: el.outerWidth()
		},
		factor = {
			y: direction !== "horizontal" ? (percent / 100) : 1,
			x: direction !== "vertical" ? (percent / 100) : 1
		};

	// We are going to pass this effect to the size effect:
	options.effect = "size";
	options.queue = false;
	options.complete = done;

	// Set default origin and restore for show/hide
	if ( mode !== "effect" ) {
		options.origin = origin || ["middle","center"];
		options.restore = true;
	}

	options.from = o.from || ( mode === "show" ? {
		height: 0,
		width: 0,
		outerHeight: 0,
		outerWidth: 0
	} : original );
	options.to = {
		height: original.height * factor.y,
		width: original.width * factor.x,
		outerHeight: original.outerHeight * factor.y,
		outerWidth: original.outerWidth * factor.x
	};

	// Fade option to support puff
	if ( options.fade ) {
		if ( mode === "show" ) {
			options.from.opacity = 0;
			options.to.opacity = 1;
		}
		if ( mode === "hide" ) {
			options.from.opacity = 1;
			options.to.opacity = 0;
		}
	}

	// Animate
	el.effect( options );

};

$.effects.effect.size = function( o, done ) {

	// Create element
	var original, baseline, factor,
		el = $( this ),
		props0 = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ],

		// Always restore
		props1 = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ],

		// Copy for children
		props2 = [ "width", "height", "overflow" ],
		cProps = [ "fontSize" ],
		vProps = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ],
		hProps = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ],

		// Set options
		mode = $.effects.setMode( el, o.mode || "effect" ),
		restore = o.restore || mode !== "effect",
		scale = o.scale || "both",
		origin = o.origin || [ "middle", "center" ],
		position = el.css( "position" ),
		props = restore ? props0 : props1,
		zero = {
			height: 0,
			width: 0,
			outerHeight: 0,
			outerWidth: 0
		};

	if ( mode === "show" ) {
		el.show();
	}
	original = {
		height: el.height(),
		width: el.width(),
		outerHeight: el.outerHeight(),
		outerWidth: el.outerWidth()
	};

	if ( o.mode === "toggle" && mode === "show" ) {
		el.from = o.to || zero;
		el.to = o.from || original;
	} else {
		el.from = o.from || ( mode === "show" ? zero : original );
		el.to = o.to || ( mode === "hide" ? zero : original );
	}

	// Set scaling factor
	factor = {
		from: {
			y: el.from.height / original.height,
			x: el.from.width / original.width
		},
		to: {
			y: el.to.height / original.height,
			x: el.to.width / original.width
		}
	};

	// Scale the css box
	if ( scale === "box" || scale === "both" ) {

		// Vertical props scaling
		if ( factor.from.y !== factor.to.y ) {
			props = props.concat( vProps );
			el.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );
		}

		// Horizontal props scaling
		if ( factor.from.x !== factor.to.x ) {
			props = props.concat( hProps );
			el.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );
			el.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );
		}
	}

	// Scale the content
	if ( scale === "content" || scale === "both" ) {

		// Vertical props scaling
		if ( factor.from.y !== factor.to.y ) {
			props = props.concat( cProps ).concat( props2 );
			el.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );
		}
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );
	el.css( "overflow", "hidden" ).css( el.from );

	// Adjust
	if (origin) { // Calculate baseline shifts
		baseline = $.effects.getBaseline( origin, original );
		el.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;
		el.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;
		el.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;
		el.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;
	}
	el.css( el.from ); // set top & left

	// Animate
	if ( scale === "content" || scale === "both" ) { // Scale the children

		// Add margins/font-size
		vProps = vProps.concat([ "marginTop", "marginBottom" ]).concat(cProps);
		hProps = hProps.concat([ "marginLeft", "marginRight" ]);
		props2 = props0.concat(vProps).concat(hProps);

		el.find( "*[width]" ).each( function(){
			var child = $( this ),
				c_original = {
					height: child.height(),
					width: child.width(),
					outerHeight: child.outerHeight(),
					outerWidth: child.outerWidth()
				};
			if (restore) {
				$.effects.save(child, props2);
			}

			child.from = {
				height: c_original.height * factor.from.y,
				width: c_original.width * factor.from.x,
				outerHeight: c_original.outerHeight * factor.from.y,
				outerWidth: c_original.outerWidth * factor.from.x
			};
			child.to = {
				height: c_original.height * factor.to.y,
				width: c_original.width * factor.to.x,
				outerHeight: c_original.height * factor.to.y,
				outerWidth: c_original.width * factor.to.x
			};

			// Vertical props scaling
			if ( factor.from.y !== factor.to.y ) {
				child.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );
				child.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );
			}

			// Horizontal props scaling
			if ( factor.from.x !== factor.to.x ) {
				child.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );
				child.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );
			}

			// Animate children
			child.css( child.from );
			child.animate( child.to, o.duration, o.easing, function() {

				// Restore children
				if ( restore ) {
					$.effects.restore( child, props2 );
				}
			});
		});
	}

	// Animate
	el.animate( el.to, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( el.to.opacity === 0 ) {
				el.css( "opacity", el.from.opacity );
			}
			if( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			if ( !restore ) {

				// we need to calculate our new positioning based on the scaling
				if ( position === "static" ) {
					el.css({
						position: "relative",
						top: el.to.top,
						left: el.to.left
					});
				} else {
					$.each([ "top", "left" ], function( idx, pos ) {
						el.css( pos, function( _, str ) {
							var val = parseInt( str, 10 ),
								toRef = idx ? el.to.left : el.to.top;

							// if original was "auto", recalculate the new value from wrapper
							if ( str === "auto" ) {
								return toRef + "px";
							}

							return val + toRef + "px";
						});
					});
				}
			}

			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.shake = function( o, done ) {

	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "height", "width" ],
		mode = $.effects.setMode( el, o.mode || "effect" ),
		direction = o.direction || "left",
		distance = o.distance || 20,
		times = o.times || 3,
		anims = times * 2 + 1,
		speed = Math.round(o.duration/anims),
		ref = (direction === "up" || direction === "down") ? "top" : "left",
		positiveMotion = (direction === "up" || direction === "left"),
		animation = {},
		animation1 = {},
		animation2 = {},
		i,

		// we will need to re-assemble the queue to stack our animations in place
		queue = el.queue(),
		queuelen = queue.length;

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	// Animation
	animation[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance;
	animation1[ ref ] = ( positiveMotion ? "+=" : "-=" ) + distance * 2;
	animation2[ ref ] = ( positiveMotion ? "-=" : "+=" ) + distance * 2;

	// Animate
	el.animate( animation, speed, o.easing );

	// Shakes
	for ( i = 1; i < times; i++ ) {
		el.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );
	}
	el
		.animate( animation1, speed, o.easing )
		.animate( animation, speed / 2, o.easing )
		.queue(function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

	// inject all the animations we just queued to be first in line (after "inprogress")
	if ( queuelen > 1) {
		queue.splice.apply( queue,
			[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );
	}
	el.dequeue();

};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.slide = function( o, done ) {

	// Create element
	var el = $( this ),
		props = [ "position", "top", "bottom", "left", "right", "width", "height" ],
		mode = $.effects.setMode( el, o.mode || "show" ),
		show = mode === "show",
		direction = o.direction || "left",
		ref = (direction === "up" || direction === "down") ? "top" : "left",
		positiveMotion = (direction === "up" || direction === "left"),
		distance,
		animation = {};

	// Adjust
	$.effects.save( el, props );
	el.show();
	distance = o.distance || el[ ref === "top" ? "outerHeight" : "outerWidth" ]( true );

	$.effects.createWrapper( el ).css({
		overflow: "hidden"
	});

	if ( show ) {
		el.css( ref, positiveMotion ? (isNaN(distance) ? "-" + distance : -distance) : distance );
	}

	// Animation
	animation[ ref ] = ( show ?
		( positiveMotion ? "+=" : "-=") :
		( positiveMotion ? "-=" : "+=")) +
		distance;

	// Animate
	el.animate( animation, {
		queue: false,
		duration: o.duration,
		easing: o.easing,
		complete: function() {
			if ( mode === "hide" ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};

})(jQuery);

(function( $, undefined ) {

$.effects.effect.transfer = function( o, done ) {
	var elem = $( this ),
		target = $( o.to ),
		targetFixed = target.css( "position" ) === "fixed",
		body = $("body"),
		fixTop = targetFixed ? body.scrollTop() : 0,
		fixLeft = targetFixed ? body.scrollLeft() : 0,
		endPosition = target.offset(),
		animation = {
			top: endPosition.top - fixTop ,
			left: endPosition.left - fixLeft ,
			height: target.innerHeight(),
			width: target.innerWidth()
		},
		startPosition = elem.offset(),
		transfer = $( "<div class='ui-effects-transfer'></div>" )
			.appendTo( document.body )
			.addClass( o.className )
			.css({
				top: startPosition.top - fixTop ,
				left: startPosition.left - fixLeft ,
				height: elem.innerHeight(),
				width: elem.innerWidth(),
				position: targetFixed ? "fixed" : "absolute"
			})
			.animate( animation, o.duration, o.easing, function() {
				transfer.remove();
				done();
			});
};

})(jQuery);

(function( $, undefined ) {

$.widget( "ui.menu", {
	version: "1.10.0",
	defaultElement: "<ul>",
	delay: 300,
	options: {
		icons: {
			submenu: "ui-icon-carat-1-e"
		},
		menus: "ul",
		position: {
			my: "left top",
			at: "right top"
		},
		role: "menu",

		// callbacks
		blur: null,
		focus: null,
		select: null
	},

	_create: function() {
		this.activeMenu = this.element;
		// flag used to prevent firing of the click handler
		// as the event bubbles up through nested menus
		this.mouseHandled = false;
		this.element
			.uniqueId()
			.addClass( "ui-menu ui-widget ui-widget-content ui-corner-all" )
			.toggleClass( "ui-menu-icons", !!this.element.find( ".ui-icon" ).length )
			.attr({
				role: this.options.role,
				tabIndex: 0
			})
			// need to catch all clicks on disabled menu
			// not possible through _on
			.bind( "click" + this.eventNamespace, $.proxy(function( event ) {
				if ( this.options.disabled ) {
					event.preventDefault();
				}
			}, this ));

		if ( this.options.disabled ) {
			this.element
				.addClass( "ui-state-disabled" )
				.attr( "aria-disabled", "true" );
		}

		this._on({
			// Prevent focus from sticking to links inside menu after clicking
			// them (focus should always stay on UL during navigation).
			"mousedown .ui-menu-item > a": function( event ) {
				event.preventDefault();
			},
			"click .ui-state-disabled > a": function( event ) {
				event.preventDefault();
			},
			"click .ui-menu-item:has(a)": function( event ) {
				var target = $( event.target ).closest( ".ui-menu-item" );
				if ( !this.mouseHandled && target.not( ".ui-state-disabled" ).length ) {
					this.mouseHandled = true;

					this.select( event );
					// Open submenu on click
					if ( target.has( ".ui-menu" ).length ) {
						this.expand( event );
					} else if ( !this.element.is( ":focus" ) ) {
						// Redirect focus to the menu
						this.element.trigger( "focus", [ true ] );

						// If the active item is on the top level, let it stay active.
						// Otherwise, blur the active item since it is no longer visible.
						if ( this.active && this.active.parents( ".ui-menu" ).length === 1 ) {
							clearTimeout( this.timer );
						}
					}
				}
			},
			"mouseenter .ui-menu-item": function( event ) {
				var target = $( event.currentTarget );
				// Remove ui-state-active class from siblings of the newly focused menu item
				// to avoid a jump caused by adjacent elements both having a class with a border
				target.siblings().children( ".ui-state-active" ).removeClass( "ui-state-active" );
				this.focus( event, target );
			},
			mouseleave: "collapseAll",
			"mouseleave .ui-menu": "collapseAll",
			focus: function( event, keepActiveItem ) {
				// If there's already an active item, keep it active
				// If not, activate the first item
				var item = this.active || this.element.children( ".ui-menu-item" ).eq( 0 );

				if ( !keepActiveItem ) {
					this.focus( event, item );
				}
			},
			blur: function( event ) {
				this._delay(function() {
					if ( !$.contains( this.element[0], this.document[0].activeElement ) ) {
						this.collapseAll( event );
					}
				});
			},
			keydown: "_keydown"
		});

		this.refresh();

		// Clicks outside of a menu collapse any open menus
		this._on( this.document, {
			click: function( event ) {
				if ( !$( event.target ).closest( ".ui-menu" ).length ) {
					this.collapseAll( event );
				}

				// Reset the mouseHandled flag
				this.mouseHandled = false;
			}
		});
	},

	_destroy: function() {
		// Destroy (sub)menus
		this.element
			.removeAttr( "aria-activedescendant" )
			.find( ".ui-menu" ).addBack()
				.removeClass( "ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons" )
				.removeAttr( "role" )
				.removeAttr( "tabIndex" )
				.removeAttr( "aria-labelledby" )
				.removeAttr( "aria-expanded" )
				.removeAttr( "aria-hidden" )
				.removeAttr( "aria-disabled" )
				.removeUniqueId()
				.show();

		// Destroy menu items
		this.element.find( ".ui-menu-item" )
			.removeClass( "ui-menu-item" )
			.removeAttr( "role" )
			.removeAttr( "aria-disabled" )
			.children( "a" )
				.removeUniqueId()
				.removeClass( "ui-corner-all ui-state-hover" )
				.removeAttr( "tabIndex" )
				.removeAttr( "role" )
				.removeAttr( "aria-haspopup" )
				.children().each( function() {
					var elem = $( this );
					if ( elem.data( "ui-menu-submenu-carat" ) ) {
						elem.remove();
					}
				});

		// Destroy menu dividers
		this.element.find( ".ui-menu-divider" ).removeClass( "ui-menu-divider ui-widget-content" );
	},

	_keydown: function( event ) {
		/*jshint maxcomplexity:20*/
		var match, prev, character, skip, regex,
			preventDefault = true;

		function escape( value ) {
			return value.replace( /[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&" );
		}

		switch ( event.keyCode ) {
		case $.ui.keyCode.PAGE_UP:
			this.previousPage( event );
			break;
		case $.ui.keyCode.PAGE_DOWN:
			this.nextPage( event );
			break;
		case $.ui.keyCode.HOME:
			this._move( "first", "first", event );
			break;
		case $.ui.keyCode.END:
			this._move( "last", "last", event );
			break;
		case $.ui.keyCode.UP:
			this.previous( event );
			break;
		case $.ui.keyCode.DOWN:
			this.next( event );
			break;
		case $.ui.keyCode.LEFT:
			this.collapse( event );
			break;
		case $.ui.keyCode.RIGHT:
			if ( this.active && !this.active.is( ".ui-state-disabled" ) ) {
				this.expand( event );
			}
			break;
		case $.ui.keyCode.ENTER:
		case $.ui.keyCode.SPACE:
			this._activate( event );
			break;
		case $.ui.keyCode.ESCAPE:
			this.collapse( event );
			break;
		default:
			preventDefault = false;
			prev = this.previousFilter || "";
			character = String.fromCharCode( event.keyCode );
			skip = false;

			clearTimeout( this.filterTimer );

			if ( character === prev ) {
				skip = true;
			} else {
				character = prev + character;
			}

			regex = new RegExp( "^" + escape( character ), "i" );
			match = this.activeMenu.children( ".ui-menu-item" ).filter(function() {
				return regex.test( $( this ).children( "a" ).text() );
			});
			match = skip && match.index( this.active.next() ) !== -1 ?
				this.active.nextAll( ".ui-menu-item" ) :
				match;

			// If no matches on the current filter, reset to the last character pressed
			// to move down the menu to the first item that starts with that character
			if ( !match.length ) {
				character = String.fromCharCode( event.keyCode );
				regex = new RegExp( "^" + escape( character ), "i" );
				match = this.activeMenu.children( ".ui-menu-item" ).filter(function() {
					return regex.test( $( this ).children( "a" ).text() );
				});
			}

			if ( match.length ) {
				this.focus( event, match );
				if ( match.length > 1 ) {
					this.previousFilter = character;
					this.filterTimer = this._delay(function() {
						delete this.previousFilter;
					}, 1000 );
				} else {
					delete this.previousFilter;
				}
			} else {
				delete this.previousFilter;
			}
		}

		if ( preventDefault ) {
			event.preventDefault();
		}
	},

	_activate: function( event ) {
		if ( !this.active.is( ".ui-state-disabled" ) ) {
			if ( this.active.children( "a[aria-haspopup='true']" ).length ) {
				this.expand( event );
			} else {
				this.select( event );
			}
		}
	},

	refresh: function() {
		var menus,
			icon = this.options.icons.submenu,
			submenus = this.element.find( this.options.menus );

		// Initialize nested menus
		submenus.filter( ":not(.ui-menu)" )
			.addClass( "ui-menu ui-widget ui-widget-content ui-corner-all" )
			.hide()
			.attr({
				role: this.options.role,
				"aria-hidden": "true",
				"aria-expanded": "false"
			})
			.each(function() {
				var menu = $( this ),
					item = menu.prev( "a" ),
					submenuCarat = $( "<span>" )
						.addClass( "ui-menu-icon ui-icon " + icon )
						.data( "ui-menu-submenu-carat", true );

				item
					.attr( "aria-haspopup", "true" )
					.prepend( submenuCarat );
				menu.attr( "aria-labelledby", item.attr( "id" ) );
			});

		menus = submenus.add( this.element );

		// Don't refresh list items that are already adapted
		menus.children( ":not(.ui-menu-item):has(a)" )
			.addClass( "ui-menu-item" )
			.attr( "role", "presentation" )
			.children( "a" )
				.uniqueId()
				.addClass( "ui-corner-all" )
				.attr({
					tabIndex: -1,
					role: this._itemRole()
				});

		// Initialize unlinked menu-items containing spaces and/or dashes only as dividers
		menus.children( ":not(.ui-menu-item)" ).each(function() {
			var item = $( this );
			// hyphen, em dash, en dash
			if ( !/[^\-—–\s]/.test( item.text() ) ) {
				item.addClass( "ui-widget-content ui-menu-divider" );
			}
		});

		// Add aria-disabled attribute to any disabled menu item
		menus.children( ".ui-state-disabled" ).attr( "aria-disabled", "true" );

		// If the active item has been removed, blur the menu
		if ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {
			this.blur();
		}
	},

	_itemRole: function() {
		return {
			menu: "menuitem",
			listbox: "option"
		}[ this.options.role ];
	},

	_setOption: function( key, value ) {
		if ( key === "icons" ) {
			this.element.find( ".ui-menu-icon" )
				.removeClass( this.options.icons.submenu )
				.addClass( value.submenu );
		}
		this._super( key, value );
	},

	focus: function( event, item ) {
		var nested, focused;
		this.blur( event, event && event.type === "focus" );

		this._scrollIntoView( item );

		this.active = item.first();
		focused = this.active.children( "a" ).addClass( "ui-state-focus" );
		// Only update aria-activedescendant if there's a role
		// otherwise we assume focus is managed elsewhere
		if ( this.options.role ) {
			this.element.attr( "aria-activedescendant", focused.attr( "id" ) );
		}

		// Highlight active parent menu item, if any
		this.active
			.parent()
			.closest( ".ui-menu-item" )
			.children( "a:first" )
			.addClass( "ui-state-active" );

		if ( event && event.type === "keydown" ) {
			this._close();
		} else {
			this.timer = this._delay(function() {
				this._close();
			}, this.delay );
		}

		nested = item.children( ".ui-menu" );
		if ( nested.length && ( /^mouse/.test( event.type ) ) ) {
			this._startOpening(nested);
		}
		this.activeMenu = item.parent();

		this._trigger( "focus", event, { item: item } );
	},

	_scrollIntoView: function( item ) {
		var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
		if ( this._hasScroll() ) {
			borderTop = parseFloat( $.css( this.activeMenu[0], "borderTopWidth" ) ) || 0;
			paddingTop = parseFloat( $.css( this.activeMenu[0], "paddingTop" ) ) || 0;
			offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;
			scroll = this.activeMenu.scrollTop();
			elementHeight = this.activeMenu.height();
			itemHeight = item.height();

			if ( offset < 0 ) {
				this.activeMenu.scrollTop( scroll + offset );
			} else if ( offset + itemHeight > elementHeight ) {
				this.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );
			}
		}
	},

	blur: function( event, fromFocus ) {
		if ( !fromFocus ) {
			clearTimeout( this.timer );
		}

		if ( !this.active ) {
			return;
		}

		this.active.children( "a" ).removeClass( "ui-state-focus" );
		this.active = null;

		this._trigger( "blur", event, { item: this.active } );
	},

	_startOpening: function( submenu ) {
		clearTimeout( this.timer );

		// Don't open if already open fixes a Firefox bug that caused a .5 pixel
		// shift in the submenu position when mousing over the carat icon
		if ( submenu.attr( "aria-hidden" ) !== "true" ) {
			return;
		}

		this.timer = this._delay(function() {
			this._close();
			this._open( submenu );
		}, this.delay );
	},

	_open: function( submenu ) {
		var position = $.extend({
			of: this.active
		}, this.options.position );

		clearTimeout( this.timer );
		this.element.find( ".ui-menu" ).not( submenu.parents( ".ui-menu" ) )
			.hide()
			.attr( "aria-hidden", "true" );

		submenu
			.show()
			.removeAttr( "aria-hidden" )
			.attr( "aria-expanded", "true" )
			.position( position );
	},

	collapseAll: function( event, all ) {
		clearTimeout( this.timer );
		this.timer = this._delay(function() {
			// If we were passed an event, look for the submenu that contains the event
			var currentMenu = all ? this.element :
				$( event && event.target ).closest( this.element.find( ".ui-menu" ) );

			// If we found no valid submenu ancestor, use the main menu to close all sub menus anyway
			if ( !currentMenu.length ) {
				currentMenu = this.element;
			}

			this._close( currentMenu );

			this.blur( event );
			this.activeMenu = currentMenu;
		}, this.delay );
	},

	// With no arguments, closes the currently active menu - if nothing is active
	// it closes all menus.  If passed an argument, it will search for menus BELOW
	_close: function( startMenu ) {
		if ( !startMenu ) {
			startMenu = this.active ? this.active.parent() : this.element;
		}

		startMenu
			.find( ".ui-menu" )
				.hide()
				.attr( "aria-hidden", "true" )
				.attr( "aria-expanded", "false" )
			.end()
			.find( "a.ui-state-active" )
				.removeClass( "ui-state-active" );
	},

	collapse: function( event ) {
		var newItem = this.active &&
			this.active.parent().closest( ".ui-menu-item", this.element );
		if ( newItem && newItem.length ) {
			this._close();
			this.focus( event, newItem );
		}
	},

	expand: function( event ) {
		var newItem = this.active &&
			this.active
				.children( ".ui-menu " )
				.children( ".ui-menu-item" )
				.first();

		if ( newItem && newItem.length ) {
			this._open( newItem.parent() );

			// Delay so Firefox will not hide activedescendant change in expanding submenu from AT
			this._delay(function() {
				this.focus( event, newItem );
			});
		}
	},

	next: function( event ) {
		this._move( "next", "first", event );
	},

	previous: function( event ) {
		this._move( "prev", "last", event );
	},

	isFirstItem: function() {
		return this.active && !this.active.prevAll( ".ui-menu-item" ).length;
	},

	isLastItem: function() {
		return this.active && !this.active.nextAll( ".ui-menu-item" ).length;
	},

	_move: function( direction, filter, event ) {
		var next;
		if ( this.active ) {
			if ( direction === "first" || direction === "last" ) {
				next = this.active
					[ direction === "first" ? "prevAll" : "nextAll" ]( ".ui-menu-item" )
					.eq( -1 );
			} else {
				next = this.active
					[ direction + "All" ]( ".ui-menu-item" )
					.eq( 0 );
			}
		}
		if ( !next || !next.length || !this.active ) {
			next = this.activeMenu.children( ".ui-menu-item" )[ filter ]();
		}

		this.focus( event, next );
	},

	nextPage: function( event ) {
		var item, base, height;

		if ( !this.active ) {
			this.next( event );
			return;
		}
		if ( this.isLastItem() ) {
			return;
		}
		if ( this._hasScroll() ) {
			base = this.active.offset().top;
			height = this.element.height();
			this.active.nextAll( ".ui-menu-item" ).each(function() {
				item = $( this );
				return item.offset().top - base - height < 0;
			});

			this.focus( event, item );
		} else {
			this.focus( event, this.activeMenu.children( ".ui-menu-item" )
				[ !this.active ? "first" : "last" ]() );
		}
	},

	previousPage: function( event ) {
		var item, base, height;
		if ( !this.active ) {
			this.next( event );
			return;
		}
		if ( this.isFirstItem() ) {
			return;
		}
		if ( this._hasScroll() ) {
			base = this.active.offset().top;
			height = this.element.height();
			this.active.prevAll( ".ui-menu-item" ).each(function() {
				item = $( this );
				return item.offset().top - base + height > 0;
			});

			this.focus( event, item );
		} else {
			this.focus( event, this.activeMenu.children( ".ui-menu-item" ).first() );
		}
	},

	_hasScroll: function() {
		return this.element.outerHeight() < this.element.prop( "scrollHeight" );
	},

	select: function( event ) {
		// TODO: It should never be possible to not have an active item at this
		// point, but the tests don't trigger mouseenter before click.
		this.active = this.active || $( event.target ).closest( ".ui-menu-item" );
		var ui = { item: this.active };
		if ( !this.active.has( ".ui-menu" ).length ) {
			this.collapseAll( event, true );
		}
		this._trigger( "select", event, ui );
	}
});

}( jQuery ));

(function( $, undefined ) {

$.ui = $.ui || {};

var cachedScrollbarWidth,
	max = Math.max,
	abs = Math.abs,
	round = Math.round,
	rhorizontal = /left|center|right/,
	rvertical = /top|center|bottom/,
	roffset = /[\+\-]\d+%?/,
	rposition = /^\w+/,
	rpercent = /%$/,
	_position = $.fn.position;

function getOffsets( offsets, width, height ) {
	return [
		parseInt( offsets[ 0 ], 10 ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),
		parseInt( offsets[ 1 ], 10 ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )
	];
}

function parseCss( element, property ) {
	return parseInt( $.css( element, property ), 10 ) || 0;
}

function getDimensions( elem ) {
	var raw = elem[0];
	if ( raw.nodeType === 9 ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: 0, left: 0 }
		};
	}
	if ( $.isWindow( raw ) ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: elem.scrollTop(), left: elem.scrollLeft() }
		};
	}
	if ( raw.preventDefault ) {
		return {
			width: 0,
			height: 0,
			offset: { top: raw.pageY, left: raw.pageX }
		};
	}
	return {
		width: elem.outerWidth(),
		height: elem.outerHeight(),
		offset: elem.offset()
	};
}

$.position = {
	scrollbarWidth: function() {
		if ( cachedScrollbarWidth !== undefined ) {
			return cachedScrollbarWidth;
		}
		var w1, w2,
			div = $( "<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>" ),
			innerDiv = div.children()[0];

		$( "body" ).append( div );
		w1 = innerDiv.offsetWidth;
		div.css( "overflow", "scroll" );

		w2 = innerDiv.offsetWidth;

		if ( w1 === w2 ) {
			w2 = div[0].clientWidth;
		}

		div.remove();

		return (cachedScrollbarWidth = w1 - w2);
	},
	getScrollInfo: function( within ) {
		var overflowX = within.isWindow ? "" : within.element.css( "overflow-x" ),
			overflowY = within.isWindow ? "" : within.element.css( "overflow-y" ),
			hasOverflowX = overflowX === "scroll" ||
				( overflowX === "auto" && within.width < within.element[0].scrollWidth ),
			hasOverflowY = overflowY === "scroll" ||
				( overflowY === "auto" && within.height < within.element[0].scrollHeight );
		return {
			width: hasOverflowX ? $.position.scrollbarWidth() : 0,
			height: hasOverflowY ? $.position.scrollbarWidth() : 0
		};
	},
	getWithinInfo: function( element ) {
		var withinElement = $( element || window ),
			isWindow = $.isWindow( withinElement[0] );
		return {
			element: withinElement,
			isWindow: isWindow,
			offset: withinElement.offset() || { left: 0, top: 0 },
			scrollLeft: withinElement.scrollLeft(),
			scrollTop: withinElement.scrollTop(),
			width: isWindow ? withinElement.width() : withinElement.outerWidth(),
			height: isWindow ? withinElement.height() : withinElement.outerHeight()
		};
	}
};

$.fn.position = function( options ) {
	if ( !options || !options.of ) {
		return _position.apply( this, arguments );
	}

	// make a copy, we don't want to modify arguments
	options = $.extend( {}, options );

	var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,
		target = $( options.of ),
		within = $.position.getWithinInfo( options.within ),
		scrollInfo = $.position.getScrollInfo( within ),
		collision = ( options.collision || "flip" ).split( " " ),
		offsets = {};

	dimensions = getDimensions( target );
	if ( target[0].preventDefault ) {
		// force left top to allow flipping
		options.at = "left top";
	}
	targetWidth = dimensions.width;
	targetHeight = dimensions.height;
	targetOffset = dimensions.offset;
	// clone to reuse original targetOffset later
	basePosition = $.extend( {}, targetOffset );

	// force my and at to have valid horizontal and vertical positions
	// if a value is missing or invalid, it will be converted to center
	$.each( [ "my", "at" ], function() {
		var pos = ( options[ this ] || "" ).split( " " ),
			horizontalOffset,
			verticalOffset;

		if ( pos.length === 1) {
			pos = rhorizontal.test( pos[ 0 ] ) ?
				pos.concat( [ "center" ] ) :
				rvertical.test( pos[ 0 ] ) ?
					[ "center" ].concat( pos ) :
					[ "center", "center" ];
		}
		pos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : "center";
		pos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : "center";

		// calculate offsets
		horizontalOffset = roffset.exec( pos[ 0 ] );
		verticalOffset = roffset.exec( pos[ 1 ] );
		offsets[ this ] = [
			horizontalOffset ? horizontalOffset[ 0 ] : 0,
			verticalOffset ? verticalOffset[ 0 ] : 0
		];

		// reduce to just the positions without the offsets
		options[ this ] = [
			rposition.exec( pos[ 0 ] )[ 0 ],
			rposition.exec( pos[ 1 ] )[ 0 ]
		];
	});

	// normalize collision option
	if ( collision.length === 1 ) {
		collision[ 1 ] = collision[ 0 ];
	}

	if ( options.at[ 0 ] === "right" ) {
		basePosition.left += targetWidth;
	} else if ( options.at[ 0 ] === "center" ) {
		basePosition.left += targetWidth / 2;
	}

	if ( options.at[ 1 ] === "bottom" ) {
		basePosition.top += targetHeight;
	} else if ( options.at[ 1 ] === "center" ) {
		basePosition.top += targetHeight / 2;
	}

	atOffset = getOffsets( offsets.at, targetWidth, targetHeight );
	basePosition.left += atOffset[ 0 ];
	basePosition.top += atOffset[ 1 ];

	return this.each(function() {
		var collisionPosition, using,
			elem = $( this ),
			elemWidth = elem.outerWidth(),
			elemHeight = elem.outerHeight(),
			marginLeft = parseCss( this, "marginLeft" ),
			marginTop = parseCss( this, "marginTop" ),
			collisionWidth = elemWidth + marginLeft + parseCss( this, "marginRight" ) + scrollInfo.width,
			collisionHeight = elemHeight + marginTop + parseCss( this, "marginBottom" ) + scrollInfo.height,
			position = $.extend( {}, basePosition ),
			myOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );

		if ( options.my[ 0 ] === "right" ) {
			position.left -= elemWidth;
		} else if ( options.my[ 0 ] === "center" ) {
			position.left -= elemWidth / 2;
		}

		if ( options.my[ 1 ] === "bottom" ) {
			position.top -= elemHeight;
		} else if ( options.my[ 1 ] === "center" ) {
			position.top -= elemHeight / 2;
		}

		position.left += myOffset[ 0 ];
		position.top += myOffset[ 1 ];

		// if the browser doesn't support fractions, then round for consistent results
		if ( !$.support.offsetFractions ) {
			position.left = round( position.left );
			position.top = round( position.top );
		}

		collisionPosition = {
			marginLeft: marginLeft,
			marginTop: marginTop
		};

		$.each( [ "left", "top" ], function( i, dir ) {
			if ( $.ui.position[ collision[ i ] ] ) {
				$.ui.position[ collision[ i ] ][ dir ]( position, {
					targetWidth: targetWidth,
					targetHeight: targetHeight,
					elemWidth: elemWidth,
					elemHeight: elemHeight,
					collisionPosition: collisionPosition,
					collisionWidth: collisionWidth,
					collisionHeight: collisionHeight,
					offset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],
					my: options.my,
					at: options.at,
					within: within,
					elem : elem
				});
			}
		});

		if ( options.using ) {
			// adds feedback as second argument to using callback, if present
			using = function( props ) {
				var left = targetOffset.left - position.left,
					right = left + targetWidth - elemWidth,
					top = targetOffset.top - position.top,
					bottom = top + targetHeight - elemHeight,
					feedback = {
						target: {
							element: target,
							left: targetOffset.left,
							top: targetOffset.top,
							width: targetWidth,
							height: targetHeight
						},
						element: {
							element: elem,
							left: position.left,
							top: position.top,
							width: elemWidth,
							height: elemHeight
						},
						horizontal: right < 0 ? "left" : left > 0 ? "right" : "center",
						vertical: bottom < 0 ? "top" : top > 0 ? "bottom" : "middle"
					};
				if ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {
					feedback.horizontal = "center";
				}
				if ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {
					feedback.vertical = "middle";
				}
				if ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {
					feedback.important = "horizontal";
				} else {
					feedback.important = "vertical";
				}
				options.using.call( this, props, feedback );
			};
		}

		elem.offset( $.extend( position, { using: using } ) );
	});
};

$.ui.position = {
	fit: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,
				outerWidth = within.width,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = withinOffset - collisionPosLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,
				newOverRight;

			// element is wider than within
			if ( data.collisionWidth > outerWidth ) {
				// element is initially over the left side of within
				if ( overLeft > 0 && overRight <= 0 ) {
					newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
					position.left += overLeft - newOverRight;
				// element is initially over right side of within
				} else if ( overRight > 0 && overLeft <= 0 ) {
					position.left = withinOffset;
				// element is initially over both left and right sides of within
				} else {
					if ( overLeft > overRight ) {
						position.left = withinOffset + outerWidth - data.collisionWidth;
					} else {
						position.left = withinOffset;
					}
				}
			// too far left -> align with left edge
			} else if ( overLeft > 0 ) {
				position.left += overLeft;
			// too far right -> align with right edge
			} else if ( overRight > 0 ) {
				position.left -= overRight;
			// adjust based on position and margin
			} else {
				position.left = max( position.left - collisionPosLeft, position.left );
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollTop : within.offset.top,
				outerHeight = data.within.height,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = withinOffset - collisionPosTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,
				newOverBottom;

			// element is taller than within
			if ( data.collisionHeight > outerHeight ) {
				// element is initially over the top of within
				if ( overTop > 0 && overBottom <= 0 ) {
					newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
					position.top += overTop - newOverBottom;
				// element is initially over bottom of within
				} else if ( overBottom > 0 && overTop <= 0 ) {
					position.top = withinOffset;
				// element is initially over both top and bottom of within
				} else {
					if ( overTop > overBottom ) {
						position.top = withinOffset + outerHeight - data.collisionHeight;
					} else {
						position.top = withinOffset;
					}
				}
			// too far up -> align with top
			} else if ( overTop > 0 ) {
				position.top += overTop;
			// too far down -> align with bottom edge
			} else if ( overBottom > 0 ) {
				position.top -= overBottom;
			// adjust based on position and margin
			} else {
				position.top = max( position.top - collisionPosTop, position.top );
			}
		}
	},
	flip: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.left + within.scrollLeft,
				outerWidth = within.width,
				offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = collisionPosLeft - offsetLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,
				myOffset = data.my[ 0 ] === "left" ?
					-data.elemWidth :
					data.my[ 0 ] === "right" ?
						data.elemWidth :
						0,
				atOffset = data.at[ 0 ] === "left" ?
					data.targetWidth :
					data.at[ 0 ] === "right" ?
						-data.targetWidth :
						0,
				offset = -2 * data.offset[ 0 ],
				newOverRight,
				newOverLeft;

			if ( overLeft < 0 ) {
				newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;
				if ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {
					position.left += myOffset + atOffset + offset;
				}
			}
			else if ( overRight > 0 ) {
				newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;
				if ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {
					position.left += myOffset + atOffset + offset;
				}
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.top + within.scrollTop,
				outerHeight = within.height,
				offsetTop = within.isWindow ? within.scrollTop : within.offset.top,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = collisionPosTop - offsetTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,
				top = data.my[ 1 ] === "top",
				myOffset = top ?
					-data.elemHeight :
					data.my[ 1 ] === "bottom" ?
						data.elemHeight :
						0,
				atOffset = data.at[ 1 ] === "top" ?
					data.targetHeight :
					data.at[ 1 ] === "bottom" ?
						-data.targetHeight :
						0,
				offset = -2 * data.offset[ 1 ],
				newOverTop,
				newOverBottom;
			if ( overTop < 0 ) {
				newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;
				if ( ( position.top + myOffset + atOffset + offset) > overTop && ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) ) {
					position.top += myOffset + atOffset + offset;
				}
			}
			else if ( overBottom > 0 ) {
				newOverTop = position.top -  data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;
				if ( ( position.top + myOffset + atOffset + offset) > overBottom && ( newOverTop > 0 || abs( newOverTop ) < overBottom ) ) {
					position.top += myOffset + atOffset + offset;
				}
			}
		}
	},
	flipfit: {
		left: function() {
			$.ui.position.flip.left.apply( this, arguments );
			$.ui.position.fit.left.apply( this, arguments );
		},
		top: function() {
			$.ui.position.flip.top.apply( this, arguments );
			$.ui.position.fit.top.apply( this, arguments );
		}
	}
};

// fraction support test
(function () {
	var testElement, testElementParent, testElementStyle, offsetLeft, i,
		body = document.getElementsByTagName( "body" )[ 0 ],
		div = document.createElement( "div" );

	//Create a "fake body" for testing based on method used in jQuery.support
	testElement = document.createElement( body ? "div" : "body" );
	testElementStyle = {
		visibility: "hidden",
		width: 0,
		height: 0,
		border: 0,
		margin: 0,
		background: "none"
	};
	if ( body ) {
		$.extend( testElementStyle, {
			position: "absolute",
			left: "-1000px",
			top: "-1000px"
		});
	}
	for ( i in testElementStyle ) {
		testElement.style[ i ] = testElementStyle[ i ];
	}
	testElement.appendChild( div );
	testElementParent = body || document.documentElement;
	testElementParent.insertBefore( testElement, testElementParent.firstChild );

	div.style.cssText = "position: absolute; left: 10.7432222px;";

	offsetLeft = $( div ).offset().left;
	$.support.offsetFractions = offsetLeft > 10 && offsetLeft < 11;

	testElement.innerHTML = "";
	testElementParent.removeChild( testElement );
})();

}( jQuery ) );

(function( $, undefined ) {

$.widget( "ui.progressbar", {
	version: "1.10.0",
	options: {
		max: 100,
		value: 0,

		change: null,
		complete: null
	},

	min: 0,

	_create: function() {
		// Constrain initial value
		this.oldValue = this.options.value = this._constrainedValue();

		this.element
			.addClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
			.attr({
				// Only set static values, aria-valuenow and aria-valuemax are
				// set inside _refreshValue()
				role: "progressbar",
				"aria-valuemin": this.min
			});

		this.valueDiv = $( "<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>" )
			.appendTo( this.element );

		this._refreshValue();
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-progressbar ui-widget ui-widget-content ui-corner-all" )
			.removeAttr( "role" )
			.removeAttr( "aria-valuemin" )
			.removeAttr( "aria-valuemax" )
			.removeAttr( "aria-valuenow" );

		this.valueDiv.remove();
	},

	value: function( newValue ) {
		if ( newValue === undefined ) {
			return this.options.value;
		}

		this.options.value = this._constrainedValue( newValue );
		this._refreshValue();
	},

	_constrainedValue: function( newValue ) {
		if ( newValue === undefined ) {
			newValue = this.options.value;
		}

		this.indeterminate = newValue === false;

		// sanitize value
		if ( typeof newValue !== "number" ) {
			newValue = 0;
		}

		return this.indeterminate ? false :
			Math.min( this.options.max, Math.max( this.min, newValue ) );
	},

	_setOptions: function( options ) {
		// Ensure "value" option is set after other values (like max)
		var value = options.value;
		delete options.value;

		this._super( options );

		this.options.value = this._constrainedValue( value );
		this._refreshValue();
	},

	_setOption: function( key, value ) {
		if ( key === "max" ) {
			// Don't allow a max less than min
			value = Math.max( this.min, value );
		}

		this._super( key, value );
	},

	_percentage: function() {
		return this.indeterminate ? 100 : 100 * ( this.options.value - this.min ) / ( this.options.max - this.min );
	},

	_refreshValue: function() {
		var value = this.options.value,
			percentage = this._percentage();

		this.valueDiv
			.toggle( this.indeterminate || value > this.min )
			.toggleClass( "ui-corner-right", value === this.options.max )
			.width( percentage.toFixed(0) + "%" );

		this.element.toggleClass( "ui-progressbar-indeterminate", this.indeterminate );

		if ( this.indeterminate ) {
			this.element.removeAttr( "aria-valuenow" );
			if ( !this.overlayDiv ) {
				this.overlayDiv = $( "<div class='ui-progressbar-overlay'></div>" ).appendTo( this.valueDiv );
			}
		} else {
			this.element.attr({
				"aria-valuemax": this.options.max,
				"aria-valuenow": value
			});
			if ( this.overlayDiv ) {
				this.overlayDiv.remove();
				this.overlayDiv = null;
			}
		}

		if ( this.oldValue !== value ) {
			this.oldValue = value;
			this._trigger( "change" );
		}
		if ( value === this.options.max ) {
			this._trigger( "complete" );
		}
	}
});

})( jQuery );

(function( $, undefined ) {

// number of pages in a slider
// (how many times can you page up/down to go through the whole range)
var numPages = 5;

$.widget( "ui.slider", $.ui.mouse, {
	version: "1.10.0",
	widgetEventPrefix: "slide",

	options: {
		animate: false,
		distance: 0,
		max: 100,
		min: 0,
		orientation: "horizontal",
		range: false,
		step: 1,
		value: 0,
		values: null,

		// callbacks
		change: null,
		slide: null,
		start: null,
		stop: null
	},

	_create: function() {
		var i, handleCount,
			o = this.options,
			existingHandles = this.element.find( ".ui-slider-handle" ).addClass( "ui-state-default ui-corner-all" ),
			handle = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
			handles = [];

		this._keySliding = false;
		this._mouseSliding = false;
		this._animateOff = true;
		this._handleIndex = null;
		this._detectOrientation();
		this._mouseInit();

		this.element
			.addClass( "ui-slider" +
				" ui-slider-" + this.orientation +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all");

		this.range = $([]);

		if ( o.range ) {
			if ( o.range === true ) {
				if ( !o.values ) {
					o.values = [ this._valueMin(), this._valueMin() ];
				} else if ( o.values.length && o.values.length !== 2 ) {
					o.values = [ o.values[0], o.values[0] ];
				} else if ( $.isArray( o.values ) ) {
					o.values = o.values.slice(0);
				}
			}

			this.range = $( "<div></div>" )
				.appendTo( this.element )
				.addClass( "ui-slider-range" +
				// note: this isn't the most fittingly semantic framework class for this element,
				// but worked best visually with a variety of themes
				" ui-widget-header" +
				( ( o.range === "min" || o.range === "max" ) ? " ui-slider-range-" + o.range : "" ) );
		}

		handleCount = ( o.values && o.values.length ) || 1;

		for ( i = existingHandles.length; i < handleCount; i++ ) {
			handles.push( handle );
		}

		this.handles = existingHandles.add( $( handles.join( "" ) ).appendTo( this.element ) );

		this.handle = this.handles.eq( 0 );

		this.handles.add( this.range ).filter( "a" )
			.click(function( event ) {
				event.preventDefault();
			})
			.mouseenter(function() {
				if ( !o.disabled ) {
					$( this ).addClass( "ui-state-hover" );
				}
			})
			.mouseleave(function() {
				$( this ).removeClass( "ui-state-hover" );
			})
			.focus(function() {
				if ( !o.disabled ) {
					$( ".ui-slider .ui-state-focus" ).removeClass( "ui-state-focus" );
					$( this ).addClass( "ui-state-focus" );
				} else {
					$( this ).blur();
				}
			})
			.blur(function() {
				$( this ).removeClass( "ui-state-focus" );
			});

		this.handles.each(function( i ) {
			$( this ).data( "ui-slider-handle-index", i );
		});

		this._setOption( "disabled", o.disabled );

		this._on( this.handles, this._handleEvents );

		this._refreshValue();

		this._animateOff = false;
	},

	_destroy: function() {
		this.handles.remove();
		this.range.remove();

		this.element
			.removeClass( "ui-slider" +
				" ui-slider-horizontal" +
				" ui-slider-vertical" +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all" );

		this._mouseDestroy();
	},

	_mouseCapture: function( event ) {
		var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
			that = this,
			o = this.options;

		if ( o.disabled ) {
			return false;
		}

		this.elementSize = {
			width: this.element.outerWidth(),
			height: this.element.outerHeight()
		};
		this.elementOffset = this.element.offset();

		position = { x: event.pageX, y: event.pageY };
		normValue = this._normValueFromMouse( position );
		distance = this._valueMax() - this._valueMin() + 1;
		this.handles.each(function( i ) {
			var thisDistance = Math.abs( normValue - that.values(i) );
			if (( distance > thisDistance ) ||
				( distance === thisDistance &&
					(i === that._lastChangedValue || that.values(i) === o.min ))) {
				distance = thisDistance;
				closestHandle = $( this );
				index = i;
			}
		});

		allowed = this._start( event, index );
		if ( allowed === false ) {
			return false;
		}
		this._mouseSliding = true;

		this._handleIndex = index;

		closestHandle
			.addClass( "ui-state-active" )
			.focus();

		offset = closestHandle.offset();
		mouseOverHandle = !$( event.target ).parents().addBack().is( ".ui-slider-handle" );
		this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {
			left: event.pageX - offset.left - ( closestHandle.width() / 2 ),
			top: event.pageY - offset.top -
				( closestHandle.height() / 2 ) -
				( parseInt( closestHandle.css("borderTopWidth"), 10 ) || 0 ) -
				( parseInt( closestHandle.css("borderBottomWidth"), 10 ) || 0) +
				( parseInt( closestHandle.css("marginTop"), 10 ) || 0)
		};

		if ( !this.handles.hasClass( "ui-state-hover" ) ) {
			this._slide( event, index, normValue );
		}
		this._animateOff = true;
		return true;
	},

	_mouseStart: function() {
		return true;
	},

	_mouseDrag: function( event ) {
		var position = { x: event.pageX, y: event.pageY },
			normValue = this._normValueFromMouse( position );

		this._slide( event, this._handleIndex, normValue );

		return false;
	},

	_mouseStop: function( event ) {
		this.handles.removeClass( "ui-state-active" );
		this._mouseSliding = false;

		this._stop( event, this._handleIndex );
		this._change( event, this._handleIndex );

		this._handleIndex = null;
		this._clickOffset = null;
		this._animateOff = false;

		return false;
	},

	_detectOrientation: function() {
		this.orientation = ( this.options.orientation === "vertical" ) ? "vertical" : "horizontal";
	},

	_normValueFromMouse: function( position ) {
		var pixelTotal,
			pixelMouse,
			percentMouse,
			valueTotal,
			valueMouse;

		if ( this.orientation === "horizontal" ) {
			pixelTotal = this.elementSize.width;
			pixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );
		} else {
			pixelTotal = this.elementSize.height;
			pixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );
		}

		percentMouse = ( pixelMouse / pixelTotal );
		if ( percentMouse > 1 ) {
			percentMouse = 1;
		}
		if ( percentMouse < 0 ) {
			percentMouse = 0;
		}
		if ( this.orientation === "vertical" ) {
			percentMouse = 1 - percentMouse;
		}

		valueTotal = this._valueMax() - this._valueMin();
		valueMouse = this._valueMin() + percentMouse * valueTotal;

		return this._trimAlignValue( valueMouse );
	},

	_start: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}
		return this._trigger( "start", event, uiHash );
	},

	_slide: function( event, index, newVal ) {
		var otherVal,
			newValues,
			allowed;

		if ( this.options.values && this.options.values.length ) {
			otherVal = this.values( index ? 0 : 1 );

			if ( ( this.options.values.length === 2 && this.options.range === true ) &&
					( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )
				) {
				newVal = otherVal;
			}

			if ( newVal !== this.values( index ) ) {
				newValues = this.values();
				newValues[ index ] = newVal;
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal,
					values: newValues
				} );
				otherVal = this.values( index ? 0 : 1 );
				if ( allowed !== false ) {
					this.values( index, newVal, true );
				}
			}
		} else {
			if ( newVal !== this.value() ) {
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal
				} );
				if ( allowed !== false ) {
					this.value( newVal );
				}
			}
		}
	},

	_stop: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}

		this._trigger( "stop", event, uiHash );
	},

	_change: function( event, index ) {
		if ( !this._keySliding && !this._mouseSliding ) {
			var uiHash = {
				handle: this.handles[ index ],
				value: this.value()
			};
			if ( this.options.values && this.options.values.length ) {
				uiHash.value = this.values( index );
				uiHash.values = this.values();
			}

			//store the last changed value index for reference when handles overlap
			this._lastChangedValue = index;

			this._trigger( "change", event, uiHash );
		}
	},

	value: function( newValue ) {
		if ( arguments.length ) {
			this.options.value = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, 0 );
			return;
		}

		return this._value();
	},

	values: function( index, newValue ) {
		var vals,
			newValues,
			i;

		if ( arguments.length > 1 ) {
			this.options.values[ index ] = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, index );
			return;
		}

		if ( arguments.length ) {
			if ( $.isArray( arguments[ 0 ] ) ) {
				vals = this.options.values;
				newValues = arguments[ 0 ];
				for ( i = 0; i < vals.length; i += 1 ) {
					vals[ i ] = this._trimAlignValue( newValues[ i ] );
					this._change( null, i );
				}
				this._refreshValue();
			} else {
				if ( this.options.values && this.options.values.length ) {
					return this._values( index );
				} else {
					return this.value();
				}
			}
		} else {
			return this._values();
		}
	},

	_setOption: function( key, value ) {
		var i,
			valsLength = 0;

		if ( $.isArray( this.options.values ) ) {
			valsLength = this.options.values.length;
		}

		$.Widget.prototype._setOption.apply( this, arguments );

		switch ( key ) {
			case "disabled":
				if ( value ) {
					this.handles.filter( ".ui-state-focus" ).blur();
					this.handles.removeClass( "ui-state-hover" );
					this.handles.prop( "disabled", true );
				} else {
					this.handles.prop( "disabled", false );
				}
				break;
			case "orientation":
				this._detectOrientation();
				this.element
					.removeClass( "ui-slider-horizontal ui-slider-vertical" )
					.addClass( "ui-slider-" + this.orientation );
				this._refreshValue();
				break;
			case "value":
				this._animateOff = true;
				this._refreshValue();
				this._change( null, 0 );
				this._animateOff = false;
				break;
			case "values":
				this._animateOff = true;
				this._refreshValue();
				for ( i = 0; i < valsLength; i += 1 ) {
					this._change( null, i );
				}
				this._animateOff = false;
				break;
			case "min":
			case "max":
				this._animateOff = true;
				this._refreshValue();
				this._animateOff = false;
				break;
		}
	},

	//internal value getter
	// _value() returns value trimmed by min and max, aligned by step
	_value: function() {
		var val = this.options.value;
		val = this._trimAlignValue( val );

		return val;
	},

	//internal values getter
	// _values() returns array of values trimmed by min and max, aligned by step
	// _values( index ) returns single value trimmed by min and max, aligned by step
	_values: function( index ) {
		var val,
			vals,
			i;

		if ( arguments.length ) {
			val = this.options.values[ index ];
			val = this._trimAlignValue( val );

			return val;
		} else {
			// .slice() creates a copy of the array
			// this copy gets trimmed by min and max and then returned
			vals = this.options.values.slice();
			for ( i = 0; i < vals.length; i+= 1) {
				vals[ i ] = this._trimAlignValue( vals[ i ] );
			}

			return vals;
		}
	},

	// returns the step-aligned value that val is closest to, between (inclusive) min and max
	_trimAlignValue: function( val ) {
		if ( val <= this._valueMin() ) {
			return this._valueMin();
		}
		if ( val >= this._valueMax() ) {
			return this._valueMax();
		}
		var step = ( this.options.step > 0 ) ? this.options.step : 1,
			valModStep = (val - this._valueMin()) % step,
			alignValue = val - valModStep;

		if ( Math.abs(valModStep) * 2 >= step ) {
			alignValue += ( valModStep > 0 ) ? step : ( -step );
		}

		// Since JavaScript has problems with large floats, round
		// the final value to 5 digits after the decimal point (see #4124)
		return parseFloat( alignValue.toFixed(5) );
	},

	_valueMin: function() {
		return this.options.min;
	},

	_valueMax: function() {
		return this.options.max;
	},

	_refreshValue: function() {
		var lastValPercent, valPercent, value, valueMin, valueMax,
			oRange = this.options.range,
			o = this.options,
			that = this,
			animate = ( !this._animateOff ) ? o.animate : false,
			_set = {};

		if ( this.options.values && this.options.values.length ) {
			this.handles.each(function( i ) {
				valPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;
				_set[ that.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
				$( this ).stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
				if ( that.options.range === true ) {
					if ( that.orientation === "horizontal" ) {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { left: valPercent + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { width: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					} else {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { bottom: ( valPercent ) + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { height: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					}
				}
				lastValPercent = valPercent;
			});
		} else {
			value = this.value();
			valueMin = this._valueMin();
			valueMax = this._valueMax();
			valPercent = ( valueMax !== valueMin ) ?
					( value - valueMin ) / ( valueMax - valueMin ) * 100 :
					0;
			_set[ this.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
			this.handle.stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );

			if ( oRange === "min" && this.orientation === "horizontal" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { width: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "horizontal" ) {
				this.range[ animate ? "animate" : "css" ]( { width: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
			if ( oRange === "min" && this.orientation === "vertical" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { height: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "vertical" ) {
				this.range[ animate ? "animate" : "css" ]( { height: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
		}
	},

	_handleEvents: {
		keydown: function( event ) {
			/*jshint maxcomplexity:25*/
			var allowed, curVal, newVal, step,
				index = $( event.target ).data( "ui-slider-handle-index" );

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
				case $.ui.keyCode.END:
				case $.ui.keyCode.PAGE_UP:
				case $.ui.keyCode.PAGE_DOWN:
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					event.preventDefault();
					if ( !this._keySliding ) {
						this._keySliding = true;
						$( event.target ).addClass( "ui-state-active" );
						allowed = this._start( event, index );
						if ( allowed === false ) {
							return;
						}
					}
					break;
			}

			step = this.options.step;
			if ( this.options.values && this.options.values.length ) {
				curVal = newVal = this.values( index );
			} else {
				curVal = newVal = this.value();
			}

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
					newVal = this._valueMin();
					break;
				case $.ui.keyCode.END:
					newVal = this._valueMax();
					break;
				case $.ui.keyCode.PAGE_UP:
					newVal = this._trimAlignValue( curVal + ( (this._valueMax() - this._valueMin()) / numPages ) );
					break;
				case $.ui.keyCode.PAGE_DOWN:
					newVal = this._trimAlignValue( curVal - ( (this._valueMax() - this._valueMin()) / numPages ) );
					break;
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
					if ( curVal === this._valueMax() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal + step );
					break;
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					if ( curVal === this._valueMin() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal - step );
					break;
			}

			this._slide( event, index, newVal );
		},
		keyup: function( event ) {
			var index = $( event.target ).data( "ui-slider-handle-index" );

			if ( this._keySliding ) {
				this._keySliding = false;
				this._stop( event, index );
				this._change( event, index );
				$( event.target ).removeClass( "ui-state-active" );
			}
		}
	}

});

}(jQuery));

(function( $ ) {

function modifier( fn ) {
	return function() {
		var previous = this.element.val();
		fn.apply( this, arguments );
		this._refresh();
		if ( previous !== this.element.val() ) {
			this._trigger( "change" );
		}
	};
}

$.widget( "ui.spinner", {
	version: "1.10.0",
	defaultElement: "<input>",
	widgetEventPrefix: "spin",
	options: {
		culture: null,
		icons: {
			down: "ui-icon-triangle-1-s",
			up: "ui-icon-triangle-1-n"
		},
		incremental: true,
		max: null,
		min: null,
		numberFormat: null,
		page: 10,
		step: 1,

		change: null,
		spin: null,
		start: null,
		stop: null
	},

	_create: function() {
		// handle string values that need to be parsed
		this._setOption( "max", this.options.max );
		this._setOption( "min", this.options.min );
		this._setOption( "step", this.options.step );

		// format the value, but don't constrain
		this._value( this.element.val(), true );

		this._draw();
		this._on( this._events );
		this._refresh();

		// turning off autocomplete prevents the browser from remembering the
		// value when navigating through history, so we re-enable autocomplete
		// if the page is unloaded before the widget is destroyed. #7790
		this._on( this.window, {
			beforeunload: function() {
				this.element.removeAttr( "autocomplete" );
			}
		});
	},

	_getCreateOptions: function() {
		var options = {},
			element = this.element;

		$.each( [ "min", "max", "step" ], function( i, option ) {
			var value = element.attr( option );
			if ( value !== undefined && value.length ) {
				options[ option ] = value;
			}
		});

		return options;
	},

	_events: {
		keydown: function( event ) {
			if ( this._start( event ) && this._keydown( event ) ) {
				event.preventDefault();
			}
		},
		keyup: "_stop",
		focus: function() {
			this.previous = this.element.val();
		},
		blur: function( event ) {
			if ( this.cancelBlur ) {
				delete this.cancelBlur;
				return;
			}

			this._refresh();
			if ( this.previous !== this.element.val() ) {
				this._trigger( "change", event );
			}
		},
		mousewheel: function( event, delta ) {
			if ( !delta ) {
				return;
			}
			if ( !this.spinning && !this._start( event ) ) {
				return false;
			}

			this._spin( (delta > 0 ? 1 : -1) * this.options.step, event );
			clearTimeout( this.mousewheelTimer );
			this.mousewheelTimer = this._delay(function() {
				if ( this.spinning ) {
					this._stop( event );
				}
			}, 100 );
			event.preventDefault();
		},
		"mousedown .ui-spinner-button": function( event ) {
			var previous;

			// We never want the buttons to have focus; whenever the user is
			// interacting with the spinner, the focus should be on the input.
			// If the input is focused then this.previous is properly set from
			// when the input first received focus. If the input is not focused
			// then we need to set this.previous based on the value before spinning.
			previous = this.element[0] === this.document[0].activeElement ?
				this.previous : this.element.val();
			function checkFocus() {
				var isActive = this.element[0] === this.document[0].activeElement;
				if ( !isActive ) {
					this.element.focus();
					this.previous = previous;
					// support: IE
					// IE sets focus asynchronously, so we need to check if focus
					// moved off of the input because the user clicked on the button.
					this._delay(function() {
						this.previous = previous;
					});
				}
			}

			// ensure focus is on (or stays on) the text field
			event.preventDefault();
			checkFocus.call( this );

			// support: IE
			// IE doesn't prevent moving focus even with event.preventDefault()
			// so we set a flag to know when we should ignore the blur event
			// and check (again) if focus moved off of the input.
			this.cancelBlur = true;
			this._delay(function() {
				delete this.cancelBlur;
				checkFocus.call( this );
			});

			if ( this._start( event ) === false ) {
				return;
			}

			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
		},
		"mouseup .ui-spinner-button": "_stop",
		"mouseenter .ui-spinner-button": function( event ) {
			// button will add ui-state-active if mouse was down while mouseleave and kept down
			if ( !$( event.currentTarget ).hasClass( "ui-state-active" ) ) {
				return;
			}

			if ( this._start( event ) === false ) {
				return false;
			}
			this._repeat( null, $( event.currentTarget ).hasClass( "ui-spinner-up" ) ? 1 : -1, event );
		},
		// TODO: do we really want to consider this a stop?
		// shouldn't we just stop the repeater and wait until mouseup before
		// we trigger the stop event?
		"mouseleave .ui-spinner-button": "_stop"
	},

	_draw: function() {
		var uiSpinner = this.uiSpinner = this.element
			.addClass( "ui-spinner-input" )
			.attr( "autocomplete", "off" )
			.wrap( this._uiSpinnerHtml() )
			.parent()
				// add buttons
				.append( this._buttonHtml() );

		this.element.attr( "role", "spinbutton" );

		// button bindings
		this.buttons = uiSpinner.find( ".ui-spinner-button" )
			.attr( "tabIndex", -1 )
			.button()
			.removeClass( "ui-corner-all" );

		// IE 6 doesn't understand height: 50% for the buttons
		// unless the wrapper has an explicit height
		if ( this.buttons.height() > Math.ceil( uiSpinner.height() * 0.5 ) &&
				uiSpinner.height() > 0 ) {
			uiSpinner.height( uiSpinner.height() );
		}

		// disable spinner if element was already disabled
		if ( this.options.disabled ) {
			this.disable();
		}
	},

	_keydown: function( event ) {
		var options = this.options,
			keyCode = $.ui.keyCode;

		switch ( event.keyCode ) {
		case keyCode.UP:
			this._repeat( null, 1, event );
			return true;
		case keyCode.DOWN:
			this._repeat( null, -1, event );
			return true;
		case keyCode.PAGE_UP:
			this._repeat( null, options.page, event );
			return true;
		case keyCode.PAGE_DOWN:
			this._repeat( null, -options.page, event );
			return true;
		}

		return false;
	},

	_uiSpinnerHtml: function() {
		return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
	},

	_buttonHtml: function() {
		return "" +
			"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>" +
				"<span class='ui-icon " + this.options.icons.up + "'>&#9650;</span>" +
			"</a>" +
			"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" +
				"<span class='ui-icon " + this.options.icons.down + "'>&#9660;</span>" +
			"</a>";
	},

	_start: function( event ) {
		if ( !this.spinning && this._trigger( "start", event ) === false ) {
			return false;
		}

		if ( !this.counter ) {
			this.counter = 1;
		}
		this.spinning = true;
		return true;
	},

	_repeat: function( i, steps, event ) {
		i = i || 500;

		clearTimeout( this.timer );
		this.timer = this._delay(function() {
			this._repeat( 40, steps, event );
		}, i );

		this._spin( steps * this.options.step, event );
	},

	_spin: function( step, event ) {
		var value = this.value() || 0;

		if ( !this.counter ) {
			this.counter = 1;
		}

		value = this._adjustValue( value + step * this._increment( this.counter ) );

		if ( !this.spinning || this._trigger( "spin", event, { value: value } ) !== false) {
			this._value( value );
			this.counter++;
		}
	},

	_increment: function( i ) {
		var incremental = this.options.incremental;

		if ( incremental ) {
			return $.isFunction( incremental ) ?
				incremental( i ) :
				Math.floor( i*i*i/50000 - i*i/500 + 17*i/200 + 1 );
		}

		return 1;
	},

	_precision: function() {
		var precision = this._precisionOf( this.options.step );
		if ( this.options.min !== null ) {
			precision = Math.max( precision, this._precisionOf( this.options.min ) );
		}
		return precision;
	},

	_precisionOf: function( num ) {
		var str = num.toString(),
			decimal = str.indexOf( "." );
		return decimal === -1 ? 0 : str.length - decimal - 1;
	},

	_adjustValue: function( value ) {
		var base, aboveMin,
			options = this.options;

		// make sure we're at a valid step
		// - find out where we are relative to the base (min or 0)
		base = options.min !== null ? options.min : 0;
		aboveMin = value - base;
		// - round to the nearest step
		aboveMin = Math.round(aboveMin / options.step) * options.step;
		// - rounding is based on 0, so adjust back to our base
		value = base + aboveMin;

		// fix precision from bad JS floating point math
		value = parseFloat( value.toFixed( this._precision() ) );

		// clamp the value
		if ( options.max !== null && value > options.max) {
			return options.max;
		}
		if ( options.min !== null && value < options.min ) {
			return options.min;
		}

		return value;
	},

	_stop: function( event ) {
		if ( !this.spinning ) {
			return;
		}

		clearTimeout( this.timer );
		clearTimeout( this.mousewheelTimer );
		this.counter = 0;
		this.spinning = false;
		this._trigger( "stop", event );
	},

	_setOption: function( key, value ) {
		if ( key === "culture" || key === "numberFormat" ) {
			var prevValue = this._parse( this.element.val() );
			this.options[ key ] = value;
			this.element.val( this._format( prevValue ) );
			return;
		}

		if ( key === "max" || key === "min" || key === "step" ) {
			if ( typeof value === "string" ) {
				value = this._parse( value );
			}
		}
		if ( key === "icons" ) {
			this.buttons.first().find( ".ui-icon" )
				.removeClass( this.options.icons.up )
				.addClass( value.up );
			this.buttons.last().find( ".ui-icon" )
				.removeClass( this.options.icons.down )
				.addClass( value.down );
		}

		this._super( key, value );

		if ( key === "disabled" ) {
			if ( value ) {
				this.element.prop( "disabled", true );
				this.buttons.button( "disable" );
			} else {
				this.element.prop( "disabled", false );
				this.buttons.button( "enable" );
			}
		}
	},

	_setOptions: modifier(function( options ) {
		this._super( options );
		this._value( this.element.val() );
	}),

	_parse: function( val ) {
		if ( typeof val === "string" && val !== "" ) {
			val = window.Globalize && this.options.numberFormat ?
				Globalize.parseFloat( val, 10, this.options.culture ) : +val;
		}
		return val === "" || isNaN( val ) ? null : val;
	},

	_format: function( value ) {
		if ( value === "" ) {
			return "";
		}
		return window.Globalize && this.options.numberFormat ?
			Globalize.format( value, this.options.numberFormat, this.options.culture ) :
			value;
	},

	_refresh: function() {
		this.element.attr({
			"aria-valuemin": this.options.min,
			"aria-valuemax": this.options.max,
			// TODO: what should we do with values that can't be parsed?
			"aria-valuenow": this._parse( this.element.val() )
		});
	},

	// update the value without triggering change
	_value: function( value, allowAny ) {
		var parsed;
		if ( value !== "" ) {
			parsed = this._parse( value );
			if ( parsed !== null ) {
				if ( !allowAny ) {
					parsed = this._adjustValue( parsed );
				}
				value = this._format( parsed );
			}
		}
		this.element.val( value );
		this._refresh();
	},

	_destroy: function() {
		this.element
			.removeClass( "ui-spinner-input" )
			.prop( "disabled", false )
			.removeAttr( "autocomplete" )
			.removeAttr( "role" )
			.removeAttr( "aria-valuemin" )
			.removeAttr( "aria-valuemax" )
			.removeAttr( "aria-valuenow" );
		this.uiSpinner.replaceWith( this.element );
	},

	stepUp: modifier(function( steps ) {
		this._stepUp( steps );
	}),
	_stepUp: function( steps ) {
		if ( this._start() ) {
			this._spin( (steps || 1) * this.options.step );
			this._stop();
		}
	},

	stepDown: modifier(function( steps ) {
		this._stepDown( steps );
	}),
	_stepDown: function( steps ) {
		if ( this._start() ) {
			this._spin( (steps || 1) * -this.options.step );
			this._stop();
		}
	},

	pageUp: modifier(function( pages ) {
		this._stepUp( (pages || 1) * this.options.page );
	}),

	pageDown: modifier(function( pages ) {
		this._stepDown( (pages || 1) * this.options.page );
	}),

	value: function( newVal ) {
		if ( !arguments.length ) {
			return this._parse( this.element.val() );
		}
		modifier( this._value ).call( this, newVal );
	},

	widget: function() {
		return this.uiSpinner;
	}
});

}( jQuery ) );

(function( $, undefined ) {

var tabId = 0,
	rhash = /#.*$/;

function getNextTabId() {
	return ++tabId;
}

function isLocal( anchor ) {
	return anchor.hash.length > 1 &&
		decodeURIComponent( anchor.href.replace( rhash, "" ) ) ===
			decodeURIComponent( location.href.replace( rhash, "" ) );
}

$.widget( "ui.tabs", {
	version: "1.10.0",
	delay: 300,
	options: {
		active: null,
		collapsible: false,
		event: "click",
		heightStyle: "content",
		hide: null,
		show: null,

		// callbacks
		activate: null,
		beforeActivate: null,
		beforeLoad: null,
		load: null
	},

	_create: function() {
		var that = this,
			options = this.options;

		this.running = false;

		this.element
			.addClass( "ui-tabs ui-widget ui-widget-content ui-corner-all" )
			.toggleClass( "ui-tabs-collapsible", options.collapsible )
			// Prevent users from focusing disabled tabs via click
			.delegate( ".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function( event ) {
				if ( $( this ).is( ".ui-state-disabled" ) ) {
					event.preventDefault();
				}
			})
			// support: IE <9
			// Preventing the default action in mousedown doesn't prevent IE
			// from focusing the element, so if the anchor gets focused, blur.
			// We don't have to worry about focusing the previously focused
			// element since clicking on a non-focusable element should focus
			// the body anyway.
			.delegate( ".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
				if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
					this.blur();
				}
			});

		this._processTabs();
		options.active = this._initialActive();

		// Take disabling tabs via class attribute from HTML
		// into account and update option properly.
		if ( $.isArray( options.disabled ) ) {
			options.disabled = $.unique( options.disabled.concat(
				$.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
					return that.tabs.index( li );
				})
			) ).sort();
		}

		// check for length avoids error when initializing empty list
		if ( this.options.active !== false && this.anchors.length ) {
			this.active = this._findActive( options.active );
		} else {
			this.active = $();
		}

		this._refresh();

		if ( this.active.length ) {
			this.load( options.active );
		}
	},

	_initialActive: function() {
		var active = this.options.active,
			collapsible = this.options.collapsible,
			locationHash = location.hash.substring( 1 );

		if ( active === null ) {
			// check the fragment identifier in the URL
			if ( locationHash ) {
				this.tabs.each(function( i, tab ) {
					if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
						active = i;
						return false;
					}
				});
			}

			// check for a tab marked active via a class
			if ( active === null ) {
				active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
			}

			// no active tab, set to false
			if ( active === null || active === -1 ) {
				active = this.tabs.length ? 0 : false;
			}
		}

		// handle numbers: negative, out of range
		if ( active !== false ) {
			active = this.tabs.index( this.tabs.eq( active ) );
			if ( active === -1 ) {
				active = collapsible ? false : 0;
			}
		}

		// don't allow collapsible: false and active: false
		if ( !collapsible && active === false && this.anchors.length ) {
			active = 0;
		}

		return active;
	},

	_getCreateEventData: function() {
		return {
			tab: this.active,
			panel: !this.active.length ? $() : this._getPanelForTab( this.active )
		};
	},

	_tabKeydown: function( event ) {
		/*jshint maxcomplexity:15*/
		var focusedTab = $( this.document[0].activeElement ).closest( "li" ),
			selectedIndex = this.tabs.index( focusedTab ),
			goingForward = true;

		if ( this._handlePageNav( event ) ) {
			return;
		}

		switch ( event.keyCode ) {
			case $.ui.keyCode.RIGHT:
			case $.ui.keyCode.DOWN:
				selectedIndex++;
				break;
			case $.ui.keyCode.UP:
			case $.ui.keyCode.LEFT:
				goingForward = false;
				selectedIndex--;
				break;
			case $.ui.keyCode.END:
				selectedIndex = this.anchors.length - 1;
				break;
			case $.ui.keyCode.HOME:
				selectedIndex = 0;
				break;
			case $.ui.keyCode.SPACE:
				// Activate only, no collapsing
				event.preventDefault();
				clearTimeout( this.activating );
				this._activate( selectedIndex );
				return;
			case $.ui.keyCode.ENTER:
				// Toggle (cancel delayed activation, allow collapsing)
				event.preventDefault();
				clearTimeout( this.activating );
				// Determine if we should collapse or activate
				this._activate( selectedIndex === this.options.active ? false : selectedIndex );
				return;
			default:
				return;
		}

		// Focus the appropriate tab, based on which key was pressed
		event.preventDefault();
		clearTimeout( this.activating );
		selectedIndex = this._focusNextTab( selectedIndex, goingForward );

		// Navigating with control key will prevent automatic activation
		if ( !event.ctrlKey ) {
			// Update aria-selected immediately so that AT think the tab is already selected.
			// Otherwise AT may confuse the user by stating that they need to activate the tab,
			// but the tab will already be activated by the time the announcement finishes.
			focusedTab.attr( "aria-selected", "false" );
			this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

			this.activating = this._delay(function() {
				this.option( "active", selectedIndex );
			}, this.delay );
		}
	},

	_panelKeydown: function( event ) {
		if ( this._handlePageNav( event ) ) {
			return;
		}

		// Ctrl+up moves focus to the current tab
		if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
			event.preventDefault();
			this.active.focus();
		}
	},

	// Alt+page up/down moves focus to the previous/next tab (and activates)
	_handlePageNav: function( event ) {
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
			this._activate( this._focusNextTab( this.options.active - 1, false ) );
			return true;
		}
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
			this._activate( this._focusNextTab( this.options.active + 1, true ) );
			return true;
		}
	},

	_findNextTab: function( index, goingForward ) {
		var lastTabIndex = this.tabs.length - 1;

		function constrain() {
			if ( index > lastTabIndex ) {
				index = 0;
			}
			if ( index < 0 ) {
				index = lastTabIndex;
			}
			return index;
		}

		while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
			index = goingForward ? index + 1 : index - 1;
		}

		return index;
	},

	_focusNextTab: function( index, goingForward ) {
		index = this._findNextTab( index, goingForward );
		this.tabs.eq( index ).focus();
		return index;
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {
			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		if ( key === "disabled" ) {
			// don't use the widget factory's disabled handling
			this._setupDisabled( value );
			return;
		}

		this._super( key, value);

		if ( key === "collapsible" ) {
			this.element.toggleClass( "ui-tabs-collapsible", value );
			// Setting collapsible: false while collapsed; open first panel
			if ( !value && this.options.active === false ) {
				this._activate( 0 );
			}
		}

		if ( key === "event" ) {
			this._setupEvents( value );
		}

		if ( key === "heightStyle" ) {
			this._setupHeightStyle( value );
		}
	},

	_tabId: function( tab ) {
		return tab.attr( "aria-controls" ) || "ui-tabs-" + getNextTabId();
	},

	_sanitizeSelector: function( hash ) {
		return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
	},

	refresh: function() {
		var options = this.options,
			lis = this.tablist.children( ":has(a[href])" );

		// get disabled tabs from class attribute from HTML
		// this will get converted to a boolean if needed in _refresh()
		options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
			return lis.index( tab );
		});

		this._processTabs();

		// was collapsed or no tabs
		if ( options.active === false || !this.anchors.length ) {
			options.active = false;
			this.active = $();
		// was active, but active tab is gone
		} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {
			// all remaining tabs are disabled
			if ( this.tabs.length === options.disabled.length ) {
				options.active = false;
				this.active = $();
			// activate previous tab
			} else {
				this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
			}
		// was active, active tab still exists
		} else {
			// make sure active index is correct
			options.active = this.tabs.index( this.active );
		}

		this._refresh();
	},

	_refresh: function() {
		this._setupDisabled( this.options.disabled );
		this._setupEvents( this.options.event );
		this._setupHeightStyle( this.options.heightStyle );

		this.tabs.not( this.active ).attr({
			"aria-selected": "false",
			tabIndex: -1
		});
		this.panels.not( this._getPanelForTab( this.active ) )
			.hide()
			.attr({
				"aria-expanded": "false",
				"aria-hidden": "true"
			});

		// Make sure one tab is in the tab order
		if ( !this.active.length ) {
			this.tabs.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active
				.addClass( "ui-tabs-active ui-state-active" )
				.attr({
					"aria-selected": "true",
					tabIndex: 0
				});
			this._getPanelForTab( this.active )
				.show()
				.attr({
					"aria-expanded": "true",
					"aria-hidden": "false"
				});
		}
	},

	_processTabs: function() {
		var that = this;

		this.tablist = this._getList()
			.addClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
			.attr( "role", "tablist" );

		this.tabs = this.tablist.find( "> li:has(a[href])" )
			.addClass( "ui-state-default ui-corner-top" )
			.attr({
				role: "tab",
				tabIndex: -1
			});

		this.anchors = this.tabs.map(function() {
				return $( "a", this )[ 0 ];
			})
			.addClass( "ui-tabs-anchor" )
			.attr({
				role: "presentation",
				tabIndex: -1
			});

		this.panels = $();

		this.anchors.each(function( i, anchor ) {
			var selector, panel, panelId,
				anchorId = $( anchor ).uniqueId().attr( "id" ),
				tab = $( anchor ).closest( "li" ),
				originalAriaControls = tab.attr( "aria-controls" );

			// inline tab
			if ( isLocal( anchor ) ) {
				selector = anchor.hash;
				panel = that.element.find( that._sanitizeSelector( selector ) );
			// remote tab
			} else {
				panelId = that._tabId( tab );
				selector = "#" + panelId;
				panel = that.element.find( selector );
				if ( !panel.length ) {
					panel = that._createPanel( panelId );
					panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
				}
				panel.attr( "aria-live", "polite" );
			}

			if ( panel.length) {
				that.panels = that.panels.add( panel );
			}
			if ( originalAriaControls ) {
				tab.data( "ui-tabs-aria-controls", originalAriaControls );
			}
			tab.attr({
				"aria-controls": selector.substring( 1 ),
				"aria-labelledby": anchorId
			});
			panel.attr( "aria-labelledby", anchorId );
		});

		this.panels
			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
			.attr( "role", "tabpanel" );
	},

	// allow overriding how to find the list for rare usage scenarios (#7715)
	_getList: function() {
		return this.element.find( "ol,ul" ).eq( 0 );
	},

	_createPanel: function( id ) {
		return $( "<div>" )
			.attr( "id", id )
			.addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
			.data( "ui-tabs-destroy", true );
	},

	_setupDisabled: function( disabled ) {
		if ( $.isArray( disabled ) ) {
			if ( !disabled.length ) {
				disabled = false;
			} else if ( disabled.length === this.anchors.length ) {
				disabled = true;
			}
		}

		// disable tabs
		for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {
			if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
				$( li )
					.addClass( "ui-state-disabled" )
					.attr( "aria-disabled", "true" );
			} else {
				$( li )
					.removeClass( "ui-state-disabled" )
					.removeAttr( "aria-disabled" );
			}
		}

		this.options.disabled = disabled;
	},

	_setupEvents: function( event ) {
		var events = {
			click: function( event ) {
				event.preventDefault();
			}
		};
		if ( event ) {
			$.each( event.split(" "), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			});
		}

		this._off( this.anchors.add( this.tabs ).add( this.panels ) );
		this._on( this.anchors, events );
		this._on( this.tabs, { keydown: "_tabKeydown" } );
		this._on( this.panels, { keydown: "_panelKeydown" } );

		this._focusable( this.tabs );
		this._hoverable( this.tabs );
	},

	_setupHeightStyle: function( heightStyle ) {
		var maxHeight,
			parent = this.element.parent();

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			maxHeight -= this.element.outerHeight() - this.element.height();

			this.element.siblings( ":visible" ).each(function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			});

			this.element.children().not( this.panels ).each(function() {
				maxHeight -= $( this ).outerHeight( true );
			});

			this.panels.each(function() {
				$( this ).height( Math.max( 0, maxHeight -
					$( this ).innerHeight() + $( this ).height() ) );
			})
			.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.panels.each(function() {
				maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
			}).height( maxHeight );
		}
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			anchor = $( event.currentTarget ),
			tab = anchor.closest( "li" ),
			clickedIsActive = tab[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : this._getPanelForTab( tab ),
			toHide = !active.length ? $() : this._getPanelForTab( active ),
			eventData = {
				oldTab: active,
				oldPanel: toHide,
				newTab: collapsing ? $() : tab,
				newPanel: toShow
			};

		event.preventDefault();

		if ( tab.hasClass( "ui-state-disabled" ) ||
				// tab is already loading
				tab.hasClass( "ui-tabs-loading" ) ||
				// can't switch durning an animation
				this.running ||
				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||
				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.tabs.index( tab );

		this.active = clickedIsActive ? $() : tab;
		if ( this.xhr ) {
			this.xhr.abort();
		}

		if ( !toHide.length && !toShow.length ) {
			$.error( "jQuery UI Tabs: Mismatching fragment identifier." );
		}

		if ( toShow.length ) {
			this.load( this.tabs.index( tab ), event );
		}
		this._toggle( event, eventData );
	},

	// handles show/hide for selecting tabs
	_toggle: function( event, eventData ) {
		var that = this,
			toShow = eventData.newPanel,
			toHide = eventData.oldPanel;

		this.running = true;

		function complete() {
			that.running = false;
			that._trigger( "activate", event, eventData );
		}

		function show() {
			eventData.newTab.closest( "li" ).addClass( "ui-tabs-active ui-state-active" );

			if ( toShow.length && that.options.show ) {
				that._show( toShow, that.options.show, complete );
			} else {
				toShow.show();
				complete();
			}
		}

		// start out by hiding, then showing, then completing
		if ( toHide.length && this.options.hide ) {
			this._hide( toHide, this.options.hide, function() {
				eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
				show();
			});
		} else {
			eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
			toHide.hide();
			show();
		}

		toHide.attr({
			"aria-expanded": "false",
			"aria-hidden": "true"
		});
		eventData.oldTab.attr( "aria-selected", "false" );
		// If we're switching tabs, remove the old tab from the tab order.
		// If we're opening from collapsed state, remove the previous tab from the tab order.
		// If we're collapsing, then keep the collapsing tab in the tab order.
		if ( toShow.length && toHide.length ) {
			eventData.oldTab.attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.tabs.filter(function() {
				return $( this ).attr( "tabIndex" ) === 0;
			})
			.attr( "tabIndex", -1 );
		}

		toShow.attr({
			"aria-expanded": "true",
			"aria-hidden": "false"
		});
		eventData.newTab.attr({
			"aria-selected": "true",
			tabIndex: 0
		});
	},

	_activate: function( index ) {
		var anchor,
			active = this._findActive( index );

		// trying to activate the already active panel
		if ( active[ 0 ] === this.active[ 0 ] ) {
			return;
		}

		// trying to collapse, simulate a click on the current active header
		if ( !active.length ) {
			active = this.active;
		}

		anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
		this._eventHandler({
			target: anchor,
			currentTarget: anchor,
			preventDefault: $.noop
		});
	},

	_findActive: function( index ) {
		return index === false ? $() : this.tabs.eq( index );
	},

	_getIndex: function( index ) {
		// meta-function to give users option to provide a href string instead of a numerical index.
		if ( typeof index === "string" ) {
			index = this.anchors.index( this.anchors.filter( "[href$='" + index + "']" ) );
		}

		return index;
	},

	_destroy: function() {
		if ( this.xhr ) {
			this.xhr.abort();
		}

		this.element.removeClass( "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible" );

		this.tablist
			.removeClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
			.removeAttr( "role" );

		this.anchors
			.removeClass( "ui-tabs-anchor" )
			.removeAttr( "role" )
			.removeAttr( "tabIndex" )
			.removeUniqueId();

		this.tabs.add( this.panels ).each(function() {
			if ( $.data( this, "ui-tabs-destroy" ) ) {
				$( this ).remove();
			} else {
				$( this )
					.removeClass( "ui-state-default ui-state-active ui-state-disabled " +
						"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel" )
					.removeAttr( "tabIndex" )
					.removeAttr( "aria-live" )
					.removeAttr( "aria-busy" )
					.removeAttr( "aria-selected" )
					.removeAttr( "aria-labelledby" )
					.removeAttr( "aria-hidden" )
					.removeAttr( "aria-expanded" )
					.removeAttr( "role" );
			}
		});

		this.tabs.each(function() {
			var li = $( this ),
				prev = li.data( "ui-tabs-aria-controls" );
			if ( prev ) {
				li
					.attr( "aria-controls", prev )
					.removeData( "ui-tabs-aria-controls" );
			} else {
				li.removeAttr( "aria-controls" );
			}
		});

		this.panels.show();

		if ( this.options.heightStyle !== "content" ) {
			this.panels.css( "height", "" );
		}
	},

	enable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === false ) {
			return;
		}

		if ( index === undefined ) {
			disabled = false;
		} else {
			index = this._getIndex( index );
			if ( $.isArray( disabled ) ) {
				disabled = $.map( disabled, function( num ) {
					return num !== index ? num : null;
				});
			} else {
				disabled = $.map( this.tabs, function( li, num ) {
					return num !== index ? num : null;
				});
			}
		}
		this._setupDisabled( disabled );
	},

	disable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === true ) {
			return;
		}

		if ( index === undefined ) {
			disabled = true;
		} else {
			index = this._getIndex( index );
			if ( $.inArray( index, disabled ) !== -1 ) {
				return;
			}
			if ( $.isArray( disabled ) ) {
				disabled = $.merge( [ index ], disabled ).sort();
			} else {
				disabled = [ index ];
			}
		}
		this._setupDisabled( disabled );
	},

	load: function( index, event ) {
		index = this._getIndex( index );
		var that = this,
			tab = this.tabs.eq( index ),
			anchor = tab.find( ".ui-tabs-anchor" ),
			panel = this._getPanelForTab( tab ),
			eventData = {
				tab: tab,
				panel: panel
			};

		// not remote
		if ( isLocal( anchor[ 0 ] ) ) {
			return;
		}

		this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

		// support: jQuery <1.8
		// jQuery <1.8 returns false if the request is canceled in beforeSend,
		// but as of 1.8, $.ajax() always returns a jqXHR object.
		if ( this.xhr && this.xhr.statusText !== "canceled" ) {
			tab.addClass( "ui-tabs-loading" );
			panel.attr( "aria-busy", "true" );

			this.xhr
				.success(function( response ) {
					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout(function() {
						panel.html( response );
						that._trigger( "load", event, eventData );
					}, 1 );
				})
				.complete(function( jqXHR, status ) {
					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout(function() {
						if ( status === "abort" ) {
							that.panels.stop( false, true );
						}

						tab.removeClass( "ui-tabs-loading" );
						panel.removeAttr( "aria-busy" );

						if ( jqXHR === that.xhr ) {
							delete that.xhr;
						}
					}, 1 );
				});
		}
	},

	_ajaxSettings: function( anchor, event, eventData ) {
		var that = this;
		return {
			url: anchor.attr( "href" ),
			beforeSend: function( jqXHR, settings ) {
				return that._trigger( "beforeLoad", event,
					$.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );
			}
		};
	},

	_getPanelForTab: function( tab ) {
		var id = $( tab ).attr( "aria-controls" );
		return this.element.find( this._sanitizeSelector( "#" + id ) );
	}
});

})( jQuery );

(function( $ ) {

var increments = 0;

function addDescribedBy( elem, id ) {
	var describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ );
	describedby.push( id );
	elem
		.data( "ui-tooltip-id", id )
		.attr( "aria-describedby", $.trim( describedby.join( " " ) ) );
}

function removeDescribedBy( elem ) {
	var id = elem.data( "ui-tooltip-id" ),
		describedby = (elem.attr( "aria-describedby" ) || "").split( /\s+/ ),
		index = $.inArray( id, describedby );
	if ( index !== -1 ) {
		describedby.splice( index, 1 );
	}

	elem.removeData( "ui-tooltip-id" );
	describedby = $.trim( describedby.join( " " ) );
	if ( describedby ) {
		elem.attr( "aria-describedby", describedby );
	} else {
		elem.removeAttr( "aria-describedby" );
	}
}

$.widget( "ui.tooltip", {
	version: "1.10.0",
	options: {
		content: function() {
			// support: IE<9, Opera in jQuery <1.7
			// .text() can't accept undefined, so coerce to a string
			var title = $( this ).attr( "title" ) || "";
			// Escape title, since we're going from an attribute to raw HTML
			return $( "<a>" ).text( title ).html();
		},
		hide: true,
		// Disabled elements have inconsistent behavior across browsers (#8661)
		items: "[title]:not([disabled])",
		position: {
			my: "left top+15",
			at: "left bottom",
			collision: "flipfit flip"
		},
		show: true,
		tooltipClass: null,
		track: false,

		// callbacks
		close: null,
		open: null
	},

	_create: function() {
		this._on({
			mouseover: "open",
			focusin: "open"
		});

		// IDs of generated tooltips, needed for destroy
		this.tooltips = {};
		// IDs of parent tooltips where we removed the title attribute
		this.parents = {};

		if ( this.options.disabled ) {
			this._disable();
		}
	},

	_setOption: function( key, value ) {
		var that = this;

		if ( key === "disabled" ) {
			this[ value ? "_disable" : "_enable" ]();
			this.options[ key ] = value;
			// disable element style changes
			return;
		}

		this._super( key, value );

		if ( key === "content" ) {
			$.each( this.tooltips, function( id, element ) {
				that._updateContent( element );
			});
		}
	},

	_disable: function() {
		var that = this;

		// close open tooltips
		$.each( this.tooltips, function( id, element ) {
			var event = $.Event( "blur" );
			event.target = event.currentTarget = element[0];
			that.close( event, true );
		});

		// remove title attributes to prevent native tooltips
		this.element.find( this.options.items ).addBack().each(function() {
			var element = $( this );
			if ( element.is( "[title]" ) ) {
				element
					.data( "ui-tooltip-title", element.attr( "title" ) )
					.attr( "title", "" );
			}
		});
	},

	_enable: function() {
		// restore title attributes
		this.element.find( this.options.items ).addBack().each(function() {
			var element = $( this );
			if ( element.data( "ui-tooltip-title" ) ) {
				element.attr( "title", element.data( "ui-tooltip-title" ) );
			}
		});
	},

	open: function( event ) {
		var that = this,
			target = $( event ? event.target : this.element )
				// we need closest here due to mouseover bubbling,
				// but always pointing at the same event target
				.closest( this.options.items );

		// No element to show a tooltip for or the tooltip is already open
		if ( !target.length || target.data( "ui-tooltip-id" ) ) {
			return;
		}

		if ( target.attr( "title" ) ) {
			target.data( "ui-tooltip-title", target.attr( "title" ) );
		}

		target.data( "ui-tooltip-open", true );

		// kill parent tooltips, custom or native, for hover
		if ( event && event.type === "mouseover" ) {
			target.parents().each(function() {
				var parent = $( this ),
					blurEvent;
				if ( parent.data( "ui-tooltip-open" ) ) {
					blurEvent = $.Event( "blur" );
					blurEvent.target = blurEvent.currentTarget = this;
					that.close( blurEvent, true );
				}
				if ( parent.attr( "title" ) ) {
					parent.uniqueId();
					that.parents[ this.id ] = {
						element: this,
						title: parent.attr( "title" )
					};
					parent.attr( "title", "" );
				}
			});
		}

		this._updateContent( target, event );
	},

	_updateContent: function( target, event ) {
		var content,
			contentOption = this.options.content,
			that = this,
			eventType = event ? event.type : null;

		if ( typeof contentOption === "string" ) {
			return this._open( event, target, contentOption );
		}

		content = contentOption.call( target[0], function( response ) {
			// ignore async response if tooltip was closed already
			if ( !target.data( "ui-tooltip-open" ) ) {
				return;
			}
			// IE may instantly serve a cached response for ajax requests
			// delay this call to _open so the other call to _open runs first
			that._delay(function() {
				// jQuery creates a special event for focusin when it doesn't
				// exist natively. To improve performance, the native event
				// object is reused and the type is changed. Therefore, we can't
				// rely on the type being correct after the event finished
				// bubbling, so we set it back to the previous value. (#8740)
				if ( event ) {
					event.type = eventType;
				}
				this._open( event, target, response );
			});
		});
		if ( content ) {
			this._open( event, target, content );
		}
	},

	_open: function( event, target, content ) {
		var tooltip, events, delayedShow,
			positionOption = $.extend( {}, this.options.position );

		if ( !content ) {
			return;
		}

		// Content can be updated multiple times. If the tooltip already
		// exists, then just update the content and bail.
		tooltip = this._find( target );
		if ( tooltip.length ) {
			tooltip.find( ".ui-tooltip-content" ).html( content );
			return;
		}

		// if we have a title, clear it to prevent the native tooltip
		// we have to check first to avoid defining a title if none exists
		// (we don't want to cause an element to start matching [title])
		//
		// We use removeAttr only for key events, to allow IE to export the correct
		// accessible attributes. For mouse events, set to empty string to avoid
		// native tooltip showing up (happens only when removing inside mouseover).
		if ( target.is( "[title]" ) ) {
			if ( event && event.type === "mouseover" ) {
				target.attr( "title", "" );
			} else {
				target.removeAttr( "title" );
			}
		}

		tooltip = this._tooltip( target );
		addDescribedBy( target, tooltip.attr( "id" ) );
		tooltip.find( ".ui-tooltip-content" ).html( content );

		function position( event ) {
			positionOption.of = event;
			if ( tooltip.is( ":hidden" ) ) {
				return;
			}
			tooltip.position( positionOption );
		}
		if ( this.options.track && event && /^mouse/.test( event.type ) ) {
			this._on( this.document, {
				mousemove: position
			});
			// trigger once to override element-relative positioning
			position( event );
		} else {
			tooltip.position( $.extend({
				of: target
			}, this.options.position ) );
		}

		tooltip.hide();

		this._show( tooltip, this.options.show );
		// Handle tracking tooltips that are shown with a delay (#8644). As soon
		// as the tooltip is visible, position the tooltip using the most recent
		// event.
		if ( this.options.show && this.options.show.delay ) {
			delayedShow = this.delayedShow = setInterval(function() {
				if ( tooltip.is( ":visible" ) ) {
					position( positionOption.of );
					clearInterval( delayedShow );
				}
			}, $.fx.interval );
		}

		this._trigger( "open", event, { tooltip: tooltip } );

		events = {
			keyup: function( event ) {
				if ( event.keyCode === $.ui.keyCode.ESCAPE ) {
					var fakeEvent = $.Event(event);
					fakeEvent.currentTarget = target[0];
					this.close( fakeEvent, true );
				}
			},
			remove: function() {
				this._removeTooltip( tooltip );
			}
		};
		if ( !event || event.type === "mouseover" ) {
			events.mouseleave = "close";
		}
		if ( !event || event.type === "focusin" ) {
			events.focusout = "close";
		}
		this._on( true, target, events );
	},

	close: function( event ) {
		var that = this,
			target = $( event ? event.currentTarget : this.element ),
			tooltip = this._find( target );

		// disabling closes the tooltip, so we need to track when we're closing
		// to avoid an infinite loop in case the tooltip becomes disabled on close
		if ( this.closing ) {
			return;
		}

		// Clear the interval for delayed tracking tooltips
		clearInterval( this.delayedShow );

		// only set title if we had one before (see comment in _open())
		if ( target.data( "ui-tooltip-title" ) ) {
			target.attr( "title", target.data( "ui-tooltip-title" ) );
		}

		removeDescribedBy( target );

		tooltip.stop( true );
		this._hide( tooltip, this.options.hide, function() {
			that._removeTooltip( $( this ) );
		});

		target.removeData( "ui-tooltip-open" );
		this._off( target, "mouseleave focusout keyup" );
		// Remove 'remove' binding only on delegated targets
		if ( target[0] !== this.element[0] ) {
			this._off( target, "remove" );
		}
		this._off( this.document, "mousemove" );

		if ( event && event.type === "mouseleave" ) {
			$.each( this.parents, function( id, parent ) {
				$( parent.element ).attr( "title", parent.title );
				delete that.parents[ id ];
			});
		}

		this.closing = true;
		this._trigger( "close", event, { tooltip: tooltip } );
		this.closing = false;
	},

	_tooltip: function( element ) {
		var id = "ui-tooltip-" + increments++,
			tooltip = $( "<div>" )
				.attr({
					id: id,
					role: "tooltip"
				})
				.addClass( "ui-tooltip ui-widget ui-corner-all ui-widget-content " +
					( this.options.tooltipClass || "" ) );
		$( "<div>" )
			.addClass( "ui-tooltip-content" )
			.appendTo( tooltip );
		tooltip.appendTo( this.document[0].body );
		this.tooltips[ id ] = element;
		return tooltip;
	},

	_find: function( target ) {
		var id = target.data( "ui-tooltip-id" );
		return id ? $( "#" + id ) : $();
	},

	_removeTooltip: function( tooltip ) {
		tooltip.remove();
		delete this.tooltips[ tooltip.attr( "id" ) ];
	},

	_destroy: function() {
		var that = this;

		// close open tooltips
		$.each( this.tooltips, function( id, element ) {
			// Delegate to close method to handle common cleanup
			var event = $.Event( "blur" );
			event.target = event.currentTarget = element[0];
			that.close( event, true );

			// Remove immediately; destroying an open tooltip doesn't use the
			// hide animation
			$( "#" + id ).remove();

			// Restore the title
			if ( element.data( "ui-tooltip-title" ) ) {
				element.attr( "title", element.data( "ui-tooltip-title" ) );
				element.removeData( "ui-tooltip-title" );
			}
		});
	}
});

}( jQuery ) );

/* ---------------------------------------- /includes/jsbin/handlebars.runtime.min.js ---------------------------------------- */
/*!

 handlebars v1.3.0

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/
var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();
/* ---------------------------------------- /includes/jsbin/moment.min.js ---------------------------------------- */
//! moment.js
//! version : 2.8.3
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return zb.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){tb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return m(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){qc[a]||(e(b),qc[a]=!0)}function h(a,b){return function(c){return p(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(){}function k(a,b){b!==!1&&F(a),n(this,a),this._d=new Date(+a._d)}function l(a){var b=y(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=tb.localeData(),this._bubble()}function m(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function n(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Ib.length>0)for(c in Ib)d=Ib[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function o(a){return 0>a?Math.ceil(a):Math.floor(a)}function p(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function q(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function r(a,b){var c;return b=K(b,a),a.isBefore(b)?c=q(a,b):(c=q(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function s(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=tb.duration(c,d),t(this,e,a),this}}function t(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&nb(a,"Date",mb(a,"Date")+f*c),g&&lb(a,mb(a,"Month")+g*c),d&&tb.updateOffset(a,f||g)}function u(a){return"[object Array]"===Object.prototype.toString.call(a)}function v(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function w(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&A(a[d])!==A(b[d]))&&g++;return g+f}function x(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=jc[a]||kc[b]||b}return a}function y(a){var b,d,e={};for(d in a)c(a,d)&&(b=x(d),b&&(e[b]=a[d]));return e}function z(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}tb[b]=function(e,f){var g,h,i=tb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=tb().utc().set(d,a);return i.call(tb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function A(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function B(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function C(a,b,c){return hb(tb([a,11,31+b-c]),b,c).week}function D(a){return E(a)?366:365}function E(a){return a%4===0&&a%100!==0||a%400===0}function F(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Bb]<0||a._a[Bb]>11?Bb:a._a[Cb]<1||a._a[Cb]>B(a._a[Ab],a._a[Bb])?Cb:a._a[Db]<0||a._a[Db]>23?Db:a._a[Eb]<0||a._a[Eb]>59?Eb:a._a[Fb]<0||a._a[Fb]>59?Fb:a._a[Gb]<0||a._a[Gb]>999?Gb:-1,a._pf._overflowDayOfYear&&(Ab>b||b>Cb)&&(b=Cb),a._pf.overflow=b)}function G(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function H(a){return a?a.toLowerCase().replace("_","-"):a}function I(a){for(var b,c,d,e,f=0;f<a.length;){for(e=H(a[f]).split("-"),b=e.length,c=H(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=J(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&w(e,c,!0)>=b-1)break;b--}f++}return null}function J(a){var b=null;if(!Hb[a]&&Jb)try{b=tb.locale(),require("./locale/"+a),tb.locale(b)}catch(c){}return Hb[a]}function K(a,b){return b._isUTC?tb(a).zone(b._offset||0):tb(a).local()}function L(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b,c,d=a.match(Nb);for(b=0,c=d.length;c>b;b++)d[b]=pc[d[b]]?pc[d[b]]:L(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function N(a,b){return a.isValid()?(b=O(b,a.localeData()),lc[b]||(lc[b]=M(b)),lc[b](a)):a.localeData().invalidDate()}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Ob.lastIndex=0;d>=0&&Ob.test(a);)a=a.replace(Ob,c),Ob.lastIndex=0,d-=1;return a}function P(a,b){var c,d=b._strict;switch(a){case"Q":return Zb;case"DDDD":return _b;case"YYYY":case"GGGG":case"gggg":return d?ac:Rb;case"Y":case"G":case"g":return cc;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?bc:Sb;case"S":if(d)return Zb;case"SS":if(d)return $b;case"SSS":if(d)return _b;case"DDD":return Qb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ub;case"a":case"A":return b._locale._meridiemParse;case"X":return Xb;case"Z":case"ZZ":return Vb;case"T":return Wb;case"SSSS":return Tb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?$b:Pb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pb;case"Do":return Yb;default:return c=new RegExp(Y(X(a.replace("\\","")),"i"))}}function Q(a){a=a||"";var b=a.match(Vb)||[],c=b[b.length-1]||[],d=(c+"").match(hc)||["-",0,0],e=+(60*d[1])+A(d[2]);return"+"===d[0]?-e:e}function R(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Bb]=3*(A(b)-1));break;case"M":case"MM":null!=b&&(e[Bb]=A(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[Bb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Cb]=A(b));break;case"Do":null!=b&&(e[Cb]=A(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=A(b));break;case"YY":e[Ab]=tb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Ab]=A(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Db]=A(b);break;case"m":case"mm":e[Eb]=A(b);break;case"s":case"ss":e[Fb]=A(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Gb]=A(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Q(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=A(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=tb.parseTwoDigitYear(b)}}function S(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Ab],hb(tb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Ab],hb(tb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=ib(d,e,f,h,g),a._a[Ab]=i.year,a._dayOfYear=i.dayOfYear}function T(a){var c,d,e,f,g=[];if(!a._d){for(e=V(a),a._w&&null==a._a[Cb]&&null==a._a[Bb]&&S(a),a._dayOfYear&&(f=b(a._a[Ab],e[Ab]),a._dayOfYear>D(f)&&(a._pf._overflowDayOfYear=!0),d=db(f,0,a._dayOfYear),a._a[Bb]=d.getUTCMonth(),a._a[Cb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?db:cb).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function U(a){var b;a._d||(b=y(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],T(a))}function V(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function W(a){if(a._f===tb.ISO_8601)return void $(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=O(a._f,a._locale).match(Nb)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(P(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),pc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),R(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Db]<12&&(a._a[Db]+=12),a._isPm===!1&&12===a._a[Db]&&(a._a[Db]=0),T(a),F(a)}function X(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Y(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],W(b),G(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));m(a,c||b)}function $(a){var b,c,d=a._i,e=dc.exec(d);if(e){for(a._pf.iso=!0,b=0,c=fc.length;c>b;b++)if(fc[b][1].exec(d)){a._f=fc[b][0]+(e[6]||" ");break}for(b=0,c=gc.length;c>b;b++)if(gc[b][1].exec(d)){a._f+=gc[b][0];break}d.match(Vb)&&(a._f+="Z"),W(a)}else a._isValid=!1}function _(a){$(a),a._isValid===!1&&(delete a._isValid,tb.createFromInputFallback(a))}function ab(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function bb(b){var c,d=b._i;d===a?b._d=new Date:v(d)?b._d=new Date(+d):null!==(c=Kb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?_(b):u(d)?(b._a=ab(d.slice(0),function(a){return parseInt(a,10)}),T(b)):"object"==typeof d?U(b):"number"==typeof d?b._d=new Date(d):tb.createFromInputFallback(b)}function cb(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function db(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function eb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function fb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function gb(a,b,c){var d=tb.duration(a).abs(),e=yb(d.as("s")),f=yb(d.as("m")),g=yb(d.as("h")),h=yb(d.as("d")),i=yb(d.as("M")),j=yb(d.as("y")),k=e<mc.s&&["s",e]||1===f&&["m"]||f<mc.m&&["mm",f]||1===g&&["h"]||g<mc.h&&["hh",g]||1===h&&["d"]||h<mc.d&&["dd",h]||1===i&&["M"]||i<mc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,fb.apply({},k)}function hb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=tb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ib(a,b,c,d,e){var f,g,h=db(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:D(a-1)+g}}function jb(b){var c=b._i,d=b._f;return b._locale=b._locale||tb.localeData(b._l),null===c||d===a&&""===c?tb.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),tb.isMoment(c)?new k(c,!0):(d?u(d)?Z(b):W(b):bb(b),new k(b)))}function kb(a,b){var c,d;if(1===b.length&&u(b[0])&&(b=b[0]),!b.length)return tb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function lb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),B(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function mb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function nb(a,b,c){return"Month"===b?lb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function ob(a,b){return function(c){return null!=c?(nb(this,a,c),tb.updateOffset(this,b),this):mb(this,a)}}function pb(a){return 400*a/146097}function qb(a){return 146097*a/400}function rb(a){tb.duration.fn[a]=function(){return this._data[a]}}function sb(a){"undefined"==typeof ender&&(ub=xb.moment,xb.moment=a?f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",tb):tb)}for(var tb,ub,vb,wb="2.8.3",xb="undefined"!=typeof global?global:this,yb=Math.round,zb=Object.prototype.hasOwnProperty,Ab=0,Bb=1,Cb=2,Db=3,Eb=4,Fb=5,Gb=6,Hb={},Ib=[],Jb="undefined"!=typeof module&&module.exports,Kb=/^\/?Date\((\-?\d+)/i,Lb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Mb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Nb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ob=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pb=/\d\d?/,Qb=/\d{1,3}/,Rb=/\d{1,4}/,Sb=/[+\-]?\d{1,6}/,Tb=/\d+/,Ub=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Vb=/Z|[\+\-]\d\d:?\d\d/gi,Wb=/T/i,Xb=/[\+\-]?\d+(\.\d{1,3})?/,Yb=/\d{1,2}/,Zb=/\d/,$b=/\d\d/,_b=/\d{3}/,ac=/\d{4}/,bc=/[+-]?\d{6}/,cc=/[+-]?\d+/,dc=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ec="YYYY-MM-DDTHH:mm:ssZ",fc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gc=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hc=/([\+\-]|\d\d)/gi,ic=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),jc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},kc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lc={},mc={s:45,m:45,h:22,d:26,M:11},nc="DDD w W M D d".split(" "),oc="M D H h m s w W".split(" "),pc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+p(Math.abs(a),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return A(this.milliseconds()/100)},SS:function(){return p(A(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+p(A(a/60),2)+":"+p(A(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+p(A(a/60),2)+p(A(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},qc={},rc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];nc.length;)vb=nc.pop(),pc[vb+"o"]=i(pc[vb],vb);for(;oc.length;)vb=oc.pop(),pc[vb+vb]=h(pc[vb],2);pc.DDDD=h(pc.DDD,3),m(j.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=tb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=tb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return hb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),tb=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),jb(g)},tb.suppressDeprecationWarnings=!1,tb.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),tb.min=function(){var a=[].slice.call(arguments,0);return kb("isBefore",a)},tb.max=function(){var a=[].slice.call(arguments,0);return kb("isAfter",a)},tb.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),jb(g).utc()},tb.unix=function(a){return tb(1e3*a)},tb.duration=function(a,b){var d,e,f,g,h=a,i=null;return tb.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Lb.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:A(i[Cb])*d,h:A(i[Db])*d,m:A(i[Eb])*d,s:A(i[Fb])*d,ms:A(i[Gb])*d}):(i=Mb.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):"object"==typeof h&&("from"in h||"to"in h)&&(g=r(tb(h.from),tb(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new l(h),tb.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},tb.version=wb,tb.defaultFormat=ec,tb.ISO_8601=function(){},tb.momentProperties=Ib,tb.updateOffset=function(){},tb.relativeTimeThreshold=function(b,c){return mc[b]===a?!1:c===a?mc[b]:(mc[b]=c,!0)},tb.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return tb.locale(a,b)}),tb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?tb.defineLocale(a,b):tb.localeData(a),c&&(tb.duration._locale=tb._locale=c)),tb._locale._abbr},tb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Hb[a]||(Hb[a]=new j),Hb[a].set(b),tb.locale(a),Hb[a]):(delete Hb[a],null)},tb.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return tb.localeData(a)}),tb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return tb._locale;if(!u(a)){if(b=J(a))return b;a=[a]}return I(a)},tb.isMoment=function(a){return a instanceof k||null!=a&&c(a,"_isAMomentObject")},tb.isDuration=function(a){return a instanceof l};for(vb=rc.length-1;vb>=0;--vb)z(rc[vb]);tb.normalizeUnits=function(a){return x(a)},tb.invalid=function(a){var b=tb.utc(0/0);return null!=a?m(b._pf,a):b._pf.userInvalidated=!0,b},tb.parseZone=function(){return tb.apply(null,arguments).parseZone()},tb.parseTwoDigitYear=function(a){return A(a)+(A(a)>68?1900:2e3)},m(tb.fn=k.prototype,{clone:function(){return tb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=tb(this).utc();return 0<a.year()&&a.year()<=9999?N(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return G(this)},isDSTShifted:function(){return this._a?this.isValid()&&w(this._a,(this._isUTC?tb.utc(this._a):tb(this._a)).toArray())>0:!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._dateTzOffset(),"m")),this},format:function(a){var b=N(this,a||tb.defaultFormat);return this.localeData().postformat(b)},add:s(1,"add"),subtract:s(-1,"subtract"),diff:function(a,b,c){var d,e,f,g=K(a,this),h=6e4*(this.zone()-g.zone());return b=x(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+g.daysInMonth()),e=12*(this.year()-g.year())+(this.month()-g.month()),f=this-tb(this).startOf("month")-(g-tb(g).startOf("month")),f-=6e4*(this.zone()-tb(this).startOf("month").zone()-(g.zone()-tb(g).startOf("month").zone())),e+=f/d,"year"===b&&(e/=12)):(d=this-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-h)/864e5:"week"===b?(d-h)/6048e5:d),c?e:o(e)},from:function(a,b){return tb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(tb(),a)},calendar:function(a){var b=a||tb(),c=K(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=eb(a,this.localeData()),this.add(a-b,"d")):b},month:ob("Month",!0),startOf:function(a){switch(a=x(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=x(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=tb.isMoment(a)?a:tb(a),+this>+a):+this.clone().startOf(b)>+tb(a).startOf(b)},isBefore:function(a,b){return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=tb.isMoment(a)?a:tb(a),+a>+this):+this.clone().startOf(b)<+tb(a).startOf(b)},isSame:function(a,b){return b=x(b||"millisecond"),"millisecond"===b?(a=tb.isMoment(a)?a:tb(a),+this===+a):+this.clone().startOf(b)===+K(a,this).startOf(b)},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=tb.apply(null,arguments),this>a?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=tb.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._dateTzOffset():("string"==typeof a&&(a=Q(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateTzOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?t(this,tb.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,tb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?tb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return B(this.year(),this.month())},dayOfYear:function(a){var b=yb((tb(this).startOf("day")-tb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=hb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=hb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=hb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return C(this.year(),a.dow,a.doy)},get:function(a){return a=x(a),this[a]()},set:function(a,b){return a=x(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){var c;return b===a?this._locale._abbr:(c=tb.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Use moment().localeData() instead.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),tb.fn.millisecond=tb.fn.milliseconds=ob("Milliseconds",!1),tb.fn.second=tb.fn.seconds=ob("Seconds",!1),tb.fn.minute=tb.fn.minutes=ob("Minutes",!1),tb.fn.hour=tb.fn.hours=ob("Hours",!0),tb.fn.date=ob("Date",!0),tb.fn.dates=f("dates accessor is deprecated. Use date instead.",ob("Date",!0)),tb.fn.year=ob("FullYear",!0),tb.fn.years=f("years accessor is deprecated. Use year instead.",ob("FullYear",!0)),tb.fn.days=tb.fn.day,tb.fn.months=tb.fn.month,tb.fn.weeks=tb.fn.week,tb.fn.isoWeeks=tb.fn.isoWeek,tb.fn.quarters=tb.fn.quarter,tb.fn.toJSON=tb.fn.toISOString,m(tb.duration.fn=l.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=o(d/1e3),g.seconds=a%60,b=o(a/60),g.minutes=b%60,c=o(b/60),g.hours=c%24,e+=o(c/24),h=o(pb(e)),e-=o(qb(h)),f+=o(e/30),e%=30,h+=o(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12)},humanize:function(a){var b=gb(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=tb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=tb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=x(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=x(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*pb(b),"month"===a?c:c/12;switch(b=this._days+qb(this._months/12),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:tb.fn.lang,locale:tb.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}}),tb.duration.fn.toString=tb.duration.fn.toISOString;for(vb in ic)c(ic,vb)&&rb(vb.toLowerCase());tb.duration.fn.asMilliseconds=function(){return this.as("ms")},tb.duration.fn.asSeconds=function(){return this.as("s")},tb.duration.fn.asMinutes=function(){return this.as("m")},tb.duration.fn.asHours=function(){return this.as("h")},tb.duration.fn.asDays=function(){return this.as("d")},tb.duration.fn.asWeeks=function(){return this.as("weeks")},tb.duration.fn.asMonths=function(){return this.as("M")},tb.duration.fn.asYears=function(){return this.as("y")},tb.locale("en",{ordinal:function(a){var b=a%10,c=1===A(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";
return a+c}}),Jb?module.exports=tb:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(xb.moment=ub),tb}),sb(!0)):sb()}).call(this);
/* ---------------------------------------- /includes/jsbin/raphael-min.js ---------------------------------------- */
// ┌────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël 2.1.0 - JavaScript Vector Library                          │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\
// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\
// └────────────────────────────────────────────────────────────────────┘ \\
(function(t){var e,r,i="0.4.2",n="hasOwnProperty",a=/[\.\/]/,s="*",o=function(){},l=function(t,e){return t-e},h={n:{}},u=function(t,i){t+="";var n,a=r,s=Array.prototype.slice.call(arguments,2),o=u.listeners(t),h=0,c=[],f={},p=[],d=e;e=t,r=0;for(var g=0,v=o.length;v>g;g++)"zIndex"in o[g]&&(c.push(o[g].zIndex),0>o[g].zIndex&&(f[o[g].zIndex]=o[g]));for(c.sort(l);0>c[h];)if(n=f[c[h++]],p.push(n.apply(i,s)),r)return r=a,p;for(g=0;v>g;g++)if(n=o[g],"zIndex"in n)if(n.zIndex==c[h]){if(p.push(n.apply(i,s)),r)break;do if(h++,n=f[c[h]],n&&p.push(n.apply(i,s)),r)break;while(n)}else f[n.zIndex]=n;else if(p.push(n.apply(i,s)),r)break;return r=a,e=d,p.length?p:null};u._events=h,u.listeners=function(t){var e,r,i,n,o,l,u,c,f=t.split(a),p=h,d=[p],g=[];for(n=0,o=f.length;o>n;n++){for(c=[],l=0,u=d.length;u>l;l++)for(p=d[l].n,r=[p[f[n]],p[s]],i=2;i--;)e=r[i],e&&(c.push(e),g=g.concat(e.f||[]));d=c}return g},u.on=function(t,e){if(t+="","function"!=typeof e)return function(){};for(var r=t.split(a),i=h,n=0,s=r.length;s>n;n++)i=i.n,i=i.hasOwnProperty(r[n])&&i[r[n]]||(i[r[n]]={n:{}});for(i.f=i.f||[],n=0,s=i.f.length;s>n;n++)if(i.f[n]==e)return o;return i.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},u.f=function(t){var e=[].slice.call(arguments,1);return function(){u.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},u.stop=function(){r=1},u.nt=function(t){return t?RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},u.nts=function(){return e.split(a)},u.off=u.unbind=function(t,e){if(!t)return u._events=h={n:{}},void 0;var r,i,o,l,c,f,p,d=t.split(a),g=[h];for(l=0,c=d.length;c>l;l++)for(f=0;g.length>f;f+=o.length-2){if(o=[f,1],r=g[f].n,d[l]!=s)r[d[l]]&&o.push(r[d[l]]);else for(i in r)r[n](i)&&o.push(r[i]);g.splice.apply(g,o)}for(l=0,c=g.length;c>l;l++)for(r=g[l];r.n;){if(e){if(r.f){for(f=0,p=r.f.length;p>f;f++)if(r.f[f]==e){r.f.splice(f,1);break}!r.f.length&&delete r.f}for(i in r.n)if(r.n[n](i)&&r.n[i].f){var v=r.n[i].f;for(f=0,p=v.length;p>f;f++)if(v[f]==e){v.splice(f,1);break}!v.length&&delete r.n[i].f}}else{delete r.f;for(i in r.n)r.n[n](i)&&r.n[i].f&&delete r.n[i].f}r=r.n}},u.once=function(t,e){var r=function(){return u.unbind(t,r),e.apply(this,arguments)};return u.on(t,r)},u.version=i,u.toString=function(){return"You are running Eve "+i},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):t.eve=u})(this),function(t,e){"function"==typeof define&&define.amd?define(["eve"],function(r){return e(t,r)}):e(t,t.eve)}(this,function(t,e){function r(t){if(r.is(t,"function"))return b?t():e.on("raphael.DOMload",t);if(r.is(t,H))return r._engine.create[N](r,t.splice(0,3+r.is(t[0],W))).add(t);var i=Array.prototype.slice.call(arguments,0);if(r.is(i[i.length-1],"function")){var n=i.pop();return b?n.call(r._engine.create[N](r,i)):e.on("raphael.DOMload",function(){n.call(r._engine.create[N](r,i))})}return r._engine.create[N](r,arguments)}function i(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var r in t)t[B](r)&&(e[r]=i(t[r]));return e}function n(t,e){for(var r=0,i=t.length;i>r;r++)if(t[r]===e)return t.push(t.splice(r,1)[0])}function a(t,e,r){function i(){var a=Array.prototype.slice.call(arguments,0),s=a.join("␀"),o=i.cache=i.cache||{},l=i.count=i.count||[];return o[B](s)?(n(l,s),r?r(o[s]):o[s]):(l.length>=1e3&&delete o[l.shift()],l.push(s),o[s]=t[N](e,a),r?r(o[s]):o[s])}return i}function s(){return this.hex}function o(t,e){for(var r=[],i=0,n=t.length;n-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?n-4==i?a[3]={x:+t[0],y:+t[1]}:n-2==i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[n-2],y:+t[n-1]}:n-4==i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),r.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return r}function l(t,e,r,i,n){var a=-3*e+9*r-9*i+3*n,s=t*a+6*e-12*r+6*i;return t*s-3*e+3*r}function h(t,e,r,i,n,a,s,o,h){null==h&&(h=1),h=h>1?1:0>h?0:h;for(var u=h/2,c=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,g=0;c>g;g++){var v=u*f[g]+u,x=l(v,t,r,n,s),y=l(v,e,i,a,o),m=x*x+y*y;d+=p[g]*q.sqrt(m)}return u*d}function u(t,e,r,i,n,a,s,o,l){if(!(0>l||l>h(t,e,r,i,n,a,s,o))){var u,c=1,f=c/2,p=c-f,d=.01;for(u=h(t,e,r,i,n,a,s,o,p);V(u-l)>d;)f/=2,p+=(l>u?1:-1)*f,u=h(t,e,r,i,n,a,s,o,p);return p}}function c(t,e,r,i,n,a,s,o){if(!(D(t,r)<O(n,s)||O(t,r)>D(n,s)||D(e,i)<O(a,o)||O(e,i)>D(a,o))){var l=(t*i-e*r)*(n-s)-(t-r)*(n*o-a*s),h=(t*i-e*r)*(a-o)-(e-i)*(n*o-a*s),u=(t-r)*(a-o)-(e-i)*(n-s);if(u){var c=l/u,f=h/u,p=+c.toFixed(2),d=+f.toFixed(2);if(!(+O(t,r).toFixed(2)>p||p>+D(t,r).toFixed(2)||+O(n,s).toFixed(2)>p||p>+D(n,s).toFixed(2)||+O(e,i).toFixed(2)>d||d>+D(e,i).toFixed(2)||+O(a,o).toFixed(2)>d||d>+D(a,o).toFixed(2)))return{x:c,y:f}}}}function f(t,e,i){var n=r.bezierBBox(t),a=r.bezierBBox(e);if(!r.isBBoxIntersect(n,a))return i?0:[];for(var s=h.apply(0,t),o=h.apply(0,e),l=~~(s/5),u=~~(o/5),f=[],p=[],d={},g=i?0:[],v=0;l+1>v;v++){var x=r.findDotsAtSegment.apply(r,t.concat(v/l));f.push({x:x.x,y:x.y,t:v/l})}for(v=0;u+1>v;v++)x=r.findDotsAtSegment.apply(r,e.concat(v/u)),p.push({x:x.x,y:x.y,t:v/u});for(v=0;l>v;v++)for(var y=0;u>y;y++){var m=f[v],b=f[v+1],_=p[y],w=p[y+1],k=.001>V(b.x-m.x)?"y":"x",C=.001>V(w.x-_.x)?"y":"x",B=c(m.x,m.y,b.x,b.y,_.x,_.y,w.x,w.y);if(B){if(d[B.x.toFixed(4)]==B.y.toFixed(4))continue;d[B.x.toFixed(4)]=B.y.toFixed(4);var S=m.t+V((B[k]-m[k])/(b[k]-m[k]))*(b.t-m.t),T=_.t+V((B[C]-_[C])/(w[C]-_[C]))*(w.t-_.t);S>=0&&1>=S&&T>=0&&1>=T&&(i?g++:g.push({x:B.x,y:B.y,t1:S,t2:T}))}}return g}function p(t,e,i){t=r._path2curve(t),e=r._path2curve(e);for(var n,a,s,o,l,h,u,c,p,d,g=i?0:[],v=0,x=t.length;x>v;v++){var y=t[v];if("M"==y[0])n=l=y[1],a=h=y[2];else{"C"==y[0]?(p=[n,a].concat(y.slice(1)),n=p[6],a=p[7]):(p=[n,a,n,a,l,h,l,h],n=l,a=h);for(var m=0,b=e.length;b>m;m++){var _=e[m];if("M"==_[0])s=u=_[1],o=c=_[2];else{"C"==_[0]?(d=[s,o].concat(_.slice(1)),s=d[6],o=d[7]):(d=[s,o,s,o,u,c,u,c],s=u,o=c);var w=f(p,d,i);if(i)g+=w;else{for(var k=0,C=w.length;C>k;k++)w[k].segment1=v,w[k].segment2=m,w[k].bez1=p,w[k].bez2=d;g=g.concat(w)}}}}}return g}function d(t,e,r,i,n,a){null!=t?(this.a=+t,this.b=+e,this.c=+r,this.d=+i,this.e=+n,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function g(){return this.x+P+this.y+P+this.width+" × "+this.height}function v(t,e,r,i,n,a){function s(t){return((c*t+u)*t+h)*t}function o(t,e){var r=l(t,e);return((d*r+p)*r+f)*r}function l(t,e){var r,i,n,a,o,l;for(n=t,l=0;8>l;l++){if(a=s(n)-t,e>V(a))return n;if(o=(3*c*n+2*u)*n+h,1e-6>V(o))break;n-=a/o}if(r=0,i=1,n=t,r>n)return r;if(n>i)return i;for(;i>r;){if(a=s(n),e>V(a-t))return n;t>a?r=n:i=n,n=(i-r)/2+r}return n}var h=3*e,u=3*(i-e)-h,c=1-h-u,f=3*r,p=3*(n-r)-f,d=1-f-p;return o(t,1/(200*a))}function x(t,e){var r=[],i={};if(this.ms=e,this.times=1,t){for(var n in t)t[B](n)&&(i[K(n)]=t[n],r.push(K(n)));r.sort(ce)}this.anim=i,this.top=r[r.length-1],this.percents=r}function y(t,i,n,a,s,o){n=K(n);var l,h,u,c,f,p,g=t.ms,x={},y={},m={};if(a)for(_=0,k=lr.length;k>_;_++){var b=lr[_];if(b.el.id==i.id&&b.anim==t){b.percent!=n?(lr.splice(_,1),u=1):h=b,i.attr(b.totalOrigin);break}}else a=+y;for(var _=0,k=t.percents.length;k>_;_++){if(t.percents[_]==n||t.percents[_]>a*t.top){n=t.percents[_],f=t.percents[_-1]||0,g=g/t.top*(n-f),c=t.percents[_+1],l=t.anim[n];break}a&&i.attr(t.anim[t.percents[_]])}if(l){if(h)h.initstatus=a,h.start=new Date-h.ms*a;else{for(var C in l)if(l[B](C)&&(ie[B](C)||i.paper.customAttributes[B](C)))switch(x[C]=i.attr(C),null==x[C]&&(x[C]=re[C]),y[C]=l[C],ie[C]){case W:m[C]=(y[C]-x[C])/g;break;case"colour":x[C]=r.getRGB(x[C]);var S=r.getRGB(y[C]);m[C]={r:(S.r-x[C].r)/g,g:(S.g-x[C].g)/g,b:(S.b-x[C].b)/g};break;case"path":var T=Re(x[C],y[C]),A=T[1];for(x[C]=T[0],m[C]=[],_=0,k=x[C].length;k>_;_++){m[C][_]=[0];for(var N=1,L=x[C][_].length;L>N;N++)m[C][_][N]=(A[_][N]-x[C][_][N])/g}break;case"transform":var M=i._,P=Oe(M[C],y[C]);if(P)for(x[C]=P.from,y[C]=P.to,m[C]=[],m[C].real=!0,_=0,k=x[C].length;k>_;_++)for(m[C][_]=[x[C][_][0]],N=1,L=x[C][_].length;L>N;N++)m[C][_][N]=(y[C][_][N]-x[C][_][N])/g;else{var R=i.matrix||new d,I={_:{transform:M.transform},getBBox:function(){return i.getBBox(1)}};x[C]=[R.a,R.b,R.c,R.d,R.e,R.f],qe(I,y[C]),y[C]=I._.transform,m[C]=[(I.matrix.a-R.a)/g,(I.matrix.b-R.b)/g,(I.matrix.c-R.c)/g,(I.matrix.d-R.d)/g,(I.matrix.e-R.e)/g,(I.matrix.f-R.f)/g]}break;case"csv":var j=z(l[C])[F](w),q=z(x[C])[F](w);if("clip-rect"==C)for(x[C]=q,m[C]=[],_=q.length;_--;)m[C][_]=(j[_]-x[C][_])/g;y[C]=j;break;default:for(j=[][E](l[C]),q=[][E](x[C]),m[C]=[],_=i.paper.customAttributes[C].length;_--;)m[C][_]=((j[_]||0)-(q[_]||0))/g}var D=l.easing,O=r.easing_formulas[D];if(!O)if(O=z(D).match(Q),O&&5==O.length){var V=O;O=function(t){return v(t,+V[1],+V[2],+V[3],+V[4],g)}}else O=pe;if(p=l.start||t.start||+new Date,b={anim:t,percent:n,timestamp:p,start:p+(t.del||0),status:0,initstatus:a||0,stop:!1,ms:g,easing:O,from:x,diff:m,to:y,el:i,callback:l.callback,prev:f,next:c,repeat:o||t.times,origin:i.attr(),totalOrigin:s},lr.push(b),a&&!h&&!u&&(b.stop=!0,b.start=new Date-g*a,1==lr.length))return ur();u&&(b.start=new Date-b.ms*a),1==lr.length&&hr(ur)}e("raphael.anim.start."+i.id,i,t)}}function m(t){for(var e=0;lr.length>e;e++)lr[e].el.paper==t&&lr.splice(e--,1)}r.version="2.1.0",r.eve=e;var b,_,w=/[, ]+/,k={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,B="hasOwnProperty",S={doc:document,win:t},T={was:Object.prototype[B].call(S.win,"Raphael"),is:S.win.Raphael},A=function(){this.ca=this.customAttributes={}},N="apply",E="concat",L="ontouchstart"in S.win||S.win.DocumentTouch&&S.doc instanceof DocumentTouch,M="",P=" ",z=String,F="split",R="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[F](P),I={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},j=z.prototype.toLowerCase,q=Math,D=q.max,O=q.min,V=q.abs,Y=q.pow,G=q.PI,W="number",X="string",H="array",U=Object.prototype.toString,$=(r._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Z={NaN:1,Infinity:1,"-Infinity":1},Q=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,J=q.round,K=parseFloat,te=parseInt,ee=z.prototype.toUpperCase,re=r._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ie=r._availableAnimAttrs={blur:W,"clip-rect":"csv",cx:W,cy:W,fill:"colour","fill-opacity":W,"font-size":W,height:W,opacity:W,path:"path",r:W,rx:W,ry:W,stroke:"colour","stroke-opacity":W,"stroke-width":W,transform:"transform",width:W,x:W,y:W},ne=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ae={hs:1,rg:1},se=/,?([achlmqrstvxz]),?/gi,oe=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,le=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,he=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ue=(r._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ce=function(t,e){return K(t)-K(e)},fe=function(){},pe=function(t){return t},de=r._rectPath=function(t,e,r,i,n){return n?[["M",t+n,e],["l",r-2*n,0],["a",n,n,0,0,1,n,n],["l",0,i-2*n],["a",n,n,0,0,1,-n,n],["l",2*n-r,0],["a",n,n,0,0,1,-n,-n],["l",0,2*n-i],["a",n,n,0,0,1,n,-n],["z"]]:[["M",t,e],["l",r,0],["l",0,i],["l",-r,0],["z"]]},ge=function(t,e,r,i){return null==i&&(i=r),[["M",t,e],["m",0,-i],["a",r,i,0,1,1,0,2*i],["a",r,i,0,1,1,0,-2*i],["z"]]},ve=r._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return ge(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return ge(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return de(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return de(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return de(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return de(e.x,e.y,e.width,e.height)}},xe=r.mapPath=function(t,e){if(!e)return t;var r,i,n,a,s,o,l;for(t=Re(t),n=0,s=t.length;s>n;n++)for(l=t[n],a=1,o=l.length;o>a;a+=2)r=e.x(l[a],l[a+1]),i=e.y(l[a],l[a+1]),l[a]=r,l[a+1]=i;return t};if(r._g=S,r.type=S.win.SVGAngle||S.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==r.type){var ye,me=S.doc.createElement("div");if(me.innerHTML='<v:shape adj="1"/>',ye=me.firstChild,ye.style.behavior="url(#default#VML)",!ye||"object"!=typeof ye.adj)return r.type=M;me=null}r.svg=!(r.vml="VML"==r.type),r._Paper=A,r.fn=_=A.prototype=r.prototype,r._id=0,r._oid=0,r.is=function(t,e){return e=j.call(e),"finite"==e?!Z[B](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||U.call(t).slice(8,-1).toLowerCase()==e},r.angle=function(t,e,i,n,a,s){if(null==a){var o=t-i,l=e-n;return o||l?(180+180*q.atan2(-l,-o)/G+360)%360:0}return r.angle(t,e,a,s)-r.angle(i,n,a,s)},r.rad=function(t){return t%360*G/180},r.deg=function(t){return 180*t/G%360},r.snapTo=function(t,e,i){if(i=r.is(i,"finite")?i:10,r.is(t,H)){for(var n=t.length;n--;)if(i>=V(t[n]-e))return t[n]}else{t=+t;var a=e%t;if(i>a)return e-a;if(a>t-i)return e-a+t}return e},r.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=0|16*q.random(),r="x"==t?e:8|3&e;return r.toString(16)}),r.setWindow=function(t){e("raphael.setWindow",r,S.win,t),S.win=t,S.doc=S.win.document,r._engine.initWin&&r._engine.initWin(S.win)};var be=function(t){if(r.vml){var e,i=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),e=n.body}catch(s){e=createPopup().document.body}var o=e.createTextRange();be=a(function(t){try{e.style.color=z(t).replace(i,M);var r=o.queryCommandValue("ForeColor");return r=(255&r)<<16|65280&r|(16711680&r)>>>16,"#"+("000000"+r.toString(16)).slice(-6)}catch(n){return"none"}})}else{var l=S.doc.createElement("i");l.title="Raphaël Colour Picker",l.style.display="none",S.doc.body.appendChild(l),be=a(function(t){return l.style.color=t,S.doc.defaultView.getComputedStyle(l,M).getPropertyValue("color")})}return be(t)},_e=function(){return"hsb("+[this.h,this.s,this.b]+")"},we=function(){return"hsl("+[this.h,this.s,this.l]+")"},ke=function(){return this.hex},Ce=function(t,e,i){if(null==e&&r.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r),null==e&&r.is(t,X)){var n=r.getRGB(t);t=n.r,e=n.g,i=n.b}return(t>1||e>1||i>1)&&(t/=255,e/=255,i/=255),[t,e,i]},Be=function(t,e,i,n){t*=255,e*=255,i*=255;var a={r:t,g:e,b:i,hex:r.rgb(t,e,i),toString:ke};return r.is(n,"finite")&&(a.opacity=n),a};r.color=function(t){var e;return r.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=r.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):r.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=r.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(r.is(t,"string")&&(t=r.getRGB(t)),r.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=r.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=r.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=ke,t},r.hsb2rgb=function(t,e,r,i){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(r=t.b,e=t.s,t=t.h,i=t.o),t*=360;var n,a,s,o,l;return t=t%360/60,l=r*e,o=l*(1-V(t%2-1)),n=a=s=r-l,t=~~t,n+=[l,o,0,0,o,l][t],a+=[o,l,l,o,0,0][t],s+=[0,0,o,l,l,o][t],Be(n,a,s,i)},r.hsl2rgb=function(t,e,r,i){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(r=t.l,e=t.s,t=t.h),(t>1||e>1||r>1)&&(t/=360,e/=100,r/=100),t*=360;var n,a,s,o,l;return t=t%360/60,l=2*e*(.5>r?r:1-r),o=l*(1-V(t%2-1)),n=a=s=r-l/2,t=~~t,n+=[l,o,0,0,o,l][t],a+=[o,l,l,o,0,0][t],s+=[0,0,o,l,l,o][t],Be(n,a,s,i)},r.rgb2hsb=function(t,e,r){r=Ce(t,e,r),t=r[0],e=r[1],r=r[2];var i,n,a,s;return a=D(t,e,r),s=a-O(t,e,r),i=0==s?null:a==t?(e-r)/s:a==e?(r-t)/s+2:(t-e)/s+4,i=60*((i+360)%6)/360,n=0==s?0:s/a,{h:i,s:n,b:a,toString:_e}},r.rgb2hsl=function(t,e,r){r=Ce(t,e,r),t=r[0],e=r[1],r=r[2];var i,n,a,s,o,l;return s=D(t,e,r),o=O(t,e,r),l=s-o,i=0==l?null:s==t?(e-r)/l:s==e?(r-t)/l+2:(t-e)/l+4,i=60*((i+360)%6)/360,a=(s+o)/2,n=0==l?0:.5>a?l/(2*a):l/(2-2*a),{h:i,s:n,l:a,toString:we}},r._path2string=function(){return this.join(",").replace(se,"$1")},r._preload=function(t,e){var r=S.doc.createElement("img");r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){e.call(this),this.onload=null,S.doc.body.removeChild(this)},r.onerror=function(){S.doc.body.removeChild(this)},S.doc.body.appendChild(r),r.src=t},r.getRGB=a(function(t){if(!t||(t=z(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:s};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:s};!(ae[B](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=be(t));var e,i,n,a,o,l,h=t.match($);return h?(h[2]&&(n=te(h[2].substring(5),16),i=te(h[2].substring(3,5),16),e=te(h[2].substring(1,3),16)),h[3]&&(n=te((o=h[3].charAt(3))+o,16),i=te((o=h[3].charAt(2))+o,16),e=te((o=h[3].charAt(1))+o,16)),h[4]&&(l=h[4][F](ne),e=K(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=K(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=K(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),"rgba"==h[1].toLowerCase().slice(0,4)&&(a=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100)),h[5]?(l=h[5][F](ne),e=K(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=K(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=K(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsba"==h[1].toLowerCase().slice(0,4)&&(a=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),r.hsb2rgb(e,i,n,a)):h[6]?(l=h[6][F](ne),e=K(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=K(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),n=K(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsla"==h[1].toLowerCase().slice(0,4)&&(a=K(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),r.hsl2rgb(e,i,n,a)):(h={r:e,g:i,b:n,toString:s},h.hex="#"+(16777216|n|i<<8|e<<16).toString(16).slice(1),r.is(a,"finite")&&(h.opacity=a),h)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:s}},r),r.hsb=a(function(t,e,i){return r.hsb2rgb(t,e,i).hex}),r.hsl=a(function(t,e,i){return r.hsl2rgb(t,e,i).hex}),r.rgb=a(function(t,e,r){return"#"+(16777216|r|e<<8|t<<16).toString(16).slice(1)}),r.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},r=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,0>=e.s&&(this.getColor.start={h:0,s:1,b:e.b})),r.hex},r.getColor.reset=function(){delete this.start},r.parsePathString=function(t){if(!t)return null;var e=Se(t);if(e.arr)return Ae(e.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return r.is(t,H)&&r.is(t[0],H)&&(n=Ae(t)),n.length||z(t).replace(oe,function(t,e,r){var a=[],s=e.toLowerCase();if(r.replace(he,function(t,e){e&&a.push(+e)}),"m"==s&&a.length>2&&(n.push([e][E](a.splice(0,2))),s="l",e="m"==e?"l":"L"),"r"==s)n.push([e][E](a));else for(;a.length>=i[s]&&(n.push([e][E](a.splice(0,i[s]))),i[s]););}),n.toString=r._path2string,e.arr=Ae(n),n},r.parseTransformString=a(function(t){if(!t)return null;var e=[];return r.is(t,H)&&r.is(t[0],H)&&(e=Ae(t)),e.length||z(t).replace(le,function(t,r,i){var n=[];j.call(r),i.replace(he,function(t,e){e&&n.push(+e)}),e.push([r][E](n))}),e.toString=r._path2string,e});var Se=function(t){var e=Se.ps=Se.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var r in e)e[B](r)&&r!=t&&(e[r].sleep--,!e[r].sleep&&delete e[r])}),e[t]};r.findDotsAtSegment=function(t,e,r,i,n,a,s,o,l){var h=1-l,u=Y(h,3),c=Y(h,2),f=l*l,p=f*l,d=u*t+3*c*l*r+3*h*l*l*n+p*s,g=u*e+3*c*l*i+3*h*l*l*a+p*o,v=t+2*l*(r-t)+f*(n-2*r+t),x=e+2*l*(i-e)+f*(a-2*i+e),y=r+2*l*(n-r)+f*(s-2*n+r),m=i+2*l*(a-i)+f*(o-2*a+i),b=h*t+l*r,_=h*e+l*i,w=h*n+l*s,k=h*a+l*o,C=90-180*q.atan2(v-y,x-m)/G;return(v>y||m>x)&&(C+=180),{x:d,y:g,m:{x:v,y:x},n:{x:y,y:m},start:{x:b,y:_},end:{x:w,y:k},alpha:C}},r.bezierBBox=function(t,e,i,n,a,s,o,l){r.is(t,"array")||(t=[t,e,i,n,a,s,o,l]);var h=Fe.apply(null,t);return{x:h.min.x,y:h.min.y,x2:h.max.x,y2:h.max.y,width:h.max.x-h.min.x,height:h.max.y-h.min.y}},r.isPointInsideBBox=function(t,e,r){return e>=t.x&&t.x2>=e&&r>=t.y&&t.y2>=r},r.isBBoxIntersect=function(t,e){var i=r.isPointInsideBBox;return i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},r.pathIntersection=function(t,e){return p(t,e)},r.pathIntersectionNumber=function(t,e){return p(t,e,1)},r.isPointInsidePath=function(t,e,i){var n=r.pathBBox(t);return r.isPointInsideBBox(n,e,i)&&1==p(t,[["M",e,i],["H",n.x2+10]],1)%2},r._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Te=r.pathBBox=function(t){var e=Se(t);if(e.bbox)return i(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Re(t);for(var r,n=0,a=0,s=[],o=[],l=0,h=t.length;h>l;l++)if(r=t[l],"M"==r[0])n=r[1],a=r[2],s.push(n),o.push(a);else{var u=Fe(n,a,r[1],r[2],r[3],r[4],r[5],r[6]);s=s[E](u.min.x,u.max.x),o=o[E](u.min.y,u.max.y),n=r[5],a=r[6]}var c=O[N](0,s),f=O[N](0,o),p=D[N](0,s),d=D[N](0,o),g=p-c,v=d-f,x={x:c,y:f,x2:p,y2:d,width:g,height:v,cx:c+g/2,cy:f+v/2};return e.bbox=i(x),x},Ae=function(t){var e=i(t);return e.toString=r._path2string,e},Ne=r._pathToRelative=function(t){var e=Se(t);if(e.rel)return Ae(e.rel);r.is(t,H)&&r.is(t&&t[0],H)||(t=r.parsePathString(t));var i=[],n=0,a=0,s=0,o=0,l=0;"M"==t[0][0]&&(n=t[0][1],a=t[0][2],s=n,o=a,l++,i.push(["M",n,a]));for(var h=l,u=t.length;u>h;h++){var c=i[h]=[],f=t[h];if(f[0]!=j.call(f[0]))switch(c[0]=j.call(f[0]),c[0]){case"a":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+(f[6]-n).toFixed(3),c[7]=+(f[7]-a).toFixed(3);break;case"v":c[1]=+(f[1]-a).toFixed(3);break;case"m":s=f[1],o=f[2];default:for(var p=1,d=f.length;d>p;p++)c[p]=+(f[p]-(p%2?n:a)).toFixed(3)}else{c=i[h]=[],"m"==f[0]&&(s=f[1]+n,o=f[2]+a);for(var g=0,v=f.length;v>g;g++)i[h][g]=f[g]}var x=i[h].length;switch(i[h][0]){case"z":n=s,a=o;break;case"h":n+=+i[h][x-1];break;case"v":a+=+i[h][x-1];break;default:n+=+i[h][x-2],a+=+i[h][x-1]}}return i.toString=r._path2string,e.rel=Ae(i),i},Ee=r._pathToAbsolute=function(t){var e=Se(t);if(e.abs)return Ae(e.abs);if(r.is(t,H)&&r.is(t&&t[0],H)||(t=r.parsePathString(t)),!t||!t.length)return[["M",0,0]];var i=[],n=0,a=0,s=0,l=0,h=0;"M"==t[0][0]&&(n=+t[0][1],a=+t[0][2],s=n,l=a,h++,i[0]=["M",n,a]);for(var u,c,f=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=h,d=t.length;d>p;p++){if(i.push(u=[]),c=t[p],c[0]!=ee.call(c[0]))switch(u[0]=ee.call(c[0]),u[0]){case"A":u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=+(c[6]+n),u[7]=+(c[7]+a);break;case"V":u[1]=+c[1]+a;break;case"H":u[1]=+c[1]+n;break;case"R":for(var g=[n,a][E](c.slice(1)),v=2,x=g.length;x>v;v++)g[v]=+g[v]+n,g[++v]=+g[v]+a;i.pop(),i=i[E](o(g,f));break;case"M":s=+c[1]+n,l=+c[2]+a;default:for(v=1,x=c.length;x>v;v++)u[v]=+c[v]+(v%2?n:a)}else if("R"==c[0])g=[n,a][E](c.slice(1)),i.pop(),i=i[E](o(g,f)),u=["R"][E](c.slice(-2));else for(var y=0,m=c.length;m>y;y++)u[y]=c[y];switch(u[0]){case"Z":n=s,a=l;break;case"H":n=u[1];break;case"V":a=u[1];break;case"M":s=u[u.length-2],l=u[u.length-1];default:n=u[u.length-2],a=u[u.length-1]}}return i.toString=r._path2string,e.abs=Ae(i),i},Le=function(t,e,r,i){return[t,e,r,i,r,i]},Me=function(t,e,r,i,n,a){var s=1/3,o=2/3;return[s*t+o*r,s*e+o*i,s*n+o*r,s*a+o*i,n,a]},Pe=function(t,e,r,i,n,s,o,l,h,u){var c,f=120*G/180,p=G/180*(+n||0),d=[],g=a(function(t,e,r){var i=t*q.cos(r)-e*q.sin(r),n=t*q.sin(r)+e*q.cos(r);return{x:i,y:n}});if(u)C=u[0],B=u[1],w=u[2],k=u[3];else{c=g(t,e,-p),t=c.x,e=c.y,c=g(l,h,-p),l=c.x,h=c.y;var v=(q.cos(G/180*n),q.sin(G/180*n),(t-l)/2),x=(e-h)/2,y=v*v/(r*r)+x*x/(i*i);y>1&&(y=q.sqrt(y),r=y*r,i=y*i);var m=r*r,b=i*i,_=(s==o?-1:1)*q.sqrt(V((m*b-m*x*x-b*v*v)/(m*x*x+b*v*v))),w=_*r*x/i+(t+l)/2,k=_*-i*v/r+(e+h)/2,C=q.asin(((e-k)/i).toFixed(9)),B=q.asin(((h-k)/i).toFixed(9));C=w>t?G-C:C,B=w>l?G-B:B,0>C&&(C=2*G+C),0>B&&(B=2*G+B),o&&C>B&&(C-=2*G),!o&&B>C&&(B-=2*G)}var S=B-C;if(V(S)>f){var T=B,A=l,N=h;B=C+f*(o&&B>C?1:-1),l=w+r*q.cos(B),h=k+i*q.sin(B),d=Pe(l,h,r,i,n,0,o,A,N,[B,T,w,k])}S=B-C;var L=q.cos(C),M=q.sin(C),P=q.cos(B),z=q.sin(B),R=q.tan(S/4),I=4/3*r*R,j=4/3*i*R,D=[t,e],O=[t+I*M,e-j*L],Y=[l+I*z,h-j*P],W=[l,h];if(O[0]=2*D[0]-O[0],O[1]=2*D[1]-O[1],u)return[O,Y,W][E](d);d=[O,Y,W][E](d).join()[F](",");for(var X=[],H=0,U=d.length;U>H;H++)X[H]=H%2?g(d[H-1],d[H],p).y:g(d[H],d[H+1],p).x;return X},ze=function(t,e,r,i,n,a,s,o,l){var h=1-l;return{x:Y(h,3)*t+3*Y(h,2)*l*r+3*h*l*l*n+Y(l,3)*s,y:Y(h,3)*e+3*Y(h,2)*l*i+3*h*l*l*a+Y(l,3)*o}},Fe=a(function(t,e,r,i,n,a,s,o){var l,h=n-2*r+t-(s-2*n+r),u=2*(r-t)-2*(n-r),c=t-r,f=(-u+q.sqrt(u*u-4*h*c))/2/h,p=(-u-q.sqrt(u*u-4*h*c))/2/h,d=[e,o],g=[t,s];return V(f)>"1e12"&&(f=.5),V(p)>"1e12"&&(p=.5),f>0&&1>f&&(l=ze(t,e,r,i,n,a,s,o,f),g.push(l.x),d.push(l.y)),p>0&&1>p&&(l=ze(t,e,r,i,n,a,s,o,p),g.push(l.x),d.push(l.y)),h=a-2*i+e-(o-2*a+i),u=2*(i-e)-2*(a-i),c=e-i,f=(-u+q.sqrt(u*u-4*h*c))/2/h,p=(-u-q.sqrt(u*u-4*h*c))/2/h,V(f)>"1e12"&&(f=.5),V(p)>"1e12"&&(p=.5),f>0&&1>f&&(l=ze(t,e,r,i,n,a,s,o,f),g.push(l.x),d.push(l.y)),p>0&&1>p&&(l=ze(t,e,r,i,n,a,s,o,p),g.push(l.x),d.push(l.y)),{min:{x:O[N](0,g),y:O[N](0,d)},max:{x:D[N](0,g),y:D[N](0,d)}}}),Re=r._path2curve=a(function(t,e){var r=!e&&Se(t);if(!e&&r.curve)return Ae(r.curve);for(var i=Ee(t),n=e&&Ee(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=(function(t,e){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][E](Pe[N](0,[e.x,e.y][E](t.slice(1))));break;case"S":r=e.x+(e.x-(e.bx||e.x)),i=e.y+(e.y-(e.by||e.y)),t=["C",r,i][E](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][E](Me(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][E](Me(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][E](Le(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][E](Le(e.x,e.y,t[1],e.y));break;case"V":t=["C"][E](Le(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][E](Le(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)t.splice(e++,0,["C"][E](r.splice(0,6)));t.splice(e,1),c=D(i.length,n&&n.length||0)}},h=function(t,e,r,a,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),r.bx=0,r.by=0,r.x=t[s][1],r.y=t[s][2],c=D(i.length,n&&n.length||0))},u=0,c=D(i.length,n&&n.length||0);c>u;u++){i[u]=o(i[u],a),l(i,u),n&&(n[u]=o(n[u],s)),n&&l(n,u),h(i,n,a,s,u),h(n,i,s,a,u);var f=i[u],p=n&&n[u],d=f.length,g=n&&p.length;a.x=f[d-2],a.y=f[d-1],a.bx=K(f[d-4])||a.x,a.by=K(f[d-3])||a.y,s.bx=n&&(K(p[g-4])||s.x),s.by=n&&(K(p[g-3])||s.y),s.x=n&&p[g-2],s.y=n&&p[g-1]}return n||(r.curve=Ae(i)),n?[i,n]:i},null,Ae),Ie=(r._parseDots=a(function(t){for(var e=[],i=0,n=t.length;n>i;i++){var a={},s=t[i].match(/^([^:]*):?([\d\.]*)/);if(a.color=r.getRGB(s[1]),a.color.error)return null;a.color=a.color.hex,s[2]&&(a.offset=s[2]+"%"),e.push(a)}for(i=1,n=e.length-1;n>i;i++)if(!e[i].offset){for(var o=K(e[i-1].offset||0),l=0,h=i+1;n>h;h++)if(e[h].offset){l=e[h].offset;break}l||(l=100,h=n),l=K(l);for(var u=(l-o)/(h-i+1);h>i;i++)o+=u,e[i].offset=o+"%"}return e}),r._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),je=(r._tofront=function(t,e){e.top!==t&&(Ie(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},r._toback=function(t,e){e.bottom!==t&&(Ie(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},r._insertafter=function(t,e,r){Ie(t,r),e==r.top&&(r.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},r._insertbefore=function(t,e,r){Ie(t,r),e==r.bottom&&(r.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},r.toMatrix=function(t,e){var r=Te(t),i={_:{transform:M},getBBox:function(){return r}};return qe(i,e),i.matrix}),qe=(r.transformPath=function(t,e){return xe(t,je(t,e))},r._extractTransform=function(t,e){if(null==e)return t._.transform;e=z(e).replace(/\.{3}|\u2026/g,t._.transform||M);var i=r.parseTransformString(e),n=0,a=0,s=0,o=1,l=1,h=t._,u=new d;if(h.transform=i||[],i)for(var c=0,f=i.length;f>c;c++){var p,g,v,x,y,m=i[c],b=m.length,_=z(m[0]).toLowerCase(),w=m[0]!=_,k=w?u.invert():0;"t"==_&&3==b?w?(p=k.x(0,0),g=k.y(0,0),v=k.x(m[1],m[2]),x=k.y(m[1],m[2]),u.translate(v-p,x-g)):u.translate(m[1],m[2]):"r"==_?2==b?(y=y||t.getBBox(1),u.rotate(m[1],y.x+y.width/2,y.y+y.height/2),n+=m[1]):4==b&&(w?(v=k.x(m[2],m[3]),x=k.y(m[2],m[3]),u.rotate(m[1],v,x)):u.rotate(m[1],m[2],m[3]),n+=m[1]):"s"==_?2==b||3==b?(y=y||t.getBBox(1),u.scale(m[1],m[b-1],y.x+y.width/2,y.y+y.height/2),o*=m[1],l*=m[b-1]):5==b&&(w?(v=k.x(m[3],m[4]),x=k.y(m[3],m[4]),u.scale(m[1],m[2],v,x)):u.scale(m[1],m[2],m[3],m[4]),o*=m[1],l*=m[2]):"m"==_&&7==b&&u.add(m[1],m[2],m[3],m[4],m[5],m[6]),h.dirtyT=1,t.matrix=u}t.matrix=u,h.sx=o,h.sy=l,h.deg=n,h.dx=a=u.e,h.dy=s=u.f,1==o&&1==l&&!n&&h.bbox?(h.bbox.x+=+a,h.bbox.y+=+s):h.dirtyT=1}),De=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Oe=r._equaliseTransform=function(t,e){e=z(e).replace(/\.{3}|\u2026/g,t),t=r.parseTransformString(t)||[],e=r.parseTransformString(e)||[];for(var i,n,a,s,o=D(t.length,e.length),l=[],h=[],u=0;o>u;u++){if(a=t[u]||De(e[u]),s=e[u]||De(a),a[0]!=s[0]||"r"==a[0].toLowerCase()&&(a[2]!=s[2]||a[3]!=s[3])||"s"==a[0].toLowerCase()&&(a[3]!=s[3]||a[4]!=s[4]))return;for(l[u]=[],h[u]=[],i=0,n=D(a.length,s.length);n>i;i++)i in a&&(l[u][i]=a[i]),i in s&&(h[u][i]=s[i])}return{from:l,to:h}
};r._getContainer=function(t,e,i,n){var a;return a=null!=n||r.is(t,"object")?t:S.doc.getElementById(t),null!=a?a.tagName?null==e?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:e,height:i}:{container:1,x:t,y:e,width:i,height:n}:void 0},r.pathToRelative=Ne,r._engine={},r.path2curve=Re,r.matrix=function(t,e,r,i,n,a){return new d(t,e,r,i,n,a)},function(t){function e(t){return t[0]*t[0]+t[1]*t[1]}function i(t){var r=q.sqrt(e(t));t[0]&&(t[0]/=r),t[1]&&(t[1]/=r)}t.add=function(t,e,r,i,n,a){var s,o,l,h,u=[[],[],[]],c=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[t,r,n],[e,i,a],[0,0,1]];for(t&&t instanceof d&&(f=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),s=0;3>s;s++)for(o=0;3>o;o++){for(h=0,l=0;3>l;l++)h+=c[s][l]*f[l][o];u[s][o]=h}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new d(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new d(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,r,i){null==e&&(e=t),(r||i)&&this.add(1,0,0,1,r,i),this.add(t,0,0,e,0,0),(r||i)&&this.add(1,0,0,1,-r,-i)},t.rotate=function(t,e,i){t=r.rad(t),e=e||0,i=i||0;var n=+q.cos(t).toFixed(9),a=+q.sin(t).toFixed(9);this.add(n,a,-a,n,e,i),this.add(1,0,0,1,-e,-i)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[z.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return r.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];t.scalex=q.sqrt(e(n[0])),i(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaley=q.sqrt(e(n[1])),i(n[1]),t.shear/=t.scaley;var a=-n[0][1],s=n[1][1];return 0>s?(t.rotate=r.deg(q.acos(s)),0>a&&(t.rotate=360-t.rotate)):t.rotate=r.deg(q.asin(a)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[F]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:M)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:M)+(e.rotate?"r"+[e.rotate,0,0]:M)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(d.prototype);var Ve=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);_.safari="Apple Computer, Inc."==navigator.vendor&&(Ve&&4>Ve[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ve&&8>Ve[1]?function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:fe;for(var Ye=function(){this.returnValue=!1},Ge=function(){return this.originalEvent.preventDefault()},We=function(){this.cancelBubble=!0},Xe=function(){return this.originalEvent.stopPropagation()},He=function(t){var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,r=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;return{x:t.clientX+r,y:t.clientY+e}},Ue=function(){return S.doc.addEventListener?function(t,e,r,i){var n=function(t){var e=He(t);return r.call(i,t,e.x,e.y)};if(t.addEventListener(e,n,!1),L&&I[e]){var a=function(e){for(var n=He(e),a=e,s=0,o=e.targetTouches&&e.targetTouches.length;o>s;s++)if(e.targetTouches[s].target==t){e=e.targetTouches[s],e.originalEvent=a,e.preventDefault=Ge,e.stopPropagation=Xe;break}return r.call(i,e,n.x,n.y)};t.addEventListener(I[e],a,!1)}return function(){return t.removeEventListener(e,n,!1),L&&I[e]&&t.removeEventListener(I[e],n,!1),!0}}:S.doc.attachEvent?function(t,e,r,i){var n=function(t){t=t||S.win.event;var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,n=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,a=t.clientX+n,s=t.clientY+e;return t.preventDefault=t.preventDefault||Ye,t.stopPropagation=t.stopPropagation||We,r.call(i,t,a,s)};t.attachEvent("on"+e,n);var a=function(){return t.detachEvent("on"+e,n),!0};return a}:void 0}(),$e=[],Ze=function(t){for(var r,i=t.clientX,n=t.clientY,a=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,s=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,o=$e.length;o--;){if(r=$e[o],L&&t.touches){for(var l,h=t.touches.length;h--;)if(l=t.touches[h],l.identifier==r.el._drag.id){i=l.clientX,n=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var u,c=r.el.node,f=c.nextSibling,p=c.parentNode,d=c.style.display;S.win.opera&&p.removeChild(c),c.style.display="none",u=r.el.paper.getElementByPoint(i,n),c.style.display=d,S.win.opera&&(f?p.insertBefore(c,f):p.appendChild(c)),u&&e("raphael.drag.over."+r.el.id,r.el,u),i+=s,n+=a,e("raphael.drag.move."+r.el.id,r.move_scope||r.el,i-r.el._drag.x,n-r.el._drag.y,i,n,t)}},Qe=function(t){r.unmousemove(Ze).unmouseup(Qe);for(var i,n=$e.length;n--;)i=$e[n],i.el._drag={},e("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);$e=[]},Je=r.el={},Ke=R.length;Ke--;)(function(t){r[t]=Je[t]=function(e,i){return r.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Ue(this.shape||this.node||S.doc,t,e,i||this)})),this},r["un"+t]=Je["un"+t]=function(e){for(var i=this.events||[],n=i.length;n--;)i[n].name!=t||!r.is(e,"undefined")&&i[n].f!=e||(i[n].unbind(),i.splice(n,1),!i.length&&delete this.events);return this}})(R[Ke]);Je.data=function(t,i){var n=ue[this.id]=ue[this.id]||{};if(0==arguments.length)return n;if(1==arguments.length){if(r.is(t,"object")){for(var a in t)t[B](a)&&this.data(a,t[a]);return this}return e("raphael.data.get."+this.id,this,n[t],t),n[t]}return n[t]=i,e("raphael.data.set."+this.id,this,i,t),this},Je.removeData=function(t){return null==t?ue[this.id]={}:ue[this.id]&&delete ue[this.id][t],this},Je.getData=function(){return i(ue[this.id]||{})},Je.hover=function(t,e,r,i){return this.mouseover(t,r).mouseout(e,i||r)},Je.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var tr=[];Je.drag=function(t,i,n,a,s,o){function l(l){(l.originalEvent||l).preventDefault();var h=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,u=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;this._drag.x=l.clientX+u,this._drag.y=l.clientY+h,this._drag.id=l.identifier,!$e.length&&r.mousemove(Ze).mouseup(Qe),$e.push({el:this,move_scope:a,start_scope:s,end_scope:o}),i&&e.on("raphael.drag.start."+this.id,i),t&&e.on("raphael.drag.move."+this.id,t),n&&e.on("raphael.drag.end."+this.id,n),e("raphael.drag.start."+this.id,s||a||this,l.clientX+u,l.clientY+h,l)}return this._drag={},tr.push({el:this,start:l}),this.mousedown(l),this},Je.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Je.undrag=function(){for(var t=tr.length;t--;)tr[t].el==this&&(this.unmousedown(tr[t].start),tr.splice(t,1),e.unbind("raphael.drag.*."+this.id));!tr.length&&r.unmousemove(Ze).unmouseup(Qe),$e=[]},_.circle=function(t,e,i){var n=r._engine.circle(this,t||0,e||0,i||0);return this.__set__&&this.__set__.push(n),n},_.rect=function(t,e,i,n,a){var s=r._engine.rect(this,t||0,e||0,i||0,n||0,a||0);return this.__set__&&this.__set__.push(s),s},_.ellipse=function(t,e,i,n){var a=r._engine.ellipse(this,t||0,e||0,i||0,n||0);return this.__set__&&this.__set__.push(a),a},_.path=function(t){t&&!r.is(t,X)&&!r.is(t[0],H)&&(t+=M);var e=r._engine.path(r.format[N](r,arguments),this);return this.__set__&&this.__set__.push(e),e},_.image=function(t,e,i,n,a){var s=r._engine.image(this,t||"about:blank",e||0,i||0,n||0,a||0);return this.__set__&&this.__set__.push(s),s},_.text=function(t,e,i){var n=r._engine.text(this,t||0,e||0,z(i));return this.__set__&&this.__set__.push(n),n},_.set=function(t){!r.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new fr(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},_.setStart=function(t){this.__set__=t||this.set()},_.setFinish=function(){var t=this.__set__;return delete this.__set__,t},_.setSize=function(t,e){return r._engine.setSize.call(this,t,e)},_.setViewBox=function(t,e,i,n,a){return r._engine.setViewBox.call(this,t,e,i,n,a)},_.top=_.bottom=null,_.raphael=r;var er=function(t){var e=t.getBoundingClientRect(),r=t.ownerDocument,i=r.body,n=r.documentElement,a=n.clientTop||i.clientTop||0,s=n.clientLeft||i.clientLeft||0,o=e.top+(S.win.pageYOffset||n.scrollTop||i.scrollTop)-a,l=e.left+(S.win.pageXOffset||n.scrollLeft||i.scrollLeft)-s;return{y:o,x:l}};_.getElementByPoint=function(t,e){var r=this,i=r.canvas,n=S.doc.elementFromPoint(t,e);if(S.win.opera&&"svg"==n.tagName){var a=er(i),s=i.createSVGRect();s.x=t-a.x,s.y=e-a.y,s.width=s.height=1;var o=i.getIntersectionList(s,null);o.length&&(n=o[o.length-1])}if(!n)return null;for(;n.parentNode&&n!=i.parentNode&&!n.raphael;)n=n.parentNode;return n==r.canvas.parentNode&&(n=i),n=n&&n.raphael?r.getById(n.raphaelid):null},_.getElementsByBBox=function(t){var e=this.set();return this.forEach(function(i){r.isBBoxIntersect(i.getBBox(),t)&&e.push(i)}),e},_.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},_.forEach=function(t,e){for(var r=this.bottom;r;){if(t.call(e,r)===!1)return this;r=r.next}return this},_.getElementsByPoint=function(t,e){var r=this.set();return this.forEach(function(i){i.isPointInside(t,e)&&r.push(i)}),r},Je.isPointInside=function(t,e){var i=this.realPath=this.realPath||ve[this.type](this);return r.isPointInsidePath(i,t,e)},Je.getBBox=function(t){if(this.removed)return{};var e=this._;return t?((e.dirty||!e.bboxwt)&&(this.realPath=ve[this.type](this),e.bboxwt=Te(this.realPath),e.bboxwt.toString=g,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&((e.dirty||!this.realPath)&&(e.bboxwt=0,this.realPath=ve[this.type](this)),e.bbox=Te(xe(this.realPath,this.matrix)),e.bbox.toString=g,e.dirty=e.dirtyT=0),e.bbox)},Je.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Je.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},r=e.width/2,i=this.paper,n=i.set(),a=this.realPath||ve[this.type](this);a=this.matrix?xe(a,this.matrix):a;for(var s=1;r+1>s;s++)n.push(i.path(a).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/r*s).toFixed(3),opacity:+(e.opacity/r).toFixed(3)}));return n.insertBefore(this).translate(e.offsetx,e.offsety)};var rr=function(t,e,i,n,a,s,o,l,c){return null==c?h(t,e,i,n,a,s,o,l):r.findDotsAtSegment(t,e,i,n,a,s,o,l,u(t,e,i,n,a,s,o,l,c))},ir=function(t,e){return function(i,n,a){i=Re(i);for(var s,o,l,h,u,c="",f={},p=0,d=0,g=i.length;g>d;d++){if(l=i[d],"M"==l[0])s=+l[1],o=+l[2];else{if(h=rr(s,o,l[1],l[2],l[3],l[4],l[5],l[6]),p+h>n){if(e&&!f.start){if(u=rr(s,o,l[1],l[2],l[3],l[4],l[5],l[6],n-p),c+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],a)return c;f.start=c,c=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),p+=h,s=+l[5],o=+l[6];continue}if(!t&&!e)return u=rr(s,o,l[1],l[2],l[3],l[4],l[5],l[6],n-p),{x:u.x,y:u.y,alpha:u.alpha}}p+=h,s=+l[5],o=+l[6]}c+=l.shift()+l}return f.end=c,u=t?p:e?f:r.findDotsAtSegment(s,o,l[0],l[1],l[2],l[3],l[4],l[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},nr=ir(1),ar=ir(),sr=ir(0,1);r.getTotalLength=nr,r.getPointAtLength=ar,r.getSubpath=function(t,e,r){if(1e-6>this.getTotalLength(t)-r)return sr(t,e).end;var i=sr(t,r,1);return e?sr(i,e).end:i},Je.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():nr(t)},Je.getPointAtLength=function(t){var e=this.getPath();if(e)return ar(e,t)},Je.getPath=function(){var t,e=r._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return e&&(t=e(this)),t},Je.getSubpath=function(t,e){var i=this.getPath();if(i)return r.getSubpath(i,t,e)};var or=r.easing_formulas={linear:function(t){return t},"<":function(t){return Y(t,1.7)},">":function(t){return Y(t,.48)},"<>":function(t){var e=.48-t/1.04,r=q.sqrt(.1734+e*e),i=r-e,n=Y(V(i),1/3)*(0>i?-1:1),a=-r-e,s=Y(V(a),1/3)*(0>a?-1:1),o=n+s+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:Y(2,-10*t)*q.sin((t-.075)*2*G/.3)+1},bounce:function(t){var e,r=7.5625,i=2.75;return 1/i>t?e=r*t*t:2/i>t?(t-=1.5/i,e=r*t*t+.75):2.5/i>t?(t-=2.25/i,e=r*t*t+.9375):(t-=2.625/i,e=r*t*t+.984375),e}};or.easeIn=or["ease-in"]=or["<"],or.easeOut=or["ease-out"]=or[">"],or.easeInOut=or["ease-in-out"]=or["<>"],or["back-in"]=or.backIn,or["back-out"]=or.backOut;var lr=[],hr=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},ur=function(){for(var t=+new Date,i=0;lr.length>i;i++){var n=lr[i];if(!n.el.removed&&!n.paused){var a,s,o=t-n.start,l=n.ms,h=n.easing,u=n.from,c=n.diff,f=n.to,p=(n.t,n.el),d={},g={};if(n.initstatus?(o=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*l,n.status=n.initstatus,delete n.initstatus,n.stop&&lr.splice(i--,1)):n.status=(n.prev+(n.percent-n.prev)*(o/l))/n.anim.top,!(0>o))if(l>o){var v=h(o/l);for(var x in u)if(u[B](x)){switch(ie[x]){case W:a=+u[x]+v*l*c[x];break;case"colour":a="rgb("+[cr(J(u[x].r+v*l*c[x].r)),cr(J(u[x].g+v*l*c[x].g)),cr(J(u[x].b+v*l*c[x].b))].join(",")+")";break;case"path":a=[];for(var m=0,b=u[x].length;b>m;m++){a[m]=[u[x][m][0]];for(var _=1,w=u[x][m].length;w>_;_++)a[m][_]=+u[x][m][_]+v*l*c[x][m][_];a[m]=a[m].join(P)}a=a.join(P);break;case"transform":if(c[x].real)for(a=[],m=0,b=u[x].length;b>m;m++)for(a[m]=[u[x][m][0]],_=1,w=u[x][m].length;w>_;_++)a[m][_]=u[x][m][_]+v*l*c[x][m][_];else{var k=function(t){return+u[x][t]+v*l*c[x][t]};a=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==x)for(a=[],m=4;m--;)a[m]=+u[x][m]+v*l*c[x][m];break;default:var C=[][E](u[x]);for(a=[],m=p.paper.customAttributes[x].length;m--;)a[m]=+C[m]+v*l*c[x][m]}d[x]=a}p.attr(d),function(t,r,i){setTimeout(function(){e("raphael.anim.frame."+t,r,i)})}(p.id,p,n.anim)}else{if(function(t,i,n){setTimeout(function(){e("raphael.anim.frame."+i.id,i,n),e("raphael.anim.finish."+i.id,i,n),r.is(t,"function")&&t.call(i)})}(n.callback,p,n.anim),p.attr(f),lr.splice(i--,1),n.repeat>1&&!n.next){for(s in f)f[B](s)&&(g[s]=n.totalOrigin[s]);n.el.attr(g),y(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&y(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}r.svg&&p&&p.paper&&p.paper.safari(),lr.length&&hr(ur)},cr=function(t){return t>255?255:0>t?0:t};Je.animateWith=function(t,e,i,n,a,s){var o=this;if(o.removed)return s&&s.call(o),o;var l=i instanceof x?i:r.animation(i,n,a,s);y(l,o,l.percents[0],null,o.attr());for(var h=0,u=lr.length;u>h;h++)if(lr[h].anim==e&&lr[h].el==t){lr[u-1].start=lr[h].start;break}return o},Je.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},x.prototype.delay=function(t){var e=new x(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},x.prototype.repeat=function(t){var e=new x(this.anim,this.ms);return e.del=this.del,e.times=q.floor(D(t,0))||1,e},r.animation=function(t,e,i,n){if(t instanceof x)return t;(r.is(i,"function")||!i)&&(n=n||i||null,i=null),t=Object(t),e=+e||0;var a,s,o={};for(s in t)t[B](s)&&K(s)!=s&&K(s)+"%"!=s&&(a=!0,o[s]=t[s]);return a?(i&&(o.easing=i),n&&(o.callback=n),new x({100:o},e)):new x(t,e)},Je.animate=function(t,e,i,n){var a=this;if(a.removed)return n&&n.call(a),a;var s=t instanceof x?t:r.animation(t,e,i,n);return y(s,a,s.percents[0],null,a.attr()),a},Je.setTime=function(t,e){return t&&null!=e&&this.status(t,O(e,t.ms)/t.ms),this},Je.status=function(t,e){var r,i,n=[],a=0;if(null!=e)return y(t,this,-1,O(e,1)),this;for(r=lr.length;r>a;a++)if(i=lr[a],i.el.id==this.id&&(!t||i.anim==t)){if(t)return i.status;n.push({anim:i.anim,status:i.status})}return t?0:n},Je.pause=function(t){for(var r=0;lr.length>r;r++)lr[r].el.id!=this.id||t&&lr[r].anim!=t||e("raphael.anim.pause."+this.id,this,lr[r].anim)!==!1&&(lr[r].paused=!0);return this},Je.resume=function(t){for(var r=0;lr.length>r;r++)if(lr[r].el.id==this.id&&(!t||lr[r].anim==t)){var i=lr[r];e("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},Je.stop=function(t){for(var r=0;lr.length>r;r++)lr[r].el.id!=this.id||t&&lr[r].anim!=t||e("raphael.anim.stop."+this.id,this,lr[r].anim)!==!1&&lr.splice(r--,1);return this},e.on("raphael.remove",m),e.on("raphael.clear",m),Je.toString=function(){return"Raphaël’s object"};var fr=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,r=t.length;r>e;e++)!t[e]||t[e].constructor!=Je.constructor&&t[e].constructor!=fr||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},pr=fr.prototype;pr.push=function(){for(var t,e,r=0,i=arguments.length;i>r;r++)t=arguments[r],!t||t.constructor!=Je.constructor&&t.constructor!=fr||(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},pr.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},pr.forEach=function(t,e){for(var r=0,i=this.items.length;i>r;r++)if(t.call(e,this.items[r],r)===!1)return this;return this};for(var dr in Je)Je[B](dr)&&(pr[dr]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t][N](r,e)})}}(dr));return pr.attr=function(t,e){if(t&&r.is(t,H)&&r.is(t[0],"object"))for(var i=0,n=t.length;n>i;i++)this.items[i].attr(t[i]);else for(var a=0,s=this.items.length;s>a;a++)this.items[a].attr(t,e);return this},pr.clear=function(){for(;this.length;)this.pop()},pr.splice=function(t,e){t=0>t?D(this.length+t,0):t,e=D(0,O(this.length-t,e));var r,i=[],n=[],a=[];for(r=2;arguments.length>r;r++)a.push(arguments[r]);for(r=0;e>r;r++)n.push(this[t+r]);for(;this.length-t>r;r++)i.push(this[t+r]);var s=a.length;for(r=0;s+i.length>r;r++)this.items[t+r]=this[t+r]=s>r?a[r]:i[r-s];for(r=this.items.length=this.length-=e-s;this[r];)delete this[r++];return new fr(n)},pr.exclude=function(t){for(var e=0,r=this.length;r>e;e++)if(this[e]==t)return this.splice(e,1),!0},pr.animate=function(t,e,i,n){(r.is(i,"function")||!i)&&(n=i||null);var a,s,o=this.items.length,l=o,h=this;if(!o)return this;n&&(s=function(){!--o&&n.call(h)}),i=r.is(i,X)?i:s;var u=r.animation(t,e,i,s);for(a=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(a,u,u),this.items[l]&&!this.items[l].removed||o--;return this},pr.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},pr.getBBox=function(){for(var t=[],e=[],r=[],i=[],n=this.items.length;n--;)if(!this.items[n].removed){var a=this.items[n].getBBox();t.push(a.x),e.push(a.y),r.push(a.x+a.width),i.push(a.y+a.height)}return t=O[N](0,t),e=O[N](0,e),r=D[N](0,r),i=D[N](0,i),{x:t,y:e,x2:r,y2:i,width:r-t,height:i-e}},pr.clone=function(t){t=this.paper.set();for(var e=0,r=this.items.length;r>e;e++)t.push(this.items[e].clone());return t},pr.toString=function(){return"Raphaël‘s set"},pr.glow=function(t){var e=this.paper.set();return this.forEach(function(r){var i=r.glow(t);null!=i&&i.forEach(function(t){e.push(t)})}),e},pr.isPointInside=function(t,e){var r=!1;return this.forEach(function(i){return i.isPointInside(t,e)?(console.log("runned"),r=!0,!1):void 0}),r},r.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},r=t.face["font-family"];for(var i in t.face)t.face[B](i)&&(e.face[i]=t.face[i]);if(this.fonts[r]?this.fonts[r].push(e):this.fonts[r]=[e],!t.svg){e.face["units-per-em"]=te(t.face["units-per-em"],10);for(var n in t.glyphs)if(t.glyphs[B](n)){var a=t.glyphs[n];if(e.glyphs[n]={w:a.w,k:{},d:a.d&&"M"+a.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},a.k)for(var s in a.k)a[B](s)&&(e.glyphs[n].k[s]=a.k[s])}}return t},_.getFont=function(t,e,i,n){if(n=n||"normal",i=i||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,r.fonts){var a=r.fonts[t];if(!a){var s=RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,M)+"(\\s|$)","i");for(var o in r.fonts)if(r.fonts[B](o)&&s.test(o)){a=r.fonts[o];break}}var l;if(a)for(var h=0,u=a.length;u>h&&(l=a[h],l.face["font-weight"]!=e||l.face["font-style"]!=i&&l.face["font-style"]||l.face["font-stretch"]!=n);h++);return l}},_.print=function(t,e,i,n,a,s,o,l){s=s||"middle",o=D(O(o||0,1),-1),l=D(O(l||1,3),1);var h,u=z(i)[F](M),c=0,f=0,p=M;if(r.is(n,"string")&&(n=this.getFont(n)),n){h=(a||16)/n.face["units-per-em"];for(var d=n.face.bbox[F](w),g=+d[0],v=d[3]-d[1],x=0,y=+d[1]+("baseline"==s?v+ +n.face.descent:v/2),m=0,b=u.length;b>m;m++){if("\n"==u[m])c=0,k=0,f=0,x+=v*l;else{var _=f&&n.glyphs[u[m-1]]||{},k=n.glyphs[u[m]];c+=f?(_.w||n.w)+(_.k&&_.k[u[m]]||0)+n.w*o:0,f=1}k&&k.d&&(p+=r.transformPath(k.d,["t",c*h,x*h,"s",h,h,g,y,"t",(t-g)/h,(e-y)/h]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},_.add=function(t){if(r.is(t,"array"))for(var e,i=this.set(),n=0,a=t.length;a>n;n++)e=t[n]||{},k[B](e.type)&&i.push(this[e.type]().attr(e));return i},r.format=function(t,e){var i=r.is(e,H)?[0][E](e):arguments;return t&&r.is(t,X)&&i.length-1&&(t=t.replace(C,function(t,e){return null==i[++e]?M:i[e]})),t||M},r.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(t,r,i){var n=i;return r.replace(e,function(t,e,r,i,a){e=e||i,n&&(e in n&&(n=n[e]),"function"==typeof n&&a&&(n=n()))}),n=(null==n||n==i?t:n)+""};return function(e,i){return(e+"").replace(t,function(t,e){return r(t,e,i)})}}(),r.ninja=function(){return T.was?S.win.Raphael=T.is:delete Raphael,r},r.st=pr,function(t,e,i){function n(){/in/.test(t.readyState)?setTimeout(n,9):r.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,i=function(){t.removeEventListener(e,i,!1),t.readyState="complete"},!1),t.readyState="loading"),n()}(document,"DOMContentLoaded"),e.on("raphael.DOMload",function(){b=!0}),function(){if(r.svg){var t="hasOwnProperty",e=String,i=parseFloat,n=parseInt,a=Math,s=a.max,o=a.abs,l=a.pow,h=/[, ]+/,u=r.eve,c="",f=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};r.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var v=function(i,n){if(n){"string"==typeof i&&(i=v(i));for(var a in n)n[t](a)&&("xlink:"==a.substring(0,6)?i.setAttributeNS(p,a.substring(6),e(n[a])):i.setAttribute(a,e(n[a])))}else i=r._g.doc.createElementNS("http://www.w3.org/2000/svg",i),i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},x=function(t,n){var h="linear",u=t.id+n,f=.5,p=.5,d=t.node,g=t.paper,x=d.style,y=r._g.doc.getElementById(u);if(!y){if(n=e(n).replace(r._radial_gradient,function(t,e,r){if(h="radial",e&&r){f=i(e),p=i(r);var n=2*(p>.5)-1;l(f-.5,2)+l(p-.5,2)>.25&&(p=a.sqrt(.25-l(f-.5,2))*n+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*n)}return c}),n=n.split(/\s*\-\s*/),"linear"==h){var m=n.shift();if(m=-i(m),isNaN(m))return null;var b=[0,0,a.cos(r.rad(m)),a.sin(r.rad(m))],_=1/(s(o(b[2]),o(b[3]))||1);b[2]*=_,b[3]*=_,0>b[2]&&(b[0]=-b[2],b[2]=0),0>b[3]&&(b[1]=-b[3],b[3]=0)}var w=r._parseDots(n);if(!w)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&u!=t.gradient.id&&(g.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){y=v(h+"Gradient",{id:u}),t.gradient=y,v(y,"radial"==h?{fx:f,fy:p}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:t.matrix.invert()}),g.defs.appendChild(y);for(var k=0,C=w.length;C>k;k++)y.appendChild(v("stop",{offset:w[k].offset?w[k].offset:k?"100%":"0%","stop-color":w[k].color||"#fff"}))}}return v(d,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),x.fill=c,x.opacity=1,x.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);v(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},m=function(i,n,a){if("path"==i.type){for(var s,o,l,h,u,f=e(n).toLowerCase().split("-"),p=i.paper,x=a?"end":"start",y=i.node,m=i.attrs,b=m["stroke-width"],_=f.length,w="classic",k=3,C=3,B=5;_--;)switch(f[_]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=f[_];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==w?(k+=2,C+=2,B+=2,l=1,h=a?4:1,u={fill:"none",stroke:m.stroke}):(h=l=k/2,u={fill:m.stroke,stroke:"none"}),i._.arrows?a?(i._.arrows.endPath&&g[i._.arrows.endPath]--,i._.arrows.endMarker&&g[i._.arrows.endMarker]--):(i._.arrows.startPath&&g[i._.arrows.startPath]--,i._.arrows.startMarker&&g[i._.arrows.startMarker]--):i._.arrows={},"none"!=w){var S="raphael-marker-"+w,T="raphael-marker-"+x+w+k+C;r._g.doc.getElementById(S)?g[S]++:(p.defs.appendChild(v(v("path"),{"stroke-linecap":"round",d:d[w],id:S})),g[S]=1);var A,N=r._g.doc.getElementById(T);N?(g[T]++,A=N.getElementsByTagName("use")[0]):(N=v(v("marker"),{id:T,markerHeight:C,markerWidth:k,orient:"auto",refX:h,refY:C/2}),A=v(v("use"),{"xlink:href":"#"+S,transform:(a?"rotate(180 "+k/2+" "+C/2+") ":c)+"scale("+k/B+","+C/B+")","stroke-width":(1/((k/B+C/B)/2)).toFixed(4)}),N.appendChild(A),p.defs.appendChild(N),g[T]=1),v(A,u);var E=l*("diamond"!=w&&"oval"!=w);a?(s=i._.arrows.startdx*b||0,o=r.getTotalLength(m.path)-E*b):(s=E*b,o=r.getTotalLength(m.path)-(i._.arrows.enddx*b||0)),u={},u["marker-"+x]="url(#"+T+")",(o||s)&&(u.d=r.getSubpath(m.path,s,o)),v(y,u),i._.arrows[x+"Path"]=S,i._.arrows[x+"Marker"]=T,i._.arrows[x+"dx"]=E,i._.arrows[x+"Type"]=w,i._.arrows[x+"String"]=n}else a?(s=i._.arrows.startdx*b||0,o=r.getTotalLength(m.path)-s):(s=0,o=r.getTotalLength(m.path)-(i._.arrows.enddx*b||0)),i._.arrows[x+"Path"]&&v(y,{d:r.getSubpath(m.path,s,o)}),delete i._.arrows[x+"Path"],delete i._.arrows[x+"Marker"],delete i._.arrows[x+"dx"],delete i._.arrows[x+"Type"],delete i._.arrows[x+"String"];for(u in g)if(g[t](u)&&!g[u]){var L=r._g.doc.getElementById(u);L&&L.parentNode.removeChild(L)}}},b={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},_=function(t,r,i){if(r=b[e(r).toLowerCase()]){for(var n=t.attrs["stroke-width"]||"1",a={round:n,square:n,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,s=[],o=r.length;o--;)s[o]=r[o]*n+(o%2?1:-1)*a;v(t.node,{"stroke-dasharray":s.join(",")})}},w=function(i,a){var l=i.node,u=i.attrs,f=l.style.visibility;l.style.visibility="hidden";for(var d in a)if(a[t](d)){if(!r._availableAttrs[t](d))continue;var g=a[d];switch(u[d]=g,d){case"blur":i.blur(g);break;case"href":case"title":case"target":var b=l.parentNode;if("a"!=b.tagName.toLowerCase()){var w=v("a");b.insertBefore(w,l),w.appendChild(l),b=w}"target"==d?b.setAttributeNS(p,"show","blank"==g?"new":g):b.setAttributeNS(p,d,g);break;case"cursor":l.style.cursor=g;break;case"transform":i.transform(g);break;case"arrow-start":m(i,g);break;case"arrow-end":m(i,g,1);break;case"clip-rect":var k=e(g).split(h);if(4==k.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var B=v("clipPath"),S=v("rect");B.id=r.createUUID(),v(S,{x:k[0],y:k[1],width:k[2],height:k[3]}),B.appendChild(S),i.paper.defs.appendChild(B),v(l,{"clip-path":"url(#"+B.id+")"}),i.clip=S}if(!g){var T=l.getAttribute("clip-path");if(T){var A=r._g.doc.getElementById(T.replace(/(^url\(#|\)$)/g,c));A&&A.parentNode.removeChild(A),v(l,{"clip-path":c}),delete i.clip}}break;case"path":"path"==i.type&&(v(l,{d:g?u.path=r._pathToAbsolute(g):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(d,g),i._.dirty=1,!u.fx)break;d="x",g=u.x;case"x":u.fx&&(g=-u.x-(u.width||0));case"rx":if("rx"==d&&"rect"==i.type)break;case"cx":l.setAttribute(d,g),i.pattern&&y(i),i._.dirty=1;break;case"height":if(l.setAttribute(d,g),i._.dirty=1,!u.fy)break;d="y",g=u.y;case"y":u.fy&&(g=-u.y-(u.height||0));case"ry":if("ry"==d&&"rect"==i.type)break;case"cy":l.setAttribute(d,g),i.pattern&&y(i),i._.dirty=1;break;case"r":"rect"==i.type?v(l,{rx:g,ry:g}):l.setAttribute(d,g),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(p,"href",g);break;case"stroke-width":(1!=i._.sx||1!=i._.sy)&&(g/=s(o(i._.sx),o(i._.sy))||1),i.paper._vbSize&&(g*=i.paper._vbSize),l.setAttribute(d,g),u["stroke-dasharray"]&&_(i,u["stroke-dasharray"],a),i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1));break;case"stroke-dasharray":_(i,g,a);break;case"fill":var N=e(g).match(r._ISURL);if(N){B=v("pattern");var E=v("image");B.id=r.createUUID(),v(B,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),v(E,{x:0,y:0,"xlink:href":N[1]}),B.appendChild(E),function(t){r._preload(N[1],function(){var e=this.offsetWidth,r=this.offsetHeight;v(t,{width:e,height:r}),v(E,{width:e,height:r}),i.paper.safari()})}(B),i.paper.defs.appendChild(B),v(l,{fill:"url(#"+B.id+")"}),i.pattern=B,i.pattern&&y(i);break}var L=r.getRGB(g);if(L.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=e(g).charAt())&&x(i,g)){if("opacity"in u||"fill-opacity"in u){var M=r._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(M){var P=M.getElementsByTagName("stop");v(P[P.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=g,u.fill="none";break}}else delete a.gradient,delete u.gradient,!r.is(u.opacity,"undefined")&&r.is(a.opacity,"undefined")&&v(l,{opacity:u.opacity}),!r.is(u["fill-opacity"],"undefined")&&r.is(a["fill-opacity"],"undefined")&&v(l,{"fill-opacity":u["fill-opacity"]});L[t]("opacity")&&v(l,{"fill-opacity":L.opacity>1?L.opacity/100:L.opacity});case"stroke":L=r.getRGB(g),l.setAttribute(d,L.hex),"stroke"==d&&L[t]("opacity")&&v(l,{"stroke-opacity":L.opacity>1?L.opacity/100:L.opacity}),"stroke"==d&&i._.arrows&&("startString"in i._.arrows&&m(i,i._.arrows.startString),"endString"in i._.arrows&&m(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=e(g).charAt())&&x(i,g);break;case"opacity":u.gradient&&!u[t]("stroke-opacity")&&v(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(u.gradient){M=r._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c)),M&&(P=M.getElementsByTagName("stop"),v(P[P.length-1],{"stop-opacity":g}));break}default:"font-size"==d&&(g=n(g,10)+"px");var z=d.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[z]=g,i._.dirty=1,l.setAttribute(d,g)}}C(i,a),l.style.visibility=f},k=1.2,C=function(i,a){if("text"==i.type&&(a[t]("text")||a[t]("font")||a[t]("font-size")||a[t]("x")||a[t]("y"))){var s=i.attrs,o=i.node,l=o.firstChild?n(r._g.doc.defaultView.getComputedStyle(o.firstChild,c).getPropertyValue("font-size"),10):10;if(a[t]("text")){for(s.text=a.text;o.firstChild;)o.removeChild(o.firstChild);for(var h,u=e(a.text).split("\n"),f=[],p=0,d=u.length;d>p;p++)h=v("tspan"),p&&v(h,{dy:l*k,x:s.x}),h.appendChild(r._g.doc.createTextNode(u[p])),o.appendChild(h),f[p]=h
}else for(f=o.getElementsByTagName("tspan"),p=0,d=f.length;d>p;p++)p?v(f[p],{dy:l*k,x:s.x}):v(f[0],{dy:0});v(o,{x:s.x,y:s.y}),i._.dirty=1;var g=i._getBBox(),x=s.y-(g.y+g.height/2);x&&r.is(x,"finite")&&v(f[0],{dy:x})}},B=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=r._oid++,t.raphaelid=this.id,this.matrix=r.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},S=r.el;B.prototype=S,S.constructor=B,r._engine.path=function(t,e){var r=v("path");e.canvas&&e.canvas.appendChild(r);var i=new B(r,e);return i.type="path",w(i,{fill:"none",stroke:"#000",path:t}),i},S.rotate=function(t,r,n){if(this.removed)return this;if(t=e(t).split(h),t.length-1&&(r=i(t[1]),n=i(t[2])),t=i(t[0]),null==n&&(r=n),null==r||null==n){var a=this.getBBox(1);r=a.x+a.width/2,n=a.y+a.height/2}return this.transform(this._.transform.concat([["r",t,r,n]])),this},S.scale=function(t,r,n,a){if(this.removed)return this;if(t=e(t).split(h),t.length-1&&(r=i(t[1]),n=i(t[2]),a=i(t[3])),t=i(t[0]),null==r&&(r=t),null==a&&(n=a),null==n||null==a)var s=this.getBBox(1);return n=null==n?s.x+s.width/2:n,a=null==a?s.y+s.height/2:a,this.transform(this._.transform.concat([["s",t,r,n,a]])),this},S.translate=function(t,r){return this.removed?this:(t=e(t).split(h),t.length-1&&(r=i(t[1])),t=i(t[0])||0,r=+r||0,this.transform(this._.transform.concat([["t",t,r]])),this)},S.transform=function(e){var i=this._;if(null==e)return i.transform;if(r._extractTransform(this,e),this.clip&&v(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&v(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var n=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":n})}return this},S.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},S.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},S.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;t.__set__&&t.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),r._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var e in this)this[e]="function"==typeof this[e]?r._removedFactory(e):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(r){}finally{e=e||{}}return t&&this.hide(),e},S.attr=function(e,i){if(this.removed)return this;if(null==e){var n={};for(var a in this.attrs)this.attrs[t](a)&&(n[a]=this.attrs[a]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==i&&r.is(e,"string")){if("fill"==e&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;for(var s=e.split(h),o={},l=0,c=s.length;c>l;l++)e=s[l],o[e]=e in this.attrs?this.attrs[e]:r.is(this.paper.customAttributes[e],"function")?this.paper.customAttributes[e].def:r._availableAttrs[e];return c-1?o:o[s[0]]}if(null==i&&r.is(e,"array")){for(o={},l=0,c=e.length;c>l;l++)o[e[l]]=this.attr(e[l]);return o}if(null!=i){var f={};f[e]=i}else null!=e&&r.is(e,"object")&&(f=e);for(var p in f)u("raphael.attr."+p+"."+this.id,this,f[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&f[t](p)&&r.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var g in d)d[t](g)&&(f[g]=d[g])}return w(this,f),this},S.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&r._tofront(this,t),this},S.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;return"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),r._toback(this,this.paper),this.paper,this},S.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),r._insertafter(this,t,this.paper),this},S.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),r._insertbefore(this,t,this.paper),this},S.blur=function(t){var e=this;if(0!==+t){var i=v("filter"),n=v("feGaussianBlur");e.attrs.blur=t,i.id=r.createUUID(),v(n,{stdDeviation:+t||1.5}),i.appendChild(n),e.paper.defs.appendChild(i),e._blur=i,v(e.node,{filter:"url(#"+i.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},r._engine.circle=function(t,e,r,i){var n=v("circle");t.canvas&&t.canvas.appendChild(n);var a=new B(n,t);return a.attrs={cx:e,cy:r,r:i,fill:"none",stroke:"#000"},a.type="circle",v(n,a.attrs),a},r._engine.rect=function(t,e,r,i,n,a){var s=v("rect");t.canvas&&t.canvas.appendChild(s);var o=new B(s,t);return o.attrs={x:e,y:r,width:i,height:n,r:a||0,rx:a||0,ry:a||0,fill:"none",stroke:"#000"},o.type="rect",v(s,o.attrs),o},r._engine.ellipse=function(t,e,r,i,n){var a=v("ellipse");t.canvas&&t.canvas.appendChild(a);var s=new B(a,t);return s.attrs={cx:e,cy:r,rx:i,ry:n,fill:"none",stroke:"#000"},s.type="ellipse",v(a,s.attrs),s},r._engine.image=function(t,e,r,i,n,a){var s=v("image");v(s,{x:r,y:i,width:n,height:a,preserveAspectRatio:"none"}),s.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(s);var o=new B(s,t);return o.attrs={x:r,y:i,width:n,height:a,src:e},o.type="image",o},r._engine.text=function(t,e,i,n){var a=v("text");t.canvas&&t.canvas.appendChild(a);var s=new B(a,t);return s.attrs={x:e,y:i,"text-anchor":"middle",text:n,font:r._availableAttrs.font,stroke:"none",fill:"#000"},s.type="text",w(s,s.attrs),s},r._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},r._engine.create=function(){var t=r._getContainer.apply(0,arguments),e=t&&t.container,i=t.x,n=t.y,a=t.width,s=t.height;if(!e)throw Error("SVG container not found.");var o,l=v("svg"),h="overflow:hidden;";return i=i||0,n=n||0,a=a||512,s=s||342,v(l,{height:s,version:1.1,width:a,xmlns:"http://www.w3.org/2000/svg"}),1==e?(l.style.cssText=h+"position:absolute;left:"+i+"px;top:"+n+"px",r._g.doc.body.appendChild(l),o=1):(l.style.cssText=h+"position:relative",e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l)),e=new r._Paper,e.width=a,e.height=s,e.canvas=l,e.clear(),e._left=e._top=0,o&&(e.renderfix=function(){}),e.renderfix(),e},r._engine.setViewBox=function(t,e,r,i,n){u("raphael.setViewBox",this,this._viewBox,[t,e,r,i,n]);var a,o,l=s(r/this.width,i/this.height),h=this.top,c=n?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,a="0 0 "+this.width+f+this.height):(this._vbSize=l,a=t+f+e+f+r+f+i),v(this.canvas,{viewBox:a,preserveAspectRatio:c});l&&h;)o="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":o}),h._.dirty=1,h._.dirtyT=1,h=h.prev;return this._viewBox=[t,e,r,i,!!n],this},r.prototype.renderfix=function(){var t,e=this.canvas,r=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var n=-t.e%1,a=-t.f%1;(n||a)&&(n&&(this._left=(this._left+n)%1,r.left=this._left+"px"),a&&(this._top=(this._top+a)%1,r.top=this._top+"px"))},r.prototype.clear=function(){r.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=v("desc")).appendChild(r._g.doc.createTextNode("Created with Raphaël "+r.version)),t.appendChild(this.desc),t.appendChild(this.defs=v("defs"))},r.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?r._removedFactory(t):null};var T=r.st;for(var A in S)S[t](A)&&!T[t](A)&&(T[A]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t].apply(r,e)})}}(A))}}(),function(){if(r.vml){var t="hasOwnProperty",e=String,i=parseFloat,n=Math,a=n.round,s=n.max,o=n.min,l=n.abs,h="fill",u=/[, ]+/,c=r.eve,f=" progid:DXImageTransform.Microsoft",p=" ",d="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},v=/([clmz]),?([^clmz]*)/gi,x=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,m="position:absolute;left:0;top:0;width:1px;height:1px",b=21600,_={path:1,rect:1,image:1},w={circle:1,ellipse:1},k=function(t){var i=/[ahqstv]/gi,n=r._pathToAbsolute;if(e(t).match(i)&&(n=r._path2curve),i=/[clmz]/g,n==r._pathToAbsolute&&!e(t).match(i)){var s=e(t).replace(v,function(t,e,r){var i=[],n="m"==e.toLowerCase(),s=g[e];return r.replace(y,function(t){n&&2==i.length&&(s+=i+g["m"==e?"l":"L"],i=[]),i.push(a(t*b))}),s+i});return s}var o,l,h=n(t);s=[];for(var u=0,c=h.length;c>u;u++){o=h[u],l=h[u][0].toLowerCase(),"z"==l&&(l="x");for(var f=1,x=o.length;x>f;f++)l+=a(o[f]*b)+(f!=x-1?",":d);s.push(l)}return s.join(p)},C=function(t,e,i){var n=r.matrix();return n.rotate(-t,.5,.5),{dx:n.x(e,i),dy:n.y(e,i)}},B=function(t,e,r,i,n,a){var s=t._,o=t.matrix,u=s.fillpos,c=t.node,f=c.style,d=1,g="",v=b/e,x=b/r;if(f.visibility="hidden",e&&r){if(c.coordsize=l(v)+p+l(x),f.rotation=a*(0>e*r?-1:1),a){var y=C(a,i,n);i=y.dx,n=y.dy}if(0>e&&(g+="x"),0>r&&(g+=" y")&&(d=-1),f.flip=g,c.coordorigin=i*-v+p+n*-x,u||s.fillsize){var m=c.getElementsByTagName(h);m=m&&m[0],c.removeChild(m),u&&(y=C(a,o.x(u[0],u[1]),o.y(u[0],u[1])),m.position=y.dx*d+p+y.dy*d),s.fillsize&&(m.size=s.fillsize[0]*l(e)+p+s.fillsize[1]*l(r)),c.appendChild(m)}f.visibility="visible"}};r.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var S=function(t,r,i){for(var n=e(r).toLowerCase().split("-"),a=i?"end":"start",s=n.length,o="classic",l="medium",h="medium";s--;)switch(n[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=n[s];break;case"wide":case"narrow":h=n[s];break;case"long":case"short":l=n[s]}var u=t.node.getElementsByTagName("stroke")[0];u[a+"arrow"]=o,u[a+"arrowlength"]=l,u[a+"arrowwidth"]=h},T=function(n,l){n.attrs=n.attrs||{};var c=n.node,f=n.attrs,g=c.style,v=_[n.type]&&(l.x!=f.x||l.y!=f.y||l.width!=f.width||l.height!=f.height||l.cx!=f.cx||l.cy!=f.cy||l.rx!=f.rx||l.ry!=f.ry||l.r!=f.r),x=w[n.type]&&(f.cx!=l.cx||f.cy!=l.cy||f.r!=l.r||f.rx!=l.rx||f.ry!=l.ry),y=n;for(var m in l)l[t](m)&&(f[m]=l[m]);if(v&&(f.path=r._getPath[n.type](n),n._.dirty=1),l.href&&(c.href=l.href),l.title&&(c.title=l.title),l.target&&(c.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&n.blur(l.blur),(l.path&&"path"==n.type||v)&&(c.path=k(~e(f.path).toLowerCase().indexOf("r")?r._pathToAbsolute(f.path):f.path),"image"==n.type&&(n._.fillpos=[f.x,f.y],n._.fillsize=[f.width,f.height],B(n,1,1,0,0,0))),"transform"in l&&n.transform(l.transform),x){var C=+f.cx,T=+f.cy,N=+f.rx||+f.r||0,E=+f.ry||+f.r||0;c.path=r.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",a((C-N)*b),a((T-E)*b),a((C+N)*b),a((T+E)*b),a(C*b)),n._.dirty=1}if("clip-rect"in l){var M=e(l["clip-rect"]).split(u);if(4==M.length){M[2]=+M[2]+ +M[0],M[3]=+M[3]+ +M[1];var P=c.clipRect||r._g.doc.createElement("div"),z=P.style;z.clip=r.format("rect({1}px {2}px {3}px {0}px)",M),c.clipRect||(z.position="absolute",z.top=0,z.left=0,z.width=n.paper.width+"px",z.height=n.paper.height+"px",c.parentNode.insertBefore(P,c),P.appendChild(c),c.clipRect=P)}l["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(n.textpath){var F=n.textpath.style;l.font&&(F.font=l.font),l["font-family"]&&(F.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,d)+'"'),l["font-size"]&&(F.fontSize=l["font-size"]),l["font-weight"]&&(F.fontWeight=l["font-weight"]),l["font-style"]&&(F.fontStyle=l["font-style"])}if("arrow-start"in l&&S(y,l["arrow-start"]),"arrow-end"in l&&S(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var R=c.getElementsByTagName(h),I=!1;if(R=R&&R[0],!R&&(I=R=L(h)),"image"==n.type&&l.src&&(R.src=l.src),l.fill&&(R.on=!0),(null==R.on||"none"==l.fill||null===l.fill)&&(R.on=!1),R.on&&l.fill){var j=e(l.fill).match(r._ISURL);if(j){R.parentNode==c&&c.removeChild(R),R.rotate=!0,R.src=j[1],R.type="tile";var q=n.getBBox(1);R.position=q.x+p+q.y,n._.fillpos=[q.x,q.y],r._preload(j[1],function(){n._.fillsize=[this.offsetWidth,this.offsetHeight]})}else R.color=r.getRGB(l.fill).hex,R.src=d,R.type="solid",r.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=e(l.fill).charAt())&&A(y,l.fill,R)&&(f.fill="none",f.gradient=l.fill,R.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var D=((+f["fill-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+r.getRGB(l.fill).o+1||2)-1);D=o(s(D,0),1),R.opacity=D,R.src&&(R.color="none")}c.appendChild(R);var O=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],V=!1;!O&&(V=O=L("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(O.on=!0),("none"==l.stroke||null===l.stroke||null==O.on||0==l.stroke||0==l["stroke-width"])&&(O.on=!1);var Y=r.getRGB(l.stroke);O.on&&l.stroke&&(O.color=Y.hex),D=((+f["stroke-opacity"]+1||2)-1)*((+f.opacity+1||2)-1)*((+Y.o+1||2)-1);var G=.75*(i(l["stroke-width"])||1);if(D=o(s(D,0),1),null==l["stroke-width"]&&(G=f["stroke-width"]),l["stroke-width"]&&(O.weight=G),G&&1>G&&(D*=G)&&(O.weight=1),O.opacity=D,l["stroke-linejoin"]&&(O.joinstyle=l["stroke-linejoin"]||"miter"),O.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(O.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};O.dashstyle=W[t](l["stroke-dasharray"])?W[l["stroke-dasharray"]]:d}V&&c.appendChild(O)}if("text"==y.type){y.paper.canvas.style.display=d;var X=y.paper.span,H=100,U=f.font&&f.font.match(/\d+(?:\.\d*)?(?=px)/);g=X.style,f.font&&(g.font=f.font),f["font-family"]&&(g.fontFamily=f["font-family"]),f["font-weight"]&&(g.fontWeight=f["font-weight"]),f["font-style"]&&(g.fontStyle=f["font-style"]),U=i(f["font-size"]||U&&U[0])||10,g.fontSize=U*H+"px",y.textpath.string&&(X.innerHTML=e(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var $=X.getBoundingClientRect();y.W=f.w=($.right-$.left)/H,y.H=f.h=($.bottom-$.top)/H,y.X=f.x,y.Y=f.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=r.format("m{0},{1}l{2},{1}",a(f.x*b),a(f.y*b),a(f.x*b)+1));for(var Z=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,J=Z.length;J>Q;Q++)if(Z[Q]in l){y._.dirty=1;break}switch(f["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},A=function(t,a,s){t.attrs=t.attrs||{};var o=(t.attrs,Math.pow),l="linear",h=".5 .5";if(t.attrs.gradient=a,a=e(a).replace(r._radial_gradient,function(t,e,r){return l="radial",e&&r&&(e=i(e),r=i(r),o(e-.5,2)+o(r-.5,2)>.25&&(r=n.sqrt(.25-o(e-.5,2))*(2*(r>.5)-1)+.5),h=e+p+r),d}),a=a.split(/\s*\-\s*/),"linear"==l){var u=a.shift();if(u=-i(u),isNaN(u))return null}var c=r._parseDots(a);if(!c)return null;if(t=t.shape||t.node,c.length){t.removeChild(s),s.on=!0,s.method="none",s.color=c[0].color,s.color2=c[c.length-1].color;for(var f=[],g=0,v=c.length;v>g;g++)c[g].offset&&f.push(c[g].offset+p+c[g].color);s.colors=f.length?f.join():"0% "+s.color,"radial"==l?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=h,s.angle=0):(s.type="gradient",s.angle=(270-u)%360),t.appendChild(s)}return 1},N=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=r._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=r.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},E=r.el;N.prototype=E,E.constructor=N,E.transform=function(t){if(null==t)return this._.transform;var i,n=this.paper._viewBoxShift,a=n?"s"+[n.scale,n.scale]+"-1-1t"+[n.dx,n.dy]:d;n&&(i=t=e(t).replace(/\.{3}|\u2026/g,this._.transform||d)),r._extractTransform(this,a+t);var s,o=this.matrix.clone(),l=this.skew,h=this.node,u=~e(this.attrs.fill).indexOf("-"),c=!e(this.attrs.fill).indexOf("url(");if(o.translate(-.5,-.5),c||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",s=o.split(),u&&s.noRotation||!s.isSimple){h.style.filter=o.toFilter();var f=this.getBBox(),g=this.getBBox(1),v=f.x-g.x,x=f.y-g.y;h.coordorigin=v*-b+p+x*-b,B(this,1,1,v,x,0)}else h.style.filter=d,B(this,s.scalex,s.scaley,s.dx,s.dy,s.rotate);else h.style.filter=d,l.matrix=e(o),l.offset=o.offset();return i&&(this._.transform=i),this},E.rotate=function(t,r,n){if(this.removed)return this;if(null!=t){if(t=e(t).split(u),t.length-1&&(r=i(t[1]),n=i(t[2])),t=i(t[0]),null==n&&(r=n),null==r||null==n){var a=this.getBBox(1);r=a.x+a.width/2,n=a.y+a.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,r,n]])),this}},E.translate=function(t,r){return this.removed?this:(t=e(t).split(u),t.length-1&&(r=i(t[1])),t=i(t[0])||0,r=+r||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=r),this.transform(this._.transform.concat([["t",t,r]])),this)},E.scale=function(t,r,n,a){if(this.removed)return this;if(t=e(t).split(u),t.length-1&&(r=i(t[1]),n=i(t[2]),a=i(t[3]),isNaN(n)&&(n=null),isNaN(a)&&(a=null)),t=i(t[0]),null==r&&(r=t),null==a&&(n=a),null==n||null==a)var s=this.getBBox(1);return n=null==n?s.x+s.width/2:n,a=null==a?s.y+s.height/2:a,this.transform(this._.transform.concat([["s",t,r,n,a]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=d),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),r.eve.unbind("raphael.*.*."+this.id),r._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]="function"==typeof this[t]?r._removedFactory(t):null;this.removed=!0}},E.attr=function(e,i){if(this.removed)return this;if(null==e){var n={};for(var a in this.attrs)this.attrs[t](a)&&(n[a]=this.attrs[a]);return n.gradient&&"none"==n.fill&&(n.fill=n.gradient)&&delete n.gradient,n.transform=this._.transform,n}if(null==i&&r.is(e,"string")){if(e==h&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=e.split(u),o={},l=0,f=s.length;f>l;l++)e=s[l],o[e]=e in this.attrs?this.attrs[e]:r.is(this.paper.customAttributes[e],"function")?this.paper.customAttributes[e].def:r._availableAttrs[e];return f-1?o:o[s[0]]}if(this.attrs&&null==i&&r.is(e,"array")){for(o={},l=0,f=e.length;f>l;l++)o[e[l]]=this.attr(e[l]);return o}var p;null!=i&&(p={},p[e]=i),null==i&&r.is(e,"object")&&(p=e);for(var d in p)c("raphael.attr."+d+"."+this.id,this,p[d]);if(p){for(d in this.paper.customAttributes)if(this.paper.customAttributes[t](d)&&p[t](d)&&r.is(this.paper.customAttributes[d],"function")){var g=this.paper.customAttributes[d].apply(this,[].concat(p[d]));this.attrs[d]=p[d];for(var v in g)g[t](v)&&(p[v]=g[v])}p.text&&"text"==this.type&&(this.textpath.string=p.text),T(this,p)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&r._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),r._toback(this,this.paper)),this)},E.insertAfter=function(t){return this.removed?this:(t.constructor==r.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),r._insertafter(this,t,this.paper),this)},E.insertBefore=function(t){return this.removed?this:(t.constructor==r.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),r._insertbefore(this,t,this.paper),this)},E.blur=function(t){var e=this.node.runtimeStyle,i=e.filter;return i=i.replace(x,d),0!==+t?(this.attrs.blur=t,e.filter=i+p+f+".Blur(pixelradius="+(+t||1.5)+")",e.margin=r.format("-{0}px 0 0 -{0}px",a(+t||1.5))):(e.filter=i,e.margin=0,delete this.attrs.blur),this},r._engine.path=function(t,e){var r=L("shape");r.style.cssText=m,r.coordsize=b+p+b,r.coordorigin=e.coordorigin;var i=new N(r,e),n={fill:"none",stroke:"#000"};t&&(n.path=t),i.type="path",i.path=[],i.Path=d,T(i,n),e.canvas.appendChild(r);var a=L("skew");return a.on=!0,r.appendChild(a),i.skew=a,i.transform(d),i},r._engine.rect=function(t,e,i,n,a,s){var o=r._rectPath(e,i,n,a,s),l=t.path(o),h=l.attrs;return l.X=h.x=e,l.Y=h.y=i,l.W=h.width=n,l.H=h.height=a,h.r=s,h.path=o,l.type="rect",l},r._engine.ellipse=function(t,e,r,i,n){var a=t.path();return a.attrs,a.X=e-i,a.Y=r-n,a.W=2*i,a.H=2*n,a.type="ellipse",T(a,{cx:e,cy:r,rx:i,ry:n}),a},r._engine.circle=function(t,e,r,i){var n=t.path();return n.attrs,n.X=e-i,n.Y=r-i,n.W=n.H=2*i,n.type="circle",T(n,{cx:e,cy:r,r:i}),n},r._engine.image=function(t,e,i,n,a,s){var o=r._rectPath(i,n,a,s),l=t.path(o).attr({stroke:"none"}),u=l.attrs,c=l.node,f=c.getElementsByTagName(h)[0];return u.src=e,l.X=u.x=i,l.Y=u.y=n,l.W=u.width=a,l.H=u.height=s,u.path=o,l.type="image",f.parentNode==c&&c.removeChild(f),f.rotate=!0,f.src=e,f.type="tile",l._.fillpos=[i,n],l._.fillsize=[a,s],c.appendChild(f),B(l,1,1,0,0,0),l},r._engine.text=function(t,i,n,s){var o=L("shape"),l=L("path"),h=L("textpath");i=i||0,n=n||0,s=s||"",l.v=r.format("m{0},{1}l{2},{1}",a(i*b),a(n*b),a(i*b)+1),l.textpathok=!0,h.string=e(s),h.on=!0,o.style.cssText=m,o.coordsize=b+p+b,o.coordorigin="0 0";var u=new N(o,t),c={fill:"#000",stroke:"none",font:r._availableAttrs.font,text:s};u.shape=o,u.path=l,u.textpath=h,u.type="text",u.attrs.text=e(s),u.attrs.x=i,u.attrs.y=n,u.attrs.w=1,u.attrs.h=1,T(u,c),o.appendChild(h),o.appendChild(l),t.canvas.appendChild(o);var f=L("skew");return f.on=!0,o.appendChild(f),u.skew=f,u.transform(d),u},r._engine.setSize=function(t,e){var i=this.canvas.style;return this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),i.width=t,i.height=e,i.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&r._engine.setViewBox.apply(this,this._viewBox),this},r._engine.setViewBox=function(t,e,i,n,a){r.eve("raphael.setViewBox",this,this._viewBox,[t,e,i,n,a]);var o,l,h=this.width,u=this.height,c=1/s(i/h,n/u);return a&&(o=u/n,l=h/i,h>i*o&&(t-=(h-i*o)/2/o),u>n*l&&(e-=(u-n*l)/2/l)),this._viewBox=[t,e,i,n,!!a],this._viewBoxShift={dx:-t,dy:-e,scale:c},this.forEach(function(t){t.transform("...")}),this};var L;r._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),L=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(r){L=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},r._engine.initWin(r._g.win),r._engine.create=function(){var t=r._getContainer.apply(0,arguments),e=t.container,i=t.height,n=t.width,a=t.x,s=t.y;if(!e)throw Error("VML container not found.");var o=new r._Paper,l=o.canvas=r._g.doc.createElement("div"),h=l.style;return a=a||0,s=s||0,n=n||512,i=i||342,o.width=n,o.height=i,n==+n&&(n+="px"),i==+i&&(i+="px"),o.coordsize=1e3*b+p+1e3*b,o.coordorigin="0 0",o.span=r._g.doc.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(o.span),h.cssText=r.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",n,i),1==e?(r._g.doc.body.appendChild(l),h.left=a+"px",h.top=s+"px",h.position="absolute"):e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l),o.renderfix=function(){},o},r.prototype.clear=function(){r.eve("raphael.clear",this),this.canvas.innerHTML=d,this.span=r._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},r.prototype.remove=function(){r.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?r._removedFactory(t):null;return!0};var M=r.st;for(var P in E)E[t](P)&&!M[t](P)&&(M[P]=function(t){return function(){var e=arguments;return this.forEach(function(r){r[t].apply(r,e)})}}(P))}}(),T.was?S.win.Raphael=r:Raphael=r,r});
/* ---------------------------------------- /includes/jsbin/select2.js ---------------------------------------- */
/*
 Copyright 2012 Igor Vaynberg

 Version: 3.1 Timestamp: Tue Aug 14 09:05:17 PDT 2012

 Licensed under the Apache License, Version 2.0 (the "License"); you may not use this work except in
 compliance with the License. You may obtain a copy of the License in the LICENSE file, or at:

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software distributed under the License is
 distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and limitations under the License.
 */
 (function ($) {
 	if(typeof $.fn.each2 == "undefined"){
 		$.fn.extend({
 			/*
			* 4-10 times faster .each replacement
			* use it carefully, as it overrides jQuery context of element on each iteration
			*/
			each2 : function (c) {
				var j = $([0]), i = -1, l = this.length;
				while (
					++i < l
					&& (j.context = j[0] = this[i])
					&& c.call(j[0], i, j) !== false //"this"=DOM, i=index, j=jQuery object
				);
				return this;
			}
 		});
 	}
})(jQuery);

(function ($, undefined) {
    "use strict";
    /*global document, window, jQuery, console */

    if (window.Select2 !== undefined) {
        return;
    }

    var KEY, AbstractSelect2, SingleSelect2, MultiSelect2, nextUid, sizer;

    KEY = {
        TAB: 9,
        ENTER: 13,
        ESC: 27,
        SPACE: 32,
        LEFT: 37,
        UP: 38,
        RIGHT: 39,
        DOWN: 40,
        SHIFT: 16,
        CTRL: 17,
        ALT: 18,
        PAGE_UP: 33,
        PAGE_DOWN: 34,
        HOME: 36,
        END: 35,
        BACKSPACE: 8,
        DELETE: 46,
        isArrow: function (k) {
            k = k.which ? k.which : k;
            switch (k) {
            case KEY.LEFT:
            case KEY.RIGHT:
            case KEY.UP:
            case KEY.DOWN:
                return true;
            }
            return false;
        },
        isControl: function (e) {
            var k = e.which;
            switch (k) {
            case KEY.SHIFT:
            case KEY.CTRL:
            case KEY.ALT:
                return true;
            }

            if (e.metaKey) return true;

            return false;
        },
        isFunctionKey: function (k) {
            k = k.which ? k.which : k;
            return k >= 112 && k <= 123;
        }
    };

    nextUid=(function() { var counter=1; return function() { return counter++; }; }());

    function escapeMarkup(markup) {
        if (markup && typeof(markup) === "string") {
            return markup.replace(/&/g, "&amp;");
        } else {
            return markup;
        }
    }

    function indexOf(value, array) {
        var i = 0, l = array.length, v;

        if (typeof value === "undefined") {
          return -1;
        }

        if (value.constructor === String) {
            for (; i < l; i = i + 1) if (value.localeCompare(array[i]) === 0) return i;
        } else {
            for (; i < l; i = i + 1) {
                v = array[i];
                if (v.constructor === String) {
                    if (v.localeCompare(value) === 0) return i;
                } else {
                    if (v === value) return i;
                }
            }
        }
        return -1;
    }

    /**
     * Compares equality of a and b taking into account that a and b may be strings, in which case localeCompare is used
     * @param a
     * @param b
     */
    function equal(a, b) {
        if (a === b) return true;
        if (a === undefined || b === undefined) return false;
        if (a === null || b === null) return false;
        if (a.constructor === String) return a.localeCompare(b) === 0;
        if (b.constructor === String) return b.localeCompare(a) === 0;
        return false;
    }

    /**
     * Splits the string into an array of values, trimming each value. An empty array is returned for nulls or empty
     * strings
     * @param string
     * @param separator
     */
    function splitVal(string, separator) {
        var val, i, l;
        if (string === null || string.length < 1) return [];
        val = string.split(separator);
        for (i = 0, l = val.length; i < l; i = i + 1) val[i] = $.trim(val[i]);
        return val;
    }

    function getSideBorderPadding(element) {
        return element.outerWidth() - element.width();
    }

    function installKeyUpChangeEvent(element) {
        var key="keyup-change-value";
        element.bind("keydown", function () {
            if ($.data(element, key) === undefined) {
                $.data(element, key, element.val());
            }
        });
        element.bind("keyup", function () {
            var val= $.data(element, key);
            if (val !== undefined && element.val() !== val) {
                $.removeData(element, key);
                element.trigger("keyup-change");
            }
        });
    }

    $(document).delegate("*", "mousemove", function (e) {
        $.data(document, "select2-lastpos", {x: e.pageX, y: e.pageY});
    });

    /**
     * filters mouse events so an event is fired only if the mouse moved.
     *
     * filters out mouse events that occur when mouse is stationary but
     * the elements under the pointer are scrolled.
     */
    function installFilteredMouseMove(element) {
	    element.bind("mousemove", function (e) {
            var lastpos = $.data(document, "select2-lastpos");
            if (lastpos === undefined || lastpos.x !== e.pageX || lastpos.y !== e.pageY) {
                $(e.target).trigger("mousemove-filtered", e);
            }
        });
    }

    /**
     * Debounces a function. Returns a function that calls the original fn function only if no invocations have been made
     * within the last quietMillis milliseconds.
     *
     * @param quietMillis number of milliseconds to wait before invoking fn
     * @param fn function to be debounced
     * @return debounced version of fn
     */
    function debounce(quietMillis, fn) {
        var timeout;
        return function () {
            window.clearTimeout(timeout);
            timeout = window.setTimeout(fn, quietMillis);
        };
    }

    /**
     * A simple implementation of a thunk
     * @param formula function used to lazily initialize the thunk
     * @return {Function}
     */
    function thunk(formula) {
        var evaluated = false,
            value;
        return function() {
            if (evaluated === false) { value = formula(); evaluated = true; }
            return value;
        };
    };

    function installDebouncedScroll(threshold, element) {
        var notify = debounce(threshold, function (e) { element.trigger("scroll-debounced", e);});
        element.bind("scroll", function (e) {
            if (indexOf(e.target, element.get()) >= 0) notify(e);
        });
    }

    function killEvent(event) {
        event.preventDefault();
        event.stopPropagation();
    }

    function measureTextWidth(e) {
        if (!sizer){
        	var style = e[0].currentStyle || window.getComputedStyle(e[0], null);
        	sizer = $("<div></div>").css({
	            position: "absolute",
	            left: "-10000px",
	            top: "-10000px",
	            display: "none",
	            fontSize: style.fontSize,
	            fontFamily: style.fontFamily,
	            fontStyle: style.fontStyle,
	            fontWeight: style.fontWeight,
	            letterSpacing: style.letterSpacing,
	            textTransform: style.textTransform,
	            whiteSpace: "nowrap"
	        });
        	$("body").append(sizer);
        }
        sizer.text(e.val());
        return sizer.width();
    }

    function markMatch(text, term, markup) {
        var match=text.toUpperCase().indexOf(term.toUpperCase()),
            tl=term.length;

        if (match<0) {
            markup.push(text);
            return;
        }

        markup.push(text.substring(0, match));
        markup.push("<span class='select2-match'>");
        markup.push(text.substring(match, match + tl));
        markup.push("</span>");
        markup.push(text.substring(match + tl, text.length));
    }

    /**
     * Produces an ajax-based query function
     *
     * @param options object containing configuration paramters
     * @param options.transport function that will be used to execute the ajax request. must be compatible with parameters supported by $.ajax
     * @param options.url url for the data
     * @param options.data a function(searchTerm, pageNumber, context) that should return an object containing query string parameters for the above url.
     * @param options.dataType request data type: ajax, jsonp, other datatatypes supported by jQuery's $.ajax function or the transport function if specified
     * @param options.traditional a boolean flag that should be true if you wish to use the traditional style of param serialization for the ajax request
     * @param options.quietMillis (optional) milliseconds to wait before making the ajaxRequest, helps debounce the ajax function if invoked too often
     * @param options.results a function(remoteData, pageNumber) that converts data returned form the remote request to the format expected by Select2.
     *      The expected format is an object containing the following keys:
     *      results array of objects that will be used as choices
     *      more (optional) boolean indicating whether there are more results available
     *      Example: {results:[{id:1, text:'Red'},{id:2, text:'Blue'}], more:true}
     */
    function ajax(options) {
        var timeout, // current scheduled but not yet executed request
            requestSequence = 0, // sequence used to drop out-of-order responses
            handler = null,
            quietMillis = options.quietMillis || 100;

        return function (query) {
            window.clearTimeout(timeout);
            timeout = window.setTimeout(function () {
                requestSequence += 1; // increment the sequence
                var requestNumber = requestSequence, // this request's sequence number
                    data = options.data, // ajax data function
                    transport = options.transport || $.ajax,
                    traditional = options.traditional || false,
                    type = options.type || 'GET'; // set type of request (GET or POST)

                data = data.call(this, query.term, query.page, query.context);

                if( null !== handler) { handler.abort(); }

                handler = transport.call(null, {
                    url: options.url,
                    dataType: options.dataType,
                    data: data,
                    type: type,
                    traditional: traditional,
                    success: function (data) {
                        if (requestNumber < requestSequence) {
                            return;
                        }
                        // TODO 3.0 - replace query.page with query so users have access to term, page, etc.
                        var results = options.results(data, query.page);
                        query.callback(results);
                    }
                });
            }, quietMillis);
        };
    }

    /**
     * Produces a query function that works with a local array
     *
     * @param options object containing configuration parameters. The options parameter can either be an array or an
     * object.
     *
     * If the array form is used it is assumed that it contains objects with 'id' and 'text' keys.
     *
     * If the object form is used ti is assumed that it contains 'data' and 'text' keys. The 'data' key should contain
     * an array of objects that will be used as choices. These objects must contain at least an 'id' key. The 'text'
     * key can either be a String in which case it is expected that each element in the 'data' array has a key with the
     * value of 'text' which will be used to match choices. Alternatively, text can be a function(item) that can extract
     * the text.
     */
    function local(options) {
        var data = options, // data elements
            dataText,
            text = function (item) { return ""+item.text; }; // function used to retrieve the text portion of a data item that is matched against the search

        if (!$.isArray(data)) {
            text = data.text;
            // if text is not a function we assume it to be a key name
            if (!$.isFunction(text)) {
              dataText = data.text; // we need to store this in a separate variable because in the next step data gets reset and data.text is no longer available
              text = function (item) { return item[dataText]; };
            }
            data = data.results;
        }

        return function (query) {
            var t = query.term, filtered = {};
            if (t === "") {
                query.callback({results: data});
                return;
            }
            filtered.results = $(data)
                .filter(function () {return query.matcher(t, text(this));})
                .get();
            query.callback(filtered);
        };
    }

    // TODO javadoc
    function tags(data) {
        // TODO even for a function we should probably return a wrapper that does the same object/string check as
        // the function for arrays. otherwise only functions that return objects are supported.
        if ($.isFunction(data)) {
            return data;
        }

        // if not a function we assume it to be an array

        return function (query) {
            var t = query.term, filtered = {results: []};
            $(data).each(function () {
                var isObject = this.text !== undefined,
                    text = isObject ? this.text : this;
                if (t === "" || query.matcher(t, text)) {
                    filtered.results.push(isObject ? this : {id: this, text: this});
                }
            });
            query.callback(filtered);
        };
    }

    /**
     * Checks if the formatter function should be used.
     *
     * Throws an error if it is not a function. Returns true if it should be used,
     * false if no formatting should be performed.
     *
     * @param formatter
     */
    function checkFormatter(formatter, formatterName) {
        if ($.isFunction(formatter)) return true;
        if (!formatter) return false;
        throw new Error("formatterName must be a function or a falsy value");
    }

    function evaluate(val) {
        return $.isFunction(val) ? val() : val;
    }

    function countResults(results) {
        var count = 0;
        $.each(results, function(i, item) {
            if (item.children) {
                count += countResults(item.children);
            } else {
                count++;
            }
        });
        return count;
    }

    /**
     * Default tokenizer. This function uses breaks the input on substring match of any string from the
     * opts.tokenSeparators array and uses opts.createSearchChoice to create the choice object. Both of those
     * two options have to be defined in order for the tokenizer to work.
     *
     * @param input text user has typed so far or pasted into the search field
     * @param selection currently selected choices
     * @param selectCallback function(choice) callback tho add the choice to selection
     * @param opts select2's opts
     * @return undefined/null to leave the current input unchanged, or a string to change the input to the returned value
     */
    function defaultTokenizer(input, selection, selectCallback, opts) {
        var original = input, // store the original so we can compare and know if we need to tell the search to update its text
            dupe = false, // check for whether a token we extracted represents a duplicate selected choice
            token, // token
            index, // position at which the separator was found
            i, l, // looping variables
            separator; // the matched separator

        if (!opts.createSearchChoice || !opts.tokenSeparators || opts.tokenSeparators.length < 1) return undefined;

        while (true) {
            index = -1;

            for (i = 0, l = opts.tokenSeparators.length; i < l; i++) {
                separator = opts.tokenSeparators[i];
                index = input.indexOf(separator);
                if (index >= 0) break;
            }

            if (index < 0) break; // did not find any token separator in the input string, bail

            token = input.substring(0, index);
            input = input.substring(index + separator.length);

            if (token.length > 0) {
                token = opts.createSearchChoice(token, selection);
                if (token !== undefined && token !== null && opts.id(token) !== undefined && opts.id(token) !== null) {
                    dupe = false;
                    for (i = 0, l = selection.length; i < l; i++) {
                        if (equal(opts.id(token), opts.id(selection[i]))) {
                            dupe = true; break;
                        }
                    }

                    if (!dupe) selectCallback(token);
                }
            }
        }

        if (original.localeCompare(input) != 0) return input;
    }

    /**
     * blurs any Select2 container that has focus when an element outside them was clicked or received focus
     *
     * also takes care of clicks on label tags that point to the source element
     */
    $(document).ready(function () {
        $(document).delegate("*", "mousedown touchend", function (e) {
            var target = $(e.target).closest("div.select2-container").get(0), attr;
            if (target) {
                $(document).find("div.select2-container-active").each(function () {
                    if (this !== target) $(this).data("select2").blur();
                });
            } else {
                target = $(e.target).closest("div.select2-drop").get(0);
                $(document).find("div.select2-drop-active").each(function () {
                    if (this !== target) $(this).data("select2").blur();
                });
            }

            target=$(e.target);
            attr = target.attr("for");
            if ("LABEL" === e.target.tagName && attr && attr.length > 0) {
                target = $("#"+attr);
                target = target.data("select2");
                if (target !== undefined) { target.focus(); e.preventDefault();}
            }
        });
    });

    /**
     * Creates a new class
     *
     * @param superClass
     * @param methods
     */
    function clazz(SuperClass, methods) {
        var constructor = function () {};
        constructor.prototype = new SuperClass;
        constructor.prototype.constructor = constructor;
        constructor.prototype.parent = SuperClass.prototype;
        constructor.prototype = $.extend(constructor.prototype, methods);
        return constructor;
    }

    AbstractSelect2 = clazz(Object, {

        // abstract
        bind: function (func) {
            var self = this;
            return function () {
                func.apply(self, arguments);
            };
        },

        // abstract
        init: function (opts) {
            var results, search, resultsSelector = ".select2-results";

            // prepare options
            this.opts = opts = this.prepareOpts(opts);

            this.id=opts.id;

            // destroy if called on an existing component
            if (opts.element.data("select2") !== undefined &&
                opts.element.data("select2") !== null) {
                this.destroy();
            }

            this.enabled=true;
            this.container = this.createContainer();

            this.containerId="s2id"+nextUid();
            this.container.attr("id", this.containerId);

            // cache the body so future lookups are cheap
            this.body = thunk(function() { return opts.element.closest("body"); });

            if (opts.element.attr("class") !== undefined) {
                this.container.addClass(opts.element.attr("class"));
            }

            this.container.css(evaluate(opts.containerCss));
            this.container.addClass(evaluate(opts.containerCssClass));

            // swap container for the element
            this.opts.element
                .data("select2", this)
                .hide()
                .before(this.container);
            this.container.data("select2", this);

            this.dropdown = this.container.find(".select2-drop");
            this.dropdown.addClass(evaluate(opts.dropdownCssClass));
            this.dropdown.data("select2", this);

            this.results = results = this.container.find(resultsSelector);
            this.search = search = this.container.find("input.select2-input");

            search.attr("tabIndex", this.opts.element.attr("tabIndex"));

            this.resultsPage = 0;
            this.context = null;

            // initialize the container
            this.initContainer();
            this.initContainerWidth();

            installFilteredMouseMove(this.results);
            this.dropdown.delegate(resultsSelector, "mousemove-filtered", this.bind(this.highlightUnderEvent));

            installDebouncedScroll(80, this.results);
            this.dropdown.delegate(resultsSelector, "scroll-debounced", this.bind(this.loadMoreIfNeeded));

            // if jquery.mousewheel plugin is installed we can prevent out-of-bounds scrolling of results via mousewheel
            if ($.fn.mousewheel) {
                results.mousewheel(function (e, delta, deltaX, deltaY) {
                    var top = results.scrollTop(), height;
                    if (deltaY > 0 && top - deltaY <= 0) {
                        results.scrollTop(0);
                        killEvent(e);
                    } else if (deltaY < 0 && results.get(0).scrollHeight - results.scrollTop() + deltaY <= results.height()) {
                        results.scrollTop(results.get(0).scrollHeight - results.height());
                        killEvent(e);
                    }
                });
            }

            installKeyUpChangeEvent(search);
            search.bind("keyup-change", this.bind(this.updateResults));
            search.bind("focus", function () { search.addClass("select2-focused"); if (search.val() === " ") search.val(""); });
            search.bind("blur", function () { search.removeClass("select2-focused");});

            this.dropdown.delegate(resultsSelector, "mouseup", this.bind(function (e) {
                if ($(e.target).closest(".select2-result-selectable:not(.select2-disabled)").length > 0) {
                    this.highlightUnderEvent(e);
                    this.selectHighlighted(e);
                } else {
                    this.focusSearch();
                }
                killEvent(e);
            }));

            // trap all mouse events from leaving the dropdown. sometimes there may be a modal that is listening
            // for mouse events outside of itself so it can close itself. since the dropdown is now outside the select2's
            // dom it will trigger the popup close, which is not what we want
            this.dropdown.bind("click mouseup mousedown", function (e) { e.stopPropagation(); });

            if ($.isFunction(this.opts.initSelection)) {
                // initialize selection based on the current value of the source element
                this.initSelection();

                // if the user has provided a function that can set selection based on the value of the source element
                // we monitor the change event on the element and trigger it, allowing for two way synchronization
                this.monitorSource();
            }

            if (opts.element.is(":disabled") || opts.element.is("[readonly='readonly']")) this.disable();
        },

        // abstract
        destroy: function () {
            var select2 = this.opts.element.data("select2");
            if (select2 !== undefined) {
                select2.container.remove();
                select2.dropdown.remove();
                select2.opts.element
                    .removeData("select2")
                    .unbind(".select2")
                    .show();
            }
        },

        // abstract
        prepareOpts: function (opts) {
            var element, select, idKey, ajaxUrl;

            element = opts.element;

            if (element.get(0).tagName.toLowerCase() === "select") {
                this.select = select = opts.element;
            }

            if (select) {
                // these options are not allowed when attached to a select because they are picked up off the element itself
                $.each(["id", "multiple", "ajax", "query", "createSearchChoice", "initSelection", "data", "tags"], function () {
                    if (this in opts) {
                        throw new Error("Option '" + this + "' is not allowed for Select2 when attached to a <select> element.");
                    }
                });
            }

            opts = $.extend({}, {
                populateResults: function(container, results, query) {
                    var populate,  data, result, children, id=this.opts.id, self=this;

                    populate=function(results, container, depth) {

                        var i, l, result, selectable, compound, node, label, innerContainer, formatted;
                        for (i = 0, l = results.length; i < l; i = i + 1) {

                            result=results[i];
                            selectable=id(result) !== undefined;
                            compound=("children" in result) && result.children.length > 0;

                            node=$("<li></li>");
                            node.addClass("select2-results-dept-"+depth);
                            node.addClass("select2-result");
                            node.addClass(selectable ? "select2-result-selectable" : "select2-result-unselectable");
                            if (compound) { node.addClass("select2-result-with-children"); }
                            node.addClass(self.opts.formatResultCssClass(result));

                            label=$("<div></div>");
                            label.addClass("select2-result-label");

                            formatted=opts.formatResult(result, label, query);
                            if (formatted!==undefined) {
                                label.html(escapeMarkup(formatted));
                            }

                            node.append(label);

                            if (compound) {

                                innerContainer=$("<ul></ul>");
                                innerContainer.addClass("select2-result-sub");
                                populate(result.children, innerContainer, depth+1);
                                node.append(innerContainer);
                            }

                            node.data("select2-data", result);
                            container.append(node);
                        }
                    };

                    populate(results, container, 0);
                }
            }, $.fn.select2.defaults, opts);

            if (typeof(opts.id) !== "function") {
                idKey = opts.id;
                opts.id = function (e) { return e[idKey]; };
            }

            if (select) {
                opts.query = this.bind(function (query) {
                    var data = { results: [], more: false },
                        term = query.term,
                        children, firstChild, process;

                    process=function(element, collection) {
                        var group;
                        if (element.is("option")) {
                            if (query.matcher(term, element.text(), element)) {
                                collection.push({id:element.attr("value"), text:element.text(), element: element.get(), css: element.attr("class")});
                            }
                        } else if (element.is("optgroup")) {
                            group={text:element.attr("label"), children:[], element: element.get(), css: element.attr("class")};
                            element.children().each2(function(i, elm) { process(elm, group.children); });
                            if (group.children.length>0) {
                                collection.push(group);
                            }
                        }
                    };

                    children=element.children();

                    // ignore the placeholder option if there is one
                    if (this.getPlaceholder() !== undefined && children.length > 0) {
                        firstChild = children[0];
                        if ($(firstChild).text() === "") {
                            children=children.not(firstChild);
                        }
                    }

                    children.each2(function(i, elm) { process(elm, data.results); });

                    query.callback(data);
                });
                // this is needed because inside val() we construct choices from options and there id is hardcoded
                opts.id=function(e) { return e.id; };
                opts.formatResultCssClass = function(data) { return data.css; }
            } else {
                if (!("query" in opts)) {
                    if ("ajax" in opts) {
                        ajaxUrl = opts.element.data("ajax-url");
                        if (ajaxUrl && ajaxUrl.length > 0) {
                            opts.ajax.url = ajaxUrl;
                        }
                        opts.query = ajax(opts.ajax);
                    } else if ("data" in opts) {
                        opts.query = local(opts.data);
                    } else if ("tags" in opts) {
                        opts.query = tags(opts.tags);
                        opts.createSearchChoice = function (term) { return {id: term, text: term}; };
                        opts.initSelection = function (element, callback) {
                            var data = [];
                            $(splitVal(element.val(), opts.separator)).each(function () {
                                var id = this, text = this, tags=opts.tags;
                                if ($.isFunction(tags)) tags=tags();
                                $(tags).each(function() { if (equal(this.id, id)) { text = this.text; return false; } });
                                data.push({id: id, text: text});
                            });

                            callback(data);
                        };
                    }
                }
            }
            if (typeof(opts.query) !== "function") {
                throw "query function not defined for Select2 " + opts.element.attr("id");
            }

            return opts;
        },

        /**
         * Monitor the original element for changes and update select2 accordingly
         */
        // abstract
        monitorSource: function () {
            this.opts.element.bind("change.select2", this.bind(function (e) {
                if (this.opts.element.data("select2-change-triggered") !== true) {
                    this.initSelection();
                }
            }));
        },

        /**
         * Triggers the change event on the source element
         */
        // abstract
        triggerChange: function (details) {

            details = details || {};
            details= $.extend({}, details, { type: "change", val: this.val() });
            // prevents recursive triggering
            this.opts.element.data("select2-change-triggered", true);
            this.opts.element.trigger(details);
            this.opts.element.data("select2-change-triggered", false);

            // some validation frameworks ignore the change event and listen instead to keyup, click for selects
            // so here we trigger the click event manually
            this.opts.element.click();
        },


        // abstract
        enable: function() {
            if (this.enabled) return;

            this.enabled=true;
            this.container.removeClass("select2-container-disabled");
        },

        // abstract
        disable: function() {
            if (!this.enabled) return;

            this.close();

            this.enabled=false;
            this.container.addClass("select2-container-disabled");
        },

        // abstract
        opened: function () {
            return this.container.hasClass("select2-dropdown-open");
        },

        // abstract
        positionDropdown: function() {
            var offset = this.container.offset(),
                height = this.container.outerHeight(),
                width = this.container.outerWidth(),
                dropHeight = this.dropdown.outerHeight(),
                viewportBottom = $(window).scrollTop() + document.documentElement.clientHeight,
                dropTop = offset.top + height,
                enoughRoomBelow = dropTop + dropHeight <= viewportBottom,
                enoughRoomAbove = (offset.top - dropHeight) >= this.body().scrollTop(),
                aboveNow = this.dropdown.hasClass("select2-drop-above"),
                above,
                css;

            // console.log("below/ droptop:", dropTop, "dropHeight", dropHeight, "sum", (dropTop+dropHeight)+" viewport bottom", viewportBottom, "enough?", enoughRoomBelow);
            // console.log("above/ offset.top", offset.top, "dropHeight", dropHeight, "top", (offset.top-dropHeight), "scrollTop", this.body().scrollTop(), "enough?", enoughRoomAbove);

            // always prefer the current above/below alignment, unless there is not enough room

            if (aboveNow) {
                above = true;
                if (!enoughRoomAbove && enoughRoomBelow) above = false;
            } else {
                above = false;
                if (!enoughRoomBelow && enoughRoomAbove) above = true;
            }

            if (above) {
                dropTop = offset.top - dropHeight;
                this.container.addClass("select2-drop-above");
                this.dropdown.addClass("select2-drop-above");
            }
            else {
                this.container.removeClass("select2-drop-above");
                this.dropdown.removeClass("select2-drop-above");
            }

            css = {
                top:dropTop,
                left:offset.left,
                width:width
            };

            this.dropdown.css(css);
        },

        // abstract
        shouldOpen: function() {
            var event;

            if (this.opened()) return false;

            event = jQuery.Event("open");
            this.opts.element.trigger(event);
            return !event.isDefaultPrevented();
        },

        // abstract
        clearDropdownAlignmentPreference: function() {
            // clear the classes used to figure out the preference of where the dropdown should be opened
            this.container.removeClass("select2-drop-above");
            this.dropdown.removeClass("select2-drop-above");
        },

        /**
         * Opens the dropdown
         *
         * @return {Boolean} whether or not dropdown was opened. This method will return false if, for example,
         * the dropdown is already open, or if the 'open' event listener on the element called preventDefault().
         */
        // abstract
        open: function () {

            if (!this.shouldOpen()) return false;

            window.setTimeout(this.bind(this.opening), 1);

            return true;
        },

        /**
         * Performs the opening of the dropdown
         */
        // abstract
        opening: function() {
            var cid = this.containerId, selector = "#"+ cid,
                scroll = "scroll." + cid, resize = "resize." + cid;

            this.container.parents().each(function() {
                $(this).bind(scroll, function() {
                    var s2 = $(selector);
                    if (s2.length == 0) {
                        $(this).unbind(scroll);
                    }
                    s2.select2("close");
                });
            });

            $(window).bind(resize, function() {
                var s2 = $(selector);
                if (s2.length == 0) {
                    $(window).unbind(resize);
                }
                s2.select2("close");
            });

            this.clearDropdownAlignmentPreference();

            if (this.search.val() === " ") { this.search.val(""); }

            this.dropdown.css(evaluate(this.opts.dropdownCss));
            this.dropdown.addClass("select2-drop-active");
            this.container.addClass("select2-dropdown-open").addClass("select2-container-active");

            this.updateResults(true);

            if(this.dropdown[0] !== this.body().children().last()[0]) {
                this.dropdown.detach().appendTo(this.body());
            }

            this.dropdown.show();
            this.ensureHighlightVisible();

            this.positionDropdown();

            this.focusSearch();
        },

        // abstract
        close: function () {
            if (!this.opened()) return;

            var self = this;

            this.container.parents().each(function() {
                $(this).unbind("scroll." + self.containerId);
            });
            $(window).unbind("resize." + this.containerId);

            this.clearDropdownAlignmentPreference();

            this.dropdown.hide();
            this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");
            this.results.empty();
            this.clearSearch();

            this.opts.element.trigger(jQuery.Event("close"));
        },

        // abstract
        clearSearch: function () {

        },

        // abstract
        ensureHighlightVisible: function () {
            var results = this.results, children, index, child, hb, rb, y, more;

            index = this.highlight();

            if (index < 0) return;

            if (index == 0) {

                // if the first element is highlighted scroll all the way to the top,
                // that way any unselectable headers above it will also be scrolled
                // into view

                results.scrollTop(0);
                return;
            }

            children = results.find(".select2-result-selectable");

            child = $(children[index]);

            hb = child.offset().top + child.outerHeight();

            // if this is the last child lets also make sure select2-more-results is visible
            if (index === children.length - 1) {
                more = results.find("li.select2-more-results");
                if (more.length > 0) {
                    hb = more.offset().top + more.outerHeight();
                }
            }

            rb = results.offset().top + results.outerHeight();
            if (hb > rb) {
                results.scrollTop(results.scrollTop() + (hb - rb));
            }
            y = child.offset().top - results.offset().top;

            // make sure the top of the element is visible
            if (y < 0) {
                results.scrollTop(results.scrollTop() + y); // y is negative
            }
        },

        // abstract
        moveHighlight: function (delta) {
            var choices = this.results.find(".select2-result-selectable"),
                index = this.highlight();

            while (index > -1 && index < choices.length) {
                index += delta;
                var choice = $(choices[index]);
                if (choice.hasClass("select2-result-selectable") && !choice.hasClass("select2-disabled")) {
                    this.highlight(index);
                    break;
                }
            }
        },

        // abstract
        highlight: function (index) {
            var choices = this.results.find(".select2-result-selectable").not(".select2-disabled");

            if (arguments.length === 0) {
                return indexOf(choices.filter(".select2-highlighted")[0], choices.get());
            }

            if (index >= choices.length) index = choices.length - 1;
            if (index < 0) index = 0;

            choices.removeClass("select2-highlighted");

            $(choices[index]).addClass("select2-highlighted");
            this.ensureHighlightVisible();

        },

        // abstract
        countSelectableResults: function() {
            return this.results.find(".select2-result-selectable").not(".select2-disabled").length;
        },

        // abstract
        highlightUnderEvent: function (event) {
            var el = $(event.target).closest(".select2-result-selectable");
            if (el.length > 0 && !el.is(".select2-highlighted")) {
        		var choices = this.results.find('.select2-result-selectable');
                this.highlight(choices.index(el));
            } else if (el.length == 0) {
                // if we are over an unselectable item remove al highlights
                this.results.find(".select2-highlighted").removeClass("select2-highlighted");
            }
        },

        // abstract
        loadMoreIfNeeded: function () {
            var results = this.results,
                more = results.find("li.select2-more-results"),
                below, // pixels the element is below the scroll fold, below==0 is when the element is starting to be visible
                offset = -1, // index of first element without data
                page = this.resultsPage + 1,
                self=this,
                term=this.search.val(),
                context=this.context;

            if (more.length === 0) return;
            below = more.offset().top - results.offset().top - results.height();

            if (below <= 0) {
                more.addClass("select2-active");
                this.opts.query({
                        term: term,
                        page: page,
                        context: context,
                        matcher: this.opts.matcher,
                        callback: this.bind(function (data) {

                    self.opts.populateResults.call(this, results, data.results, {term: term, page: page, context:context});

                    if (data.more===true) {
                        more.detach().appendTo(results).text(self.opts.formatLoadMore(page+1));
                        window.setTimeout(function() { self.loadMoreIfNeeded(); }, 10);
                    } else {
                        more.remove();
                    }
                    self.positionDropdown();
                    self.resultsPage = page;
                })});
            }
        },

        /**
         * Default tokenizer function which does nothing
         */
        tokenize: function() {

        },

        /**
         * @param initial whether or not this is the call to this method right after the dropdown has been opened
         */
        // abstract
        updateResults: function (initial) {
            var search = this.search, results = this.results, opts = this.opts, data, self=this, input;

            // if the search is currently hidden we do not alter the results
            if (initial !== true && (this.showSearchInput === false || !this.opened())) {
                return;
            }

            search.addClass("select2-active");

            function postRender() {
                results.scrollTop(0);
                search.removeClass("select2-active");
                self.positionDropdown();
            }

            function render(html) {
                results.html(escapeMarkup(html));
                postRender();
            }

            if (opts.maximumSelectionSize >=1) {
                data = this.data();
                if ($.isArray(data) && data.length >= opts.maximumSelectionSize && checkFormatter(opts.formatSelectionTooBig, "formatSelectionTooBig")) {
            	    render("<li class='select2-selection-limit'>" + opts.formatSelectionTooBig(opts.maximumSelectionSize) + "</li>");
            	    return;
                }
            }

            if (search.val().length < opts.minimumInputLength && checkFormatter(opts.formatInputTooShort, "formatInputTooShort")) {
                render("<li class='select2-no-results'>" + opts.formatInputTooShort(search.val(), opts.minimumInputLength) + "</li>");
                return;
            }
            else {
                render("<li class='select2-searching'>" + opts.formatSearching() + "</li>");
            }

            // give the tokenizer a chance to pre-process the input
            input = this.tokenize();
            if (input != undefined && input != null) {
                search.val(input);
            }

            this.resultsPage = 1;
            opts.query({
                    term: search.val(),
                    page: this.resultsPage,
                    context: null,
                    matcher: opts.matcher,
                    callback: this.bind(function (data) {
                var def; // default choice

                // save context, if any
                this.context = (data.context===undefined) ? null : data.context;

                // create a default choice and prepend it to the list
                if (this.opts.createSearchChoice && search.val() !== "") {
                    def = this.opts.createSearchChoice.call(null, search.val(), data.results);
                    if (def !== undefined && def !== null && self.id(def) !== undefined && self.id(def) !== null) {
                        if ($(data.results).filter(
                            function () {
                                return equal(self.id(this), self.id(def));
                            }).length === 0) {
                            data.results.unshift(def);
                        }
                    }
                }

                if (data.results.length === 0 && checkFormatter(opts.formatNoMatches, "formatNoMatches")) {
                    render("<li class='select2-no-results'>" + opts.formatNoMatches(search.val()) + "</li>");
                    return;
                }

                results.empty();
                self.opts.populateResults.call(this, results, data.results, {term: search.val(), page: this.resultsPage, context:null});

                if (data.more === true && checkFormatter(opts.formatLoadMore, "formatLoadMore")) {
                    results.append("<li class='select2-more-results'>" + escapeMarkup(opts.formatLoadMore(this.resultsPage)) + "</li>");
                    window.setTimeout(function() { self.loadMoreIfNeeded(); }, 10);
                }

                this.postprocessResults(data, initial);

                postRender();
            })});
        },

        // abstract
        cancel: function () {
            this.close();
        },

        // abstract
        blur: function () {
            this.close();
            this.container.removeClass("select2-container-active");
            this.dropdown.removeClass("select2-drop-active");
            // synonymous to .is(':focus'), which is available in jquery >= 1.6
            if (this.search[0] === document.activeElement) { this.search.blur(); }
            this.clearSearch();
            this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
        },

        // abstract
        focusSearch: function () {
            /* we do this in a timeout so that current event processing can complete before this code is executed.
             this makes sure the search field is focussed even if the current event would blur it */
            window.setTimeout(this.bind(function () {
                this.search.focus();
                // reset the value so IE places the cursor at the end of the input box
                this.search.val(this.search.val());
            }), 10);
        },

        // abstract
        selectHighlighted: function () {
            var index=this.highlight(),
                highlighted=this.results.find(".select2-highlighted").not(".select2-disabled"),
                data = highlighted.closest('.select2-result-selectable').data("select2-data");
            if (data) {
                highlighted.addClass("select2-disabled");
                this.highlight(index);
                this.onSelect(data);
            }
        },

        // abstract
        getPlaceholder: function () {
            return this.opts.element.attr("placeholder") ||
                this.opts.element.attr("data-placeholder") || // jquery 1.4 compat
                this.opts.element.data("placeholder") ||
                this.opts.placeholder;
        },

        /**
         * Get the desired width for the container element.  This is
         * derived first from option `width` passed to select2, then
         * the inline 'style' on the original element, and finally
         * falls back to the jQuery calculated element width.
         */
        // abstract
        initContainerWidth: function () {
            function resolveContainerWidth() {
                var style, attrs, matches, i, l;

                if (this.opts.width === "off") {
                    return null;
                } else if (this.opts.width === "element"){
                    return this.opts.element.outerWidth() === 0 ? 'auto' : this.opts.element.outerWidth() + 'px';
                } else if (this.opts.width === "copy" || this.opts.width === "resolve") {
                    // check if there is inline style on the element that contains width
                    style = this.opts.element.attr('style');
                    if (style !== undefined) {
                        attrs = style.split(';');
                        for (i = 0, l = attrs.length; i < l; i = i + 1) {
                            matches = attrs[i].replace(/\s/g, '')
                                .match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);
                            if (matches !== null && matches.length >= 1)
                                return matches[1];
                        }
                    }

                    if (this.opts.width === "resolve") {
                        // next check if css('width') can resolve a width that is percent based, this is sometimes possible
                        // when attached to input type=hidden or elements hidden via css
                        style = this.opts.element.css('width');
                        if (style.indexOf("%") > 0) return style;

                        // finally, fallback on the calculated width of the element
                        return (this.opts.element.outerWidth() === 0 ? 'auto' : this.opts.element.outerWidth() + 'px');
                    }

                    return null;
                } else if ($.isFunction(this.opts.width)) {
                    return this.opts.width();
                } else {
                    return this.opts.width;
               }
            };

            var width = resolveContainerWidth.call(this);
            if (width !== null) {
                this.container.attr("style", "width: "+width);
            }
        }
    });

    SingleSelect2 = clazz(AbstractSelect2, {

        // single

		createContainer: function () {
            var container = $("<div></div>", {
                "class": "select2-container"
            }).html([
                "    <a href='javascript:void(0)' class='select2-choice'>",
                "   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>",
                "   <div><b></b></div>" ,
                "</a>",
                "    <div class='select2-drop select2-offscreen'>" ,
                "   <div class='select2-search'>" ,
                "       <input type='text' autocomplete='off' class='select2-input'/>" ,
                "   </div>" ,
                "   <ul class='select2-results'>" ,
                "   </ul>" ,
                "</div>"].join(""));
            return container;
        },

        // single
        opening: function () {
            this.search.show();
            this.parent.opening.apply(this, arguments);
            this.dropdown.removeClass("select2-offscreen");
        },

        // single
        close: function () {
            if (!this.opened()) return;
            this.parent.close.apply(this, arguments);
            this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show();
        },

        // single
        focus: function () {
            this.close();
            this.selection.focus();
        },

        // single
        isFocused: function () {
            return this.selection[0] === document.activeElement;
        },

        // single
        cancel: function () {
            this.parent.cancel.apply(this, arguments);
            this.selection.focus();
        },

        // single
        initContainer: function () {

            var selection,
                container = this.container,
                dropdown = this.dropdown,
                clickingInside = false;

            this.selection = selection = container.find(".select2-choice");

            this.search.bind("keydown", this.bind(function (e) {
                if (!this.enabled) return;

                if (e.which === KEY.PAGE_UP || e.which === KEY.PAGE_DOWN) {
                    // prevent the page from scrolling
                    killEvent(e);
                    return;
                }

                if (this.opened()) {
                    switch (e.which) {
                        case KEY.UP:
                        case KEY.DOWN:
                            this.moveHighlight((e.which === KEY.UP) ? -1 : 1);
                            killEvent(e);
                            return;
                        case KEY.TAB:
                        case KEY.ENTER:
                            this.selectHighlighted();
                            killEvent(e);
                            return;
                        case KEY.ESC:
                            this.cancel(e);
                            killEvent(e);
                            return;
                    }
                } else {

                    if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC) {
                        return;
                    }

                    if (this.opts.openOnEnter === false && e.which === KEY.ENTER) {
                        return;
                    }

                    this.open();

                    if (e.which === KEY.ENTER) {
                        // do not propagate the event otherwise we open, and propagate enter which closes
                        return;
                    }
                }
            }));

            this.search.bind("focus", this.bind(function() {
                this.selection.attr("tabIndex", "-1");
            }));
            this.search.bind("blur", this.bind(function() {
                if (!this.opened()) this.container.removeClass("select2-container-active");
                window.setTimeout(this.bind(function() { this.selection.attr("tabIndex", this.opts.element.attr("tabIndex")); }), 10);
            }));

            selection.bind("mousedown", this.bind(function (e) {
                clickingInside = true;

                if (this.opened()) {
                    this.close();
                    this.selection.focus();
                } else if (this.enabled) {
                    this.open();
                }

                clickingInside = false;
            }));

            dropdown.bind("mousedown", this.bind(function() { this.search.focus(); }));

            selection.bind("focus", this.bind(function() {
                this.container.addClass("select2-container-active");
                // hide the search so the tab key does not focus on it
                this.search.attr("tabIndex", "-1");
            }));

            selection.bind("blur", this.bind(function() {
                if (!this.opened()) {
                    this.container.removeClass("select2-container-active");
                }
                window.setTimeout(this.bind(function() { this.search.attr("tabIndex", this.opts.element.attr("tabIndex")); }), 10);
            }));

            selection.bind("keydown", this.bind(function(e) {
                if (!this.enabled) return;

                if (e.which === KEY.PAGE_UP || e.which === KEY.PAGE_DOWN) {
                    // prevent the page from scrolling
                    killEvent(e);
                    return;
                }

                if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e)
                 || e.which === KEY.ESC) {
                    return;
                }

                if (this.opts.openOnEnter === false && e.which === KEY.ENTER) {
                    return;
                }

                if (e.which == KEY.DELETE) {
                    if (this.opts.allowClear) {
                        this.clear();
                    }
                    return;
                }

                this.open();

                if (e.which === KEY.ENTER) {
                    // do not propagate the event otherwise we open, and propagate enter which closes
                    killEvent(e);
                    return;
                }

                // do not set the search input value for non-alpha-numeric keys
                // otherwise pressing down results in a '(' being set in the search field
                if (e.which < 48 ) { // '0' == 48
                    killEvent(e);
                    return;
                }

                var keyWritten = String.fromCharCode(e.which).toLowerCase();

                if (e.shiftKey) {
                    keyWritten = keyWritten.toUpperCase();
                }

                // focus the field before calling val so the cursor ends up after the value instead of before
                this.search.focus();
                this.search.val(keyWritten);

                // prevent event propagation so it doesnt replay on the now focussed search field and result in double key entry
                killEvent(e);
            }));

            selection.delegate("abbr", "mousedown", this.bind(function (e) {
                if (!this.enabled) return;
                this.clear();
                killEvent(e);
                this.close();
                this.triggerChange();
                this.selection.focus();
            }));

            this.setPlaceholder();

            this.search.bind("focus", this.bind(function() {
                this.container.addClass("select2-container-active");
            }));
        },

        // single
        clear: function() {
            this.opts.element.val("");
            this.selection.find("span").empty();
            this.selection.removeData("select2-data");
            this.setPlaceholder();
        },

        /**
         * Sets selection based on source element's value
         */
        // single
        initSelection: function () {
            var selected;
            if (this.opts.element.val() === "") {
                this.close();
                this.setPlaceholder();
            } else {
                var self = this;
                this.opts.initSelection.call(null, this.opts.element, function(selected){
                    if (selected !== undefined && selected !== null) {
                        self.updateSelection(selected);
                        self.close();
                        self.setPlaceholder();
                    }
                });
            }
        },

        // single
        prepareOpts: function () {
            var opts = this.parent.prepareOpts.apply(this, arguments);

            if (opts.element.get(0).tagName.toLowerCase() === "select") {
                // install the selection initializer
                opts.initSelection = function (element, callback) {
                    var selected = element.find(":selected");
                    // a single select box always has a value, no need to null check 'selected'
                    if ($.isFunction(callback))
                        callback({id: selected.attr("value"), text: selected.text()});
                };
            }

            return opts;
        },

        // single
        setPlaceholder: function () {
            var placeholder = this.getPlaceholder();

            if (this.opts.element.val() === "" && placeholder !== undefined) {

                // check for a first blank option if attached to a select
                if (this.select && this.select.find("option:first").text() !== "") return;

                this.selection.find("span").html(escapeMarkup(placeholder));

                this.selection.addClass("select2-default");

                this.selection.find("abbr").hide();
            }
        },

        // single
        postprocessResults: function (data, initial) {
            var selected = 0, self = this, showSearchInput = true;

            // find the selected element in the result list

            this.results.find(".select2-result-selectable").each2(function (i, elm) {
                if (equal(self.id(elm.data("select2-data")), self.opts.element.val())) {
                    selected = i;
                    return false;
                }
            });

            // and highlight it

            this.highlight(selected);

            // hide the search box if this is the first we got the results and there are a few of them

            if (initial === true) {
                showSearchInput = this.showSearchInput = countResults(data.results) >= this.opts.minimumResultsForSearch;
                this.dropdown.find(".select2-search")[showSearchInput ? "removeClass" : "addClass"]("select2-search-hidden");

                //add "select2-with-searchbox" to the container if search box is shown
                $(this.dropdown, this.container)[showSearchInput ? "addClass" : "removeClass"]("select2-with-searchbox");
            }

        },

        // single
        onSelect: function (data) {
            var old = this.opts.element.val();

            this.opts.element.val(this.id(data));
            this.updateSelection(data);
            this.close();
            this.selection.focus();

            if (!equal(old, this.id(data))) { this.triggerChange(); }
        },

        // single
        updateSelection: function (data) {

            var container=this.selection.find("span"), formatted;

            this.selection.data("select2-data", data);

            container.empty();
            formatted=this.opts.formatSelection(data, container);
            if (formatted !== undefined) {
                container.append(escapeMarkup(formatted));
            }

            this.selection.removeClass("select2-default");

            if (this.opts.allowClear && this.getPlaceholder() !== undefined) {
                this.selection.find("abbr").show();
            }
        },

        // single
        val: function () {
            var val, data = null, self = this;

            if (arguments.length === 0) {
                return this.opts.element.val();
            }

            val = arguments[0];

            if (this.select) {
                this.select
                    .val(val)
                    .find(":selected").each2(function (i, elm) {
                        data = {id: elm.attr("value"), text: elm.text()};
                        return false;
                    });
                this.updateSelection(data);
                this.setPlaceholder();
            } else {
                if (this.opts.initSelection === undefined) {
                    throw new Error("cannot call val() if initSelection() is not defined");
                }
                // val is an id. !val is true for [undefined,null,'']
                if (!val) {
                    this.clear();
                    return;
                }
                this.opts.initSelection(this.opts.element, function(data){
                    self.opts.element.val(!data ? "" : self.id(data));
                    self.updateSelection(data);
                    self.setPlaceholder();
                });
            }
        },

        // single
        clearSearch: function () {
            this.search.val("");
        },

        // single
        data: function(value) {
            var data;

            if (arguments.length === 0) {
                data = this.selection.data("select2-data");
                if (data == undefined) data = null;
                return data;
            } else {
                if (!value || value === "") {
                    this.clear();
                } else {
                    this.opts.element.val(!value ? "" : this.id(value));
                    this.updateSelection(value);
                }
            }
        }
    });

    MultiSelect2 = clazz(AbstractSelect2, {

        // multi
        createContainer: function () {
            var container = $("<div></div>", {
                "class": "select2-container select2-container-multi"
            }).html([
                "    <ul class='select2-choices'>",
                //"<li class='select2-search-choice'><span>California</span><a href="javascript:void(0)" class="select2-search-choice-close"></a></li>" ,
                "  <li class='select2-search-field'>" ,
                "    <input type='text' autocomplete='off' class='select2-input'>" ,
                "  </li>" ,
                "</ul>" ,
                "<div class='select2-drop select2-drop-multi' style='display:none;'>" ,
                "   <ul class='select2-results'>" ,
                "   </ul>" ,
                "</div>"].join(""));
			return container;
        },

        // multi
        prepareOpts: function () {
            var opts = this.parent.prepareOpts.apply(this, arguments);

            // TODO validate placeholder is a string if specified

            if (opts.element.get(0).tagName.toLowerCase() === "select") {
                // install sthe selection initializer
                opts.initSelection = function (element,callback) {

                    var data = [];
                    element.find(":selected").each2(function (i, elm) {
                        data.push({id: elm.attr("value"), text: elm.text()});
                    });

                    if ($.isFunction(callback))
                        callback(data);
                };
            }

            return opts;
        },

        // multi
        initContainer: function () {

            var selector = ".select2-choices", selection;

            this.searchContainer = this.container.find(".select2-search-field");
            this.selection = selection = this.container.find(selector);

            this.search.bind("keydown", this.bind(function (e) {
                if (!this.enabled) return;

                if (e.which === KEY.BACKSPACE && this.search.val() === "") {
                    this.close();

                    var choices,
                        selected = selection.find(".select2-search-choice-focus");
                    if (selected.length > 0) {
                        this.unselect(selected.first());
                        this.search.width(10);
                        killEvent(e);
                        return;
                    }

                    choices = selection.find(".select2-search-choice");
                    if (choices.length > 0) {
                        choices.last().addClass("select2-search-choice-focus");
                    }
                } else {
                    selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
                }

                if (this.opened()) {
                    switch (e.which) {
                    case KEY.UP:
                    case KEY.DOWN:
                        this.moveHighlight((e.which === KEY.UP) ? -1 : 1);
                        killEvent(e);
                        return;
                    case KEY.ENTER:
                    case KEY.TAB:
                        this.selectHighlighted();
                        killEvent(e);
                        return;
                    case KEY.ESC:
                        this.cancel(e);
                        killEvent(e);
                        return;
                    }
                }

                if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e)
                 || e.which === KEY.BACKSPACE || e.which === KEY.ESC) {
                    return;
                }

                if (this.opts.openOnEnter === false && e.which === KEY.ENTER) {
                    return;
                }

                this.open();

                if (e.which === KEY.PAGE_UP || e.which === KEY.PAGE_DOWN) {
                    // prevent the page from scrolling
                    killEvent(e);
                }
            }));

            this.search.bind("keyup", this.bind(this.resizeSearch));

            this.search.bind("blur", this.bind(function() {
                this.container.removeClass("select2-container-active");
            }));

            this.container.delegate(selector, "mousedown", this.bind(function (e) {
                if (!this.enabled) return;
                this.clearPlaceholder();
                this.open();
                this.focusSearch();
                e.preventDefault();
            }));

            this.container.delegate(selector, "focus", this.bind(function () {
                if (!this.enabled) return;
                this.container.addClass("select2-container-active");
                this.dropdown.addClass("select2-drop-active");
                this.clearPlaceholder();
            }));

            // set the placeholder if necessary
            this.clearSearch();
        },

        // multi
        enable: function() {
            if (this.enabled) return;

            this.parent.enable.apply(this, arguments);

            this.search.removeAttr("disabled");
        },

        // multi
        disable: function() {
            if (!this.enabled) return;

            this.parent.disable.apply(this, arguments);

            this.search.attr("disabled", true);
        },

        // multi
        initSelection: function () {
            var data;
            if (this.opts.element.val() === "") {
                this.updateSelection([]);
                this.close();
                // set the placeholder if necessary
                this.clearSearch();
            }
            if (this.select || this.opts.element.val() !== "") {
                var self = this;
                this.opts.initSelection.call(null, this.opts.element, function(data){
                    if (data !== undefined && data !== null) {
                        self.updateSelection(data);
                        self.close();
                        // set the placeholder if necessary
                        self.clearSearch();
                    }
                });
            }
        },

        // multi
        clearSearch: function () {
            var placeholder = this.getPlaceholder();

            if (placeholder !== undefined  && this.getVal().length === 0 && this.search.hasClass("select2-focused") === false) {
                this.search.val(placeholder).addClass("select2-default");
                // stretch the search box to full width of the container so as much of the placeholder is visible as possible
                this.resizeSearch();
            } else {
                // we set this to " " instead of "" and later clear it on focus() because there is a firefox bug
                // that does not properly render the caret when the field starts out blank
                this.search.val(" ").width(10);
            }
        },

        // multi
        clearPlaceholder: function () {
            if (this.search.hasClass("select2-default")) {
                this.search.val("").removeClass("select2-default");
            } else {
                // work around for the space character we set to avoid firefox caret bug
                if (this.search.val() === " ") this.search.val("");
            }
        },

        // multi
        opening: function () {
            this.parent.opening.apply(this, arguments);

            this.clearPlaceholder();
			this.resizeSearch();
            this.focusSearch();
        },

        // multi
        close: function () {
            if (!this.opened()) return;
            this.parent.close.apply(this, arguments);
        },

        // multi
        focus: function () {
            this.close();
            this.search.focus();
        },

        // multi
        isFocused: function () {
            return this.search.hasClass("select2-focused");
        },

        // multi
        updateSelection: function (data) {
            var ids = [], filtered = [], self = this;

            // filter out duplicates
            $(data).each(function () {
                if (indexOf(self.id(this), ids) < 0) {
                    ids.push(self.id(this));
                    filtered.push(this);
                }
            });
            data = filtered;

            this.selection.find(".select2-search-choice").remove();
            $(data).each(function () {
                self.addSelectedChoice(this);
            });
            self.postprocessResults();
        },

        tokenize: function() {
            var input = this.search.val();
            input = this.opts.tokenizer(input, this.data(), this.bind(this.onSelect), this.opts);
            if (input != null && input != undefined) {
                this.search.val(input);
                if (input.length > 0) {
                    this.open();
                }
            }

        },

        // multi
        onSelect: function (data) {
            this.addSelectedChoice(data);
            if (this.select) { this.postprocessResults(); }

            if (this.opts.closeOnSelect) {
                this.close();
                this.search.width(10);
            } else {
                if (this.countSelectableResults()>0) {
                    this.search.width(10);
                    this.resizeSearch();
                    this.positionDropdown();
                } else {
                    // if nothing left to select close
                    this.close();
                }
            }

            // since its not possible to select an element that has already been
            // added we do not need to check if this is a new element before firing change
            this.triggerChange({ added: data });

            this.focusSearch();
        },

        // multi
        cancel: function () {
            this.close();
            this.focusSearch();
        },

        // multi
        addSelectedChoice: function (data) {
            var choice=$(
                    "<li class='select2-search-choice'>" +
                    "    <div></div>" +
                    "    <a href='javascript:void(0)' class='select2-search-choice-close' tabindex='-1'></a>" +
                    "</li>"),
                id = this.id(data),
                val = this.getVal(),
                formatted;

            formatted=this.opts.formatSelection(data, choice);
            choice.find("div").replaceWith("<div>"+escapeMarkup(formatted)+"</div>");
            choice.find(".select2-search-choice-close")
                .bind("mousedown", killEvent)
                .bind("click dblclick", this.bind(function (e) {
                if (!this.enabled) return;

                $(e.target).closest(".select2-search-choice").fadeOut('fast').animate({width: "hide"}, 50, this.bind(function(){
                    this.unselect($(e.target));
                    this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
                    this.close();
                    this.focusSearch();
                })).dequeue();
                killEvent(e);
            })).bind("focus", this.bind(function () {
                if (!this.enabled) return;
                this.container.addClass("select2-container-active");
                this.dropdown.addClass("select2-drop-active");
            }));

            choice.data("select2-data", data);
            choice.insertBefore(this.searchContainer);

            val.push(id);
            this.setVal(val);
        },

        // multi
        unselect: function (selected) {
            var val = this.getVal(),
                data,
                index;

            selected = selected.closest(".select2-search-choice");

            if (selected.length === 0) {
                throw "Invalid argument: " + selected + ". Must be .select2-search-choice";
            }

            data = selected.data("select2-data");

            index = indexOf(this.id(data), val);

            if (index >= 0) {
                val.splice(index, 1);
                this.setVal(val);
                if (this.select) this.postprocessResults();
            }
            selected.remove();
            this.triggerChange({ removed: data });
        },

        // multi
        postprocessResults: function () {
            var val = this.getVal(),
                choices = this.results.find(".select2-result-selectable"),
                compound = this.results.find(".select2-result-with-children"),
                self = this;

            choices.each2(function (i, choice) {
                var id = self.id(choice.data("select2-data"));
                if (indexOf(id, val) >= 0) {
                    choice.addClass("select2-disabled").removeClass("select2-result-selectable");
                } else {
                    choice.removeClass("select2-disabled").addClass("select2-result-selectable");
                }
            });

            compound.each2(function(i, e) {
                if (e.find(".select2-result-selectable").length==0) {
                    e.addClass("select2-disabled");
                } else {
                    e.removeClass("select2-disabled");
                }
            });

            choices.each2(function (i, choice) {
                if (!choice.hasClass("select2-disabled") && choice.hasClass("select2-result-selectable")) {
                    self.highlight(0);
                    return false;
                }
            });

        },

        // multi
        resizeSearch: function () {

            var minimumWidth, left, maxWidth, containerLeft, searchWidth,
            	sideBorderPadding = getSideBorderPadding(this.search);

            minimumWidth = measureTextWidth(this.search) + 10;

            left = this.search.offset().left;

            maxWidth = this.selection.width();
            containerLeft = this.selection.offset().left;

            searchWidth = maxWidth - (left - containerLeft) - sideBorderPadding;
            if (searchWidth < minimumWidth) {
                searchWidth = maxWidth - sideBorderPadding;
            }

            if (searchWidth < 40) {
                searchWidth = maxWidth - sideBorderPadding;
            }
            this.search.width(searchWidth);
        },

        // multi
        getVal: function () {
            var val;
            if (this.select) {
                val = this.select.val();
                return val === null ? [] : val;
            } else {
                val = this.opts.element.val();
                return splitVal(val, this.opts.separator);
            }
        },

        // multi
        setVal: function (val) {
            var unique;
            if (this.select) {
                this.select.val(val);
            } else {
                unique = [];
                // filter out duplicates
                $(val).each(function () {
                    if (indexOf(this, unique) < 0) unique.push(this);
                });
                this.opts.element.val(unique.length === 0 ? "" : unique.join(this.opts.separator));
            }
        },

        // multi
        val: function () {
            var val, data = [], self=this;

            if (arguments.length === 0) {
                return this.getVal();
            }

            val = arguments[0];

            if (!val) {
                this.opts.element.val("");
                this.updateSelection([]);
                this.clearSearch();
                return;
            }

            // val is a list of ids
            this.setVal(val);

            if (this.select) {
                this.select.find(":selected").each(function () {
                    data.push({id: $(this).attr("value"), text: $(this).text()});
                });
                this.updateSelection(data);
            } else {
                if (this.opts.initSelection === undefined) {
                    throw new Error("val() cannot be called if initSelection() is not defined")
                }

                this.opts.initSelection(this.opts.element, function(data){
                    var ids=$(data).map(self.id);
                    self.setVal(ids);
                    self.updateSelection(data);
                    self.clearSearch();
                });
            }
            this.clearSearch();
        },

        // multi
        onSortStart: function() {
            if (this.select) {
                throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
            }

            // collapse search field into 0 width so its container can be collapsed as well
            this.search.width(0);
            // hide the container
            this.searchContainer.hide();
        },

        // multi
        onSortEnd:function() {

            var val=[], self=this;

            // show search and move it to the end of the list
            this.searchContainer.show();
            // make sure the search container is the last item in the list
            this.searchContainer.appendTo(this.searchContainer.parent());
            // since we collapsed the width in dragStarted, we resize it here
            this.resizeSearch();

            // update selection

            this.selection.find(".select2-search-choice").each(function() {
                val.push(self.opts.id($(this).data("select2-data")));
            });
            this.setVal(val);
            this.triggerChange();
        },

        // multi
        data: function(values) {
            var self=this, ids;
            if (arguments.length === 0) {
                 return this.selection
                     .find(".select2-search-choice")
                     .map(function() { return $(this).data("select2-data"); })
                     .get();
            } else {
                if (!values) { values = []; }
                ids = $.map(values, function(e) { return self.opts.id(e)});
                this.setVal(ids);
                this.updateSelection(values);
                this.clearSearch();
            }
        }
    });

    $.fn.select2 = function () {

        var args = Array.prototype.slice.call(arguments, 0),
            opts,
            select2,
            value, multiple, allowedMethods = ["val", "destroy", "opened", "open", "close", "focus", "isFocused", "container", "onSortStart", "onSortEnd", "enable", "disable", "positionDropdown", "data"];

        this.each(function () {
            if (args.length === 0 || typeof(args[0]) === "object") {
                opts = args.length === 0 ? {} : $.extend({}, args[0]);
                opts.element = $(this);

                if (opts.element.get(0).tagName.toLowerCase() === "select") {
                    multiple = opts.element.attr("multiple");
                } else {
                    multiple = opts.multiple || false;
                    if ("tags" in opts) {opts.multiple = multiple = true;}
                }

                select2 = multiple ? new MultiSelect2() : new SingleSelect2();
                select2.init(opts);
            } else if (typeof(args[0]) === "string") {

                if (indexOf(args[0], allowedMethods) < 0) {
                    throw "Unknown method: " + args[0];
                }

                value = undefined;
                select2 = $(this).data("select2");
                if (select2 === undefined) return;
                if (args[0] === "container") {
                    value=select2.container;
                } else {
                    value = select2[args[0]].apply(select2, args.slice(1));
                }
                if (value !== undefined) {return false;}
            } else {
                throw "Invalid arguments to select2 plugin: " + args;
            }
        });
        return (value === undefined) ? this : value;
    };

    // plugin defaults, accessible to users
    $.fn.select2.defaults = {
        width: "copy",
        closeOnSelect: true,
        openOnEnter: true,
        containerCss: {},
        dropdownCss: {},
        containerCssClass: "",
        dropdownCssClass: "",
        formatResult: function(result, container, query) {
            var markup=[];
            markMatch(result.text, query.term, markup);
            return markup.join("");
        },
        formatSelection: function (data, container) {
            return data.text;
        },
        formatResultCssClass: function(data) {return undefined;},
        formatNoMatches: function () { return "No matches found"; },
        formatInputTooShort: function (input, min) { return "Please enter " + (min - input.length) + " more characters"; },
        formatSelectionTooBig: function (limit) { return "You can only select " + limit + " items"; },
        formatLoadMore: function (pageNumber) { return "Loading more results..."; },
	    formatSearching: function () { return "Searching..."; },
        minimumResultsForSearch: 0,
        minimumInputLength: 0,
        maximumSelectionSize: 0,
        id: function (e) { return e.id; },
        matcher: function(term, text) {
            return text.toUpperCase().indexOf(term.toUpperCase()) >= 0;
        },
        separator: ",",
        tokenSeparators: [],
        tokenizer: defaultTokenizer
    };

    // exports
    window.Select2 = {
        query: {
            ajax: ajax,
            local: local,
            tags: tags
        }, util: {
            debounce: debounce,
            markMatch: markMatch
        }, "class": {
            "abstract": AbstractSelect2,
            "single": SingleSelect2,
            "multi": MultiSelect2
        }
    };

}(jQuery));
/* ---------------------------------------- /includes/jsbin/jquery.bxslider.min.js ---------------------------------------- */
/**
 * BxSlider v4.1.1 - Fully loaded, responsive content slider
 * http://bxslider.com
 *
 * Copyright 2013, Steven Wanderski - http://stevenwanderski.com - http://bxcreative.com
 * Written while drinking Belgian ales and listening to jazz
 *
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */
!function(t){var e={},s={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};t.fn.bxSlider=function(n){if(0==this.length)return this;if(this.length>1)return this.each(function(){t(this).bxSlider(n)}),this;var o={},r=this;e.el=this;var a=t(window).width(),l=t(window).height(),d=function(){o.settings=t.extend({},s,n),o.settings.slideWidth=parseInt(o.settings.slideWidth),o.children=r.children(o.settings.slideSelector),o.children.length<o.settings.minSlides&&(o.settings.minSlides=o.children.length),o.children.length<o.settings.maxSlides&&(o.settings.maxSlides=o.children.length),o.settings.randomStart&&(o.settings.startSlide=Math.floor(Math.random()*o.children.length)),o.active={index:o.settings.startSlide},o.carousel=o.settings.minSlides>1||o.settings.maxSlides>1,o.carousel&&(o.settings.preloadImages="all"),o.minThreshold=o.settings.minSlides*o.settings.slideWidth+(o.settings.minSlides-1)*o.settings.slideMargin,o.maxThreshold=o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin,o.working=!1,o.controls={},o.interval=null,o.animProp="vertical"==o.settings.mode?"top":"left",o.usingCSS=o.settings.useCSS&&"fade"!=o.settings.mode&&function(){var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return o.cssPrefix=e[i].replace("Perspective","").toLowerCase(),o.animProp="-"+o.cssPrefix+"-transform",!0;return!1}(),"vertical"==o.settings.mode&&(o.settings.maxSlides=o.settings.minSlides),r.data("origStyle",r.attr("style")),r.children(o.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),c()},c=function(){r.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),o.viewport=r.parent(),o.loader=t('<div class="bx-loading" />'),o.viewport.prepend(o.loader),r.css({width:"horizontal"==o.settings.mode?100*o.children.length+215+"%":"auto",position:"relative"}),o.usingCSS&&o.settings.easing?r.css("-"+o.cssPrefix+"-transition-timing-function",o.settings.easing):o.settings.easing||(o.settings.easing="swing"),f(),o.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),o.viewport.parent().css({maxWidth:v()}),o.settings.pager||o.viewport.parent().css({margin:"0 auto 0px"}),o.children.css({"float":"horizontal"==o.settings.mode?"left":"none",listStyle:"none",position:"relative"}),o.children.css("width",u()),"horizontal"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginRight",o.settings.slideMargin),"vertical"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginBottom",o.settings.slideMargin),"fade"==o.settings.mode&&(o.children.css({position:"absolute",zIndex:0,display:"none"}),o.children.eq(o.settings.startSlide).css({zIndex:50,display:"block"})),o.controls.el=t('<div class="bx-controls" />'),o.settings.captions&&P(),o.active.last=o.settings.startSlide==x()-1,o.settings.video&&r.fitVids();var e=o.children.eq(o.settings.startSlide);"all"==o.settings.preloadImages&&(e=o.children),o.settings.ticker?o.settings.pager=!1:(o.settings.pager&&T(),o.settings.controls&&C(),o.settings.auto&&o.settings.autoControls&&E(),(o.settings.controls||o.settings.autoControls||o.settings.pager)&&o.viewport.after(o.controls.el)),g(e,h)},g=function(e,i){var s=e.find("img, iframe").length;if(0==s)return i(),void 0;var n=0;e.find("img, iframe").each(function(){t(this).one("load",function(){++n==s&&i()}).each(function(){this.complete&&t(this).load()})})},h=function(){if(o.settings.infiniteLoop&&"fade"!=o.settings.mode&&!o.settings.ticker){var e="vertical"==o.settings.mode?o.settings.minSlides:o.settings.maxSlides,i=o.children.slice(0,e).clone().addClass("bx-clone"),s=o.children.slice(-e).clone().addClass("bx-clone");r.append(i).prepend(s)}o.loader.remove(),S(),"vertical"==o.settings.mode&&(o.settings.adaptiveHeight=!0),o.viewport.height(p()),r.redrawSlider(),o.settings.onSliderLoad(o.active.index),o.initialized=!0,o.settings.responsive&&t(window).bind("resize",B),o.settings.auto&&o.settings.autoStart&&H(),o.settings.ticker&&L(),o.settings.pager&&I(o.settings.startSlide),o.settings.controls&&W(),o.settings.touchEnabled&&!o.settings.ticker&&O()},p=function(){var e=0,s=t();if("vertical"==o.settings.mode||o.settings.adaptiveHeight)if(o.carousel){var n=1==o.settings.moveSlides?o.active.index:o.active.index*m();for(s=o.children.eq(n),i=1;i<=o.settings.maxSlides-1;i++)s=n+i>=o.children.length?s.add(o.children.eq(i-1)):s.add(o.children.eq(n+i))}else s=o.children.eq(o.active.index);else s=o.children;return"vertical"==o.settings.mode?(s.each(function(){e+=t(this).outerHeight()}),o.settings.slideMargin>0&&(e+=o.settings.slideMargin*(o.settings.minSlides-1))):e=Math.max.apply(Math,s.map(function(){return t(this).outerHeight(!1)}).get()),e},v=function(){var t="100%";return o.settings.slideWidth>0&&(t="horizontal"==o.settings.mode?o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin:o.settings.slideWidth),t},u=function(){var t=o.settings.slideWidth,e=o.viewport.width();return 0==o.settings.slideWidth||o.settings.slideWidth>e&&!o.carousel||"vertical"==o.settings.mode?t=e:o.settings.maxSlides>1&&"horizontal"==o.settings.mode&&(e>o.maxThreshold||e<o.minThreshold&&(t=(e-o.settings.slideMargin*(o.settings.minSlides-1))/o.settings.minSlides)),t},f=function(){var t=1;if("horizontal"==o.settings.mode&&o.settings.slideWidth>0)if(o.viewport.width()<o.minThreshold)t=o.settings.minSlides;else if(o.viewport.width()>o.maxThreshold)t=o.settings.maxSlides;else{var e=o.children.first().width();t=Math.floor(o.viewport.width()/e)}else"vertical"==o.settings.mode&&(t=o.settings.minSlides);return t},x=function(){var t=0;if(o.settings.moveSlides>0)if(o.settings.infiniteLoop)t=o.children.length/m();else for(var e=0,i=0;e<o.children.length;)++t,e=i+f(),i+=o.settings.moveSlides<=f()?o.settings.moveSlides:f();else t=Math.ceil(o.children.length/f());return t},m=function(){return o.settings.moveSlides>0&&o.settings.moveSlides<=f()?o.settings.moveSlides:f()},S=function(){if(o.children.length>o.settings.maxSlides&&o.active.last&&!o.settings.infiniteLoop){if("horizontal"==o.settings.mode){var t=o.children.last(),e=t.position();b(-(e.left-(o.viewport.width()-t.width())),"reset",0)}else if("vertical"==o.settings.mode){var i=o.children.length-o.settings.minSlides,e=o.children.eq(i).position();b(-e.top,"reset",0)}}else{var e=o.children.eq(o.active.index*m()).position();o.active.index==x()-1&&(o.active.last=!0),void 0!=e&&("horizontal"==o.settings.mode?b(-e.left,"reset",0):"vertical"==o.settings.mode&&b(-e.top,"reset",0))}},b=function(t,e,i,s){if(o.usingCSS){var n="vertical"==o.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)";r.css("-"+o.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==e?(r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),D()})):"reset"==e?r.css(o.animProp,n):"ticker"==e&&(r.css("-"+o.cssPrefix+"-transition-timing-function","linear"),r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(s.resetValue,"reset",0),N()}))}else{var a={};a[o.animProp]=t,"slide"==e?r.animate(a,i,o.settings.easing,function(){D()}):"reset"==e?r.css(o.animProp,t):"ticker"==e&&r.animate(a,speed,"linear",function(){b(s.resetValue,"reset",0),N()})}},w=function(){for(var e="",i=x(),s=0;i>s;s++){var n="";o.settings.buildPager&&t.isFunction(o.settings.buildPager)?(n=o.settings.buildPager(s),o.pagerEl.addClass("bx-custom-pager")):(n=s+1,o.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+s+'" class="bx-pager-link">'+n+"</a></div>"}o.pagerEl.html(e)},T=function(){o.settings.pagerCustom?o.pagerEl=t(o.settings.pagerCustom):(o.pagerEl=t('<div class="bx-pager" />'),o.settings.pagerSelector?t(o.settings.pagerSelector).html(o.pagerEl):o.controls.el.addClass("bx-has-pager").append(o.pagerEl),w()),o.pagerEl.delegate("a","click",q)},C=function(){o.controls.next=t('<a class="bx-next" href="">'+o.settings.nextText+"</a>"),o.controls.prev=t('<a class="bx-prev" href="">'+o.settings.prevText+"</a>"),o.controls.next.bind("click",y),o.controls.prev.bind("click",z),o.settings.nextSelector&&t(o.settings.nextSelector).append(o.controls.next),o.settings.prevSelector&&t(o.settings.prevSelector).append(o.controls.prev),o.settings.nextSelector||o.settings.prevSelector||(o.controls.directionEl=t('<div class="bx-controls-direction" />'),o.controls.directionEl.append(o.controls.prev).append(o.controls.next),o.controls.el.addClass("bx-has-controls-direction").append(o.controls.directionEl))},E=function(){o.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+o.settings.startText+"</a></div>"),o.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+o.settings.stopText+"</a></div>"),o.controls.autoEl=t('<div class="bx-controls-auto" />'),o.controls.autoEl.delegate(".bx-start","click",k),o.controls.autoEl.delegate(".bx-stop","click",M),o.settings.autoControlsCombine?o.controls.autoEl.append(o.controls.start):o.controls.autoEl.append(o.controls.start).append(o.controls.stop),o.settings.autoControlsSelector?t(o.settings.autoControlsSelector).html(o.controls.autoEl):o.controls.el.addClass("bx-has-controls-auto").append(o.controls.autoEl),A(o.settings.autoStart?"stop":"start")},P=function(){o.children.each(function(){var e=t(this).find("img:first").attr("title");void 0!=e&&(""+e).length&&t(this).append('<div class="bx-caption"><span>'+e+"</span></div>")})},y=function(t){o.settings.auto&&r.stopAuto(),r.goToNextSlide(),t.preventDefault()},z=function(t){o.settings.auto&&r.stopAuto(),r.goToPrevSlide(),t.preventDefault()},k=function(t){r.startAuto(),t.preventDefault()},M=function(t){r.stopAuto(),t.preventDefault()},q=function(e){o.settings.auto&&r.stopAuto();var i=t(e.currentTarget),s=parseInt(i.attr("data-slide-index"));s!=o.active.index&&r.goToSlide(s),e.preventDefault()},I=function(e){var i=o.children.length;return"short"==o.settings.pagerType?(o.settings.maxSlides>1&&(i=Math.ceil(o.children.length/o.settings.maxSlides)),o.pagerEl.html(e+1+o.settings.pagerShortSeparator+i),void 0):(o.pagerEl.find("a").removeClass("active"),o.pagerEl.each(function(i,s){t(s).find("a").eq(e).addClass("active")}),void 0)},D=function(){if(o.settings.infiniteLoop){var t="";0==o.active.index?t=o.children.eq(0).position():o.active.index==x()-1&&o.carousel?t=o.children.eq((x()-1)*m()).position():o.active.index==o.children.length-1&&(t=o.children.eq(o.children.length-1).position()),"horizontal"==o.settings.mode?b(-t.left,"reset",0):"vertical"==o.settings.mode&&b(-t.top,"reset",0)}o.working=!1,o.settings.onSlideAfter(o.children.eq(o.active.index),o.oldIndex,o.active.index)},A=function(t){o.settings.autoControlsCombine?o.controls.autoEl.html(o.controls[t]):(o.controls.autoEl.find("a").removeClass("active"),o.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},W=function(){1==x()?(o.controls.prev.addClass("disabled"),o.controls.next.addClass("disabled")):!o.settings.infiniteLoop&&o.settings.hideControlOnEnd&&(0==o.active.index?(o.controls.prev.addClass("disabled"),o.controls.next.removeClass("disabled")):o.active.index==x()-1?(o.controls.next.addClass("disabled"),o.controls.prev.removeClass("disabled")):(o.controls.prev.removeClass("disabled"),o.controls.next.removeClass("disabled")))},H=function(){o.settings.autoDelay>0?setTimeout(r.startAuto,o.settings.autoDelay):r.startAuto(),o.settings.autoHover&&r.hover(function(){o.interval&&(r.stopAuto(!0),o.autoPaused=!0)},function(){o.autoPaused&&(r.startAuto(!0),o.autoPaused=null)})},L=function(){var e=0;if("next"==o.settings.autoDirection)r.append(o.children.clone().addClass("bx-clone"));else{r.prepend(o.children.clone().addClass("bx-clone"));var i=o.children.first().position();e="horizontal"==o.settings.mode?-i.left:-i.top}b(e,"reset",0),o.settings.pager=!1,o.settings.controls=!1,o.settings.autoControls=!1,o.settings.tickerHover&&!o.usingCSS&&o.viewport.hover(function(){r.stop()},function(){var e=0;o.children.each(function(){e+="horizontal"==o.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)});var i=o.settings.speed/e,s="horizontal"==o.settings.mode?"left":"top",n=i*(e-Math.abs(parseInt(r.css(s))));N(n)}),N()},N=function(t){speed=t?t:o.settings.speed;var e={left:0,top:0},i={left:0,top:0};"next"==o.settings.autoDirection?e=r.find(".bx-clone").first().position():i=o.children.first().position();var s="horizontal"==o.settings.mode?-e.left:-e.top,n="horizontal"==o.settings.mode?-i.left:-i.top,a={resetValue:n};b(s,"ticker",speed,a)},O=function(){o.touch={start:{x:0,y:0},end:{x:0,y:0}},o.viewport.bind("touchstart",X)},X=function(t){if(o.working)t.preventDefault();else{o.touch.originalPos=r.position();var e=t.originalEvent;o.touch.start.x=e.changedTouches[0].pageX,o.touch.start.y=e.changedTouches[0].pageY,o.viewport.bind("touchmove",Y),o.viewport.bind("touchend",V)}},Y=function(t){var e=t.originalEvent,i=Math.abs(e.changedTouches[0].pageX-o.touch.start.x),s=Math.abs(e.changedTouches[0].pageY-o.touch.start.y);if(3*i>s&&o.settings.preventDefaultSwipeX?t.preventDefault():3*s>i&&o.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!=o.settings.mode&&o.settings.oneToOneTouch){var n=0;if("horizontal"==o.settings.mode){var r=e.changedTouches[0].pageX-o.touch.start.x;n=o.touch.originalPos.left+r}else{var r=e.changedTouches[0].pageY-o.touch.start.y;n=o.touch.originalPos.top+r}b(n,"reset",0)}},V=function(t){o.viewport.unbind("touchmove",Y);var e=t.originalEvent,i=0;if(o.touch.end.x=e.changedTouches[0].pageX,o.touch.end.y=e.changedTouches[0].pageY,"fade"==o.settings.mode){var s=Math.abs(o.touch.start.x-o.touch.end.x);s>=o.settings.swipeThreshold&&(o.touch.start.x>o.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var s=0;"horizontal"==o.settings.mode?(s=o.touch.end.x-o.touch.start.x,i=o.touch.originalPos.left):(s=o.touch.end.y-o.touch.start.y,i=o.touch.originalPos.top),!o.settings.infiniteLoop&&(0==o.active.index&&s>0||o.active.last&&0>s)?b(i,"reset",200):Math.abs(s)>=o.settings.swipeThreshold?(0>s?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):b(i,"reset",200)}o.viewport.unbind("touchend",V)},B=function(){var e=t(window).width(),i=t(window).height();(a!=e||l!=i)&&(a=e,l=i,r.redrawSlider())};return r.goToSlide=function(e,i){if(!o.working&&o.active.index!=e)if(o.working=!0,o.oldIndex=o.active.index,o.active.index=0>e?x()-1:e>=x()?0:e,o.settings.onSlideBefore(o.children.eq(o.active.index),o.oldIndex,o.active.index),"next"==i?o.settings.onSlideNext(o.children.eq(o.active.index),o.oldIndex,o.active.index):"prev"==i&&o.settings.onSlidePrev(o.children.eq(o.active.index),o.oldIndex,o.active.index),o.active.last=o.active.index>=x()-1,o.settings.pager&&I(o.active.index),o.settings.controls&&W(),"fade"==o.settings.mode)o.settings.adaptiveHeight&&o.viewport.height()!=p()&&o.viewport.animate({height:p()},o.settings.adaptiveHeightSpeed),o.children.filter(":visible").fadeOut(o.settings.speed).css({zIndex:0}),o.children.eq(o.active.index).css("zIndex",51).fadeIn(o.settings.speed,function(){t(this).css("zIndex",50),D()});else{o.settings.adaptiveHeight&&o.viewport.height()!=p()&&o.viewport.animate({height:p()},o.settings.adaptiveHeightSpeed);var s=0,n={left:0,top:0};if(!o.settings.infiniteLoop&&o.carousel&&o.active.last)if("horizontal"==o.settings.mode){var a=o.children.eq(o.children.length-1);n=a.position(),s=o.viewport.width()-a.outerWidth()}else{var l=o.children.length-o.settings.minSlides;n=o.children.eq(l).position()}else if(o.carousel&&o.active.last&&"prev"==i){var d=1==o.settings.moveSlides?o.settings.maxSlides-m():(x()-1)*m()-(o.children.length-o.settings.maxSlides),a=r.children(".bx-clone").eq(d);n=a.position()}else if("next"==i&&0==o.active.index)n=r.find("> .bx-clone").eq(o.settings.maxSlides).position(),o.active.last=!1;else if(e>=0){var c=e*m();n=o.children.eq(c).position()}if("undefined"!=typeof n){var g="horizontal"==o.settings.mode?-(n.left-s):-n.top;b(g,"slide",o.settings.speed)}}},r.goToNextSlide=function(){if(o.settings.infiniteLoop||!o.active.last){var t=parseInt(o.active.index)+1;r.goToSlide(t,"next")}},r.goToPrevSlide=function(){if(o.settings.infiniteLoop||0!=o.active.index){var t=parseInt(o.active.index)-1;r.goToSlide(t,"prev")}},r.startAuto=function(t){o.interval||(o.interval=setInterval(function(){"next"==o.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},o.settings.pause),o.settings.autoControls&&1!=t&&A("stop"))},r.stopAuto=function(t){o.interval&&(clearInterval(o.interval),o.interval=null,o.settings.autoControls&&1!=t&&A("start"))},r.getCurrentSlide=function(){return o.active.index},r.getSlideCount=function(){return o.children.length},r.redrawSlider=function(){o.children.add(r.find(".bx-clone")).outerWidth(u()),o.viewport.css("height",p()),o.settings.ticker||S(),o.active.last&&(o.active.index=x()-1),o.active.index>=x()&&(o.active.last=!0),o.settings.pager&&!o.settings.pagerCustom&&(w(),I(o.active.index))},r.destroySlider=function(){o.initialized&&(o.initialized=!1,t(".bx-clone",this).remove(),o.children.each(function(){void 0!=t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),void 0!=t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),o.controls.el&&o.controls.el.remove(),o.controls.next&&o.controls.next.remove(),o.controls.prev&&o.controls.prev.remove(),o.pagerEl&&o.pagerEl.remove(),t(".bx-caption",this).remove(),o.controls.autoEl&&o.controls.autoEl.remove(),clearInterval(o.interval),o.settings.responsive&&t(window).unbind("resize",B))},r.reloadSlider=function(t){void 0!=t&&(n=t),r.destroySlider(),d()},d(),this}}(jQuery);
/* ---------------------------------------- /includes/jsbin/jquery.cookie.js ---------------------------------------- */
/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function (factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD. Register as anonymous module.
		define(['jquery'], factory);
	} else {
		// Browser globals.
		factory(jQuery);
	}
}(function ($) {

	var pluses = /\+/g;

	function decode(s) {
		if (config.raw) {
			return s;
		}
		return decodeURIComponent(s.replace(pluses, ' '));
	}

	function decodeAndParse(s) {
		if (s.indexOf('"') === 0) {
			// This is a quoted cookie as according to RFC2068, unescape...
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}

		s = decode(s);

		try {
			return config.json ? JSON.parse(s) : s;
		} catch(e) {}
	}

	var config = $.cookie = function (key, value, options) {

		// Write
		if (value !== undefined) {
			options = $.extend({}, config.defaults, options);

			if (typeof options.expires === 'number') {
				var days = options.expires, t = options.expires = new Date();
				t.setDate(t.getDate() + days);
			}

			value = config.json ? JSON.stringify(value) : String(value);

			return (document.cookie = [
				config.raw ? key : encodeURIComponent(key),
				'=',
				config.raw ? value : encodeURIComponent(value),
				options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
				options.path    ? '; path=' + options.path : '',
				options.domain  ? '; domain=' + options.domain : '',
				options.secure  ? '; secure' : ''
			].join(''));
		}

		// Read
		var cookies = document.cookie.split('; ');
		var result = key ? undefined : {};
		for (var i = 0, l = cookies.length; i < l; i++) {
			var parts = cookies[i].split('=');
			var name = decode(parts.shift());
			var cookie = parts.join('=');

			if (key && key === name) {
				result = decodeAndParse(cookie);
				break;
			}

			if (!key) {
				result[name] = decodeAndParse(cookie);
			}
		}

		return result;
	};

	config.defaults = {};

	$.removeCookie = function (key, options) {
		if ($.cookie(key) !== undefined) {
			// Must not alter options, thus extending a fresh object...
			$.cookie(key, '', $.extend({}, options, { expires: -1 }));
			return true;
		}
		return false;
	};

}));

/* ---------------------------------------- /includes/jsbin/jquery.deparam.js ---------------------------------------- */
/*
  jQuery deparam is an extraction of the deparam method from Ben Alman's jQuery BBQ
  http://benalman.com/projects/jquery-bbq-plugin/
*/
(function ($) {
  $.deparam = function (params, coerce) {
    var obj = {},
        coerce_types = { 'true': !0, 'false': !1, 'null': null };
      
    // Iterate over all name=value pairs.
    $.each(params.replace(/\+/g, ' ').split('&'), function (j,v) {
      var param = v.split('='),
          key = decodeURIComponent(param[0]),
          val,
          cur = obj,
          i = 0,
            
          // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it
          // into its component parts.
          keys = key.split(']['),
          keys_last = keys.length - 1;
        
      // If the first keys part contains [ and the last ends with ], then []
      // are correctly balanced.
      if (/\[/.test(keys[0]) && /\]$/.test(keys[keys_last])) {
        // Remove the trailing ] from the last keys part.
        keys[keys_last] = keys[keys_last].replace(/\]$/, '');
          
        // Split first keys part into two parts on the [ and add them back onto
        // the beginning of the keys array.
        keys = keys.shift().split('[').concat(keys);
          
        keys_last = keys.length - 1;
      } else {
        // Basic 'foo' style key.
        keys_last = 0;
      }
        
      // Are we dealing with a name=value pair, or just a name?
      if (param.length === 2) {
        val = decodeURIComponent(param[1]);
          
        // Coerce values.
        if (coerce) {
          val = val && !isNaN(val)              ? +val              // number
              : val === 'undefined'             ? undefined         // undefined
              : coerce_types[val] !== undefined ? coerce_types[val] // true, false, null
              : val;                                                // string
        }
          
        if ( keys_last ) {
          // Complex key, build deep object structure based on a few rules:
          // * The 'cur' pointer starts at the object top-level.
          // * [] = array push (n is set to array length), [n] = array if n is 
          //   numeric, otherwise object.
          // * If at the last keys part, set the value.
          // * For each keys part, if the current level is undefined create an
          //   object or array based on the type of the next keys part.
          // * Move the 'cur' pointer to the next level.
          // * Rinse & repeat.
          for (; i <= keys_last; i++) {
            key = keys[i] === '' ? cur.length : keys[i];
            cur = cur[key] = i < keys_last
              ? cur[key] || (keys[i+1] && isNaN(keys[i+1]) ? {} : [])
              : val;
          }
            
        } else {
          // Simple key, even simpler rules, since only scalars and shallow
          // arrays are allowed.
            
          if ($.isArray(obj[key])) {
            // val is already an array, so push on the next value.
            obj[key].push( val );
              
          } else if (obj[key] !== undefined) {
            // val isn't an array, but since a second value has been specified,
            // convert val into an array.
            obj[key] = [obj[key], val];
              
          } else {
            // val is a scalar.
            obj[key] = val;
          }
        }
          
      } else if (key) {
        // No value was defined, so set something meaningful.
        obj[key] = coerce
          ? undefined
          : '';
      }
    });
      
    return obj;
  };
})(jQuery);

/* ---------------------------------------- /includes/jsbin/jquery.fancybox.pack.js ---------------------------------------- */
/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r,G,f,v){var J=f("html"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&"string"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf("%")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+"px"};f.extend(b,{version:"2.1.5",defaults:{padding:15,margin:20,
width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},
keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(I?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,
openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,
isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0)))return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;"object"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data("fancybox-href")||c.attr("href"),title:c.data("fancybox-title")||c.attr("title"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,
c.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||"";m=(j=d.content||k.content)?"html":d.type||k.type;!m&&k.isDom&&(m=c.data("fancybox-type"),m||(m=(m=c.prop("class").match(/fancybox\.(\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m="image":b.isSWF(g)?m="swf":"#"===g.charAt(0)?m="inline":q(c)&&(m="html",j=c)),"ajax"===m&&(l=g.split(/\s+/,2),g=l.shift(),l=l.shift()));j||("inline"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):k.isDom&&(j=c):"html"===m?j=g:!m&&(!g&&
k.isDom)&&(m="inline",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),b.coming=null,b.current||
b._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=
setTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1))b.player.isActive=!0,p.bind({"onCancel.player beforeClose.player":c,"onUpdate.player":e,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")}else c()},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,"next"))},prev:function(a){var d=b.current;
d&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,"prev"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?"next":"prev"],b.router=e||"jumpto",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&"scroll"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=
a&&a.type,e=!d||"orientationchange"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass("fancybox-tmp"),(e||"load"===d||"resize"===d&&c.autoResize)&&b._setDimension(),"scroll"===d&&c.canShrink||b.reposition(a),b.trigger("onUpdate"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView="boolean"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),
b.update())},hideLoading:function(){p.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");p.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),b.cancel()});b.defaults.fixed||(d=b.getViewport(),a.css({position:"absolute",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),
y:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");p.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var a=b.current,d;a&&(n.bind("orientationchange.fb"+(s?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),b.update),(d=a.keys)&&p.bind("keydown.fb",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;
if(27===c&&b.coming)return!1;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is("[contenteditable]")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v)return b[d](k[c]),e.preventDefault(),!1;if(-1<f.inArray(c,k))return b[d](),e.preventDefault(),!1})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind("mousewheel.fb",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)j=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&
(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k)b.prev(0<g?"down":"left");else if(0>g||0>k)b.next(0>g?"up":"right");d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e)return!1;c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a]))b.helpers[d][a](f.extend(!0,
{},b.helpers[d].defaults,e),c)});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e)return!1;d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;"number"===f.type(e)&&(d.margin=[e,e,e,e]);"number"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,
mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);"auto"===d.width&&(d.autoWidth=!0);"auto"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger("beforeLoad"))b.coming=null;else{c=d.type;e=d.href;if(!c)return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1;b.isActive=!0;if("image"===c||"swf"===c)d.autoHeight=d.autoWidth=!1,d.scrolling="visible";"image"===c&&(d.aspectRatio=
!0);"iframe"===c&&s&&(d.scrolling="scroll");d.wrap=f(d.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+c+" fancybox-tmp "+d.wrapCSS).appendTo(d.parent||"body");f.extend(d,{skin:f(".fancybox-skin",d.wrap),outer:f(".fancybox-outer",d.wrap),inner:f(".fancybox-inner",d.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,b){d.skin.css("padding"+b,w(d.padding[a]))});b.trigger("onReady");if("inline"===c||"html"===c){if(!d.content||!d.content.length)return b._error("content")}else if(!e)return b._error("href");
"image"===c?b._loadImage():"ajax"===c?b._loadAjax():"iframe"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=
this.onerror=null;b._error("image")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&"abort"!==e?b._error("ajax",a):b.hideLoading()},success:function(d,e){"success"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":a.iframe.scrolling).attr("src",a.href);
f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one("load",function(){f(this).data("ready",1);s||f(this).bind("load.fb",b.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,
e-1):0,f,g;for(g=1;g<=c;g+=1)f=a[(d.index+g)%e],"image"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive)if(!1===b.trigger("afterLoad",a,d))a.wrap.stop(!0).trigger("onReset").remove(),b.coming=null;else{d&&(b.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,
outer:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case "inline":case "ajax":case "html":a.selector?e=f("<div>").html(e).find(a.selector):t(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",function(){f(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case "image":e=a.tpl.image.replace("{href}",
g);break;case "swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',h="",f.each(a.swf,function(a,b){e+='<param name="'+a+'" value="'+b+'"></param>';h+=" "+a+'="'+b+'"'}),e+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger("beforeShow");a.inner.css("overflow","yes"===k?"scroll":
"no"===k?"hidden":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod)b.transitions[d.prevMethod]()}else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?
h.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if("iframe"===h.type){if(H=h.content,h.autoHeight&&1===H.data("ready"))try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find("body"),q&&F.css("overflow-x","hidden"),A=F.outerHeight(!0))}catch(G){}}else if(h.autoWidth||
h.autoHeight)g.addClass("fancybox-tmp"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp");c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,"w")-z:m);n=l(E(n)?l(n,"w")-z:n);u=l(E(u)?l(u,"h")-t:u);p=l(E(p)?l(p,"h")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&
"iframe"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView)if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio)for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);)j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height();else c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)));q&&("auto"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();
y=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height("auto")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:"absolute",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&
!a&&g<=e.h&&f<=e.w?c.position="fixed":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css("overflow","visible").addClass("fancybox-opened"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){!f(d.target).is("a")&&!f(d.target).parent().is("a")&&(d.preventDefault(),
b[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=
a||b.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(":visible"))&&(e=d.find("img:first"),e.length||(e=d));t(e)?(c=e.offset(),e.is("img")&&(f=e.outerWidth(),g=e.outerHeight())):
(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===b.wrap.css("position")||a.locked)c.top-=m.y,c.left-=m.x;return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if("width"===f||"height"===f)e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c="width"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l("width"===f?c:c-g*e)),b.inner[f](l("width"===
f?c:c-g*e-h*e))},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c="elastic"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):"fade"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:"none"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e="elastic"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,
{duration:"none"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;"elastic"===d&&(g="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(e[g]=w(l(e[g])-200),c[g]="+=200px"):(e[g]=w(l(e[g])+200),c[g]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=
b.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;"elastic"===d&&(e["down"===c||"up"===c?"top":"left"]=("up"===c||"left"===c?"-":"+")+"=200px");a.wrap.animate(e,{duration:"none"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f("html"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=
f('<div class="fancybox-overlay"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(n.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){if(f(a.target).hasClass("fancybox-overlay"))return b.isActive?
b.close():d.close(),!1});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(f(".fancybox-margin").removeClass("fancybox-margin"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass("fancybox-lock"),n.scrollTop(a).scrollLeft(b));f(".fancybox-overlay").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a="100%",b;this.overlay.width(a).height("100%");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),
p.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(".fancybox-overlay").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f("*").filter(function(){return"fixed"===
f(this).css("position")&&!f(this).hasClass("fancybox-overlay")&&!f(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass("fancybox-lock"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var d=
b.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&""!==f.trim(e)){d=f('<div class="fancybox-title fancybox-title-'+c+'-wrap">'+e+"</div>");switch(c){case "inside":c=b.skin;break;case "outside":c=b.wrap;break;case "over":c=b.inner;break;default:c=b.skin,d.appendTo("body"),I&&d.width(d.width()),d.wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(l(d.css("margin-bottom")))}d["top"===a.position?"prependTo":"appendTo"](c)}}};f.fn.fancybox=function(a){var d,
e=f(this),c=this.selector||"",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(".fancybox-wrap")&&(k=a.groupAttr||"data-fancybox-group",l=h.attr(k),l||(k="rel",l=h.get(0)[k]),l&&(""!==l&&"nofollow"!==l)&&(h=c.length?f(c):e,h=h.filter("["+k+'="'+l+'"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind("click.fb-start").bind("click.fb-start",k):p.undelegate(c,"click.fb-start").delegate(c+
":not('.fancybox-item, .fancybox-nav')","click.fb-start",k);this.filter("[data-fancybox-start=1]").trigger("click");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style="position:fixed;top:20px;"></div>').appendTo("body");var e=20===
d[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")});a=f(r).width();J.addClass("fancybox-lock-test");d=f(r).width();J.removeClass("fancybox-lock-test");f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);
/* ---------------------------------------- /includes/jsbin/jquery.fancybox-media.js ---------------------------------------- */
/*!
 * Media helper for fancyBox
 * version: 1.0.3 (Mon, 13 Aug 2012)
 * @requires fancyBox v2.0 or later
 *
 * Usage:
 *     $(".fancybox").fancybox({
 *         helpers : {
 *             media: true
 *         }
 *     });
 *
 * Set custom URL parameters:
 *     $(".fancybox").fancybox({
 *         helpers : {
 *             media: {
 *                 youtube : {
 *                     params : {
 *                         autoplay : 0
 *                     }
 *                 }
 *             }
 *         }
 *     });
 *
 * Or:
 *     $(".fancybox").fancybox({,
 *	       helpers : {
 *             media: true
 *         },
 *         youtube : {
 *             autoplay: 0
 *         }
 *     });
 *
 *  Supports:
 *
 *      Youtube
 *          http://www.youtube.com/watch?v=opj24KnzrWo
 *          http://youtu.be/opj24KnzrWo
 *      Vimeo
 *          http://vimeo.com/40648169
 *          http://vimeo.com/channels/staffpicks/38843628
 *          http://vimeo.com/groups/surrealism/videos/36516384
 *          http://player.vimeo.com/video/45074303
 *      Metacafe
 *          http://www.metacafe.com/watch/7635964/dr_seuss_the_lorax_movie_trailer/
 *          http://www.metacafe.com/watch/7635964/
 *      Dailymotion
 *          http://www.dailymotion.com/video/xoytqh_dr-seuss-the-lorax-premiere_people
 *      Twitvid
 *          http://twitvid.com/QY7MD
 *      Twitpic
 *          http://twitpic.com/7p93st
 *      Instagram
 *          http://instagr.am/p/IejkuUGxQn/
 *          http://instagram.com/p/IejkuUGxQn/
 *      Google maps
 *          http://maps.google.com/maps?q=Eiffel+Tower,+Avenue+Gustave+Eiffel,+Paris,+France&t=h&z=17
 *          http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16
 *          http://maps.google.com/?ll=48.859463,2.292626&spn=0.000965,0.002642&t=m&z=19&layer=c&cbll=48.859524,2.292532&panoid=YJ0lq28OOy3VT2IqIuVY0g&cbp=12,151.58,,0,-15.56
 */
(function ($) {
	"use strict";

	//Shortcut for fancyBox object
	var F = $.fancybox,
		format = function( url, rez, params ) {
			params = params || '';

			if ( $.type( params ) === "object" ) {
				params = $.param(params, true);
			}

			$.each(rez, function(key, value) {
				url = url.replace( '$' + key, value || '' );
			});

			if (params.length) {
				url += ( url.indexOf('?') > 0 ? '&' : '?' ) + params;
			}

			return url;
		};

	//Add helper object
	F.helpers.media = {
		types : {
			youtube : {
				matcher : /(youtube\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed)?([\w-]{11}|\?listType=(.*)&list=(.*)).*/i,
				params  : {
					autoplay    : 1,
					autohide    : 1,
					fs          : 1,
					rel         : 0,
					hd          : 1,
					wmode       : 'opaque',
					enablejsapi : 1
				},
				type : 'iframe',
				url  : '//www.youtube.com/embed/$3'
			},
			vimeo : {
				matcher : /(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,
				params  : {
					autoplay      : 1,
					hd            : 1,
					show_title    : 1,
					show_byline   : 1,
					show_portrait : 0,
					color         : '',
					fullscreen    : 1
				},
				type : 'iframe',
				url  : '//player.vimeo.com/video/$1'
			},
			metacafe : {
				matcher : /metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,
				params  : {
					autoPlay : 'yes'
				},
				type : 'swf',
				url  : function( rez, params, obj ) {
					obj.swf.flashVars = 'playerVars=' + $.param( params, true );

					return '//www.metacafe.com/fplayer/' + rez[1] + '/.swf';
				}
			},
			dailymotion : {
				matcher : /dailymotion.com\/video\/(.*)\/?(.*)/,
				params  : {
					additionalInfos : 0,
					autoStart : 1
				},
				type : 'swf',
				url  : '//www.dailymotion.com/swf/video/$1'
			},
			twitvid : {
				matcher : /twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,
				params  : {
					autoplay : 0
				},
				type : 'iframe',
				url  : '//www.twitvid.com/embed.php?guid=$1'
			},
			twitpic : {
				matcher : /twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,
				type : 'image',
				url  : '//twitpic.com/show/full/$1/'
			},
			instagram : {
				matcher : /(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,
				type : 'image',
				url  : '//$1/p/$2/media/'
			},
			google_maps : {
				matcher : /maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,
				type : 'iframe',
				url  : function( rez ) {
					return '//maps.google.' + rez[1] + '/' + rez[3] + '' + rez[4] + '&output=' + (rez[4].indexOf('layer=c') > 0 ? 'svembed' : 'embed');
				}
			}
		},

		beforeLoad : function(opts, obj) {
			var url   = obj.href || '',
				type  = false,
				what,
				item,
				rez,
				params;

			for (what in this.types) {
				item = this.types[ what ];
				rez  = url.match( item.matcher );

				if (rez) {
					type   = item.type;
					params = $.extend(true, {}, item.params, obj[ what ] || ($.isPlainObject(opts[ what ]) ? opts[ what ].params : null));

					url = $.type( item.url ) === "function" ? item.url.call( this, rez, params, obj ) : format( item.url, rez, params );

					break;
				}
			}

			if (type) {
				obj.href = url;
				obj.type = type;

				obj.autoHeight = false;
			}
		}
	};

}(jQuery));
/* ---------------------------------------- /includes/jsbin/jquery.form.js ---------------------------------------- */
/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
/*global ActiveXObject */

// AMD support
(function (factory) {
    "use strict";
    if (typeof define === 'function' && define.amd) {
        // using AMD; register as anon module
        define(['jquery'], factory);
    } else {
        // no AMD; invoke directly
        factory( (typeof(jQuery) != 'undefined') ? jQuery : window.Zepto );
    }
}

(function($) {
"use strict";

/*
    Usage Note:
    -----------
    Do not use both ajaxSubmit and ajaxForm on the same form.  These
    functions are mutually exclusive.  Use ajaxSubmit if you want
    to bind your own submit handler to the form.  For example,

    $(document).ready(function() {
        $('#myForm').on('submit', function(e) {
            e.preventDefault(); // <-- important
            $(this).ajaxSubmit({
                target: '#output'
            });
        });
    });

    Use ajaxForm when you want the plugin to manage all the event binding
    for you.  For example,

    $(document).ready(function() {
        $('#myForm').ajaxForm({
            target: '#output'
        });
    });

    You can also use ajaxForm with delegation (requires jQuery v1.7+), so the
    form does not have to exist when you invoke ajaxForm:

    $('#myForm').ajaxForm({
        delegation: true,
        target: '#output'
    });

    When using ajaxForm, the ajaxSubmit function will be invoked for you
    at the appropriate time.
*/

/**
 * Feature detection
 */
var feature = {};
feature.fileapi = $("<input type='file'/>").get(0).files !== undefined;
feature.formdata = window.FormData !== undefined;

var hasProp = !!$.fn.prop;

// attr2 uses prop when it can but checks the return type for
// an expected string.  this accounts for the case where a form
// contains inputs with names like "action" or "method"; in those
// cases "prop" returns the element
$.fn.attr2 = function() {
    if ( ! hasProp ) {
        return this.attr.apply(this, arguments);
    }
    var val = this.prop.apply(this, arguments);
    if ( ( val && val.jquery ) || typeof val === 'string' ) {
        return val;
    }
    return this.attr.apply(this, arguments);
};

/**
 * ajaxSubmit() provides a mechanism for immediately submitting
 * an HTML form using AJAX.
 */
$.fn.ajaxSubmit = function(options) {
    /*jshint scripturl:true */

    // fast fail if nothing selected (http://dev.jquery.com/ticket/2752)
    if (!this.length) {
        log('ajaxSubmit: skipping submit process - no element selected');
        return this;
    }

    var method, action, url, $form = this;

    if (typeof options == 'function') {
        options = { success: options };
    }
    else if ( options === undefined ) {
        options = {};
    }

    method = options.type || this.attr2('method');
    action = options.url  || this.attr2('action');

    url = (typeof action === 'string') ? $.trim(action) : '';
    url = url || window.location.href || '';
    if (url) {
        // clean url (don't include hash vaue)
        url = (url.match(/^([^#]+)/)||[])[1];
    }

    options = $.extend(true, {
        url:  url,
        success: $.ajaxSettings.success,
        type: method || $.ajaxSettings.type,
        iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'
    }, options);

    // hook for manipulating the form data before it is extracted;
    // convenient for use with rich editors like tinyMCE or FCKEditor
    var veto = {};
    this.trigger('form-pre-serialize', [this, options, veto]);
    if (veto.veto) {
        log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');
        return this;
    }

    // provide opportunity to alter form data before it is serialized
    if (options.beforeSerialize && options.beforeSerialize(this, options) === false) {
        log('ajaxSubmit: submit aborted via beforeSerialize callback');
        return this;
    }

    var traditional = options.traditional;
    if ( traditional === undefined ) {
        traditional = $.ajaxSettings.traditional;
    }

    var elements = [];
    var qx, a = this.formToArray(options.semantic, elements);
    if (options.data) {
        options.extraData = options.data;
        qx = $.param(options.data, traditional);
    }

    // give pre-submit callback an opportunity to abort the submit
    if (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {
        log('ajaxSubmit: submit aborted via beforeSubmit callback');
        return this;
    }

    // fire vetoable 'validate' event
    this.trigger('form-submit-validate', [a, this, options, veto]);
    if (veto.veto) {
        log('ajaxSubmit: submit vetoed via form-submit-validate trigger');
        return this;
    }

    var q = $.param(a, traditional);
    if (qx) {
        q = ( q ? (q + '&' + qx) : qx );
    }
    if (options.type.toUpperCase() == 'GET') {
        options.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;
        options.data = null;  // data is null for 'get'
    }
    else {
        options.data = q; // data is the query string for 'post'
    }

    var callbacks = [];
    if (options.resetForm) {
        callbacks.push(function() { $form.resetForm(); });
    }
    if (options.clearForm) {
        callbacks.push(function() { $form.clearForm(options.includeHidden); });
    }

    // perform a load on the target only if dataType is not provided
    if (!options.dataType && options.target) {
        var oldSuccess = options.success || function(){};
        callbacks.push(function(data) {
            var fn = options.replaceTarget ? 'replaceWith' : 'html';
            $(options.target)[fn](data).each(oldSuccess, arguments);
        });
    }
    else if (options.success) {
        callbacks.push(options.success);
    }

    options.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg
        var context = options.context || this ;    // jQuery 1.4+ supports scope context
        for (var i=0, max=callbacks.length; i < max; i++) {
            callbacks[i].apply(context, [data, status, xhr || $form, $form]);
        }
    };

    if (options.error) {
        var oldError = options.error;
        options.error = function(xhr, status, error) {
            var context = options.context || this;
            oldError.apply(context, [xhr, status, error, $form]);
        };
    }

     if (options.complete) {
        var oldComplete = options.complete;
        options.complete = function(xhr, status) {
            var context = options.context || this;
            oldComplete.apply(context, [xhr, status, $form]);
        };
    }

    // are there files to upload?

    // [value] (issue #113), also see comment:
    // https://github.com/malsup/form/commit/588306aedba1de01388032d5f42a60159eea9228#commitcomment-2180219
    var fileInputs = $('input[type=file]:enabled', this).filter(function() { return $(this).val() !== ''; });

    var hasFileInputs = fileInputs.length > 0;
    var mp = 'multipart/form-data';
    var multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);

    var fileAPI = feature.fileapi && feature.formdata;
    log("fileAPI :" + fileAPI);
    var shouldUseFrame = (hasFileInputs || multipart) && !fileAPI;

    var jqxhr;

    // options.iframe allows user to force iframe mode
    // 06-NOV-09: now defaulting to iframe mode if file input is detected
    if (options.iframe !== false && (options.iframe || shouldUseFrame)) {
        // hack to fix Safari hang (thanks to Tim Molendijk for this)
        // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d
        if (options.closeKeepAlive) {
            $.get(options.closeKeepAlive, function() {
                jqxhr = fileUploadIframe(a);
            });
        }
        else {
            jqxhr = fileUploadIframe(a);
        }
    }
    else if ((hasFileInputs || multipart) && fileAPI) {
        jqxhr = fileUploadXhr(a);
    }
    else {
        jqxhr = $.ajax(options);
    }

    $form.removeData('jqxhr').data('jqxhr', jqxhr);

    // clear element array
    for (var k=0; k < elements.length; k++) {
        elements[k] = null;
    }

    // fire 'notify' event
    this.trigger('form-submit-notify', [this, options]);
    return this;

    // utility fn for deep serialization
    function deepSerialize(extraData){
        var serialized = $.param(extraData, options.traditional).split('&');
        var len = serialized.length;
        var result = [];
        var i, part;
        for (i=0; i < len; i++) {
            // #252; undo param space replacement
            serialized[i] = serialized[i].replace(/\+/g,' ');
            part = serialized[i].split('=');
            // #278; use array instead of object storage, favoring array serializations
            result.push([decodeURIComponent(part[0]), decodeURIComponent(part[1])]);
        }
        return result;
    }

     // XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)
    function fileUploadXhr(a) {
        var formdata = new FormData();

        for (var i=0; i < a.length; i++) {
            formdata.append(a[i].name, a[i].value);
        }

        if (options.extraData) {
            var serializedData = deepSerialize(options.extraData);
            for (i=0; i < serializedData.length; i++) {
                if (serializedData[i]) {
                    formdata.append(serializedData[i][0], serializedData[i][1]);
                }
            }
        }

        options.data = null;

        var s = $.extend(true, {}, $.ajaxSettings, options, {
            contentType: false,
            processData: false,
            cache: false,
            type: method || 'POST'
        });

        if (options.uploadProgress) {
            // workaround because jqXHR does not expose upload property
            s.xhr = function() {
                var xhr = $.ajaxSettings.xhr();
                if (xhr.upload) {
                    xhr.upload.addEventListener('progress', function(event) {
                        var percent = 0;
                        var position = event.loaded || event.position; /*event.position is deprecated*/
                        var total = event.total;
                        if (event.lengthComputable) {
                            percent = Math.ceil(position / total * 100);
                        }
                        options.uploadProgress(event, position, total, percent);
                    }, false);
                }
                return xhr;
            };
        }

        s.data = null;
        var beforeSend = s.beforeSend;
        s.beforeSend = function(xhr, o) {
            //Send FormData() provided by user
            if (options.formData) {
                o.data = options.formData;
            }
            else {
                o.data = formdata;
            }
            if(beforeSend) {
                beforeSend.call(this, xhr, o);
            }
        };
        return $.ajax(s);
    }

    // private function for handling file uploads (hat tip to YAHOO!)
    function fileUploadIframe(a) {
        var form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;
        var deferred = $.Deferred();

        // #341
        deferred.abort = function(status) {
            xhr.abort(status);
        };

        if (a) {
            // ensure that every serialized input is still enabled
            for (i=0; i < elements.length; i++) {
                el = $(elements[i]);
                if ( hasProp ) {
                    el.prop('disabled', false);
                }
                else {
                    el.removeAttr('disabled');
                }
            }
        }

        s = $.extend(true, {}, $.ajaxSettings, options);
        s.context = s.context || s;
        id = 'jqFormIO' + (new Date().getTime());
        if (s.iframeTarget) {
            $io = $(s.iframeTarget);
            n = $io.attr2('name');
            if (!n) {
                $io.attr2('name', id);
            }
            else {
                id = n;
            }
        }
        else {
            $io = $('<iframe name="' + id + '" src="'+ s.iframeSrc +'" />');
            $io.css({ position: 'absolute', top: '-1000px', left: '-1000px' });
        }
        io = $io[0];


        xhr = { // mock object
            aborted: 0,
            responseText: null,
            responseXML: null,
            status: 0,
            statusText: 'n/a',
            getAllResponseHeaders: function() {},
            getResponseHeader: function() {},
            setRequestHeader: function() {},
            abort: function(status) {
                var e = (status === 'timeout' ? 'timeout' : 'aborted');
                log('aborting upload... ' + e);
                this.aborted = 1;

                try { // #214, #257
                    if (io.contentWindow.document.execCommand) {
                        io.contentWindow.document.execCommand('Stop');
                    }
                }
                catch(ignore) {}

                $io.attr('src', s.iframeSrc); // abort op in progress
                xhr.error = e;
                if (s.error) {
                    s.error.call(s.context, xhr, e, status);
                }
                if (g) {
                    $.event.trigger("ajaxError", [xhr, s, e]);
                }
                if (s.complete) {
                    s.complete.call(s.context, xhr, e);
                }
            }
        };

        g = s.global;
        // trigger ajax global events so that activity/block indicators work like normal
        if (g && 0 === $.active++) {
            $.event.trigger("ajaxStart");
        }
        if (g) {
            $.event.trigger("ajaxSend", [xhr, s]);
        }

        if (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {
            if (s.global) {
                $.active--;
            }
            deferred.reject();
            return deferred;
        }
        if (xhr.aborted) {
            deferred.reject();
            return deferred;
        }

        // add submitting element to data if we know it
        sub = form.clk;
        if (sub) {
            n = sub.name;
            if (n && !sub.disabled) {
                s.extraData = s.extraData || {};
                s.extraData[n] = sub.value;
                if (sub.type == "image") {
                    s.extraData[n+'.x'] = form.clk_x;
                    s.extraData[n+'.y'] = form.clk_y;
                }
            }
        }

        var CLIENT_TIMEOUT_ABORT = 1;
        var SERVER_ABORT = 2;

        function getDoc(frame) {
            /* it looks like contentWindow or contentDocument do not
             * carry the protocol property in ie8, when running under ssl
             * frame.document is the only valid response document, since
             * the protocol is know but not on the other two objects. strange?
             * "Same origin policy" http://en.wikipedia.org/wiki/Same_origin_policy
             */

            var doc = null;

            // IE8 cascading access check
            try {
                if (frame.contentWindow) {
                    doc = frame.contentWindow.document;
                }
            } catch(err) {
                // IE8 access denied under ssl & missing protocol
                log('cannot get iframe.contentWindow document: ' + err);
            }

            if (doc) { // successful getting content
                return doc;
            }

            try { // simply checking may throw in ie8 under ssl or mismatched protocol
                doc = frame.contentDocument ? frame.contentDocument : frame.document;
            } catch(err) {
                // last attempt
                log('cannot get iframe.contentDocument: ' + err);
                doc = frame.document;
            }
            return doc;
        }

        // Rails CSRF hack (thanks to Yvan Barthelemy)
        var csrf_token = $('meta[name=csrf-token]').attr('content');
        var csrf_param = $('meta[name=csrf-param]').attr('content');
        if (csrf_param && csrf_token) {
            s.extraData = s.extraData || {};
            s.extraData[csrf_param] = csrf_token;
        }

        // take a breath so that pending repaints get some cpu time before the upload starts
        function doSubmit() {
            // make sure form attrs are set
            var t = $form.attr2('target'),
                a = $form.attr2('action'),
                mp = 'multipart/form-data',
                et = $form.attr('enctype') || $form.attr('encoding') || mp;

            // update form attrs in IE friendly way
            form.setAttribute('target',id);
            if (!method || /post/i.test(method) ) {
                form.setAttribute('method', 'POST');
            }
            if (a != s.url) {
                form.setAttribute('action', s.url);
            }

            // ie borks in some cases when setting encoding
            if (! s.skipEncodingOverride && (!method || /post/i.test(method))) {
                $form.attr({
                    encoding: 'multipart/form-data',
                    enctype:  'multipart/form-data'
                });
            }

            // support timout
            if (s.timeout) {
                timeoutHandle = setTimeout(function() { timedOut = true; cb(CLIENT_TIMEOUT_ABORT); }, s.timeout);
            }

            // look for server aborts
            function checkState() {
                try {
                    var state = getDoc(io).readyState;
                    log('state = ' + state);
                    if (state && state.toLowerCase() == 'uninitialized') {
                        setTimeout(checkState,50);
                    }
                }
                catch(e) {
                    log('Server abort: ' , e, ' (', e.name, ')');
                    cb(SERVER_ABORT);
                    if (timeoutHandle) {
                        clearTimeout(timeoutHandle);
                    }
                    timeoutHandle = undefined;
                }
            }

            // add "extra" data to form if provided in options
            var extraInputs = [];
            try {
                if (s.extraData) {
                    for (var n in s.extraData) {
                        if (s.extraData.hasOwnProperty(n)) {
                           // if using the $.param format that allows for multiple values with the same name
                           if($.isPlainObject(s.extraData[n]) && s.extraData[n].hasOwnProperty('name') && s.extraData[n].hasOwnProperty('value')) {
                               extraInputs.push(
                               $('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value)
                                   .appendTo(form)[0]);
                           } else {
                               extraInputs.push(
                               $('<input type="hidden" name="'+n+'">').val(s.extraData[n])
                                   .appendTo(form)[0]);
                           }
                        }
                    }
                }

                if (!s.iframeTarget) {
                    // add iframe to doc and submit the form
                    $io.appendTo('body');
                }
                if (io.attachEvent) {
                    io.attachEvent('onload', cb);
                }
                else {
                    io.addEventListener('load', cb, false);
                }
                setTimeout(checkState,15);

                try {
                    form.submit();
                } catch(err) {
                    // just in case form has element with name/id of 'submit'
                    var submitFn = document.createElement('form').submit;
                    submitFn.apply(form);
                }
            }
            finally {
                // reset attrs and remove "extra" input elements
                form.setAttribute('action',a);
                form.setAttribute('enctype', et); // #380
                if(t) {
                    form.setAttribute('target', t);
                } else {
                    $form.removeAttr('target');
                }
                $(extraInputs).remove();
            }
        }

        if (s.forceSync) {
            doSubmit();
        }
        else {
            setTimeout(doSubmit, 10); // this lets dom updates render
        }

        var data, doc, domCheckCount = 50, callbackProcessed;

        function cb(e) {
            if (xhr.aborted || callbackProcessed) {
                return;
            }

            doc = getDoc(io);
            if(!doc) {
                log('cannot access response document');
                e = SERVER_ABORT;
            }
            if (e === CLIENT_TIMEOUT_ABORT && xhr) {
                xhr.abort('timeout');
                deferred.reject(xhr, 'timeout');
                return;
            }
            else if (e == SERVER_ABORT && xhr) {
                xhr.abort('server abort');
                deferred.reject(xhr, 'error', 'server abort');
                return;
            }

            if (!doc || doc.location.href == s.iframeSrc) {
                // response not received yet
                if (!timedOut) {
                    return;
                }
            }
            if (io.detachEvent) {
                io.detachEvent('onload', cb);
            }
            else {
                io.removeEventListener('load', cb, false);
            }

            var status = 'success', errMsg;
            try {
                if (timedOut) {
                    throw 'timeout';
                }

                var isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);
                log('isXml='+isXml);
                if (!isXml && window.opera && (doc.body === null || !doc.body.innerHTML)) {
                    if (--domCheckCount) {
                        // in some browsers (Opera) the iframe DOM is not always traversable when
                        // the onload callback fires, so we loop a bit to accommodate
                        log('requeing onLoad callback, DOM not available');
                        setTimeout(cb, 250);
                        return;
                    }
                    // let this fall through because server response could be an empty document
                    //log('Could not access iframe DOM after mutiple tries.');
                    //throw 'DOMException: not available';
                }

                //log('response detected');
                var docRoot = doc.body ? doc.body : doc.documentElement;
                xhr.responseText = docRoot ? docRoot.innerHTML : null;
                xhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;
                if (isXml) {
                    s.dataType = 'xml';
                }
                xhr.getResponseHeader = function(header){
                    var headers = {'content-type': s.dataType};
                    return headers[header.toLowerCase()];
                };
                // support for XHR 'status' & 'statusText' emulation :
                if (docRoot) {
                    xhr.status = Number( docRoot.getAttribute('status') ) || xhr.status;
                    xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;
                }

                var dt = (s.dataType || '').toLowerCase();
                var scr = /(json|script|text)/.test(dt);
                if (scr || s.textarea) {
                    // see if user embedded response in textarea
                    var ta = doc.getElementsByTagName('textarea')[0];
                    if (ta) {
                        xhr.responseText = ta.value;
                        // support for XHR 'status' & 'statusText' emulation :
                        xhr.status = Number( ta.getAttribute('status') ) || xhr.status;
                        xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;
                    }
                    else if (scr) {
                        // account for browsers injecting pre around json response
                        var pre = doc.getElementsByTagName('pre')[0];
                        var b = doc.getElementsByTagName('body')[0];
                        if (pre) {
                            xhr.responseText = pre.textContent ? pre.textContent : pre.innerText;
                        }
                        else if (b) {
                            xhr.responseText = b.textContent ? b.textContent : b.innerText;
                        }
                    }
                }
                else if (dt == 'xml' && !xhr.responseXML && xhr.responseText) {
                    xhr.responseXML = toXml(xhr.responseText);
                }

                try {
                    data = httpData(xhr, dt, s);
                }
                catch (err) {
                    status = 'parsererror';
                    xhr.error = errMsg = (err || status);
                }
            }
            catch (err) {
                log('error caught: ',err);
                status = 'error';
                xhr.error = errMsg = (err || status);
            }

            if (xhr.aborted) {
                log('upload aborted');
                status = null;
            }

            if (xhr.status) { // we've set xhr.status
                status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';
            }

            // ordering of these callbacks/triggers is odd, but that's how $.ajax does it
            if (status === 'success') {
                if (s.success) {
                    s.success.call(s.context, data, 'success', xhr);
                }
                deferred.resolve(xhr.responseText, 'success', xhr);
                if (g) {
                    $.event.trigger("ajaxSuccess", [xhr, s]);
                }
            }
            else if (status) {
                if (errMsg === undefined) {
                    errMsg = xhr.statusText;
                }
                if (s.error) {
                    s.error.call(s.context, xhr, status, errMsg);
                }
                deferred.reject(xhr, 'error', errMsg);
                if (g) {
                    $.event.trigger("ajaxError", [xhr, s, errMsg]);
                }
            }

            if (g) {
                $.event.trigger("ajaxComplete", [xhr, s]);
            }

            if (g && ! --$.active) {
                $.event.trigger("ajaxStop");
            }

            if (s.complete) {
                s.complete.call(s.context, xhr, status);
            }

            callbackProcessed = true;
            if (s.timeout) {
                clearTimeout(timeoutHandle);
            }

            // clean up
            setTimeout(function() {
                if (!s.iframeTarget) {
                    $io.remove();
                }
                else { //adding else to clean up existing iframe response.
                    $io.attr('src', s.iframeSrc);
                }
                xhr.responseXML = null;
            }, 100);
        }

        var toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)
            if (window.ActiveXObject) {
                doc = new ActiveXObject('Microsoft.XMLDOM');
                doc.async = 'false';
                doc.loadXML(s);
            }
            else {
                doc = (new DOMParser()).parseFromString(s, 'text/xml');
            }
            return (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;
        };
        var parseJSON = $.parseJSON || function(s) {
            /*jslint evil:true */
            return window['eval']('(' + s + ')');
        };

        var httpData = function( xhr, type, s ) { // mostly lifted from jq1.4.4

            var ct = xhr.getResponseHeader('content-type') || '',
                xml = type === 'xml' || !type && ct.indexOf('xml') >= 0,
                data = xml ? xhr.responseXML : xhr.responseText;

            if (xml && data.documentElement.nodeName === 'parsererror') {
                if ($.error) {
                    $.error('parsererror');
                }
            }
            if (s && s.dataFilter) {
                data = s.dataFilter(data, type);
            }
            if (typeof data === 'string') {
                if (type === 'json' || !type && ct.indexOf('json') >= 0) {
                    data = parseJSON(data);
                } else if (type === "script" || !type && ct.indexOf("javascript") >= 0) {
                    $.globalEval(data);
                }
            }
            return data;
        };

        return deferred;
    }
};

/**
 * ajaxForm() provides a mechanism for fully automating form submission.
 *
 * The advantages of using this method instead of ajaxSubmit() are:
 *
 * 1: This method will include coordinates for <input type="image" /> elements (if the element
 *    is used to submit the form).
 * 2. This method will include the submit element's name/value data (for the element that was
 *    used to submit the form).
 * 3. This method binds the submit() method to the form for you.
 *
 * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely
 * passes the options argument along after properly binding events for submit elements and
 * the form itself.
 */
$.fn.ajaxForm = function(options) {
    options = options || {};
    options.delegation = options.delegation && $.isFunction($.fn.on);

    // in jQuery 1.3+ we can fix mistakes with the ready state
    if (!options.delegation && this.length === 0) {
        var o = { s: this.selector, c: this.context };
        if (!$.isReady && o.s) {
            log('DOM not ready, queuing ajaxForm');
            $(function() {
                $(o.s,o.c).ajaxForm(options);
            });
            return this;
        }
        // is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()
        log('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));
        return this;
    }

    if ( options.delegation ) {
        $(document)
            .off('submit.form-plugin', this.selector, doAjaxSubmit)
            .off('click.form-plugin', this.selector, captureSubmittingElement)
            .on('submit.form-plugin', this.selector, options, doAjaxSubmit)
            .on('click.form-plugin', this.selector, options, captureSubmittingElement);
        return this;
    }

    return this.ajaxFormUnbind()
        .bind('submit.form-plugin', options, doAjaxSubmit)
        .bind('click.form-plugin', options, captureSubmittingElement);
};

// private event handlers
function doAjaxSubmit(e) {
    /*jshint validthis:true */
    var options = e.data;
    if (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed
        e.preventDefault();
        $(e.target).ajaxSubmit(options); // #365
    }
}

function captureSubmittingElement(e) {
    /*jshint validthis:true */
    var target = e.target;
    var $el = $(target);
    if (!($el.is("[type=submit],[type=image]"))) {
        // is this a child element of the submit el?  (ex: a span within a button)
        var t = $el.closest('[type=submit]');
        if (t.length === 0) {
            return;
        }
        target = t[0];
    }
    var form = this;
    form.clk = target;
    if (target.type == 'image') {
        if (e.offsetX !== undefined) {
            form.clk_x = e.offsetX;
            form.clk_y = e.offsetY;
        } else if (typeof $.fn.offset == 'function') {
            var offset = $el.offset();
            form.clk_x = e.pageX - offset.left;
            form.clk_y = e.pageY - offset.top;
        } else {
            form.clk_x = e.pageX - target.offsetLeft;
            form.clk_y = e.pageY - target.offsetTop;
        }
    }
    // clear form vars
    setTimeout(function() { form.clk = form.clk_x = form.clk_y = null; }, 100);
}


// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm
$.fn.ajaxFormUnbind = function() {
    return this.unbind('submit.form-plugin click.form-plugin');
};

/**
 * formToArray() gathers form element data into an array of objects that can
 * be passed to any of the following ajax functions: $.get, $.post, or load.
 * Each object in the array has both a 'name' and 'value' property.  An example of
 * an array for a simple login form might be:
 *
 * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]
 *
 * It is this array that is passed to pre-submit callback functions provided to the
 * ajaxSubmit() and ajaxForm() methods.
 */
$.fn.formToArray = function(semantic, elements) {
    var a = [];
    if (this.length === 0) {
        return a;
    }

    var form = this[0];
    var formId = this.attr('id');
    var els = semantic ? form.getElementsByTagName('*') : form.elements;
    var els2;

    if (els && !/MSIE [678]/.test(navigator.userAgent)) { // #390
        els = $(els).get();  // convert to standard array
    }

    // #386; account for inputs outside the form which use the 'form' attribute
    if ( formId ) {
        els2 = $(':input[form="' + formId + '"]').get(); // hat tip @thet
        if ( els2.length ) {
            els = (els || []).concat(els2);
        }
    }

    if (!els || !els.length) {
        return a;
    }

    var i,j,n,v,el,max,jmax;
    for(i=0, max=els.length; i < max; i++) {
        el = els[i];
        n = el.name;
        if (!n || el.disabled) {
            continue;
        }

        if (semantic && form.clk && el.type == "image") {
            // handle image inputs on the fly when semantic == true
            if(form.clk == el) {
                a.push({name: n, value: $(el).val(), type: el.type });
                a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});
            }
            continue;
        }

        v = $.fieldValue(el, true);
        if (v && v.constructor == Array) {
            if (elements) {
                elements.push(el);
            }
            for(j=0, jmax=v.length; j < jmax; j++) {
                a.push({name: n, value: v[j]});
            }
        }
        else if (feature.fileapi && el.type == 'file') {
            if (elements) {
                elements.push(el);
            }
            var files = el.files;
            if (files.length) {
                for (j=0; j < files.length; j++) {
                    a.push({name: n, value: files[j], type: el.type});
                }
            }
            else {
                // #180
                a.push({ name: n, value: '', type: el.type });
            }
        }
        else if (v !== null && typeof v != 'undefined') {
            if (elements) {
                elements.push(el);
            }
            a.push({name: n, value: v, type: el.type, required: el.required});
        }
    }

    if (!semantic && form.clk) {
        // input type=='image' are not found in elements array! handle it here
        var $input = $(form.clk), input = $input[0];
        n = input.name;
        if (n && !input.disabled && input.type == 'image') {
            a.push({name: n, value: $input.val()});
            a.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});
        }
    }
    return a;
};

/**
 * Serializes form data into a 'submittable' string. This method will return a string
 * in the format: name1=value1&amp;name2=value2
 */
$.fn.formSerialize = function(semantic) {
    //hand off to jQuery.param for proper encoding
    return $.param(this.formToArray(semantic));
};

/**
 * Serializes all field elements in the jQuery object into a query string.
 * This method will return a string in the format: name1=value1&amp;name2=value2
 */
$.fn.fieldSerialize = function(successful) {
    var a = [];
    this.each(function() {
        var n = this.name;
        if (!n) {
            return;
        }
        var v = $.fieldValue(this, successful);
        if (v && v.constructor == Array) {
            for (var i=0,max=v.length; i < max; i++) {
                a.push({name: n, value: v[i]});
            }
        }
        else if (v !== null && typeof v != 'undefined') {
            a.push({name: this.name, value: v});
        }
    });
    //hand off to jQuery.param for proper encoding
    return $.param(a);
};

/**
 * Returns the value(s) of the element in the matched set.  For example, consider the following form:
 *
 *  <form><fieldset>
 *      <input name="A" type="text" />
 *      <input name="A" type="text" />
 *      <input name="B" type="checkbox" value="B1" />
 *      <input name="B" type="checkbox" value="B2"/>
 *      <input name="C" type="radio" value="C1" />
 *      <input name="C" type="radio" value="C2" />
 *  </fieldset></form>
 *
 *  var v = $('input[type=text]').fieldValue();
 *  // if no values are entered into the text inputs
 *  v == ['','']
 *  // if values entered into the text inputs are 'foo' and 'bar'
 *  v == ['foo','bar']
 *
 *  var v = $('input[type=checkbox]').fieldValue();
 *  // if neither checkbox is checked
 *  v === undefined
 *  // if both checkboxes are checked
 *  v == ['B1', 'B2']
 *
 *  var v = $('input[type=radio]').fieldValue();
 *  // if neither radio is checked
 *  v === undefined
 *  // if first radio is checked
 *  v == ['C1']
 *
 * The successful argument controls whether or not the field element must be 'successful'
 * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).
 * The default value of the successful argument is true.  If this value is false the value(s)
 * for each element is returned.
 *
 * Note: This method *always* returns an array.  If no valid value can be determined the
 *    array will be empty, otherwise it will contain one or more values.
 */
$.fn.fieldValue = function(successful) {
    for (var val=[], i=0, max=this.length; i < max; i++) {
        var el = this[i];
        var v = $.fieldValue(el, successful);
        if (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {
            continue;
        }
        if (v.constructor == Array) {
            $.merge(val, v);
        }
        else {
            val.push(v);
        }
    }
    return val;
};

/**
 * Returns the value of the field element.
 */
$.fieldValue = function(el, successful) {
    var n = el.name, t = el.type, tag = el.tagName.toLowerCase();
    if (successful === undefined) {
        successful = true;
    }

    if (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||
        (t == 'checkbox' || t == 'radio') && !el.checked ||
        (t == 'submit' || t == 'image') && el.form && el.form.clk != el ||
        tag == 'select' && el.selectedIndex == -1)) {
            return null;
    }

    if (tag == 'select') {
        var index = el.selectedIndex;
        if (index < 0) {
            return null;
        }
        var a = [], ops = el.options;
        var one = (t == 'select-one');
        var max = (one ? index+1 : ops.length);
        for(var i=(one ? index : 0); i < max; i++) {
            var op = ops[i];
            if (op.selected) {
                var v = op.value;
                if (!v) { // extra pain for IE...
                    v = (op.attributes && op.attributes.value && !(op.attributes.value.specified)) ? op.text : op.value;
                }
                if (one) {
                    return v;
                }
                a.push(v);
            }
        }
        return a;
    }
    return $(el).val();
};

/**
 * Clears the form data.  Takes the following actions on the form's input fields:
 *  - input text fields will have their 'value' property set to the empty string
 *  - select elements will have their 'selectedIndex' property set to -1
 *  - checkbox and radio inputs will have their 'checked' property set to false
 *  - inputs of type submit, button, reset, and hidden will *not* be effected
 *  - button elements will *not* be effected
 */
$.fn.clearForm = function(includeHidden) {
    return this.each(function() {
        $('input,select,textarea', this).clearFields(includeHidden);
    });
};

/**
 * Clears the selected form elements.
 */
$.fn.clearFields = $.fn.clearInputs = function(includeHidden) {
    var re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list
    return this.each(function() {
        var t = this.type, tag = this.tagName.toLowerCase();
        if (re.test(t) || tag == 'textarea') {
            this.value = '';
        }
        else if (t == 'checkbox' || t == 'radio') {
            this.checked = false;
        }
        else if (tag == 'select') {
            this.selectedIndex = -1;
        }
        else if (t == "file") {
            if (/MSIE/.test(navigator.userAgent)) {
                $(this).replaceWith($(this).clone(true));
            } else {
                $(this).val('');
            }
        }
        else if (includeHidden) {
            // includeHidden can be the value true, or it can be a selector string
            // indicating a special test; for example:
            //  $('#myForm').clearForm('.special:hidden')
            // the above would clean hidden inputs that have the class of 'special'
            if ( (includeHidden === true && /hidden/.test(t)) ||
                 (typeof includeHidden == 'string' && $(this).is(includeHidden)) ) {
                this.value = '';
            }
        }
    });
};

/**
 * Resets the form data.  Causes all form elements to be reset to their original value.
 */
$.fn.resetForm = function() {
    return this.each(function() {
        // guard against an input with the name of 'reset'
        // note that IE reports the reset function as an 'object'
        if (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {
            this.reset();
        }
    });
};

/**
 * Enables or disables any matching elements.
 */
$.fn.enable = function(b) {
    if (b === undefined) {
        b = true;
    }
    return this.each(function() {
        this.disabled = !b;
    });
};

/**
 * Checks/unchecks any matching checkboxes or radio buttons and
 * selects/deselects and matching option elements.
 */
$.fn.selected = function(select) {
    if (select === undefined) {
        select = true;
    }
    return this.each(function() {
        var t = this.type;
        if (t == 'checkbox' || t == 'radio') {
            this.checked = select;
        }
        else if (this.tagName.toLowerCase() == 'option') {
            var $sel = $(this).parent('select');
            if (select && $sel[0] && $sel[0].type == 'select-one') {
                // deselect all other options
                $sel.find('option').selected(false);
            }
            this.selected = select;
        }
    });
};

// expose debug var
$.fn.ajaxSubmit.debug = false;

// helper fn for console logging
function log() {
    if (!$.fn.ajaxSubmit.debug) {
        return;
    }
    var msg = '[jquery.form] ' + Array.prototype.join.call(arguments,'');
    if (window.console && window.console.log) {
        window.console.log(msg);
    }
    else if (window.opera && window.opera.postError) {
        window.opera.postError(msg);
    }
}

}));
/* ---------------------------------------- /includes/jsbin/jquery.scrollTo.js ---------------------------------------- */
/*!
 * jQuery.scrollTo
 * Copyright (c) 2007-2014 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * @projectDescription Easy element scrolling using jQuery.
 * @author Ariel Flesler
 * @version 1.4.13
 */
;(function (define) {
	'use strict';

	define(['jquery'], function ($) {

		var $scrollTo = $.scrollTo = function( target, duration, settings ) {
			return $(window).scrollTo( target, duration, settings );
		};

		$scrollTo.defaults = {
			axis:'xy',
			duration: parseFloat($.fn.jquery) >= 1.3 ? 0 : 1,
			limit:true
		};

		// Returns the element that needs to be animated to scroll the window.
		// Kept for backwards compatibility (specially for localScroll & serialScroll)
		$scrollTo.window = function( scope ) {
			return $(window)._scrollable();
		};

		// Hack, hack, hack :)
		// Returns the real elements to scroll (supports window/iframes, documents and regular nodes)
		$.fn._scrollable = function() {
			return this.map(function() {
				var elem = this,
					isWin = !elem.nodeName || $.inArray( elem.nodeName.toLowerCase(), ['iframe','#document','html','body'] ) != -1;

					if (!isWin)
						return elem;

				var doc = (elem.contentWindow || elem).document || elem.ownerDocument || elem;

				return /webkit/i.test(navigator.userAgent) || doc.compatMode == 'BackCompat' ?
					doc.body :
					doc.documentElement;
			});
		};

		$.fn.scrollTo = function( target, duration, settings ) {
			if (typeof duration == 'object') {
				settings = duration;
				duration = 0;
			}
			if (typeof settings == 'function')
				settings = { onAfter:settings };

			if (target == 'max')
				target = 9e9;

			settings = $.extend( {}, $scrollTo.defaults, settings );
			// Speed is still recognized for backwards compatibility
			duration = duration || settings.duration;
			// Make sure the settings are given right
			settings.queue = settings.queue && settings.axis.length > 1;

			if (settings.queue)
				// Let's keep the overall duration
				duration /= 2;
			settings.offset = both( settings.offset );
			settings.over = both( settings.over );

			return this._scrollable().each(function() {
				// Null target yields nothing, just like jQuery does
				if (target == null) return;

				var elem = this,
					$elem = $(elem),
					targ = target, toff, attr = {},
					win = $elem.is('html,body');

				switch (typeof targ) {
					// A number will pass the regex
					case 'number':
					case 'string':
						if (/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)) {
							targ = both( targ );
							// We are done
							break;
						}
						// Relative/Absolute selector, no break!
						targ = win ? $(targ) : $(targ, this);
						if (!targ.length) return;
					case 'object':
						// DOMElement / jQuery
						if (targ.is || targ.style)
							// Get the real position of the target
							toff = (targ = $(targ)).offset();
				}

				var offset = $.isFunction(settings.offset) && settings.offset(elem, targ) || settings.offset;

				$.each( settings.axis.split(''), function( i, axis ) {
					var Pos	= axis == 'x' ? 'Left' : 'Top',
						pos = Pos.toLowerCase(),
						key = 'scroll' + Pos,
						old = elem[key],
						max = $scrollTo.max(elem, axis);

					if (toff) {// jQuery / DOMElement
						attr[key] = toff[pos] + ( win ? 0 : old - $elem.offset()[pos] );

						// If it's a dom element, reduce the margin
						if (settings.margin) {
							attr[key] -= parseInt(targ.css('margin'+Pos)) || 0;
							attr[key] -= parseInt(targ.css('border'+Pos+'Width')) || 0;
						}

						attr[key] += offset[pos] || 0;

						if(settings.over[pos])
							// Scroll to a fraction of its width/height
							attr[key] += targ[axis=='x'?'width':'height']() * settings.over[pos];
					} else {
						var val = targ[pos];
						// Handle percentage values
						attr[key] = val.slice && val.slice(-1) == '%' ?
							parseFloat(val) / 100 * max
							: val;
					}

					// Number or 'number'
					if (settings.limit && /^\d+$/.test(attr[key]))
						// Check the limits
						attr[key] = attr[key] <= 0 ? 0 : Math.min( attr[key], max );

					// Queueing axes
					if (!i && settings.queue) {
						// Don't waste time animating, if there's no need.
						if (old != attr[key])
							// Intermediate animation
							animate( settings.onAfterFirst );
						// Don't animate this axis again in the next iteration.
						delete attr[key];
					}
				});

				animate( settings.onAfter );

				function animate( callback ) {
					$elem.animate( attr, duration, settings.easing, callback && function() {
						callback.call(this, targ, settings);
					});
				}
			}).end();
		};

		// Max scrolling position, works on quirks mode
		// It only fails (not too badly) on IE, quirks mode.
		$scrollTo.max = function( elem, axis ) {
			var Dim = axis == 'x' ? 'Width' : 'Height',
				scroll = 'scroll'+Dim;

			if (!$(elem).is('html,body'))
				return elem[scroll] - $(elem)[Dim.toLowerCase()]();

			var size = 'client' + Dim,
				html = elem.ownerDocument.documentElement,
				body = elem.ownerDocument.body;

			return Math.max( html[scroll], body[scroll] ) - Math.min( html[size]  , body[size]   );
		};

		function both( val ) {
			return $.isFunction(val) || typeof val == 'object' ? val : { top:val, left:val };
		}

		// AMD requirement
		return $scrollTo;
	})
}(typeof define === 'function' && define.amd ? define : function (deps, factory) {
	if (typeof module !== 'undefined' && module.exports) {
		// Node
		module.exports = factory(require('jquery'));
	} else {
		factory(jQuery);
	}
}));

/* ---------------------------------------- /includes/jsbin/jquery.sticky.js ---------------------------------------- */
// Sticky Plugin v1.0.0 for jQuery
// =============
// Author: Anthony Garand
// Improvements by German M. Bravo (Kronuz) and Ruud Kamphuis (ruudk)
// Improvements by Leonardo C. Daronco (daronco)
// Created: 2/14/2011
// Date: 2/12/2012
// Website: http://labs.anthonygarand.com/sticky
// Description: Makes an element on the page stick on the screen as you scroll
//       It will only set the 'top' and 'position' of your element, you
//       might need to adjust the width in some cases.

(function($) {
  var defaults = {
      topSpacing: 0,
      bottomSpacing: 0,
      className: 'is-sticky',
      wrapperClassName: 'sticky-wrapper',
      center: false,
      getWidthFrom: ''
    },
    $window = $(window),
    $document = $(document),
    sticked = [],
    windowHeight = $window.height(),
    scroller = function() {
      var scrollTop = $window.scrollTop(),
        documentHeight = $document.height(),
        dwh = documentHeight - windowHeight,
        extra = (scrollTop > dwh) ? dwh - scrollTop : 0;

      for (var i = 0; i < sticked.length; i++) {
        var s = sticked[i],
          elementTop = s.stickyWrapper.offset().top,
          etse = elementTop - s.topSpacing - extra;

        if (scrollTop <= etse) {
          if (s.currentTop !== null) {
            s.stickyElement
              .css('position', '')
              .css('top', '');

            if (s.stickyElement.attr('id') == 'mainContentCol5') {
              s.stickyElement.css('position', 'absolute');
            }
            
            s.stickyElement.parent().removeClass(s.className);
            s.currentTop = null;
          }
        }
        else {
          var newTop = documentHeight - s.stickyElement.outerHeight()
            - s.topSpacing - s.bottomSpacing - scrollTop - extra;
          if (newTop < 0) {
            newTop = newTop + s.topSpacing;
          } else {
            newTop = s.topSpacing;
          }
          if (s.currentTop != newTop) {
            s.stickyElement
              .css('position', 'fixed')
              .css('top', newTop);

            if (s.stickyElement.attr('id') == 'mainContentCol5') {
              s.stickyElement.parent().css({
                'right': 390,
                'position': 'absolute'
              });
            }

            if (typeof s.getWidthFrom !== 'undefined') {
              s.stickyElement.css('width', $(s.getWidthFrom).width());
            }

            s.stickyElement.parent().addClass(s.className);
            s.currentTop = newTop;
          }
        }
      }
    },
    resizer = function() {
      windowHeight = $window.height();
    },
    methods = {
      init: function(options) {
        var o = $.extend(defaults, options);
        return this.each(function() {
          var stickyElement = $(this);

          var stickyId = stickyElement.attr('id');
          var wrapper = $('<div></div>')
            .attr('id', stickyId + '-sticky-wrapper')
            .addClass(o.wrapperClassName);
          stickyElement.wrapAll(wrapper);

          if (o.center) {
            stickyElement.parent().css({width:stickyElement.outerWidth(),marginLeft:"auto",marginRight:"auto"});
          }

          if (stickyElement.css("float") == "right") {
            if (stickyElement.attr('id') == 'mainContentCol5') {
              stickyElement.css({
                "float":"none",
                "position": "absolute"
              }).parent().css({
                "position": "absolute",
                "right": 390
              });
            } else {
              stickyElement.css({"float":"none"}).parent().css({"float":"right"});
            }
          }

          var stickyWrapper = stickyElement.parent();
          stickyWrapper.css('height', stickyElement.outerHeight());
          sticked.push({
            topSpacing: o.topSpacing,
            bottomSpacing: o.bottomSpacing,
            stickyElement: stickyElement,
            currentTop: null,
            stickyWrapper: stickyWrapper,
            className: o.className,
            getWidthFrom: o.getWidthFrom
          });
        });
      },
      update: scroller
    };

  // should be more efficient than using $window.scroll(scroller) and $window.resize(resizer):
  if (window.addEventListener) {
    window.addEventListener('scroll', scroller, false);
    window.addEventListener('resize', resizer, false);
  } else if (window.attachEvent) {
    window.attachEvent('onscroll', scroller);
    window.attachEvent('onresize', resizer);
  }

  $.fn.sticky = function(method) {
    if (methods[method]) {
      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error('Method ' + method + ' does not exist on jQuery.sticky');
    }
  };
  $(function() {
    setTimeout(scroller, 0);
  });
})(jQuery);

/* ---------------------------------------- /includes/jsbin/jquery.tablesorter.min.js ---------------------------------------- */
/*!
* TableSorter 2.17.8 min - Client-side table sorting with ease!
* Copyright (c) 2007 Christian Bach
*/
!function(h){h.extend({tablesorter:new function(){function d(){var b=arguments[0],a=1<arguments.length?Array.prototype.slice.call(arguments):b;if("undefined"!==typeof console&&"undefined"!==typeof console.log)console[/error/i.test(b)?"error":/warn/i.test(b)?"warn":"log"](a);else alert(a)}function q(b,a){d(b+" ("+((new Date).getTime()-a.getTime())+"ms)")}function p(b){for(var a in b)return!1;return!0}function r(b,a,c){if(!a)return"";var f,e=b.config,l=e.textExtraction||"",d="",d="basic"===l?h(a).attr(e.textAttribute)|| a.textContent||a.innerText||h(a).text()||"":"function"===typeof l?l(a,b,c):"function"===typeof(f=g.getColumnData(b,l,c))?f(a,b,c):a.textContent||a.innerText||h(a).text()||"";return h.trim(d)}function v(b){var a,c,f=b.config,e=f.$tbodies=f.$table.children("tbody:not(."+f.cssInfoBlock+")"),l,x,k,h,m,B,u,s,t,p=0,v="",w=e.length;if(0===w)return f.debug?d("Warning: *Empty table!* Not building a parser cache"):"";f.debug&&(t=new Date,d("Detecting parsers for each column"));a=[];for(c=[];p<w;){l=e[p].rows; if(l[p])for(x=f.columns,k=0;k<x;k++){h=f.$headers.filter('[data-column="'+k+'"]:last');m=g.getColumnData(b,f.headers,k);s=g.getParserById(g.getData(h,m,"extractor"));u=g.getParserById(g.getData(h,m,"sorter"));B="false"===g.getData(h,m,"parser");f.empties[k]=(g.getData(h,m,"empty")||f.emptyTo||(f.emptyToBottom?"bottom":"top")).toLowerCase();f.strings[k]=(g.getData(h,m,"string")||f.stringTo||"max").toLowerCase();B&&(u=g.getParserById("no-parser"));s||(s=!1);if(!u)a:{h=b;m=l;B=-1;u=k;for(var A=void 0, K=g.parsers.length,G=!1,z="",A=!0;""===z&&A;)B++,m[B]?(G=m[B].cells[u],z=r(h,G,u),h.config.debug&&d("Checking if value was empty on row "+B+", column: "+u+': "'+z+'"')):A=!1;for(;0<=--K;)if((A=g.parsers[K])&&"text"!==A.id&&A.is&&A.is(z,h,G)){u=A;break a}u=g.getParserById("text")}f.debug&&(v+="column:"+k+"; extractor:"+s.id+"; parser:"+u.id+"; string:"+f.strings[k]+"; empty: "+f.empties[k]+"\n");c[k]=u;a[k]=s}p+=c.length?w:1}f.debug&&(d(v?v:"No parsers detected"),q("Completed detecting parsers",t)); f.parsers=c;f.extractors=a}function w(b){var a,c,f,e,l,x,k,n,m,p,u,s=b.config,t=s.$table.children("tbody"),v=s.extractors,w=s.parsers;s.cache={};s.totalRows=0;if(!w)return s.debug?d("Warning: *Empty table!* Not building a cache"):"";s.debug&&(n=new Date);s.showProcessing&&g.isProcessing(b,!0);for(l=0;l<t.length;l++)if(u=[],a=s.cache[l]={normalized:[]},!t.eq(l).hasClass(s.cssInfoBlock)){m=t[l]&&t[l].rows.length||0;for(f=0;f<m;++f)if(p={child:[]},x=h(t[l].rows[f]),k=[],x.hasClass(s.cssChildRow)&&0!== f)c=a.normalized.length-1,a.normalized[c][s.columns].$row=a.normalized[c][s.columns].$row.add(x),x.prev().hasClass(s.cssChildRow)||x.prev().addClass(g.css.cssHasChild),p.child[c]=h.trim(x[0].textContent||x[0].innerText||x.text()||"");else{p.$row=x;p.order=f;for(e=0;e<s.columns;++e)"undefined"===typeof w[e]?s.debug&&d("No parser found for cell:",x[0].cells[e],"does it have a header?"):(c=r(b,x[0].cells[e],e),c="undefined"===typeof v[e].id?c:v[e].format(c,b,x[0].cells[e],e),c="no-parser"===w[e].id? "":w[e].format(c,b,x[0].cells[e],e),k.push(s.ignoreCase&&"string"===typeof c?c.toLowerCase():c),"numeric"===(w[e].type||"").toLowerCase()&&(u[e]=Math.max(Math.abs(c)||0,u[e]||0)));k[s.columns]=p;a.normalized.push(k)}a.colMax=u;s.totalRows+=a.normalized.length}s.showProcessing&&g.isProcessing(b);s.debug&&q("Building cache for "+m+" rows",n)}function z(b,a){var c=b.config,f=c.widgetOptions,e=b.tBodies,l=[],d=c.cache,k,n,m,r,u,s;if(p(d))return c.appender?c.appender(b,l):b.isUpdating?c.$table.trigger("updateComplete", b):"";c.debug&&(s=new Date);for(u=0;u<e.length;u++)if(k=h(e[u]),k.length&&!k.hasClass(c.cssInfoBlock)){m=g.processTbody(b,k,!0);k=d[u].normalized;n=k.length;for(r=0;r<n;r++)l.push(k[r][c.columns].$row),c.appender&&(!c.pager||c.pager.removeRows&&f.pager_removeRows||c.pager.ajax)||m.append(k[r][c.columns].$row);g.processTbody(b,m,!1)}c.appender&&c.appender(b,l);c.debug&&q("Rebuilt table",s);a||c.appender||g.applyWidget(b);b.isUpdating&&c.$table.trigger("updateComplete",b)}function D(b){return/^d/i.test(b)|| 1===b}function E(b){var a,c,f,e,l,x,k,n=b.config;n.headerList=[];n.headerContent=[];n.debug&&(k=new Date);n.columns=g.computeColumnIndex(n.$table.children("thead, tfoot").children("tr"));e=n.cssIcon?'<i class="'+(n.cssIcon===g.css.icon?g.css.icon:n.cssIcon+" "+g.css.icon)+'"></i>':"";n.$headers=h(b).find(n.selectorHeaders).each(function(k){c=h(this);a=g.getColumnData(b,n.headers,k,!0);n.headerContent[k]=h(this).html();""!==n.headerTemplate&&(l=n.headerTemplate.replace(/\{content\}/g,h(this).html()).replace(/\{icon\}/g, e),n.onRenderTemplate&&(f=n.onRenderTemplate.apply(c,[k,l]))&&"string"===typeof f&&(l=f),h(this).html('<div class="'+g.css.headerIn+'">'+l+"</div>"));n.onRenderHeader&&n.onRenderHeader.apply(c,[k]);this.column=parseInt(h(this).attr("data-column"),10);this.order=D(g.getData(c,a,"sortInitialOrder")||n.sortInitialOrder)?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=!1;x=g.getData(c,a,"lockedOrder")||!1;"undefined"!==typeof x&&!1!==x&&(this.order=this.lockedOrder=D(x)?[1,1,1]:[0,0,0]);c.addClass(g.css.header+ " "+n.cssHeader);n.headerList[k]=this;c.parent().addClass(g.css.headerRow+" "+n.cssHeaderRow).attr("role","row");n.tabIndex&&c.attr("tabindex",0)}).attr({scope:"col",role:"columnheader"});H(b);n.debug&&(q("Built headers:",k),d(n.$headers))}function C(b,a,c){var f=b.config;f.$table.find(f.selectorRemove).remove();v(b);w(b);I(f.$table,a,c)}function H(b){var a,c,f,e=b.config;e.$headers.each(function(l,d){c=h(d);f=g.getColumnData(b,e.headers,l,!0);a="false"===g.getData(d,f,"sorter")||"false"===g.getData(d, f,"parser");d.sortDisabled=a;c[a?"addClass":"removeClass"]("sorter-false").attr("aria-disabled",""+a);b.id&&(a?c.removeAttr("aria-controls"):c.attr("aria-controls",b.id))})}function F(b){var a,c,f=b.config,e=f.sortList,l=e.length,d=g.css.sortNone+" "+f.cssNone,k=[g.css.sortAsc+" "+f.cssAsc,g.css.sortDesc+" "+f.cssDesc],n=["ascending","descending"],m=h(b).find("tfoot tr").children().add(f.$extraHeaders).removeClass(k.join(" "));f.$headers.removeClass(k.join(" ")).addClass(d).attr("aria-sort","none"); for(a=0;a<l;a++)if(2!==e[a][1]&&(b=f.$headers.not(".sorter-false").filter('[data-column="'+e[a][0]+'"]'+(1===l?":last":"")),b.length)){for(c=0;c<b.length;c++)b[c].sortDisabled||b.eq(c).removeClass(d).addClass(k[e[a][1]]).attr("aria-sort",n[e[a][1]]);m.length&&m.filter('[data-column="'+e[a][0]+'"]').removeClass(d).addClass(k[e[a][1]])}f.$headers.not(".sorter-false").each(function(){var b=h(this),a=this.order[(this.count+1)%(f.sortReset?3:2)],a=b.text()+": "+g.language[b.hasClass(g.css.sortAsc)?"sortAsc": b.hasClass(g.css.sortDesc)?"sortDesc":"sortNone"]+g.language[0===a?"nextAsc":1===a?"nextDesc":"nextNone"];b.attr("aria-label",a)})}function O(b){var a,c,f=b.config;f.widthFixed&&0===f.$table.find("colgroup").length&&(a=h("<colgroup>"),c=h(b).width(),h(b.tBodies).not("."+f.cssInfoBlock).find("tr:first").children(":visible").each(function(){a.append(h("<col>").css("width",parseInt(h(this).width()/c*1E3,10)/10+"%"))}),f.$table.prepend(a))}function P(b,a){var c,f,e,l,g,k=b.config,d=a||k.sortList;k.sortList= [];h.each(d,function(b,a){l=parseInt(a[0],10);if(e=k.$headers.filter('[data-column="'+l+'"]:last')[0]){f=(f=(""+a[1]).match(/^(1|d|s|o|n)/))?f[0]:"";switch(f){case "1":case "d":f=1;break;case "s":f=g||0;break;case "o":c=e.order[(g||0)%(k.sortReset?3:2)];f=0===c?1:1===c?0:2;break;case "n":e.count+=1;f=e.order[e.count%(k.sortReset?3:2)];break;default:f=0}g=0===b?f:g;c=[l,parseInt(f,10)||0];k.sortList.push(c);f=h.inArray(c[1],e.order);e.count=0<=f?f:c[1]%(k.sortReset?3:2)}})}function Q(b,a){return b&& b[a]?b[a].type||"":""}function L(b,a,c){if(b.isUpdating)return setTimeout(function(){L(b,a,c)},50);var f,e,l,d,k=b.config,n=!c[k.sortMultiSortKey],m=k.$table;m.trigger("sortStart",b);a.count=c[k.sortResetKey]?2:(a.count+1)%(k.sortReset?3:2);k.sortRestart&&(e=a,k.$headers.each(function(){this===e||!n&&h(this).is("."+g.css.sortDesc+",."+g.css.sortAsc)||(this.count=-1)}));e=a.column;if(n){k.sortList=[];if(null!==k.sortForce)for(f=k.sortForce,l=0;l<f.length;l++)f[l][0]!==e&&k.sortList.push(f[l]);f=a.order[a.count]; if(2>f&&(k.sortList.push([e,f]),1<a.colSpan))for(l=1;l<a.colSpan;l++)k.sortList.push([e+l,f])}else{if(k.sortAppend&&1<k.sortList.length)for(l=0;l<k.sortAppend.length;l++)d=g.isValueInArray(k.sortAppend[l][0],k.sortList),0<=d&&k.sortList.splice(d,1);if(0<=g.isValueInArray(e,k.sortList))for(l=0;l<k.sortList.length;l++)d=k.sortList[l],f=k.$headers.filter('[data-column="'+d[0]+'"]:last')[0],d[0]===e&&(d[1]=f.order[a.count],2===d[1]&&(k.sortList.splice(l,1),f.count=-1));else if(f=a.order[a.count],2>f&& (k.sortList.push([e,f]),1<a.colSpan))for(l=1;l<a.colSpan;l++)k.sortList.push([e+l,f])}if(null!==k.sortAppend)for(f=k.sortAppend,l=0;l<f.length;l++)f[l][0]!==e&&k.sortList.push(f[l]);m.trigger("sortBegin",b);setTimeout(function(){F(b);J(b);z(b);m.trigger("sortEnd",b)},1)}function J(b){var a,c,f,e,l,d,k,h,m,r,u,s=0,t=b.config,v=t.textSorter||"",w=t.sortList,y=w.length,z=b.tBodies.length;if(!t.serverSideSorting&&!p(t.cache)){t.debug&&(l=new Date);for(c=0;c<z;c++)d=t.cache[c].colMax,k=t.cache[c].normalized, k.sort(function(c,l){for(a=0;a<y;a++){e=w[a][0];h=w[a][1];s=0===h;if(t.sortStable&&c[e]===l[e]&&1===y)break;(f=/n/i.test(Q(t.parsers,e)))&&t.strings[e]?(f="boolean"===typeof t.string[t.strings[e]]?(s?1:-1)*(t.string[t.strings[e]]?-1:1):t.strings[e]?t.string[t.strings[e]]||0:0,m=t.numberSorter?t.numberSorter(c[e],l[e],s,d[e],b):g["sortNumeric"+(s?"Asc":"Desc")](c[e],l[e],f,d[e],e,b)):(r=s?c:l,u=s?l:c,m="function"===typeof v?v(r[e],u[e],s,e,b):"object"===typeof v&&v.hasOwnProperty(e)?v[e](r[e],u[e], s,e,b):g["sortNatural"+(s?"Asc":"Desc")](c[e],l[e],e,b,t));if(m)return m}return c[t.columns].order-l[t.columns].order});t.debug&&q("Sorting on "+w.toString()+" and dir "+h+" time",l)}}function M(b,a){var c=b[0];c.isUpdating&&b.trigger("updateComplete",c);h.isFunction(a)&&a(b[0])}function I(b,a,c){var f=b[0].config.sortList;!1!==a&&!b[0].isProcessing&&f.length?b.trigger("sorton",[f,function(){M(b,c)},!0]):(M(b,c),g.applyWidget(b[0],!1))}function N(b){var a=b.config,c=a.$table;c.unbind("sortReset update updateRows updateCell updateAll addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(a.namespace+ " ")).bind("sortReset"+a.namespace,function(f,e){f.stopPropagation();a.sortList=[];F(b);J(b);z(b);h.isFunction(e)&&e(b)}).bind("updateAll"+a.namespace,function(f,e,c){f.stopPropagation();b.isUpdating=!0;g.refreshWidgets(b,!0,!0);g.restoreHeaders(b);E(b);g.bindEvents(b,a.$headers,!0);N(b);C(b,e,c)}).bind("update"+a.namespace+" updateRows"+a.namespace,function(a,e,c){a.stopPropagation();b.isUpdating=!0;H(b);C(b,e,c)}).bind("updateCell"+a.namespace,function(f,e,l,g){f.stopPropagation();b.isUpdating= !0;c.find(a.selectorRemove).remove();var d,n,m;n=c.find("tbody");m=h(e);f=n.index(h.fn.closest?m.closest("tbody"):m.parents("tbody").filter(":first"));d=h.fn.closest?m.closest("tr"):m.parents("tr").filter(":first");e=m[0];n.length&&0<=f&&(n=n.eq(f).find("tr").index(d),m=m.index(),a.cache[f].normalized[n][a.columns].$row=d,d="undefined"===typeof a.extractors[m].id?r(b,e,m):a.extractors[m].format(r(b,e,m),b,e,m),e="no-parser"===a.parsers[m].id?"":a.parsers[m].format(d,b,e,m),a.cache[f].normalized[n][m]= a.ignoreCase&&"string"===typeof e?e.toLowerCase():e,"numeric"===(a.parsers[m].type||"").toLowerCase()&&(a.cache[f].colMax[m]=Math.max(Math.abs(e)||0,a.cache[f].colMax[m]||0)),I(c,l,g))}).bind("addRows"+a.namespace,function(f,e,l,g){f.stopPropagation();b.isUpdating=!0;if(p(a.cache))H(b),C(b,l,g);else{e=h(e).attr("role","row");var d,n,m,q,u,s=e.filter("tr").length,t=c.find("tbody").index(e.parents("tbody").filter(":first"));a.parsers&&a.parsers.length||v(b);for(f=0;f<s;f++){n=e[f].cells.length;u=[]; q={child:[],$row:e.eq(f),order:a.cache[t].normalized.length};for(d=0;d<n;d++)m="undefined"===typeof a.extractors[d].id?r(b,e[f].cells[d],d):a.extractors[d].format(r(b,e[f].cells[d],d),b,e[f].cells[d],d),m="no-parser"===a.parsers[d].id?"":a.parsers[d].format(m,b,e[f].cells[d],d),u[d]=a.ignoreCase&&"string"===typeof m?m.toLowerCase():m,"numeric"===(a.parsers[d].type||"").toLowerCase()&&(a.cache[t].colMax[d]=Math.max(Math.abs(u[d])||0,a.cache[t].colMax[d]||0));u.push(q);a.cache[t].normalized.push(u)}I(c, l,g)}}).bind("updateComplete"+a.namespace,function(){b.isUpdating=!1}).bind("sorton"+a.namespace,function(a,e,d,x){var k=b.config;a.stopPropagation();c.trigger("sortStart",this);P(b,e);F(b);k.delayInit&&p(k.cache)&&w(b);c.trigger("sortBegin",this);J(b);z(b,x);c.trigger("sortEnd",this);g.applyWidget(b);h.isFunction(d)&&d(b)}).bind("appendCache"+a.namespace,function(a,e,c){a.stopPropagation();z(b,c);h.isFunction(e)&&e(b)}).bind("updateCache"+a.namespace,function(c,e){a.parsers&&a.parsers.length||v(b); w(b);h.isFunction(e)&&e(b)}).bind("applyWidgetId"+a.namespace,function(c,e){c.stopPropagation();g.getWidgetById(e).format(b,a,a.widgetOptions)}).bind("applyWidgets"+a.namespace,function(a,c){a.stopPropagation();g.applyWidget(b,c)}).bind("refreshWidgets"+a.namespace,function(a,c,d){a.stopPropagation();g.refreshWidgets(b,c,d)}).bind("destroy"+a.namespace,function(a,c,d){a.stopPropagation();g.destroy(b,c,d)}).bind("resetToLoadState"+a.namespace,function(){g.refreshWidgets(b,!0,!0);a=h.extend(!0,g.defaults, a.originalSettings);b.hasInitialized=!1;g.setup(b,a)})}var g=this;g.version="2.17.8";g.parsers=[];g.widgets=[];g.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,tabIndex:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortStable:!1,sortInitialOrder:"asc", sortLocaleCompare:!1,sortReset:!1,sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"basic",textAttribute:"data-text",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssNone:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me", debug:!1,headerList:[],empties:{},strings:{},parsers:[]};g.css={table:"tablesorter",cssHasChild:"tablesorter-hasChildRow",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",headerIn:"tablesorter-header-inner",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc",sortNone:"tablesorter-headerUnSorted"};g.language={sortAsc:"Ascending sort applied, ",sortDesc:"Descending sort applied, ", sortNone:"No sort applied, ",nextAsc:"activate to apply an ascending sort",nextDesc:"activate to apply a descending sort",nextNone:"activate to remove the sort"};g.log=d;g.benchmark=q;g.construct=function(b){return this.each(function(){var a=h.extend(!0,{},g.defaults,b);a.originalSettings=b;!this.hasInitialized&&g.buildTable&&"TABLE"!==this.tagName?g.buildTable(this,a):g.setup(this,a)})};g.setup=function(b,a){if(!b||!b.tHead||0===b.tBodies.length||!0===b.hasInitialized)return a.debug?d("ERROR: stopping initialization! No table, thead, tbody or tablesorter has already been initialized"): "";var c="",f=h(b),e=h.metadata;b.hasInitialized=!1;b.isProcessing=!0;b.config=a;h.data(b,"tablesorter",a);a.debug&&h.data(b,"startoveralltimer",new Date);a.supportsDataObject=function(a){a[0]=parseInt(a[0],10);return 1<a[0]||1===a[0]&&4<=parseInt(a[1],10)}(h.fn.jquery.split("."));a.string={max:1,min:-1,emptymin:1,emptymax:-1,zero:0,none:0,"null":0,top:!0,bottom:!1};a.emptyTo=a.emptyTo.toLowerCase();a.stringTo=a.stringTo.toLowerCase();/tablesorter\-/.test(f.attr("class"))||(c=""!==a.theme?" tablesorter-"+ a.theme:"");a.table=b;a.$table=f.addClass(g.css.table+" "+a.tableClass+c).attr("role","grid");a.$headers=f.find(a.selectorHeaders);a.namespace=a.namespace?"."+a.namespace.replace(/\W/g,""):".tablesorter"+Math.random().toString(16).slice(2);a.$table.children().children("tr").attr("role","row");a.$tbodies=f.children("tbody:not(."+a.cssInfoBlock+")").attr({"aria-live":"polite","aria-relevant":"all"});a.$table.find("caption").length&&a.$table.attr("aria-labelledby","theCaption");a.widgetInit={};a.textExtraction= a.$table.attr("data-text-extraction")||a.textExtraction||"basic";E(b);O(b);v(b);a.totalRows=0;a.delayInit||w(b);g.bindEvents(b,a.$headers,!0);N(b);a.supportsDataObject&&"undefined"!==typeof f.data().sortlist?a.sortList=f.data().sortlist:e&&f.metadata()&&f.metadata().sortlist&&(a.sortList=f.metadata().sortlist);g.applyWidget(b,!0);0<a.sortList.length?f.trigger("sorton",[a.sortList,{},!a.initWidgets,!0]):(F(b),a.initWidgets&&g.applyWidget(b,!1));a.showProcessing&&f.unbind("sortBegin"+a.namespace+" sortEnd"+ a.namespace).bind("sortBegin"+a.namespace+" sortEnd"+a.namespace,function(c){clearTimeout(a.processTimer);g.isProcessing(b);"sortBegin"===c.type&&(a.processTimer=setTimeout(function(){g.isProcessing(b,!0)},500))});b.hasInitialized=!0;b.isProcessing=!1;a.debug&&g.benchmark("Overall initialization time",h.data(b,"startoveralltimer"));f.trigger("tablesorter-initialized",b);"function"===typeof a.initialized&&a.initialized(b)};g.getColumnData=function(b,a,c,f){if("undefined"!==typeof a&&null!==a){b=h(b)[0]; var e,d=b.config;if(a[c])return f?a[c]:a[d.$headers.index(d.$headers.filter('[data-column="'+c+'"]:last'))];for(e in a)if("string"===typeof e&&(b=f?d.$headers.eq(c).filter(e):d.$headers.filter('[data-column="'+c+'"]:last').filter(e),b.length))return a[e]}};g.computeColumnIndex=function(b){var a=[],c=0,f,e,d,g,k,n,m,p,q,s;for(f=0;f<b.length;f++)for(k=b[f].cells,e=0;e<k.length;e++){d=k[e];g=h(d);n=d.parentNode.rowIndex;g.index();m=d.rowSpan||1;p=d.colSpan||1;"undefined"===typeof a[n]&&(a[n]=[]);for(d= 0;d<a[n].length+1;d++)if("undefined"===typeof a[n][d]){q=d;break}c=Math.max(q,c);g.attr({"data-column":q});for(d=n;d<n+m;d++)for("undefined"===typeof a[d]&&(a[d]=[]),s=a[d],g=q;g<q+p;g++)s[g]="x"}return c+1};g.isProcessing=function(b,a,c){b=h(b);var f=b[0].config,e=c||b.find("."+g.css.header);a?("undefined"!==typeof c&&0<f.sortList.length&&(e=e.filter(function(){return this.sortDisabled?!1:0<=g.isValueInArray(parseFloat(h(this).attr("data-column")),f.sortList)})),b.add(e).addClass(g.css.processing+ " "+f.cssProcessing)):b.add(e).removeClass(g.css.processing+" "+f.cssProcessing)};g.processTbody=function(b,a,c){b=h(b)[0];if(c)return b.isProcessing=!0,a.before('<span class="tablesorter-savemyplace"/>'),c=h.fn.detach?a.detach():a.remove();c=h(b).find("span.tablesorter-savemyplace");a.insertAfter(c);c.remove();b.isProcessing=!1};g.clearTableBody=function(b){h(b)[0].config.$tbodies.children().detach()};g.bindEvents=function(b,a,c){b=h(b)[0];var f,e=b.config;!0!==c&&(e.$extraHeaders=e.$extraHeaders? e.$extraHeaders.add(a):a);a.find(e.selectorSort).add(a.filter(e.selectorSort)).unbind(["mousedown","mouseup","sort","keyup",""].join(e.namespace+" ")).bind(["mousedown","mouseup","sort","keyup",""].join(e.namespace+" "),function(c,d){var g;g=c.type;if(!(1!==(c.which||c.button)&&!/sort|keyup/.test(g)||"keyup"===g&&13!==c.which||"mouseup"===g&&!0!==d&&250<(new Date).getTime()-f)){if("mousedown"===g)return f=(new Date).getTime(),/(input|select|button|textarea)/i.test(c.target.tagName)?"":!e.cancelSelection; e.delayInit&&p(e.cache)&&w(b);g=h.fn.closest?h(this).closest("th, td")[0]:/TH|TD/.test(this.tagName)?this:h(this).parents("th, td")[0];g=e.$headers[a.index(g)];g.sortDisabled||L(b,g,c)}});e.cancelSelection&&a.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",MozUserSelect:"none"})};g.restoreHeaders=function(b){var a=h(b)[0].config;a.$table.find(a.selectorHeaders).each(function(b){h(this).find("."+g.css.headerIn).length&&h(this).html(a.headerContent[b])})};g.destroy=function(b, a,c){b=h(b)[0];if(b.hasInitialized){g.refreshWidgets(b,!0,!0);var f=h(b),e=b.config,d=f.find("thead:first"),q=d.find("tr."+g.css.headerRow).removeClass(g.css.headerRow+" "+e.cssHeaderRow),k=f.find("tfoot:first > tr").children("th, td");!1===a&&0<=h.inArray("uitheme",e.widgets)&&(f.trigger("applyWidgetId",["uitheme"]),f.trigger("applyWidgetId",["zebra"]));d.find("tr").not(q).remove();f.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows updateComplete sorton appendCache updateCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd resetToLoadState ".split(" ").join(e.namespace+ " "));e.$headers.add(k).removeClass([g.css.header,e.cssHeader,e.cssAsc,e.cssDesc,g.css.sortAsc,g.css.sortDesc,g.css.sortNone].join(" ")).removeAttr("data-column").removeAttr("aria-label").attr("aria-disabled","true");q.find(e.selectorSort).unbind(["mousedown","mouseup","keypress",""].join(e.namespace+" "));g.restoreHeaders(b);f.toggleClass(g.css.table+" "+e.tableClass+" tablesorter-"+e.theme,!1===a);b.hasInitialized=!1;delete b.config.cache;"function"===typeof c&&c(b)}};g.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi, chunks:/(^\\0|\\0$)/,hex:/^0x[0-9a-f]+$/i};g.sortNatural=function(b,a){if(b===a)return 0;var c,f,e,d,h,k;f=g.regex;if(f.hex.test(a)){c=parseInt(b.match(f.hex),16);e=parseInt(a.match(f.hex),16);if(c<e)return-1;if(c>e)return 1}c=b.replace(f.chunk,"\\0$1\\0").replace(f.chunks,"").split("\\0");f=a.replace(f.chunk,"\\0$1\\0").replace(f.chunks,"").split("\\0");k=Math.max(c.length,f.length);for(h=0;h<k;h++){e=isNaN(c[h])?c[h]||0:parseFloat(c[h])||0;d=isNaN(f[h])?f[h]||0:parseFloat(f[h])||0;if(isNaN(e)!== isNaN(d))return isNaN(e)?1:-1;typeof e!==typeof d&&(e+="",d+="");if(e<d)return-1;if(e>d)return 1}return 0};g.sortNaturalAsc=function(b,a,c,f,e){if(b===a)return 0;c=e.string[e.empties[c]||e.emptyTo];return""===b&&0!==c?"boolean"===typeof c?c?-1:1:-c||-1:""===a&&0!==c?"boolean"===typeof c?c?1:-1:c||1:g.sortNatural(b,a)};g.sortNaturalDesc=function(b,a,c,f,e){if(b===a)return 0;c=e.string[e.empties[c]||e.emptyTo];return""===b&&0!==c?"boolean"===typeof c?c?-1:1:c||1:""===a&&0!==c?"boolean"===typeof c?c? 1:-1:-c||-1:g.sortNatural(a,b)};g.sortText=function(b,a){return b>a?1:b<a?-1:0};g.getTextValue=function(b,a,c){if(c){var f=b?b.length:0,e=c+a;for(c=0;c<f;c++)e+=b.charCodeAt(c);return a*e}return 0};g.sortNumericAsc=function(b,a,c,f,e,d){if(b===a)return 0;d=d.config;e=d.string[d.empties[e]||d.emptyTo];if(""===b&&0!==e)return"boolean"===typeof e?e?-1:1:-e||-1;if(""===a&&0!==e)return"boolean"===typeof e?e?1:-1:e||1;isNaN(b)&&(b=g.getTextValue(b,c,f));isNaN(a)&&(a=g.getTextValue(a,c,f));return b-a};g.sortNumericDesc= function(b,a,c,f,e,d){if(b===a)return 0;d=d.config;e=d.string[d.empties[e]||d.emptyTo];if(""===b&&0!==e)return"boolean"===typeof e?e?-1:1:e||1;if(""===a&&0!==e)return"boolean"===typeof e?e?1:-1:-e||-1;isNaN(b)&&(b=g.getTextValue(b,c,f));isNaN(a)&&(a=g.getTextValue(a,c,f));return a-b};g.sortNumeric=function(b,a){return b-a};g.characterEquivalents={a:"\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5",A:"\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5",c:"\u00e7\u0107\u010d",C:"\u00c7\u0106\u010c",e:"\u00e9\u00e8\u00ea\u00eb\u011b\u0119", E:"\u00c9\u00c8\u00ca\u00cb\u011a\u0118",i:"\u00ed\u00ec\u0130\u00ee\u00ef\u0131",I:"\u00cd\u00cc\u0130\u00ce\u00cf",o:"\u00f3\u00f2\u00f4\u00f5\u00f6",O:"\u00d3\u00d2\u00d4\u00d5\u00d6",ss:"\u00df",SS:"\u1e9e",u:"\u00fa\u00f9\u00fb\u00fc\u016f",U:"\u00da\u00d9\u00db\u00dc\u016e"};g.replaceAccents=function(b){var a,c="[",d=g.characterEquivalents;if(!g.characterRegex){g.characterRegexArray={};for(a in d)"string"===typeof a&&(c+=d[a],g.characterRegexArray[a]=new RegExp("["+d[a]+"]","g"));g.characterRegex= new RegExp(c+"]")}if(g.characterRegex.test(b))for(a in d)"string"===typeof a&&(b=b.replace(g.characterRegexArray[a],a));return b};g.isValueInArray=function(b,a){var c,d=a.length;for(c=0;c<d;c++)if(a[c][0]===b)return c;return-1};g.addParser=function(b){var a,c=g.parsers.length,d=!0;for(a=0;a<c;a++)g.parsers[a].id.toLowerCase()===b.id.toLowerCase()&&(d=!1);d&&g.parsers.push(b)};g.getParserById=function(b){if("false"==b)return!1;var a,c=g.parsers.length;for(a=0;a<c;a++)if(g.parsers[a].id.toLowerCase()=== b.toString().toLowerCase())return g.parsers[a];return!1};g.addWidget=function(b){g.widgets.push(b)};g.hasWidget=function(b,a){b=h(b);return b.length&&b[0].config&&b[0].config.widgetInit[a]||!1};g.getWidgetById=function(b){var a,c,d=g.widgets.length;for(a=0;a<d;a++)if((c=g.widgets[a])&&c.hasOwnProperty("id")&&c.id.toLowerCase()===b.toLowerCase())return c};g.applyWidget=function(b,a){b=h(b)[0];var c=b.config,d=c.widgetOptions,e=[],l,p,k;!1!==a&&b.hasInitialized&&(b.isApplyingWidgets||b.isUpdating)|| (c.debug&&(l=new Date),c.widgets.length&&(b.isApplyingWidgets=!0,c.widgets=h.grep(c.widgets,function(a,b){return h.inArray(a,c.widgets)===b}),h.each(c.widgets||[],function(a,b){(k=g.getWidgetById(b))&&k.id&&(k.priority||(k.priority=10),e[a]=k)}),e.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1}),h.each(e,function(e,g){if(g){if(a||!c.widgetInit[g.id])c.widgetInit[g.id]=!0,g.hasOwnProperty("options")&&(d=b.config.widgetOptions=h.extend(!0,{},g.options,d)),g.hasOwnProperty("init")&& g.init(b,g,c,d);!a&&g.hasOwnProperty("format")&&g.format(b,c,d,!1)}})),setTimeout(function(){b.isApplyingWidgets=!1},0),c.debug&&(p=c.widgets.length,q("Completed "+(!0===a?"initializing ":"applying ")+p+" widget"+(1!==p?"s":""),l)))};g.refreshWidgets=function(b,a,c){b=h(b)[0];var f,e=b.config,l=e.widgets,q=g.widgets,k=q.length;for(f=0;f<k;f++)q[f]&&q[f].id&&(a||0>h.inArray(q[f].id,l))&&(e.debug&&d('Refeshing widgets: Removing "'+q[f].id+'"'),q[f].hasOwnProperty("remove")&&e.widgetInit[q[f].id]&&(q[f].remove(b, e,e.widgetOptions),e.widgetInit[q[f].id]=!1));!0!==c&&g.applyWidget(b,a)};g.getData=function(b,a,c){var d="";b=h(b);var e,g;if(!b.length)return"";e=h.metadata?b.metadata():!1;g=" "+(b.attr("class")||"");"undefined"!==typeof b.data(c)||"undefined"!==typeof b.data(c.toLowerCase())?d+=b.data(c)||b.data(c.toLowerCase()):e&&"undefined"!==typeof e[c]?d+=e[c]:a&&"undefined"!==typeof a[c]?d+=a[c]:" "!==g&&g.match(" "+c+"-")&&(d=g.match(new RegExp("\\s"+c+"-([\\w-]+)"))[1]||"");return h.trim(d)};g.formatFloat= function(b,a){if("string"!==typeof b||""===b)return b;var c;b=(a&&a.config?!1!==a.config.usNumberFormat:"undefined"!==typeof a?a:1)?b.replace(/,/g,""):b.replace(/[\s|\.]/g,"").replace(/,/g,".");/^\s*\([.\d]+\)/.test(b)&&(b=b.replace(/^\s*\(([.\d]+)\)/,"-$1"));c=parseFloat(b);return isNaN(c)?h.trim(b):c};g.isDigit=function(b){return isNaN(b)?/^[\-+(]?\d+[)]?$/.test(b.toString().replace(/[,.'"\s]/g,"")):!0}}});var r=h.tablesorter;h.fn.extend({tablesorter:r.construct});r.addParser({id:"no-parser",is:function(){return!1}, format:function(){return""},type:"text"});r.addParser({id:"text",is:function(){return!0},format:function(d,q){var p=q.config;d&&(d=h.trim(p.ignoreCase?d.toLocaleLowerCase():d),d=p.sortLocaleCompare?r.replaceAccents(d):d);return d},type:"text"});r.addParser({id:"digit",is:function(d){return r.isDigit(d)},format:function(d,q){var p=r.formatFloat((d||"").replace(/[^\w,. \-()]/g,""),q);return d&&"number"===typeof p?p:d?h.trim(d&&q.config.ignoreCase?d.toLocaleLowerCase():d):d},type:"numeric"});r.addParser({id:"currency", is:function(d){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((d||"").replace(/[+\-,. ]/g,""))},format:function(d,q){var p=r.formatFloat((d||"").replace(/[^\w,. \-()]/g,""),q);return d&&"number"===typeof p?p:d?h.trim(d&&q.config.ignoreCase?d.toLocaleLowerCase():d):d},type:"numeric"});r.addParser({id:"ipAddress",is:function(d){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(d)},format:function(d,h){var p,y=d?d.split("."):"",v="",w=y.length; for(p=0;p<w;p++)v+=("00"+y[p]).slice(-3);return d?r.formatFloat(v,h):d},type:"numeric"});r.addParser({id:"url",is:function(d){return/^(https?|ftp|file):\/\//.test(d)},format:function(d){return d?h.trim(d.replace(/(https?|ftp|file):\/\//,"")):d},parsed:!0,type:"text"});r.addParser({id:"isoDate",is:function(d){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(d)},format:function(d,h){return d?r.formatFloat(""!==d?(new Date(d.replace(/-/g,"/"))).getTime()||d:"",h):d},type:"numeric"});r.addParser({id:"percent", is:function(d){return/(\d\s*?%|%\s*?\d)/.test(d)&&15>d.length},format:function(d,h){return d?r.formatFloat(d.replace(/%/g,""),h):d},type:"numeric"});r.addParser({id:"usLongDate",is:function(d){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(d)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(d)},format:function(d,h){return d?r.formatFloat((new Date(d.replace(/(\S)([AP]M)$/i,"$1 $2"))).getTime()||d,h):d},type:"numeric"});r.addParser({id:"shortDate",is:function(d){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((d|| "").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(d,h,p,y){if(d){p=h.config;var v=p.$headers.filter("[data-column="+y+"]:last");y=v.length&&v[0].dateFormat||r.getData(v,r.getColumnData(h,p.headers,y),"dateFormat")||p.dateFormat;d=d.replace(/\s+/g," ").replace(/[\-.,]/g,"/");"mmddyyyy"===y?d=d.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):"ddmmyyyy"===y?d=d.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):"yyyymmdd"===y&&(d=d.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/, "$1/$2/$3"))}return d?r.formatFloat((new Date(d)).getTime()||d,h):d},type:"numeric"});r.addParser({id:"time",is:function(d){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(d)},format:function(d,h){return d?r.formatFloat((new Date("2000/01/01 "+d.replace(/(\S)([AP]M)$/i,"$1 $2"))).getTime()||d,h):d},type:"numeric"});r.addParser({id:"metadata",is:function(){return!1},format:function(d,q,p){d=q.config;d=d.parserMetadataName?d.parserMetadataName:"sortValue";return h(p).metadata()[d]}, type:"numeric"});r.addWidget({id:"zebra",priority:90,format:function(d,q,p){var y,v,w,z,D,E=new RegExp(q.cssChildRow,"i"),C=q.$tbodies;q.debug&&(D=new Date);for(d=0;d<C.length;d++)w=0,y=C.eq(d),y=y.children("tr:visible").not(q.selectorRemove),y.each(function(){v=h(this);E.test(this.className)||w++;z=0===w%2;v.removeClass(p.zebra[z?1:0]).addClass(p.zebra[z?0:1])});q.debug&&r.benchmark("Applying Zebra widget",D)},remove:function(d,q,p){var r;q=q.$tbodies;var v=(p.zebra||["even","odd"]).join(" ");for(p= 0;p<q.length;p++)r=h.tablesorter.processTbody(d,q.eq(p),!0),r.children().removeClass(v),h.tablesorter.processTbody(d,r,!1)}})}(jQuery);
/* ---------------------------------------- /includes/jsbin/jquery.tablesorter.pager.js ---------------------------------------- */
/*!
 * tablesorter pager plugin
 * updated 9/15/2014 (v2.17.8)
 */
/*jshint browser:true, jquery:true, unused:false */
;(function($) {
	"use strict";
	/*jshint supernew:true */
	var ts = $.tablesorter;

	$.extend({ tablesorterPager: new function() {

		this.defaults = {
			// target the pager markup
			container: null,

			// use this format: "http://mydatabase.com?page={page}&size={size}&{sortList:col}&{filterList:fcol}"
			// where {page} is replaced by the page number, {size} is replaced by the number of records to show,
			// {sortList:col} adds the sortList to the url into a "col" array, and {filterList:fcol} adds
			// the filterList to the url into an "fcol" array.
			// So a sortList = [[2,0],[3,0]] becomes "&col[2]=0&col[3]=0" in the url
			// and a filterList = [[2,Blue],[3,13]] becomes "&fcol[2]=Blue&fcol[3]=13" in the url
			ajaxUrl: null,

			// modify the url after all processing has been applied
			customAjaxUrl: function(table, url) { return url; },

			// modify the $.ajax object to allow complete control over your ajax requests
			ajaxObject: {
				dataType: 'json'
			},

			// set this to false if you want to block ajax loading on init
			processAjaxOnInit: true,

			// process ajax so that the following information is returned:
			// [ total_rows (number), rows (array of arrays), headers (array; optional) ]
			// example:
			// [
			//   100,  // total rows
			//   [
			//     [ "row1cell1", "row1cell2", ... "row1cellN" ],
			//     [ "row2cell1", "row2cell2", ... "row2cellN" ],
			//     ...
			//     [ "rowNcell1", "rowNcell2", ... "rowNcellN" ]
			//   ],
			//   [ "header1", "header2", ... "headerN" ] // optional
			// ]
			ajaxProcessing: function(ajax){ return [ 0, [], null ]; },

			// output default: '{page}/{totalPages}'
			// possible variables: {page}, {totalPages}, {filteredPages}, {startRow}, {endRow}, {filteredRows} and {totalRows}
			output: '{startRow} to {endRow} of {totalRows} rows', // '{page}/{totalPages}'

			// apply disabled classname to the pager arrows when the rows at either extreme is visible
			updateArrows: true,

			// starting page of the pager (zero based index)
			page: 0,

		// reset pager after filtering; set to desired page #
		// set to false to not change page at filter start
			pageReset: 0,

			// Number of visible rows
			size: 10,

			// Save pager page & size if the storage script is loaded (requires $.tablesorter.storage in jquery.tablesorter.widgets.js)
			savePages: true,

			// defines custom storage key
			storageKey: 'tablesorter-pager',

			// if true, the table will remain the same height no matter how many records are displayed. The space is made up by an empty
			// table row set to a height to compensate; default is false
			fixedHeight: false,

			// count child rows towards the set page size? (set true if it is a visible table row within the pager)
			// if true, child row(s) may not appear to be attached to its parent row, may be split across pages or
			// may distort the table if rowspan or cellspans are included.
			countChildRows: false,

			// remove rows from the table to speed up the sort of large tables.
			// setting this to false, only hides the non-visible rows; needed if you plan to add/remove rows with the pager enabled.
			removeRows: false, // removing rows in larger tables speeds up the sort

			// css class names of pager arrows
			cssFirst: '.first', // go to first page arrow
			cssPrev: '.prev', // previous page arrow
			cssNext: '.next', // next page arrow
			cssLast: '.last', // go to last page arrow
			cssGoto: '.gotoPage', // go to page selector - select dropdown that sets the current page
			cssPageDisplay: '.pagedisplay', // location of where the "output" is displayed
			cssPageSize: '.pagesize', // page size selector - select dropdown that sets the "size" option
			cssErrorRow: 'tablesorter-errorRow', // error information row

			// class added to arrows when at the extremes (i.e. prev/first arrows are "disabled" when on the first page)
			cssDisabled: 'disabled', // Note there is no period "." in front of this class name

			// stuff not set by the user
			totalRows: 0,
			totalPages: 0,
			filteredRows: 0,
			filteredPages: 0,
			ajaxCounter: 0,
			currentFilters: [],
			startRow: 0,
			endRow: 0,
			$size: null,
			last: {}

		};

		var $this = this,

		// hide arrows at extremes
		pagerArrows = function(p, disable) {
			var a = 'addClass',
			r = 'removeClass',
			d = p.cssDisabled,
			dis = !!disable,
			first = ( dis || p.page === 0 ),
			tp = Math.min( p.totalPages, p.filteredPages ),
			last = ( dis || (p.page === tp - 1) || tp === 0 );
			if ( p.updateArrows ) {
				p.$container.find(p.cssFirst + ',' + p.cssPrev)[ first ? a : r ](d).attr('aria-disabled', first);
				p.$container.find(p.cssNext + ',' + p.cssLast)[ last ? a : r ](d).attr('aria-disabled', last);
			}
		},

		updatePageDisplay = function(table, p, completed) {
			var i, pg, s, $out, regex,
				c = table.config,
				f = c.$table.hasClass('hasFilters'),
				t = [],
				sz = p.size || 10; // don't allow dividing by zero
			t = [ (c.widgetOptions && c.widgetOptions.filter_filteredRow || 'filtered'), c.selectorRemove.replace(/^(\w+\.)/g,'') ];
			if (p.countChildRows) { t.push(c.cssChildRow); }
			regex = new RegExp( '(' + t.join('|') + ')' );
			if (f && !p.ajaxUrl) {
				if ($.isEmptyObject(c.cache)) {
					// delayInit: true so nothing is in the cache
					p.filteredRows = p.totalRows = c.$tbodies.eq(0).children('tr').not( p.countChildRows ? '' : '.' + c.cssChildRow ).length;
				} else {
					p.filteredRows = 0;
					$.each(c.cache[0].normalized, function(i, el) {
						p.filteredRows += p.regexRows.test(el[c.columns].$row[0].className) ? 0 : 1;
					});
				}
			} else if (!f) {
				p.filteredRows = p.totalRows;
			}
			p.totalPages = Math.ceil( p.totalRows / sz ); // needed for "pageSize" method
			c.totalRows = p.totalRows;
			c.filteredRows = p.filteredRows;
			p.filteredPages = Math.ceil( p.filteredRows / sz ) || 0;
			if ( Math.min( p.totalPages, p.filteredPages ) >= 0 ) {
				t = (p.size * p.page > p.filteredRows);
				p.startRow = (t) ? 1 : (p.filteredRows === 0 ? 0 : p.size * p.page + 1);
				p.page = (t) ? 0 : p.page;
				p.endRow = Math.min( p.filteredRows, p.totalRows, p.size * ( p.page + 1 ) );
				$out = p.$container.find(p.cssPageDisplay);
				// form the output string (can now get a new output string from the server)
				s = ( p.ajaxData && p.ajaxData.output ? p.ajaxData.output || p.output : p.output )
					// {page} = one-based index; {page+#} = zero based index +/- value
					.replace(/\{page([\-+]\d+)?\}/gi, function(m,n){
						return p.totalPages ? p.page + (n ? parseInt(n, 10) : 1) : 0;
					})
					// {totalPages}, {extra}, {extra:0} (array) or {extra : key} (object)
					.replace(/\{\w+(\s*:\s*\w+)?\}/gi, function(m){
						var len, indx,
							str = m.replace(/[{}\s]/g,''),
							extra = str.split(':'),
							data = p.ajaxData,
							// return zero for default page/row numbers
							deflt = /(rows?|pages?)$/i.test(str) ? 0 : '';
						if (/(startRow|page)/.test(extra[0]) && extra[1] === 'input') {
							len = ('' + (extra[0] === 'page' ? p.totalPages : p.totalRows)).length;
							indx = extra[0] === 'page' ? p.page + 1 : p.startRow;
							return '<input type="text" class="ts-' + extra[0] + '" style="max-width:' + len + 'em" value="' + indx + '"/>';
						}
						return extra.length > 1 && data && data[extra[0]] ? data[extra[0]][extra[1]] : p[str] || (data ? data[str] : deflt) || deflt;
					});
				if ($out.length) {
					$out[ ($out[0].tagName === 'INPUT') ? 'val' : 'html' ](s);
					if ( p.$goto.length ) {
						t = '';
						pg = Math.min( p.totalPages, p.filteredPages );
						for ( i = 1; i <= pg; i++ ) {
							t += '<option>' + i + '</option>';
						}
						p.$goto[0].innerHTML = t;
						p.$goto[0].value = p.page + 1;
					}
					// rebind startRow/page inputs
					$out.find('.ts-startRow, .ts-page').unbind('change').bind('change', function(){
						var v = $(this).val(),
							pg = $(this).hasClass('ts-startRow') ? Math.floor( v/p.size ) + 1 : v;
						c.$table.trigger('pageSet.pager', [ pg ]);
					});
				}
			}
			pagerArrows(p);
			if (p.initialized && completed !== false) {
				c.$table.trigger('pagerComplete', p);
				// save pager info to storage
				if (p.savePages && ts.storage) {
					ts.storage(table, p.storageKey, {
						page : p.page,
						size : p.size
					});
				}
			}
		},

		fixHeight = function(table, p) {
			var d, h,
				c = table.config,
				$b = c.$tbodies.eq(0);
			if (p.fixedHeight) {
				$b.find('tr.pagerSavedHeightSpacer').remove();
				h = $.data(table, 'pagerSavedHeight');
				if (h) {
					d = h - $b.height();
					if ( d > 5 && $.data(table, 'pagerLastSize') === p.size && $b.children('tr:visible').length < p.size ) {
						$b.append('<tr class="pagerSavedHeightSpacer ' + c.selectorRemove.replace(/^(\w+\.)/g,'') + '" style="height:' + d + 'px;"></tr>');
					}
				}
			}
		},

		changeHeight = function(table, p) {
			var $b = table.config.$tbodies.eq(0);
			$b.find('tr.pagerSavedHeightSpacer').remove();
			$.data(table, 'pagerSavedHeight', $b.height());
			fixHeight(table, p);
			$.data(table, 'pagerLastSize', p.size);
		},

		hideRows = function(table, p){
			if (!p.ajaxUrl) {
				var i,
				lastIndex = 0,
				c = table.config,
				rows = c.$tbodies.eq(0).children('tr'),
				l = rows.length,
				s = ( p.page * p.size ),
				e =  s + p.size,
				f = c.widgetOptions && c.widgetOptions.filter_filteredRow || 'filtered',
				j = 0; // size counter
				for ( i = 0; i < l; i++ ){
					if ( !rows[i].className.match(f) ) {
						if (j === s && rows[i].className.match(c.cssChildRow)) {
							// hide child rows @ start of pager (if already visible)
							rows[i].style.display = 'none';
						} else {
							rows[i].style.display = ( j >= s && j < e ) ? '' : 'none';
							// don't count child rows
							j += rows[i].className.match(c.cssChildRow + '|' + c.selectorRemove.replace(/^(\w+\.)/g,'')) && !p.countChildRows ? 0 : 1;
							if ( j === e && rows[i].style.display !== 'none' && rows[i].className.match(ts.css.cssHasChild) ) {
								lastIndex = i;
							}
						}
					}
				}
				// add any attached child rows to last row of pager. Fixes part of issue #396
				if ( lastIndex > 0 && rows[lastIndex].className.match(ts.css.cssHasChild) ) {
					while ( ++lastIndex < l && rows[lastIndex].className.match(c.cssChildRow) ) {
						rows[lastIndex].style.display = '';
					}
				}
			}
		},

		hideRowsSetup = function(table, p){
			p.size = parseInt( p.$size.val(), 10 ) || p.size;
			$.data(table, 'pagerLastSize', p.size);
			pagerArrows(p);
			if ( !p.removeRows ) {
				hideRows(table, p);
				$(table).bind('sortEnd.pager filterEnd.pager', function(){
					hideRows(table, p);
				});
			}
		},

		renderAjax = function(data, table, p, xhr, exception){
			// process data
			if ( typeof(p.ajaxProcessing) === "function" ) {
				// ajaxProcessing result: [ total, rows, headers ]
				var i, j, hsh, $f, $sh, t, th, d, l, rr_count,
					c = table.config,
					$t = c.$table,
					tds = '',
					result = p.ajaxProcessing(data, table, xhr) || [ 0, [] ],
					hl = $t.find('thead th').length;

				// Clean up any previous error.
				ts.showError(table);

				if ( exception ) {
					if (c.debug) {
						ts.log('Ajax Error', xhr, exception);
					}
					ts.showError(table,
						xhr.status === 0 ? 'Not connected, verify Network' :
						xhr.status === 404 ? 'Requested page not found [404]' :
						xhr.status === 500 ? 'Internal Server Error [500]' :
						exception === 'parsererror' ? 'Requested JSON parse failed' :
						exception === 'timeout' ? 'Time out error' :
						exception === 'abort' ? 'Ajax Request aborted' :
						'Uncaught error: ' + xhr.statusText + ' [' + xhr.status + ']' );
					c.$tbodies.eq(0).children('tr').detach();
					p.totalRows = 0;
				} else {
					// process ajax object
					if (!$.isArray(result)) {
						p.ajaxData = result;
						c.totalRows = p.totalRows = result.total;
						c.filteredRows = p.filteredRows = typeof result.filteredRows !== 'undefined' ? result.filteredRows : result.total;
						th = result.headers;
						d = result.rows;
					} else {
						// allow [ total, rows, headers ]  or [ rows, total, headers ]
						t = isNaN(result[0]) && !isNaN(result[1]);
						// ensure a zero returned row count doesn't fail the logical ||
						rr_count = result[t ? 1 : 0];
						p.totalRows = isNaN(rr_count) ? p.totalRows || 0 : rr_count;
						// can't set filtered rows when returning an array
						c.totalRows = c.filteredRows = p.filteredRows = p.totalRows;
						d = p.totalRows === 0 ? [""] : result[t ? 0 : 1] || []; // row data
						th = result[2]; // headers
					}
					l = d && d.length;
					if (d instanceof jQuery) {
						if (p.processAjaxOnInit) {
							// append jQuery object
							c.$tbodies.eq(0).children('tr').detach();
							c.$tbodies.eq(0).append(d);
						}
					} else if (l) {
						// build table from array
						for ( i = 0; i < l; i++ ) {
							tds += '<tr>';
							for ( j = 0; j < d[i].length; j++ ) {
								// build tbody cells; watch for data containing HTML markup - see #434
								tds += /^\s*<td/.test(d[i][j]) ? $.trim(d[i][j]) : '<td>' + d[i][j] + '</td>';
							}
							tds += '</tr>';
						}
						// add rows to first tbody
						if (p.processAjaxOnInit) {
							c.$tbodies.eq(0).html( tds );
						}
					}
					p.processAjaxOnInit = true;
					// only add new header text if the length matches
					if ( th && th.length === hl ) {
						hsh = $t.hasClass('hasStickyHeaders');
						$sh = hsh ? c.widgetOptions.$sticky.children('thead:first').children('tr').children() : '';
						$f = $t.find('tfoot tr:first').children();
						// don't change td headers (may contain pager)
						c.$headers.filter('th').each(function(j){
							var $t = $(this), icn;
							// add new test within the first span it finds, or just in the header
							if ( $t.find('.' + ts.css.icon).length ) {
								icn = $t.find('.' + ts.css.icon).clone(true);
								$t.find('.tablesorter-header-inner').html( th[j] ).append(icn);
								if ( hsh && $sh.length ) {
									icn = $sh.eq(j).find('.' + ts.css.icon).clone(true);
									$sh.eq(j).find('.tablesorter-header-inner').html( th[j] ).append(icn);
								}
							} else {
								$t.find('.tablesorter-header-inner').html( th[j] );
								if (hsh && $sh.length) {
									$sh.eq(j).find('.tablesorter-header-inner').html( th[j] );
								}
							}
							$f.eq(j).html( th[j] );
						});
					}
				}
				if (c.showProcessing) {
					ts.isProcessing(table); // remove loading icon
				}
				// make sure last pager settings are saved, prevents multiple server side calls with
				// the same parameters
				p.totalPages = Math.ceil( p.totalRows / ( p.size || 10 ) );
				p.last.totalRows = p.totalRows;
				p.last.currentFilters = p.currentFilters;
				p.last.sortList = (c.sortList || []).join(',');
				updatePageDisplay(table, p);
				fixHeight(table, p);
				$t.trigger('updateCache', [function(){
					if (p.initialized) {
						// apply widgets after table has rendered & after a delay to prevent
						// multiple applyWidget blocking code from blocking this trigger
						setTimeout(function(){
							$t
								.trigger('applyWidgets')
								.trigger('pagerChange', p);
							}, 0);
					}
				}]);

			}
			if (!p.initialized) {
				p.initialized = true;
				$(table)
					.trigger('applyWidgets')
					.trigger('pagerInitialized', p);
			}
		},

		getAjax = function(table, p){
			var url = getAjaxUrl(table, p),
			$doc = $(document),
			counter,
			c = table.config;
			if ( url !== '' ) {
				if (c.showProcessing) {
					ts.isProcessing(table, true); // show loading icon
				}
				$doc.bind('ajaxError.pager', function(e, xhr, settings, exception) {
					renderAjax(null, table, p, xhr, exception);
					$doc.unbind('ajaxError.pager');
				});

				counter = ++p.ajaxCounter;

				p.ajaxObject.url = url; // from the ajaxUrl option and modified by customAjaxUrl
				p.ajaxObject.success = function(data, status, jqxhr) {
					// Refuse to process old ajax commands that were overwritten by new ones - see #443
					if (counter < p.ajaxCounter){
						return;
					}
					renderAjax(data, table, p, jqxhr);
					$doc.unbind('ajaxError.pager');
					if (typeof p.oldAjaxSuccess === 'function') {
						p.oldAjaxSuccess(data);
					}
				};
				if (c.debug) {
					ts.log('ajax initialized', p.ajaxObject);
				}
				$.ajax(p.ajaxObject);
			}
		},

		getAjaxUrl = function(table, p) {
			var c = table.config,
				url = (p.ajaxUrl) ? p.ajaxUrl
				// allow using "{page+1}" in the url string to switch to a non-zero based index
				.replace(/\{page([\-+]\d+)?\}/, function(s,n){ return p.page + (n ? parseInt(n, 10) : 0); })
				.replace(/\{size\}/g, p.size) : '',
			sl = c.sortList,
			fl = p.currentFilters || $(table).data('lastSearch') || [],
			sortCol = url.match(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/),
			filterCol = url.match(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/),
			arry = [];
			if (sortCol) {
				sortCol = sortCol[1];
				$.each(sl, function(i,v){
					arry.push(sortCol + '[' + v[0] + ']=' + v[1]);
				});
				// if the arry is empty, just add the col parameter... "&{sortList:col}" becomes "&col"
				url = url.replace(/\{\s*sort(?:List)?\s*:\s*(\w*)\s*\}/g, arry.length ? arry.join('&') : sortCol );
				arry = [];
			}
			if (filterCol) {
				filterCol = filterCol[1];
				$.each(fl, function(i,v){
					if (v) {
						arry.push(filterCol + '[' + i + ']=' + encodeURIComponent(v));
					}
				});
				// if the arry is empty, just add the fcol parameter... "&{filterList:fcol}" becomes "&fcol"
				url = url.replace(/\{\s*filter(?:List)?\s*:\s*(\w*)\s*\}/g, arry.length ? arry.join('&') : filterCol );
				p.currentFilters = fl;
			}
			if ( typeof(p.customAjaxUrl) === "function" ) {
				url = p.customAjaxUrl(table, url);
			}
			if (c.debug) {
				ts.log('Pager ajax url: ' + url);
			}
			return url;
		},

		renderTable = function(table, rows, p) {
			var $tb, index, count, added,
				$t = $(table),
				c = table.config,
				f = c.$table.hasClass('hasFilters'),
				l = rows && rows.length || 0, // rows may be undefined
				s = ( p.page * p.size ),
				e = p.size;
			if ( l < 1 ) {
				if (c.debug) {
					ts.log('Pager: no rows for pager to render');
				}
				// empty table, abort!
				return;
			}
			if ( p.page >= p.totalPages ) {
				// lets not render the table more than once
				moveToLastPage(table, p);
			}
			p.isDisabled = false; // needed because sorting will change the page and re-enable the pager
			if (p.initialized) { $t.trigger('pagerChange', p); }

			if ( !p.removeRows ) {
				hideRows(table, p);
			} else {
				ts.clearTableBody(table);
				$tb = ts.processTbody(table, c.$tbodies.eq(0), true);
				// not filtered, start from the calculated starting point (s)
				// if filtered, start from zero
				index = f ? 0 : s;
				count = f ? 0 : s;
				added = 0;
				while (added < e && index < rows.length) {
					if (!f || !/filtered/.test(rows[index][0].className)){
						count++;
						if (count > s && added <= e) {
							added++;
							$tb.append(rows[index]);
						}
					}
					index++;
				}
				ts.processTbody(table, $tb, false);
			}
			updatePageDisplay(table, p);
			if ( !p.isDisabled ) { fixHeight(table, p); }
			if (table.isUpdating) {
				$t.trigger('updateComplete', [ table, true ]);
			}
		},

		showAllRows = function(table, p){
			if ( p.ajax ) {
				pagerArrows(p, true);
			} else {
				p.isDisabled = true;
				$.data(table, 'pagerLastPage', p.page);
				$.data(table, 'pagerLastSize', p.size);
				p.page = 0;
				p.size = p.totalRows;
				p.totalPages = 1;
				$(table)
					.addClass('pagerDisabled')
					.removeAttr('aria-describedby')
					.find('tr.pagerSavedHeightSpacer').remove();
				renderTable(table, table.config.rowsCopy, p);
				$(table).trigger('applyWidgets');
				if (table.config.debug) {
					ts.log('pager disabled');
				}
			}
			// disable size selector
			p.$size.add(p.$goto).add(p.$container.find('.ts-startRow, .ts-page')).each(function(){
				$(this).attr('aria-disabled', 'true').addClass(p.cssDisabled)[0].disabled = true;
			});
		},

		// updateCache if delayInit: true
		updateCache = function(table) {
			var c = table.config,
				p = c.pager;
			c.$table.trigger('updateCache', [ function(){
				var i,
					rows = [],
					n = table.config.cache[0].normalized;
				p.totalRows = n.length;
				for (i = 0; i < p.totalRows; i++) {
					rows.push(n[i][c.columns].$row);
				}
				c.rowsCopy = rows;
				moveToPage(table, p, true);
			} ]);
		},

		moveToPage = function(table, p, pageMoved) {
			if ( p.isDisabled ) { return; }
			var c = table.config,
				$t = $(table),
				l = p.last,
				pg = Math.min( p.totalPages, p.filteredPages );
			if ( pageMoved !== false && p.initialized && $.isEmptyObject(table.config.cache)) {
				return updateCache(table);
			}
			if ( p.page < 0 ) { p.page = 0; }
			if ( p.page > ( pg - 1 ) && pg !== 0 ) { p.page = pg - 1; }
			// fixes issue where one currentFilter is [] and the other is ['','',''],
			// making the next if comparison think the filters are different (joined by commas). Fixes #202.
			l.currentFilters = (l.currentFilters || []).join('') === '' ? [] : l.currentFilters;
			p.currentFilters = (p.currentFilters || []).join('') === '' ? [] : p.currentFilters;
			// don't allow rendering multiple times on the same page/size/totalRows/filters/sorts
			if ( l.page === p.page && l.size === p.size && l.totalRows === p.totalRows &&
				(l.currentFilters || []).join(',') === (p.currentFilters || []).join(',') &&
				l.sortList === (c.sortList || []).join(',') ) { return; }
			if (c.debug) {
				ts.log('Pager changing to page ' + p.page);
			}
			p.last = {
				page : p.page,
				size : p.size,
				// fixes #408; modify sortList otherwise it auto-updates
				sortList : (c.sortList || []).join(','),
				totalRows : p.totalRows,
				currentFilters : p.currentFilters || []
			};
			if (p.ajax) {
				getAjax(table, p);
			} else if (!p.ajax) {
				renderTable(table, c.rowsCopy, p);
			}
			$.data(table, 'pagerLastPage', p.page);
			if (p.initialized && pageMoved !== false) {
				$t
					.trigger('pageMoved', p)
					.trigger('applyWidgets');
				if (table.isUpdating) {
					$t.trigger('updateComplete', [ table, true ]);
				}
			}
		},

		setPageSize = function(table, size, p) {
			p.size = size || p.size || 10;
			p.$size.val(p.size);
			$.data(table, 'pagerLastPage', p.page);
			$.data(table, 'pagerLastSize', p.size);
			p.totalPages = Math.ceil( p.totalRows / p.size );
			p.filteredPages = Math.ceil( p.filteredRows / p.size );
			moveToPage(table, p);
		},

		moveToFirstPage = function(table, p) {
			p.page = 0;
			moveToPage(table, p);
		},

		moveToLastPage = function(table, p) {
			p.page = ( Math.min( p.totalPages, p.filteredPages ) - 1 );
			moveToPage(table, p);
		},

		moveToNextPage = function(table, p) {
			p.page++;
			if ( p.page >= ( Math.min( p.totalPages, p.filteredPages ) - 1 ) ) {
				p.page = ( Math.min( p.totalPages, p.filteredPages ) - 1 );
			}
			moveToPage(table, p);
		},

		moveToPrevPage = function(table, p) {
			p.page--;
			if ( p.page <= 0 ) {
				p.page = 0;
			}
			moveToPage(table, p);
		},

		destroyPager = function(table, p){
			showAllRows(table, p);
			p.$container.hide(); // hide pager
			table.config.appender = null; // remove pager appender function
			p.initialized = false;
			delete table.config.rowsCopy;
			$(table).unbind('destroy.pager sortEnd.pager filterEnd.pager enable.pager disable.pager');
			if (ts.storage) {
				ts.storage(table, p.storageKey, '');
			}
		},

		enablePager = function(table, p, triggered){
			var info,
				c = table.config;
			p.$size.add(p.$goto).add(p.$container.find('.ts-startRow, .ts-page'))
				.removeClass(p.cssDisabled)
				.removeAttr('disabled')
				.attr('aria-disabled', 'false');
			p.isDisabled = false;
			p.page = $.data(table, 'pagerLastPage') || p.page || 0;
			p.size = $.data(table, 'pagerLastSize') || parseInt(p.$size.find('option[selected]').val(), 10) || p.size || 10;
			p.$size.val(p.size); // set page size
			p.totalPages = Math.ceil( Math.min( p.totalRows, p.filteredRows ) / p.size );
			// if table id exists, include page display with aria info
			if ( table.id ) {
				info = table.id + '_pager_info';
				p.$container.find(p.cssPageDisplay).attr('id', info);
				c.$table.attr('aria-describedby', info);
			}
			if ( triggered ) {
				c.$table.trigger('updateRows');
				setPageSize(table, p.size, p);
				hideRowsSetup(table, p);
				fixHeight(table, p);
				if (c.debug) {
					ts.log('pager enabled');
				}
			}
		};

		$this.appender = function(table, rows) {
			var c = table.config,
				p = c.pager;
			if ( !p.ajax ) {
				c.rowsCopy = rows;
				p.totalRows = p.countChildRows ? c.$tbodies.eq(0).children('tr').length : rows.length;
				p.size = $.data(table, 'pagerLastSize') || p.size || 10;
				p.totalPages = Math.ceil( p.totalRows / p.size );
				renderTable(table, rows, p);
				// update display here in case all rows are removed
				updatePageDisplay(table, p, false);
			}
		};

		$this.construct = function(settings) {
			return this.each(function() {
				// check if tablesorter has initialized
				if (!(this.config && this.hasInitialized)) { return; }
				var t, ctrls, fxn,
					table = this,
					c = table.config,
					wo = c.widgetOptions,
					p = c.pager = $.extend( true, {}, $.tablesorterPager.defaults, settings ),
					$t = c.$table,
					// added in case the pager is reinitialized after being destroyed.
					pager = p.$container = $(p.container).addClass('tablesorter-pager').show();
				if (c.debug) {
					ts.log('Pager initializing');
				}
				p.oldAjaxSuccess = p.oldAjaxSuccess || p.ajaxObject.success;
				c.appender = $this.appender;
				if (ts.filter && $.inArray('filter', c.widgets) >= 0) {
					// get any default filter settings (data-value attribute) fixes #388
					p.currentFilters = c.$table.data('lastSearch') || ts.filter.setDefaults(table, c, c.widgetOptions) || [];
					// set, but don't apply current filters
					ts.setFilters(table, p.currentFilters, false);
				}
				if (p.savePages && ts.storage) {
					t = ts.storage(table, p.storageKey) || {}; // fixes #387
					p.page = isNaN(t.page) ? p.page : t.page;
					p.size = ( isNaN(t.size) ? p.size : t.size ) || 10;
					$.data(table, 'pagerLastSize', p.size);
				}

				// skipped rows
				p.regexRows = new RegExp('(' + (wo.filter_filteredRow || 'filtered') + '|' + c.selectorRemove.replace(/^(\w+\.)/g,'') + '|' + c.cssChildRow + ')');

				$t
					.unbind('filterStart filterEnd sortEnd disable enable destroy updateComplete pageSize '.split(' ').join('.pager '))
					.bind('filterStart.pager', function(e, filters) {
						p.currentFilters = filters;
						// don't change page is filters are the same (pager updating, etc)
						if (p.pageReset !== false && (c.lastCombinedFilter || '') !== (filters || []).join('')) {
							p.page = p.pageReset; // fixes #456 & #565
						}
					})
					// update pager after filter widget completes
					.bind('filterEnd.pager sortEnd.pager', function() {
						if (p.initialized) {
							if (c.delayInit && c.rowsCopy && c.rowsCopy.length === 0) {
								// make sure we have a copy of all table rows once the cache has been built
								updateCache(table);
							}
							// update page display first, so we update p.filteredPages
							updatePageDisplay(table, p, false);
							moveToPage(table, p, false);
							c.$table.trigger('applyWidgets');
							fixHeight(table, p);
						}
					})
					.bind('disable.pager', function(e){
						e.stopPropagation();
						showAllRows(table, p);
					})
					.bind('enable.pager', function(e){
						e.stopPropagation();
						enablePager(table, p, true);
					})
					.bind('destroy.pager', function(e){
						e.stopPropagation();
						destroyPager(table, p);
					})
					.bind('updateComplete.pager', function(e, table, triggered){
						e.stopPropagation();
						// table can be unintentionally undefined in tablesorter v2.17.7 and earlier
						if ( !table || triggered ) { return; }
						fixHeight(table, p);
						var $rows = c.$tbodies.eq(0).children('tr').not(c.selectorRemove);
						p.totalRows = $rows.length - ( p.countChildRows ? 0 : $rows.filter('.' + c.cssChildRow).length );
						p.totalPages = Math.ceil( p.totalRows / p.size );
						if ($rows.length && c.rowsCopy && c.rowsCopy.length === 0) {
							// make a copy of all table rows once the cache has been built
							updateCache(table);
						}
						updatePageDisplay(table, p);
						hideRows(table, p);
					})
					.bind('pageSize.pager', function(e,v){
						e.stopPropagation();
						setPageSize(table, parseInt(v, 10) || 10, p);
						hideRows(table, p);
						updatePageDisplay(table, p, false);
						if (p.$size.length) { p.$size.val(p.size); } // twice?
					})
					.bind('pageSet.pager', function(e,v){
						e.stopPropagation();
						p.page = (parseInt(v, 10) || 1) - 1;
						if (p.$goto.length) { p.$goto.val(p.size); } // twice?
						moveToPage(table, p, true);
						updatePageDisplay(table, p, false);
					});

				// clicked controls
				ctrls = [ p.cssFirst, p.cssPrev, p.cssNext, p.cssLast ];
				fxn = [ moveToFirstPage, moveToPrevPage, moveToNextPage, moveToLastPage ];
				pager.find(ctrls.join(','))
					.attr("tabindex", 0)
					.unbind('click.pager')
					.bind('click.pager', function(e){
						e.stopPropagation();
						var i, $t = $(this), l = ctrls.length;
						if ( !$t.hasClass(p.cssDisabled) ) {
							for (i = 0; i < l; i++) {
								if ($t.is(ctrls[i])) {
									fxn[i](table, p);
									break;
								}
							}
						}
					});

				// goto selector
				p.$goto = pager.find(p.cssGoto);
				if ( p.$goto.length ) {
					p.$goto
						.unbind('change')
						.bind('change', function(){
							p.page = $(this).val() - 1;
							moveToPage(table, p, true);
							updatePageDisplay(table, p, false);
						});
				}

				// page size selector
				p.$size = pager.find(p.cssPageSize);
				if ( p.$size.length ) {
					// setting an option as selected appears to cause issues with initial page size
					p.$size.find('option').removeAttr('selected');
					p.$size.unbind('change.pager').bind('change.pager', function() {
						p.$size.val( $(this).val() ); // in case there are more than one pagers
						if ( !$(this).hasClass(p.cssDisabled) ) {
							setPageSize(table, parseInt( $(this).val(), 10 ), p);
							changeHeight(table, p);
						}
						return false;
					});
				}

				// clear initialized flag
				p.initialized = false;
				// before initialization event
				$t.trigger('pagerBeforeInitialized', p);

				enablePager(table, p, false);

				if ( typeof(p.ajaxUrl) === 'string' ) {
					// ajax pager; interact with database
					p.ajax = true;
					//When filtering with ajax, allow only custom filtering function, disable default filtering since it will be done server side.
					c.widgetOptions.filter_serversideFiltering = true;
					c.serverSideSorting = true;
					moveToPage(table, p);
				} else {
					p.ajax = false;
					// Regular pager; all rows stored in memory
					$(this).trigger("appendCache", true);
					hideRowsSetup(table, p);
				}

				changeHeight(table, p);

				// pager initialized
				if (!p.ajax) {
					p.initialized = true;
					$(table).trigger('pagerInitialized', p);
				}
			});
		};

	}() });

	// see #486
	ts.showError = function(table, message){
		$(table).each(function(){
			var $row,
				c = this.config,
				errorRow = c.pager && c.pager.cssErrorRow || c.widgetOptions.pager_css && c.widgetOptions.pager_css.errorRow || 'tablesorter-errorRow';
			if (c) {
				if (typeof message === 'undefined') {
					c.$table.find('thead').find(c.selectorRemove).remove();
				} else {
					$row = ( /tr\>/.test(message) ? $(message) : $('<tr><td colspan="' + c.columns + '">' + message + '</td></tr>') )
						.click(function(){
							$(this).remove();
						})
						// add error row to thead instead of tbody, or clicking on the header will result in a parser error
						.appendTo( c.$table.find('thead:first') )
						.addClass( errorRow + ' ' + c.selectorRemove.replace(/^(\w+\.)/g,'') )
						.attr({
							role : 'alert',
							'aria-live' : 'assertive'
						});
				}
			}
		});
	};

// extend plugin scope
$.fn.extend({
	tablesorterPager: $.tablesorterPager.construct
});

})(jQuery);

/* ---------------------------------------- /includes/jsbin/jquery.tinypubsub.js ---------------------------------------- */
/*!
 * jQuery Tiny Pub/Sub for jQuery 1.7 - v0.1 - 27/10/2011
 * Based on @cowboy Ben Alman's REALLY tiny pub/sub. 
 * 1.7 specific updates by @addyosmani.
 * Copyright maintained by @cowboy. 
 * Dual licensed under the MIT and GPL licenses.
 */

(function($){

  // Create a "dummy" jQuery object on which to call on, off and trigger event
  // handlers. Although using {} throws errors here in older versions of jQuery
  // if you are using 1.7, you won't have this issue.
  var o = $({});

  // Subscribe to a topic. Works just like on, except the passed handler
  // is wrapped in a function so that the event object can be stripped out.
  // Even though the event object might be useful, it is unnecessary and
  // will only complicate things in the future should the user decide to move
  // to a non-$.event-based pub/sub implementation.
  $.subscribe = function( topic, fn ) {

    // Call fn, stripping out the 1st argument (the event object).
    function wrapper() {
      return fn.apply( this, Array.prototype.slice.call( arguments, 1 ) );
    }

    // Add .guid property to function to allow it to be easily unbound. Note
    // that $.guid is new in jQuery 1.4+, and $.event.guid was used before.
    wrapper.guid = fn.guid = fn.guid || ( $.guid ? $.guid++ : $.event.guid++ );

    // Bind the handler.
    o.on( topic, wrapper );
  };

  // Unsubscribe from a topic.
  $.unsubscribe = function() {
    o.off.apply( o, arguments );
  };

  // Publish a topic
  $.publish = function() {
    o.trigger.apply( o, arguments );
  };

})(jQuery);
/* ---------------------------------------- /includes/jsbin/jquery.tweet.js ---------------------------------------- */
// jquery.tweet.js - See http://tweet.seaofclouds.com/ or https://github.com/seaofclouds/tweet for more info
// Copyright (c) 2008-2011 Todd Matthews & Steve Purcell
(function($) {
  $.fn.tweet = function(o){
    var s = $.extend({
      username: 'Lpga',                           // [string or array] required unless using the 'query' option; one or more twitter screen names (use 'list' option for multiple names, where possible)
      list: null,                               // [string]   optional name of list belonging to username
      favorites: false,                         // [boolean]  display the user's favorites instead of his tweets
      query: null,                              // [string]   optional search query (see also: http://search.twitter.com/operators)
      avatar_size: null,                        // [integer]  height and width of avatar if displayed (48px max)
      count: 3,                                 // [integer]  how many tweets to display?
      fetch: null,                              // [integer]  how many tweets to fetch via the API (set this higher than 'count' if using the 'filter' option)
      page: 1,                                  // [integer]  which page of results to fetch (if count != fetch, you'll get unexpected results)
      retweets: true,                           // [boolean]  whether to fetch (official) retweets (not supported in all display modes)
      intro_text: null,                         // [string]   do you want text BEFORE your your tweets?
      outro_text: null,                         // [string]   do you want text AFTER your tweets?
      join_text:  null,                         // [string]   optional text in between date and tweet, try setting to "auto"
      auto_join_text_default: "i said,",        // [string]   auto text for non verb: "i said" bullocks
      auto_join_text_ed: "i",                   // [string]   auto text for past tense: "i" surfed
      auto_join_text_ing: "i am",               // [string]   auto tense for present tense: "i was" surfing
      auto_join_text_reply: "i replied to",     // [string]   auto tense for replies: "i replied to" @someone "with"
      auto_join_text_url: "i was looking at",   // [string]   auto tense for urls: "i was looking at" http:...
      loading_text: null,                       // [string]   optional loading text, displayed while tweets load
      refresh_interval: null ,                  // [integer]  optional number of seconds after which to reload tweets
      twitter_url: "twitter.com",               // [string]   custom twitter url, if any (apigee, etc.)
      twitter_api_url: "api.twitter.com",       // [string]   custom twitter api url, if any (apigee, etc.)
      twitter_search_url: "search.twitter.com", // [string]   custom twitter search url, if any (apigee, etc.)
      template: "{avatar}{time}{join}{text}",   // [string or function] template used to construct each tweet <li> - see code for available vars
      comparator: function(tweet1, tweet2) {    // [function] comparator used to sort tweets (see Array.sort)
        return tweet2["tweet_time"] - tweet1["tweet_time"];
      },
      filter: function(tweet) {                 // [function] whether or not to include a particular tweet (be sure to also set 'fetch')
        return true;
      }
    }, o);

    // See http://daringfireball.net/2010/07/improved_regex_for_matching_urls
    var url_regexp = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi;

    // Expand values inside simple string templates with {placeholders}
    function t(template, info) {
      if (typeof template === "string") {
        var result = template;
        for(var key in info) {
          var val = info[key];
          result = result.replace(new RegExp('{'+key+'}','g'), val === null ? '' : val);
        }
        return result;
      } else return template(info);
    }
    // Export the t function for use when passing a function as the 'template' option
    $.extend({tweet: {t: t}});

    function replacer (regex, replacement) {
      return function() {
        var returning = [];
        this.each(function() {
          returning.push(this.replace(regex, replacement));
        });
        return $(returning);
      };
    }

    function escapeHTML(s) {
      return s.replace(/</g,"&lt;").replace(/>/g,"^&gt;");
    }

    $.fn.extend({
      linkUser: replacer(/(^|[\W])@(\w+)/gi, "$1@<a href=\"http://"+s.twitter_url+"/$2\">$2</a>"),
      // Support various latin1 (\u00**) and arabic (\u06**) alphanumeric chars
      linkHash: replacer(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,
                         ' <a href="http://'+s.twitter_search_url+'/search?q=&tag=$1&lang=all'+((s.username && s.username.length == 1 && !s.list) ? '&from='+s.username.join("%2BOR%2B") : '')+'">#$1</a>'),
      capAwesome: replacer(/\b(awesome)\b/gi, '<span class="awesome">$1</span>'),
      capEpic: replacer(/\b(epic)\b/gi, '<span class="epic">$1</span>'),
      makeHeart: replacer(/(&lt;)+[3]/gi, "<tt class='heart'>&#x2665;</tt>")
    });

    function linkURLs(text, entities) {
      return text.replace(url_regexp, function(match) {
        var url = (/^[a-z]+:/i).test(match) ? match : "http://"+match;
        var text = match;
        for(var i = 0; i < entities.length; ++i) {
          var entity = entities[i];
          if (entity.url == url && entity.expanded_url) {
            url = entity.expanded_url;
            text = entity.display_url;
            break;
          }
        }
        return "<a href=\""+escapeHTML(url)+"\">"+escapeHTML(text)+"</a>";
      });
    }

    function parse_date(date_str) {
      // The non-search twitter APIs return inconsistently-formatted dates, which Date.parse
      // cannot handle in IE. We therefore perform the following transformation:
      // "Wed Apr 29 08:53:31 +0000 2009" => "Wed, Apr 29 2009 08:53:31 +0000"
      return Date.parse(date_str.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i, '$1,$2$4$3'));
    }

    function relative_time(date) {
      var relative_to = (arguments.length > 1) ? arguments[1] : new Date();
      var delta = parseInt((relative_to.getTime() - date) / 1000, 10);
      var r = '';
      if (delta < 1) {
        r = 'just now';
      } else if (delta < 60) {
        r = delta + ' seconds ago';
      } else if(delta < 120) {
        r = 'a minute ago';
      } else if(delta < (45*60)) {
        r = (parseInt(delta / 60, 10)).toString() + ' minutes ago';
      } else if(delta < (2*60*60)) {
        r = 'an hour ago';
      } else if(delta < (24*60*60)) {
        r = '' + (parseInt(delta / 3600, 10)).toString() + ' hours ago';
      } else if(delta < (48*60*60)) {
        r = 'a day ago';
      } else {
        r = (parseInt(delta / 86400, 10)).toString() + ' days ago';
      }
      return r;
    }

    function build_auto_join_text(text) {
      if (text.match(/^(@([A-Za-z0-9-_]+)) .*/i)) {
        return s.auto_join_text_reply;
      } else if (text.match(url_regexp)) {
        return s.auto_join_text_url;
      } else if (text.match(/^((\w+ed)|just) .*/im)) {
        return s.auto_join_text_ed;
      } else if (text.match(/^(\w*ing) .*/i)) {
        return s.auto_join_text_ing;
      } else {
        return s.auto_join_text_default;
      }
    }

    function build_api_url() {
      var proto = ('https:' == document.location.protocol ? 'https:' : 'http:');
      var count = (s.fetch === null) ? s.count : s.fetch;
      var common_params = '&include_entities=1&callback=?';
      if (s.list) {
        return proto+"//"+s.twitter_api_url+"/1/"+s.username[0]+"/lists/"+s.list+"/statuses.json?page="+s.page+"&per_page="+count+common_params;
      } else if (s.favorites) {
        return proto+"//"+s.twitter_api_url+"/favorites/"+s.username[0]+".json?page="+s.page+"&count="+count+common_params;
      } else if (s.query === null && s.username.length == 1) {
        return proto+'//'+s.twitter_api_url+'/1/statuses/user_timeline.json?screen_name='+s.username[0]+'&count='+count+(s.retweets ? '&include_rts=1' : '')+'&page='+s.page+common_params;
      } else {
        var query = (s.query || 'from:'+s.username.join(' OR from:'));
        return proto+'//'+s.twitter_search_url+'/search.json?&q='+encodeURIComponent(query)+'&rpp='+count+'&page='+s.page+common_params;
      }
    }

    function extract_avatar_url(item, secure) {
      if (secure) {
        return ('user' in item) ?
          item.user.profile_image_url_https :
          extract_avatar_url(item, false).
            replace(/^http:\/\/[a-z0-9]{1,3}\.twimg\.com\//, "https://s3.amazonaws.com/twitter_production/");
      } else {
        return item.profile_image_url || item.user.profile_image_url;
      }
    }

    // Convert twitter API objects into data available for
    // constructing each tweet <li> using a template
    function extract_template_data(item){
      var o = {};
      o.item = item;
      o.source = item.source;
      o.screen_name = item.from_user || item.user.screen_name;
      o.avatar_size = s.avatar_size;
      o.avatar_url = extract_avatar_url(item, (document.location.protocol === 'https:'));
      o.retweet = typeof(item.retweeted_status) != 'undefined';
      o.tweet_time = parse_date(item.created_at);
      o.join_text = s.join_text == "auto" ? build_auto_join_text(item.text) : s.join_text;
      o.tweet_id = item.id_str;
      o.twitter_base = "http://"+s.twitter_url+"/";
      o.user_url = o.twitter_base+o.screen_name;
      o.tweet_url = o.user_url+"/status/"+o.tweet_id;
      o.reply_url = o.twitter_base+"intent/tweet?in_reply_to="+o.tweet_id;
      o.retweet_url = o.twitter_base+"intent/retweet?tweet_id="+o.tweet_id;
      o.favorite_url = o.twitter_base+"intent/favorite?tweet_id="+o.tweet_id;
      o.retweeted_screen_name = o.retweet && item.retweeted_status.user.screen_name;
      o.tweet_relative_time = relative_time(o.tweet_time);
      o.entities = item.entities ? (item.entities.urls || []).concat(item.entities.media || []) : [];
      o.tweet_raw_text = o.retweet ? ('RT @'+o.retweeted_screen_name+' '+item.retweeted_status.text) : item.text; // avoid '...' in long retweets
      o.tweet_text = $([linkURLs(o.tweet_raw_text, o.entities)]).linkUser().linkHash()[0];
      o.tweet_text_fancy = $([o.tweet_text]).makeHeart().capAwesome().capEpic()[0];

      // Default spans, and pre-formatted blocks for common layouts
      o.user = t('<a class="tweet_user" href="{user_url}">{screen_name}</a>', o);
      o.join = s.join_text ? t(' <span class="tweet_join">{join_text}</span> ', o) : ' ';
      o.avatar = o.avatar_size ?
        t('<a class="tweet_avatar" href="{user_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/></a>', o) : '';
      o.time = t('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}</a></span>', o);
      o.text = t('<span class="tweet_text">{tweet_text_fancy}</span>', o);
      o.reply_action = t('<a class="tweet_action tweet_reply" href="{reply_url}">reply</a>', o);
      o.retweet_action = t('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet</a>', o);
      o.favorite_action = t('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite</a>', o);
      return o;
    }

    return this.each(function(i, widget){
      var list = $('<ul class="tweet_list">');
      var intro = '<p class="tweet_intro">'+s.intro_text+'</p>';
      var outro = '<p class="tweet_outro">'+s.outro_text+'</p>';
      var loading = $('<p class="loading">'+s.loading_text+'</p>');

      if(s.username && typeof(s.username) == "string"){
        s.username = [s.username];
      }

      $(widget).bind("tweet:load", function(){
        if (s.loading_text) $(widget).empty().append(loading);
        $.getJSON(build_api_url(), function(data){
          $(widget).empty().append(list);
          if (s.intro_text) list.before(intro);
          list.empty();

          var tweets = $.map(data.results || data, extract_template_data);
          tweets = $.grep(tweets, s.filter).sort(s.comparator).slice(0, s.count);
          list.append($.map(tweets, function(o) { return "<li>" + t(s.template, o) + "</li>"; }).join('')).
              children('li:first').addClass('tweet_first').end().
              children('li:odd').addClass('tweet_even').end().
              children('li:even').addClass('tweet_odd');

          if (s.outro_text) list.after(outro);
          $(widget).trigger("loaded").trigger((tweets.length === 0 ? "empty" : "full"));
          if (s.refresh_interval) {
            window.setTimeout(function() { $(widget).trigger("tweet:load"); }, 1000 * s.refresh_interval);
          }
        });
      }).trigger("tweet:load");
    });
  };
})(jQuery);

/* ---------------------------------------- /includes/jsbin/jquery.validate.js ---------------------------------------- */
/*!
 * jQuery Validation Plugin v1.13.0
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2014 Jörn Zaefferer
 * Released under the MIT license
 */
(function( factory ) {
	if ( typeof define === "function" && define.amd ) {
		define( ["jquery"], factory );
	} else {
		factory( jQuery );
	}
}(function( $ ) {

$.extend($.fn, {
	// http://jqueryvalidation.org/validate/
	validate: function( options ) {

		// if nothing is selected, return nothing; can't chain anyway
		if ( !this.length ) {
			if ( options && options.debug && window.console ) {
				console.warn( "Nothing selected, can't validate, returning nothing." );
			}
			return;
		}

		// check if a validator for this form was already created
		var validator = $.data( this[ 0 ], "validator" );
		if ( validator ) {
			return validator;
		}

		// Add novalidate tag if HTML5.
		this.attr( "novalidate", "novalidate" );

		validator = new $.validator( options, this[ 0 ] );
		$.data( this[ 0 ], "validator", validator );

		if ( validator.settings.onsubmit ) {

			this.validateDelegate( ":submit", "click", function( event ) {
				if ( validator.settings.submitHandler ) {
					validator.submitButton = event.target;
				}
				// allow suppressing validation by adding a cancel class to the submit button
				if ( $( event.target ).hasClass( "cancel" ) ) {
					validator.cancelSubmit = true;
				}

				// allow suppressing validation by adding the html5 formnovalidate attribute to the submit button
				if ( $( event.target ).attr( "formnovalidate" ) !== undefined ) {
					validator.cancelSubmit = true;
				}
			});

			// validate the form on submit
			this.submit( function( event ) {
				if ( validator.settings.debug ) {
					// prevent form submit to be able to see console output
					event.preventDefault();
				}
				function handle() {
					var hidden;
					if ( validator.settings.submitHandler ) {
						if ( validator.submitButton ) {
							// insert a hidden input as a replacement for the missing submit button
							hidden = $( "<input type='hidden'/>" )
								.attr( "name", validator.submitButton.name )
								.val( $( validator.submitButton ).val() )
								.appendTo( validator.currentForm );
						}
						validator.settings.submitHandler.call( validator, validator.currentForm, event );
						if ( validator.submitButton ) {
							// and clean up afterwards; thanks to no-block-scope, hidden can be referenced
							hidden.remove();
						}
						return false;
					}
					return true;
				}

				// prevent submit for invalid forms or custom submit handlers
				if ( validator.cancelSubmit ) {
					validator.cancelSubmit = false;
					return handle();
				}
				if ( validator.form() ) {
					if ( validator.pendingRequest ) {
						validator.formSubmitted = true;
						return false;
					}
					return handle();
				} else {
					validator.focusInvalid();
					return false;
				}
			});
		}

		return validator;
	},
	// http://jqueryvalidation.org/valid/
	valid: function() {
		var valid, validator;

		if ( $( this[ 0 ] ).is( "form" ) ) {
			valid = this.validate().form();
		} else {
			valid = true;
			validator = $( this[ 0 ].form ).validate();
			this.each( function() {
				valid = validator.element( this ) && valid;
			});
		}
		return valid;
	},
	// attributes: space separated list of attributes to retrieve and remove
	removeAttrs: function( attributes ) {
		var result = {},
			$element = this;
		$.each( attributes.split( /\s/ ), function( index, value ) {
			result[ value ] = $element.attr( value );
			$element.removeAttr( value );
		});
		return result;
	},
	// http://jqueryvalidation.org/rules/
	rules: function( command, argument ) {
		var element = this[ 0 ],
			settings, staticRules, existingRules, data, param, filtered;

		if ( command ) {
			settings = $.data( element.form, "validator" ).settings;
			staticRules = settings.rules;
			existingRules = $.validator.staticRules( element );
			switch ( command ) {
			case "add":
				$.extend( existingRules, $.validator.normalizeRule( argument ) );
				// remove messages from rules, but allow them to be set separately
				delete existingRules.messages;
				staticRules[ element.name ] = existingRules;
				if ( argument.messages ) {
					settings.messages[ element.name ] = $.extend( settings.messages[ element.name ], argument.messages );
				}
				break;
			case "remove":
				if ( !argument ) {
					delete staticRules[ element.name ];
					return existingRules;
				}
				filtered = {};
				$.each( argument.split( /\s/ ), function( index, method ) {
					filtered[ method ] = existingRules[ method ];
					delete existingRules[ method ];
					if ( method === "required" ) {
						$( element ).removeAttr( "aria-required" );
					}
				});
				return filtered;
			}
		}

		data = $.validator.normalizeRules(
		$.extend(
			{},
			$.validator.classRules( element ),
			$.validator.attributeRules( element ),
			$.validator.dataRules( element ),
			$.validator.staticRules( element )
		), element );

		// make sure required is at front
		if ( data.required ) {
			param = data.required;
			delete data.required;
			data = $.extend( { required: param }, data );
			$( element ).attr( "aria-required", "true" );
		}

		// make sure remote is at back
		if ( data.remote ) {
			param = data.remote;
			delete data.remote;
			data = $.extend( data, { remote: param });
		}

		return data;
	}
});

// Custom selectors
$.extend( $.expr[ ":" ], {
	// http://jqueryvalidation.org/blank-selector/
	blank: function( a ) {
		return !$.trim( "" + $( a ).val() );
	},
	// http://jqueryvalidation.org/filled-selector/
	filled: function( a ) {
		return !!$.trim( "" + $( a ).val() );
	},
	// http://jqueryvalidation.org/unchecked-selector/
	unchecked: function( a ) {
		return !$( a ).prop( "checked" );
	}
});

// constructor for validator
$.validator = function( options, form ) {
	this.settings = $.extend( true, {}, $.validator.defaults, options );
	this.currentForm = form;
	this.init();
};

// http://jqueryvalidation.org/jQuery.validator.format/
$.validator.format = function( source, params ) {
	if ( arguments.length === 1 ) {
		return function() {
			var args = $.makeArray( arguments );
			args.unshift( source );
			return $.validator.format.apply( this, args );
		};
	}
	if ( arguments.length > 2 && params.constructor !== Array  ) {
		params = $.makeArray( arguments ).slice( 1 );
	}
	if ( params.constructor !== Array ) {
		params = [ params ];
	}
	$.each( params, function( i, n ) {
		source = source.replace( new RegExp( "\\{" + i + "\\}", "g" ), function() {
			return n;
		});
	});
	return source;
};

$.extend( $.validator, {

	defaults: {
		messages: {},
		groups: {},
		rules: {},
		errorClass: "error",
		validClass: "valid",
		errorElement: "label",
		focusInvalid: true,
		errorContainer: $( [] ),
		errorLabelContainer: $( [] ),
		onsubmit: true,
		ignore: ":hidden",
		ignoreTitle: false,
		onfocusin: function( element ) {
			this.lastActive = element;

			// hide error label and remove error class on focus if enabled
			if ( this.settings.focusCleanup && !this.blockFocusCleanup ) {
				if ( this.settings.unhighlight ) {
					this.settings.unhighlight.call( this, element, this.settings.errorClass, this.settings.validClass );
				}
				this.hideThese( this.errorsFor( element ) );
			}
		},
		onfocusout: function( element ) {
			if ( !this.checkable( element ) && ( element.name in this.submitted || !this.optional( element ) ) ) {
				this.element( element );
			}
		},
		onkeyup: function( element, event ) {
			if ( event.which === 9 && this.elementValue( element ) === "" ) {
				return;
			} else if ( element.name in this.submitted || element === this.lastElement ) {
				this.element( element );
			}
		},
		onclick: function( element ) {
			// click on selects, radiobuttons and checkboxes
			if ( element.name in this.submitted ) {
				this.element( element );

			// or option elements, check parent select in that case
			} else if ( element.parentNode.name in this.submitted ) {
				this.element( element.parentNode );
			}
		},
		highlight: function( element, errorClass, validClass ) {
			if ( element.type === "radio" ) {
				this.findByName( element.name ).addClass( errorClass ).removeClass( validClass );
			} else {
				$( element ).addClass( errorClass ).removeClass( validClass );
			}
		},
		unhighlight: function( element, errorClass, validClass ) {
			if ( element.type === "radio" ) {
				this.findByName( element.name ).removeClass( errorClass ).addClass( validClass );
			} else {
				$( element ).removeClass( errorClass ).addClass( validClass );
			}
		}
	},

	// http://jqueryvalidation.org/jQuery.validator.setDefaults/
	setDefaults: function( settings ) {
		$.extend( $.validator.defaults, settings );
	},

	messages: {
		required: "This field is required.",
		remote: "Please fix this field.",
		email: "Please enter a valid email address.",
		url: "Please enter a valid URL.",
		date: "Please enter a valid date.",
		dateISO: "Please enter a valid date ( ISO ).",
		number: "Please enter a valid number.",
		digits: "Please enter only digits.",
		creditcard: "Please enter a valid credit card number.",
		equalTo: "Please enter the same value again.",
		maxlength: $.validator.format( "Please enter no more than {0} characters." ),
		minlength: $.validator.format( "Please enter at least {0} characters." ),
		rangelength: $.validator.format( "Please enter a value between {0} and {1} characters long." ),
		range: $.validator.format( "Please enter a value between {0} and {1}." ),
		max: $.validator.format( "Please enter a value less than or equal to {0}." ),
		min: $.validator.format( "Please enter a value greater than or equal to {0}." )
	},

	autoCreateRanges: false,

	prototype: {

		init: function() {
			this.labelContainer = $( this.settings.errorLabelContainer );
			this.errorContext = this.labelContainer.length && this.labelContainer || $( this.currentForm );
			this.containers = $( this.settings.errorContainer ).add( this.settings.errorLabelContainer );
			this.submitted = {};
			this.valueCache = {};
			this.pendingRequest = 0;
			this.pending = {};
			this.invalid = {};
			this.reset();

			var groups = ( this.groups = {} ),
				rules;
			$.each( this.settings.groups, function( key, value ) {
				if ( typeof value === "string" ) {
					value = value.split( /\s/ );
				}
				$.each( value, function( index, name ) {
					groups[ name ] = key;
				});
			});
			rules = this.settings.rules;
			$.each( rules, function( key, value ) {
				rules[ key ] = $.validator.normalizeRule( value );
			});

			function delegate( event ) {
				var validator = $.data( this[ 0 ].form, "validator" ),
					eventType = "on" + event.type.replace( /^validate/, "" ),
					settings = validator.settings;
				if ( settings[ eventType ] && !this.is( settings.ignore ) ) {
					settings[ eventType ].call( validator, this[ 0 ], event );
				}
			}
			$( this.currentForm )
				.validateDelegate( ":text, [type='password'], [type='file'], select, textarea, " +
					"[type='number'], [type='search'] ,[type='tel'], [type='url'], " +
					"[type='email'], [type='datetime'], [type='date'], [type='month'], " +
					"[type='week'], [type='time'], [type='datetime-local'], " +
					"[type='range'], [type='color'], [type='radio'], [type='checkbox']",
					"focusin focusout keyup", delegate)
				// Support: Chrome, oldIE
				// "select" is provided as event.target when clicking a option
				.validateDelegate("select, option, [type='radio'], [type='checkbox']", "click", delegate);

			if ( this.settings.invalidHandler ) {
				$( this.currentForm ).bind( "invalid-form.validate", this.settings.invalidHandler );
			}

			// Add aria-required to any Static/Data/Class required fields before first validation
			// Screen readers require this attribute to be present before the initial submission http://www.w3.org/TR/WCAG-TECHS/ARIA2.html
			$( this.currentForm ).find( "[required], [data-rule-required], .required" ).attr( "aria-required", "true" );
		},

		// http://jqueryvalidation.org/Validator.form/
		form: function() {
			this.checkForm();
			$.extend( this.submitted, this.errorMap );
			this.invalid = $.extend({}, this.errorMap );
			if ( !this.valid() ) {
				$( this.currentForm ).triggerHandler( "invalid-form", [ this ]);
			}
			this.showErrors();
			return this.valid();
		},

		checkForm: function() {
			this.prepareForm();
			for ( var i = 0, elements = ( this.currentElements = this.elements() ); elements[ i ]; i++ ) {
				this.check( elements[ i ] );
			}
			return this.valid();
		},

		// http://jqueryvalidation.org/Validator.element/
		element: function( element ) {
			var cleanElement = this.clean( element ),
				checkElement = this.validationTargetFor( cleanElement ),
				result = true;

			this.lastElement = checkElement;

			if ( checkElement === undefined ) {
				delete this.invalid[ cleanElement.name ];
			} else {
				this.prepareElement( checkElement );
				this.currentElements = $( checkElement );

				result = this.check( checkElement ) !== false;
				if ( result ) {
					delete this.invalid[ checkElement.name ];
				} else {
					this.invalid[ checkElement.name ] = true;
				}
			}
			// Add aria-invalid status for screen readers
			$( element ).attr( "aria-invalid", !result );

			if ( !this.numberOfInvalids() ) {
				// Hide error containers on last error
				this.toHide = this.toHide.add( this.containers );
			}
			this.showErrors();
			return result;
		},

		// http://jqueryvalidation.org/Validator.showErrors/
		showErrors: function( errors ) {
			if ( errors ) {
				// add items to error list and map
				$.extend( this.errorMap, errors );
				this.errorList = [];
				for ( var name in errors ) {
					this.errorList.push({
						message: errors[ name ],
						element: this.findByName( name )[ 0 ]
					});
				}
				// remove items from success list
				this.successList = $.grep( this.successList, function( element ) {
					return !( element.name in errors );
				});
			}
			if ( this.settings.showErrors ) {
				this.settings.showErrors.call( this, this.errorMap, this.errorList );
			} else {
				this.defaultShowErrors();
			}
		},

		// http://jqueryvalidation.org/Validator.resetForm/
		resetForm: function() {
			if ( $.fn.resetForm ) {
				$( this.currentForm ).resetForm();
			}
			this.submitted = {};
			this.lastElement = null;
			this.prepareForm();
			this.hideErrors();
			this.elements()
					.removeClass( this.settings.errorClass )
					.removeData( "previousValue" )
					.removeAttr( "aria-invalid" );
		},

		numberOfInvalids: function() {
			return this.objectLength( this.invalid );
		},

		objectLength: function( obj ) {
			/* jshint unused: false */
			var count = 0,
				i;
			for ( i in obj ) {
				count++;
			}
			return count;
		},

		hideErrors: function() {
			this.hideThese( this.toHide );
		},

		hideThese: function( errors ) {
			errors.not( this.containers ).text( "" );
			this.addWrapper( errors ).hide();
		},

		valid: function() {
			return this.size() === 0;
		},

		size: function() {
			return this.errorList.length;
		},

		focusInvalid: function() {
			if ( this.settings.focusInvalid ) {
				try {
					$( this.findLastActive() || this.errorList.length && this.errorList[ 0 ].element || [])
					.filter( ":visible" )
					.focus()
					// manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find
					.trigger( "focusin" );
				} catch ( e ) {
					// ignore IE throwing errors when focusing hidden elements
				}
			}
		},

		findLastActive: function() {
			var lastActive = this.lastActive;
			return lastActive && $.grep( this.errorList, function( n ) {
				return n.element.name === lastActive.name;
			}).length === 1 && lastActive;
		},

		elements: function() {
			var validator = this,
				rulesCache = {};

			// select all valid inputs inside the form (no submit or reset buttons)
			return $( this.currentForm )
			.find( "input, select, textarea" )
			.not( ":submit, :reset, :image, [disabled]" )
			.not( this.settings.ignore )
			.filter( function() {
				if ( !this.name && validator.settings.debug && window.console ) {
					console.error( "%o has no name assigned", this );
				}

				// select only the first element for each name, and only those with rules specified
				if ( this.name in rulesCache || !validator.objectLength( $( this ).rules() ) ) {
					return false;
				}

				rulesCache[ this.name ] = true;
				return true;
			});
		},

		clean: function( selector ) {
			return $( selector )[ 0 ];
		},

		errors: function() {
			var errorClass = this.settings.errorClass.split( " " ).join( "." );
			return $( this.settings.errorElement + "." + errorClass, this.errorContext );
		},

		reset: function() {
			this.successList = [];
			this.errorList = [];
			this.errorMap = {};
			this.toShow = $( [] );
			this.toHide = $( [] );
			this.currentElements = $( [] );
		},

		prepareForm: function() {
			this.reset();
			this.toHide = this.errors().add( this.containers );
		},

		prepareElement: function( element ) {
			this.reset();
			this.toHide = this.errorsFor( element );
		},

		elementValue: function( element ) {
			var val,
				$element = $( element ),
				type = element.type;

			if ( type === "radio" || type === "checkbox" ) {
				return $( "input[name='" + element.name + "']:checked" ).val();
			} else if ( type === "number" && typeof element.validity !== "undefined" ) {
				return element.validity.badInput ? false : $element.val();
			}

			val = $element.val();
			if ( typeof val === "string" ) {
				return val.replace(/\r/g, "" );
			}
			return val;
		},

		check: function( element ) {
			element = this.validationTargetFor( this.clean( element ) );

			var rules = $( element ).rules(),
				rulesCount = $.map( rules, function( n, i ) {
					return i;
				}).length,
				dependencyMismatch = false,
				val = this.elementValue( element ),
				result, method, rule;

			for ( method in rules ) {
				rule = { method: method, parameters: rules[ method ] };
				try {

					result = $.validator.methods[ method ].call( this, val, element, rule.parameters );

					// if a method indicates that the field is optional and therefore valid,
					// don't mark it as valid when there are no other rules
					if ( result === "dependency-mismatch" && rulesCount === 1 ) {
						dependencyMismatch = true;
						continue;
					}
					dependencyMismatch = false;

					if ( result === "pending" ) {
						this.toHide = this.toHide.not( this.errorsFor( element ) );
						return;
					}

					if ( !result ) {
						this.formatAndAdd( element, rule );
						return false;
					}
				} catch ( e ) {
					if ( this.settings.debug && window.console ) {
						console.log( "Exception occurred when checking element " + element.id + ", check the '" + rule.method + "' method.", e );
					}
					throw e;
				}
			}
			if ( dependencyMismatch ) {
				return;
			}
			if ( this.objectLength( rules ) ) {
				this.successList.push( element );
			}
			return true;
		},

		// return the custom message for the given element and validation method
		// specified in the element's HTML5 data attribute
		// return the generic message if present and no method specific message is present
		customDataMessage: function( element, method ) {
			return $( element ).data( "msg" + method.charAt( 0 ).toUpperCase() +
				method.substring( 1 ).toLowerCase() ) || $( element ).data( "msg" );
		},

		// return the custom message for the given element name and validation method
		customMessage: function( name, method ) {
			var m = this.settings.messages[ name ];
			return m && ( m.constructor === String ? m : m[ method ]);
		},

		// return the first defined argument, allowing empty strings
		findDefined: function() {
			for ( var i = 0; i < arguments.length; i++) {
				if ( arguments[ i ] !== undefined ) {
					return arguments[ i ];
				}
			}
			return undefined;
		},

		defaultMessage: function( element, method ) {
			return this.findDefined(
				this.customMessage( element.name, method ),
				this.customDataMessage( element, method ),
				// title is never undefined, so handle empty string as undefined
				!this.settings.ignoreTitle && element.title || undefined,
				$.validator.messages[ method ],
				"<strong>Warning: No message defined for " + element.name + "</strong>"
			);
		},

		formatAndAdd: function( element, rule ) {
			var message = this.defaultMessage( element, rule.method ),
				theregex = /\$?\{(\d+)\}/g;
			if ( typeof message === "function" ) {
				message = message.call( this, rule.parameters, element );
			} else if ( theregex.test( message ) ) {
				message = $.validator.format( message.replace( theregex, "{$1}" ), rule.parameters );
			}
			this.errorList.push({
				message: message,
				element: element,
				method: rule.method
			});

			this.errorMap[ element.name ] = message;
			this.submitted[ element.name ] = message;
		},

		addWrapper: function( toToggle ) {
			if ( this.settings.wrapper ) {
				toToggle = toToggle.add( toToggle.parent( this.settings.wrapper ) );
			}
			return toToggle;
		},

		defaultShowErrors: function() {
			var i, elements, error;
			for ( i = 0; this.errorList[ i ]; i++ ) {
				error = this.errorList[ i ];
				if ( this.settings.highlight ) {
					this.settings.highlight.call( this, error.element, this.settings.errorClass, this.settings.validClass );
				}
				this.showLabel( error.element, error.message );
			}
			if ( this.errorList.length ) {
				this.toShow = this.toShow.add( this.containers );
			}
			if ( this.settings.success ) {
				for ( i = 0; this.successList[ i ]; i++ ) {
					this.showLabel( this.successList[ i ] );
				}
			}
			if ( this.settings.unhighlight ) {
				for ( i = 0, elements = this.validElements(); elements[ i ]; i++ ) {
					this.settings.unhighlight.call( this, elements[ i ], this.settings.errorClass, this.settings.validClass );
				}
			}
			this.toHide = this.toHide.not( this.toShow );
			this.hideErrors();
			this.addWrapper( this.toShow ).show();
		},

		validElements: function() {
			return this.currentElements.not( this.invalidElements() );
		},

		invalidElements: function() {
			return $( this.errorList ).map(function() {
				return this.element;
			});
		},

		showLabel: function( element, message ) {
			var place, group, errorID,
				error = this.errorsFor( element ),
				elementID = this.idOrName( element ),
				describedBy = $( element ).attr( "aria-describedby" );
			if ( error.length ) {
				// refresh error/success class
				error.removeClass( this.settings.validClass ).addClass( this.settings.errorClass );
				// replace message on existing label
				error.html( message );
			} else {
				// create error element
				error = $( "<" + this.settings.errorElement + ">" )
					.attr( "id", elementID + "-error" )
					.addClass( this.settings.errorClass )
					.html( message || "" );

				// Maintain reference to the element to be placed into the DOM
				place = error;
				if ( this.settings.wrapper ) {
					// make sure the element is visible, even in IE
					// actually showing the wrapped element is handled elsewhere
					place = error.hide().show().wrap( "<" + this.settings.wrapper + "/>" ).parent();
				}
				if ( this.labelContainer.length ) {
					this.labelContainer.append( place );
				} else if ( this.settings.errorPlacement ) {
					this.settings.errorPlacement( place, $( element ) );
				} else {
					place.insertAfter( element );
				}

				// Link error back to the element
				if ( error.is( "label" ) ) {
					// If the error is a label, then associate using 'for'
					error.attr( "for", elementID );
				} else if ( error.parents( "label[for='" + elementID + "']" ).length === 0 ) {
					// If the element is not a child of an associated label, then it's necessary
					// to explicitly apply aria-describedby

					errorID = error.attr( "id" );
					// Respect existing non-error aria-describedby
					if ( !describedBy ) {
						describedBy = errorID;
					} else if ( !describedBy.match( new RegExp( "\b" + errorID + "\b" ) ) ) {
						// Add to end of list if not already present
						describedBy += " " + errorID;
					}
					$( element ).attr( "aria-describedby", describedBy );

					// If this element is grouped, then assign to all elements in the same group
					group = this.groups[ element.name ];
					if ( group ) {
						$.each( this.groups, function( name, testgroup ) {
							if ( testgroup === group ) {
								$( "[name='" + name + "']", this.currentForm )
									.attr( "aria-describedby", error.attr( "id" ) );
							}
						});
					}
				}
			}
			if ( !message && this.settings.success ) {
				error.text( "" );
				if ( typeof this.settings.success === "string" ) {
					error.addClass( this.settings.success );
				} else {
					this.settings.success( error, element );
				}
			}
			this.toShow = this.toShow.add( error );
		},

		errorsFor: function( element ) {
			var name = this.idOrName( element ),
				describer = $( element ).attr( "aria-describedby" ),
				selector = "label[for='" + name + "'], label[for='" + name + "'] *";
			// aria-describedby should directly reference the error element
			if ( describer ) {
				selector = selector + ", #" + describer.replace( /\s+/g, ", #" );
			}
			return this
				.errors()
				.filter( selector );
		},

		idOrName: function( element ) {
			return this.groups[ element.name ] || ( this.checkable( element ) ? element.name : element.id || element.name );
		},

		validationTargetFor: function( element ) {
			// if radio/checkbox, validate first element in group instead
			if ( this.checkable( element ) ) {
				element = this.findByName( element.name ).not( this.settings.ignore )[ 0 ];
			}
			return element;
		},

		checkable: function( element ) {
			return ( /radio|checkbox/i ).test( element.type );
		},

		findByName: function( name ) {
			return $( this.currentForm ).find( "[name='" + name + "']" );
		},

		getLength: function( value, element ) {
			switch ( element.nodeName.toLowerCase() ) {
			case "select":
				return $( "option:selected", element ).length;
			case "input":
				if ( this.checkable( element ) ) {
					return this.findByName( element.name ).filter( ":checked" ).length;
				}
			}
			return value.length;
		},

		depend: function( param, element ) {
			return this.dependTypes[typeof param] ? this.dependTypes[typeof param]( param, element ) : true;
		},

		dependTypes: {
			"boolean": function( param ) {
				return param;
			},
			"string": function( param, element ) {
				return !!$( param, element.form ).length;
			},
			"function": function( param, element ) {
				return param( element );
			}
		},

		optional: function( element ) {
			var val = this.elementValue( element );
			return !$.validator.methods.required.call( this, val, element ) && "dependency-mismatch";
		},

		startRequest: function( element ) {
			if ( !this.pending[ element.name ] ) {
				this.pendingRequest++;
				this.pending[ element.name ] = true;
			}
		},

		stopRequest: function( element, valid ) {
			this.pendingRequest--;
			// sometimes synchronization fails, make sure pendingRequest is never < 0
			if ( this.pendingRequest < 0 ) {
				this.pendingRequest = 0;
			}
			delete this.pending[ element.name ];
			if ( valid && this.pendingRequest === 0 && this.formSubmitted && this.form() ) {
				$( this.currentForm ).submit();
				this.formSubmitted = false;
			} else if (!valid && this.pendingRequest === 0 && this.formSubmitted ) {
				$( this.currentForm ).triggerHandler( "invalid-form", [ this ]);
				this.formSubmitted = false;
			}
		},

		previousValue: function( element ) {
			return $.data( element, "previousValue" ) || $.data( element, "previousValue", {
				old: null,
				valid: true,
				message: this.defaultMessage( element, "remote" )
			});
		}

	},

	classRuleSettings: {
		required: { required: true },
		email: { email: true },
		url: { url: true },
		date: { date: true },
		dateISO: { dateISO: true },
		number: { number: true },
		digits: { digits: true },
		creditcard: { creditcard: true }
	},

	addClassRules: function( className, rules ) {
		if ( className.constructor === String ) {
			this.classRuleSettings[ className ] = rules;
		} else {
			$.extend( this.classRuleSettings, className );
		}
	},

	classRules: function( element ) {
		var rules = {},
			classes = $( element ).attr( "class" );

		if ( classes ) {
			$.each( classes.split( " " ), function() {
				if ( this in $.validator.classRuleSettings ) {
					$.extend( rules, $.validator.classRuleSettings[ this ]);
				}
			});
		}
		return rules;
	},

	attributeRules: function( element ) {
		var rules = {},
			$element = $( element ),
			type = element.getAttribute( "type" ),
			method, value;

		for ( method in $.validator.methods ) {

			// support for <input required> in both html5 and older browsers
			if ( method === "required" ) {
				value = element.getAttribute( method );
				// Some browsers return an empty string for the required attribute
				// and non-HTML5 browsers might have required="" markup
				if ( value === "" ) {
					value = true;
				}
				// force non-HTML5 browsers to return bool
				value = !!value;
			} else {
				value = $element.attr( method );
			}

			// convert the value to a number for number inputs, and for text for backwards compability
			// allows type="date" and others to be compared as strings
			if ( /min|max/.test( method ) && ( type === null || /number|range|text/.test( type ) ) ) {
				value = Number( value );
			}

			if ( value || value === 0 ) {
				rules[ method ] = value;
			} else if ( type === method && type !== "range" ) {
				// exception: the jquery validate 'range' method
				// does not test for the html5 'range' type
				rules[ method ] = true;
			}
		}

		// maxlength may be returned as -1, 2147483647 ( IE ) and 524288 ( safari ) for text inputs
		if ( rules.maxlength && /-1|2147483647|524288/.test( rules.maxlength ) ) {
			delete rules.maxlength;
		}

		return rules;
	},

	dataRules: function( element ) {
		var method, value,
			rules = {}, $element = $( element );
		for ( method in $.validator.methods ) {
			value = $element.data( "rule" + method.charAt( 0 ).toUpperCase() + method.substring( 1 ).toLowerCase() );
			if ( value !== undefined ) {
				rules[ method ] = value;
			}
		}
		return rules;
	},

	staticRules: function( element ) {
		var rules = {},
			validator = $.data( element.form, "validator" );

		if ( validator.settings.rules ) {
			rules = $.validator.normalizeRule( validator.settings.rules[ element.name ] ) || {};
		}
		return rules;
	},

	normalizeRules: function( rules, element ) {
		// handle dependency check
		$.each( rules, function( prop, val ) {
			// ignore rule when param is explicitly false, eg. required:false
			if ( val === false ) {
				delete rules[ prop ];
				return;
			}
			if ( val.param || val.depends ) {
				var keepRule = true;
				switch ( typeof val.depends ) {
				case "string":
					keepRule = !!$( val.depends, element.form ).length;
					break;
				case "function":
					keepRule = val.depends.call( element, element );
					break;
				}
				if ( keepRule ) {
					rules[ prop ] = val.param !== undefined ? val.param : true;
				} else {
					delete rules[ prop ];
				}
			}
		});

		// evaluate parameters
		$.each( rules, function( rule, parameter ) {
			rules[ rule ] = $.isFunction( parameter ) ? parameter( element ) : parameter;
		});

		// clean number parameters
		$.each([ "minlength", "maxlength" ], function() {
			if ( rules[ this ] ) {
				rules[ this ] = Number( rules[ this ] );
			}
		});
		$.each([ "rangelength", "range" ], function() {
			var parts;
			if ( rules[ this ] ) {
				if ( $.isArray( rules[ this ] ) ) {
					rules[ this ] = [ Number( rules[ this ][ 0 ]), Number( rules[ this ][ 1 ] ) ];
				} else if ( typeof rules[ this ] === "string" ) {
					parts = rules[ this ].replace(/[\[\]]/g, "" ).split( /[\s,]+/ );
					rules[ this ] = [ Number( parts[ 0 ]), Number( parts[ 1 ] ) ];
				}
			}
		});

		if ( $.validator.autoCreateRanges ) {
			// auto-create ranges
			if ( rules.min && rules.max ) {
				rules.range = [ rules.min, rules.max ];
				delete rules.min;
				delete rules.max;
			}
			if ( rules.minlength && rules.maxlength ) {
				rules.rangelength = [ rules.minlength, rules.maxlength ];
				delete rules.minlength;
				delete rules.maxlength;
			}
		}

		return rules;
	},

	// Converts a simple string to a {string: true} rule, e.g., "required" to {required:true}
	normalizeRule: function( data ) {
		if ( typeof data === "string" ) {
			var transformed = {};
			$.each( data.split( /\s/ ), function() {
				transformed[ this ] = true;
			});
			data = transformed;
		}
		return data;
	},

	// http://jqueryvalidation.org/jQuery.validator.addMethod/
	addMethod: function( name, method, message ) {
		$.validator.methods[ name ] = method;
		$.validator.messages[ name ] = message !== undefined ? message : $.validator.messages[ name ];
		if ( method.length < 3 ) {
			$.validator.addClassRules( name, $.validator.normalizeRule( name ) );
		}
	},

	methods: {

		// http://jqueryvalidation.org/required-method/
		required: function( value, element, param ) {
			// check if dependency is met
			if ( !this.depend( param, element ) ) {
				return "dependency-mismatch";
			}
			if ( element.nodeName.toLowerCase() === "select" ) {
				// could be an array for select-multiple or a string, both are fine this way
				var val = $( element ).val();
				return val && val.length > 0;
			}
			if ( this.checkable( element ) ) {
				return this.getLength( value, element ) > 0;
			}
			return $.trim( value ).length > 0;
		},

		// http://jqueryvalidation.org/email-method/
		email: function( value, element ) {
			// From http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state-%28type=email%29
			// Retrieved 2014-01-14
			// If you have a problem with this implementation, report a bug against the above spec
			// Or use custom methods to implement your own email validation
			return this.optional( element ) || /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test( value );
		},

		// http://jqueryvalidation.org/url-method/
		url: function( value, element ) {
			// contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/
			return this.optional( element ) || /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test( value );
		},

		// http://jqueryvalidation.org/date-method/
		date: function( value, element ) {
			return this.optional( element ) || !/Invalid|NaN/.test( new Date( value ).toString() );
		},

		// http://jqueryvalidation.org/dateISO-method/
		dateISO: function( value, element ) {
			return this.optional( element ) || /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test( value );
		},

		// http://jqueryvalidation.org/number-method/
		number: function( value, element ) {
			return this.optional( element ) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test( value );
		},

		// http://jqueryvalidation.org/digits-method/
		digits: function( value, element ) {
			return this.optional( element ) || /^\d+$/.test( value );
		},

		// http://jqueryvalidation.org/creditcard-method/
		// based on http://en.wikipedia.org/wiki/Luhn/
		creditcard: function( value, element ) {
			if ( this.optional( element ) ) {
				return "dependency-mismatch";
			}
			// accept only spaces, digits and dashes
			if ( /[^0-9 \-]+/.test( value ) ) {
				return false;
			}
			var nCheck = 0,
				nDigit = 0,
				bEven = false,
				n, cDigit;

			value = value.replace( /\D/g, "" );

			// Basing min and max length on
			// http://developer.ean.com/general_info/Valid_Credit_Card_Types
			if ( value.length < 13 || value.length > 19 ) {
				return false;
			}

			for ( n = value.length - 1; n >= 0; n--) {
				cDigit = value.charAt( n );
				nDigit = parseInt( cDigit, 10 );
				if ( bEven ) {
					if ( ( nDigit *= 2 ) > 9 ) {
						nDigit -= 9;
					}
				}
				nCheck += nDigit;
				bEven = !bEven;
			}

			return ( nCheck % 10 ) === 0;
		},

		// http://jqueryvalidation.org/minlength-method/
		minlength: function( value, element, param ) {
			var length = $.isArray( value ) ? value.length : this.getLength( $.trim( value ), element );
			return this.optional( element ) || length >= param;
		},

		// http://jqueryvalidation.org/maxlength-method/
		maxlength: function( value, element, param ) {
			var length = $.isArray( value ) ? value.length : this.getLength( $.trim( value ), element );
			return this.optional( element ) || length <= param;
		},

		// http://jqueryvalidation.org/rangelength-method/
		rangelength: function( value, element, param ) {
			var length = $.isArray( value ) ? value.length : this.getLength( $.trim( value ), element );
			return this.optional( element ) || ( length >= param[ 0 ] && length <= param[ 1 ] );
		},

		// http://jqueryvalidation.org/min-method/
		min: function( value, element, param ) {
			return this.optional( element ) || value >= param;
		},

		// http://jqueryvalidation.org/max-method/
		max: function( value, element, param ) {
			return this.optional( element ) || value <= param;
		},

		// http://jqueryvalidation.org/range-method/
		range: function( value, element, param ) {
			return this.optional( element ) || ( value >= param[ 0 ] && value <= param[ 1 ] );
		},

		// http://jqueryvalidation.org/equalTo-method/
		equalTo: function( value, element, param ) {
			// bind to the blur event of the target in order to revalidate whenever the target field is updated
			// TODO find a way to bind the event just once, avoiding the unbind-rebind overhead
			var target = $( param );
			if ( this.settings.onfocusout ) {
				target.unbind( ".validate-equalTo" ).bind( "blur.validate-equalTo", function() {
					$( element ).valid();
				});
			}
			return value === target.val();
		},

		// http://jqueryvalidation.org/remote-method/
		remote: function( value, element, param ) {
			if ( this.optional( element ) ) {
				return "dependency-mismatch";
			}

			var previous = this.previousValue( element ),
				validator, data;

			if (!this.settings.messages[ element.name ] ) {
				this.settings.messages[ element.name ] = {};
			}
			previous.originalMessage = this.settings.messages[ element.name ].remote;
			this.settings.messages[ element.name ].remote = previous.message;

			param = typeof param === "string" && { url: param } || param;

			if ( previous.old === value ) {
				return previous.valid;
			}

			previous.old = value;
			validator = this;
			this.startRequest( element );
			data = {};
			data[ element.name ] = value;
			$.ajax( $.extend( true, {
				url: param,
				mode: "abort",
				port: "validate" + element.name,
				dataType: "json",
				data: data,
				context: validator.currentForm,
				success: function( response ) {
					var valid = response === true || response === "true",
						errors, message, submitted;

					validator.settings.messages[ element.name ].remote = previous.originalMessage;
					if ( valid ) {
						submitted = validator.formSubmitted;
						validator.prepareElement( element );
						validator.formSubmitted = submitted;
						validator.successList.push( element );
						delete validator.invalid[ element.name ];
						validator.showErrors();
					} else {
						errors = {};
						message = response || validator.defaultMessage( element, "remote" );
						errors[ element.name ] = previous.message = $.isFunction( message ) ? message( value ) : message;
						validator.invalid[ element.name ] = true;
						validator.showErrors( errors );
					}
					previous.valid = valid;
					validator.stopRequest( element, valid );
				}
			}, param ) );
			return "pending";
		}

	}

});

$.format = function deprecated() {
	throw "$.format has been deprecated. Please use $.validator.format instead.";
};

// ajax mode: abort
// usage: $.ajax({ mode: "abort"[, port: "uniqueport"]});
// if mode:"abort" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()

var pendingRequests = {},
	ajax;
// Use a prefilter if available (1.5+)
if ( $.ajaxPrefilter ) {
	$.ajaxPrefilter(function( settings, _, xhr ) {
		var port = settings.port;
		if ( settings.mode === "abort" ) {
			if ( pendingRequests[port] ) {
				pendingRequests[port].abort();
			}
			pendingRequests[port] = xhr;
		}
	});
} else {
	// Proxy ajax
	ajax = $.ajax;
	$.ajax = function( settings ) {
		var mode = ( "mode" in settings ? settings : $.ajaxSettings ).mode,
			port = ( "port" in settings ? settings : $.ajaxSettings ).port;
		if ( mode === "abort" ) {
			if ( pendingRequests[port] ) {
				pendingRequests[port].abort();
			}
			pendingRequests[port] = ajax.apply(this, arguments);
			return pendingRequests[port];
		}
		return ajax.apply(this, arguments);
	};
}

// provides delegate(type: String, delegate: Selector, handler: Callback) plugin for easier event delegation
// handler is only called when $(event.target).is(delegate), in the scope of the jquery-object for event.target

$.extend($.fn, {
	validateDelegate: function( delegate, type, handler ) {
		return this.bind(type, function( event ) {
			var target = $(event.target);
			if ( target.is(delegate) ) {
				return handler.apply(target, arguments);
			}
		});
	}
});

}));
/* ---------------------------------------- /includes/jsbin/plugins.js ---------------------------------------- */
/**
 * Enforces maxlength on input elements and adds a counter.
*/
(function($, window, document, undefined) {

	// Create the defaults once
	var pluginName = 'maxLength',
		defaults = {
			counterClass: 'counter',
			counterContainerClass: 'counter-container',
			errorClass: 'error',
			maxLengthAttr: 'maxlength',
			wrapperClass: 'maxlength-counter-wrapper'
    };

	// The actual plugin constructor
	function Plugin(element, options) {
		this.element = element;
		this.settings = $.extend({}, defaults, options);
		this._defaults = defaults;
		this._name = pluginName;
		this.init();
	}

	Plugin.prototype = {
		init: function() {
			this.$_element = $(this.element);
      this.getMaxLength();
      this.generateMarkup();
      this.getTextLength();
      this.updateCounter();
      this.bindUI();
		},
		bindUI: function() {
			this.$_element.keyup({context: this}, this.handleKeyUp);
		},
		// Check if there are more than the allowed number of characters
		checkTextLength: function() {
			this.hasReachedLimit = this.characterCount >= this.maxlength;
		},
    // Wrap, and append a counter to, each input
    generateMarkup: function() {
      this.$_element.wrap('<div class="' + this.settings.wrapperClass + '" />');
      this.$_wrapper = this.$_element.closest('.' + this.settings.wrapperClass);
      this.$_wrapper.append('<div class="' + this.settings.counterContainerClass + '"><span class="' + this.settings.counterClass + '"></span> / ' + this.maxlength + '</div>');
      this.$_counter = this.$_wrapper.find('.' + this.settings.counterClass);
    },
    // Get the maxlength from prefered attribute
    getMaxLength: function() {
      this.maxlength = parseInt(this.$_element.attr(this.settings.maxLengthAttr), 10) || 200;
    },
    // Get element text
    getText: function() {
      return this.$_element.val();
    },
    // Get element text length
    getTextLength: function() {
      var additions = 0,
        newLines;
      // Get the current text inside the input
      this.text = this.getText();
      // Account for newlines
      newLines = this.text.match(/(\r\n|\n|\r)/g);
      if (newLines !== null) {
        additions = newLines.length;
      }
      // Count the number of characters in the text
      this.characterCount = this.text.length + additions;
    },
    // Event handler for keyup
    // Updates the counter and controls error state
		handleKeyUp: function(e) {
      e.data.context.getTextLength();
      e.data.context.checkTextLength();
      if (e.data.context.hasReachedLimit) {
        e.data.context.limitText();
      }
      e.data.context.setErrorState();
      e.data.context.updateCounter();
		},
    // Limit the text to the allowed length
    limitText: function() {
      // Use substr to get the text before the maxlength
      this.limitedText = this.text.substr(0, this.maxlength);
      // and change the current text with the new text
      this.$_element.val(this.limitedText);
    },
    // Toggle error class on element wrapper
		setErrorState: function() {
			this.$_wrapper.toggleClass(this.settings.errorClass, this.hasReachedLimit);
		},
    // Update the counter
    updateCounter: function() {
      this.$_counter.text(this.characterCount);
    }
	};

	// A really lightweight plugin wrapper around the constructor,
	// preventing against multiple instantiations
	$.fn[pluginName] = function(options) {
		return this.each(function() {
			if (!$.data(this, 'plugin_' + pluginName)) {
				$.data(this, 'plugin_' + pluginName, new Plugin(this, options));
			}
		});
	};

})(jQuery, window, document);

/*
 * Takes an element and splits its children into columns
 */
(function($, window, document, undefined) {

  // Create the defaults once
  var pluginName = 'splitLists',
    defaults = {
      childTag: 'li',
      columnClass: 'list-column',
      numColumns: 2
    };

  // The actual plugin constructor
  function Plugin(element, options) {
    this.element = element;
    this.settings = $.extend({}, defaults, options);
    this._defaults = defaults;
    this._name = pluginName;
    this.init();
  }

  // Avoid Plugin.prototype conflicts
  $.extend(Plugin.prototype, {
    init: function() {
      this.$_element = $(this.element);
      this.$_items = this.$_element.find(this.settings.childTag);
      this.numItems = this.$_items.length;
      this.columnBreakIndex = Math.ceil(this.numItems / this.settings.numColumns);
      this.classList = this.$_element[0].className;
      this.splitList();
    },
    splitList: function() {
      // Remove the items destined for the next column from the DOM
      var $_movedItems = this.$_items.slice(this.columnBreakIndex).detach();
      // Add a new matching parent element
      this.$_element.after('<' + this.element.tagName + ' />');
      // Add appropriate classes and append the child items
      this.$_element.addClass(this.settings.columnClass).next(this.element.tagName).addClass(this.classList + ' ' + this.settings.columnClass).append($_movedItems);
    }
  });

  // A really lightweight plugin wrapper around the constructor,
  // preventing against multiple instantiations
  $.fn[pluginName] = function(options) {
    return this.each(function() {
      if (!$.data(this, 'plugin_' + pluginName)) {
        $.data(this, 'plugin_' + pluginName, new Plugin(this, options));
      }
    });
  };

})(jQuery, window, document);

/**
 * Takes a group of elements and equalizes their heights
 *
 * Usage: $(selector).equalizeHeights();
 */
(function($, window, document, undefined){
  $.fn.equalizeHeights = function() {
    var max = 0;
    return this.each(
      function(){
        max = Math.max( max, $(this).height() );
      })
      .css({
        'height': max
      });
  };
})(jQuery, window, document);
/* ---------------------------------------- /includes/jsbin/eventpublisher.js ---------------------------------------- */
var subscribers;

// constructor
var EventPublisher = function() {
	subscribers = [];
};

// private vars
EventPublisher.instance = null;
EventPublisher.subcribers = [];

// singleton method getInstance()
EventPublisher.getInstance = function() {
	if (EventPublisher.instance === null) {
		EventPublisher.instance = new EventPublisher();
	}
	return EventPublisher.instance;
};

// public method unsubscribe()
EventPublisher.prototype.unsubscribe = function(caller, eventType, callback) {
	for (var i = 0; i < subscribers.length; i++) {
		if (subscribers[i].caller === caller && subscribers[i].eventType === eventType && subscribers[i].callback === callback) {
			subscribers.splice(i, 1);
			break;
		}
	}
};

//public method subscribe()
EventPublisher.prototype.subscribe = function(caller, eventType, callback) {
	var subscriberObj = {
		caller:caller,
		eventType:eventType,
		callback:callback
	};
	subscribers.push(subscriberObj);
};

// public method publish()
EventPublisher.prototype.publish = function(caller, eventType, eventObj) {
	for (var i = 0; i < subscribers.length; i++) {
		if (subscribers[i].eventType === eventType && subscribers[i].caller === caller) {
			subscribers[i].callback(eventObj);
			break;
		}
	}
};

/* ---------------------------------------- /includes/jsbin/ajax_class.js ---------------------------------------- */
/*jshint onevar: true, sub: true, curly: true */
/*global Handlebars: true, console: true, $: true, jQuery: true*/

var Digi = Digi || {};
var eventPublisher = window.eventPublisher || EventPublisher.getInstance();

jQuery.fn.outerHTML = function(s) {
  return (s) ? this.before(s).remove() : jQuery('&lt;p&gt;').append(this.eq(0).clone()).html();
};
/**
*	This is a class for ajax requests. It reduces the need to always write custom ajax handlers and custom callbacks since the json is always structured the
*	same way. The ajax class contains the built in functionality to update and replace content and code on the page. The selectors for the areas being
*	update by the ajax call are included in the ajax json as a hash table along with the new content.
*	@author Michael Turnwall
*	@namespace Digi.ajax
*/
/*
	TODO make this object purely native JS so there is no reliance of an outside framework like jQuery
*/
Digi.ajax = (function ($) {
	/**
	*	convert JSON from a string to object and back again
	*	@param data JSON data to be converted
	*	@param dir the direction to convert the JSON
	*	@author Michael Turnwall
	*/
	function convert(data, dir) {
		if (dir === 'toJSON') {
			return JSON.parse(data);
		} else {
			return JSON.stringify(data);
		}
	}
	return {
		data: {},
		bodyObj: '',
		/**
		 *	updates multiple portions of a page based on an element's ID
		 *	this function is designed to update blocks of HTML rather than just content
		 *	@param {Object} html an object that holds the JSON key:value pairs for the updates
		 *	@author Michael Turnwall
		 */
		updateContent: function (html) {
			var el, i, z;
			if (typeof html === 'undefined') {
				return false;
			}

			for (i in html) {
				if (html[i].hasOwnProperty('id')) {
					// console.log('id found');
				}
				if (html[i].hasOwnProperty('class')) {
					// console.log('class found');
				}
			}
			for (i=0,z=html.length; i<z; i++) {
				try {
					el = $('#' + html[i].id);
					if (!el.length) {
						throw new Error('Line 54 - Couldn\'t find an element with an ID of ' + html[i].id);
					}

					el.html(html[i].value).promise().done(function () {
						eventPublisher.publish(Digi.ajax, 'contentUpdated', {});
					});
				} catch (err) {
					console.error(err.name + ' ' + err.message);
				}
			}
		},
		/**
		 *	updates multiple pieces of content of an HTML element based on the element's ID
		 *	this function is designed to update blocks of content rather than HTML code
		 *	@param {Object} replace an object that holds the JSON key:value pairs for the updates
		 *	@author Michael Turnwall
		 */
		replaceContent: function (replace) {
			var forms, content, i, z;
			forms = replace.forms;
			content = replace.content;
			if (typeof forms !== 'undefined') {
				for (i=0,z=forms.length; i<z; i++) {
					$('#' + forms[i].id).val(forms[i].value);
				}
			}
			if (typeof content !== 'undefined') {
				for (i=0,z=content.length; i<z; i++) {
					$('#' + content[i].id).text(content[i].value);
				}
			}
		},
		/**
		 *	appends content to the page either before or after an element
		 *	@param {Object} data json object that contains the JSON key:value pairs for elements that will get added to the page
		 *	@example
		 *	Here is an example of the json is structured
		 *	"after": [
		 *		{
		 *			"id": "main",
		 *			"value": [
		 *				"<br><br><div>First div that is appended</div>",
		 *				"<div>Another appended div element</div>"
		 *			]
		 *		}
		 *	],
		 */
		appendContent: function (data) {
			var after, before, el, values, i, j, x, z;
			var str = "";
			if (data.after) {
				after = data.after;
				for (i=0, z=after.length; i<z; i++) {
					el = $('#' + after[i].id);
					values = after[i].value;
					for (j=0, x=values.length; j<x; j++) {
						str += values[j];
					}
					var obj = $(str);
					el.append(obj);
					eventPublisher.publish(Digi.ajax, "contentUpdated", {});
				}
			}
			if (data.before) {
				before = data.before;
				for (i=0, z=before.length; i<z; i++) {
					el = $('#' + before[i].id);
					values = before[i].value;
					for (j=0, x=values.length; j<x; j++) {
						el.before(values[j]);
						eventPublisher.publish(Digi.ajax, "contentUpdated", {});
					}
				}
			}

		},
		updateAttributes: function (attributes) {
			var el, i, z;
			if (typeof attributes !== 'undefined') {
				z = attributes.length;
				for (i = 0; i < z; i++) {
					el = document.getElementById(attributes[i].id);
					el.setAttribute(attributes[i].attribute, attributes[i].value);
				}
			}
		},
		/**
		 *	determines which update functions to call based on what is in the JSON object
		 *	returned from the server
		 *	@param {JSON} data json object received from the server
		 *	@author Michael Turnwall
		 */
		handleResponse: function (data) {
			this.data = data;
			eventPublisher.publish(Digi.ajax, "dataReady", {total: this.data.head.total});

			if (this.data.body.update != null) {
				this.updateContent(this.data.body.update.html);
			}
			if (this.data.body.replace) {
				this.replaceContent(this.data.body.replace);
			}
			if (this.data.body.append) {
				this.appendContent(this.data.body.append);
			}
			if (this.data.body.attributes) {
				this.updateAttributes(this.data.body.attributes);
			}
			/*
			if (this.data.body.templates) {
				Digi.template.fetch(this.data.body.templates[0].templateName);
			}
			*/
		},
		handleError: function () {
			eventPublisher.publish(Digi.ajax, "dataError", {});
			/*
				TODO add error handling along with allowing it to be customized
			*/
		},
		/**
		*	make an ajax call to get json data for page update
		*	this is the only method that needs to be called publicly
		*	@param {String} url the url the ajax will get data from
		*	@param {String} method type of ajax call GET | POST
		*	@param {Object }[parameters] query string to send to the server as an object
		*/
		getData: function (url, method, parameters) {
			var type,
				date,
				that;
			// default request type is GET
			type = (typeof method !== 'undefined') ? method.toUpperCase() : 'GET';
			date = +new Date();
			that = this;

			/*
			if (this.expires && (date < this.expires)) {
				console.log('still cached');
				return false;
			}
			*/
			// if user is making changes quickly abort the previous request
			if (this.jxhr) {
				this.jxhr.abort();
			}
			this.jxhr = $.ajax({
				type: type,
				url: url,
				data: parameters || '',
				dataType: 'json',
				xhrFields: {
				  withCredentials: true
				},
				success: function (data) {
					data.head.expires = +new Date() + 60000;
					if (data.head.expires) {
						that.expires = data.head.expires;
					}
					that.handleResponse(data);
				},
				error: function (jqXHR, textStatus, errorThrown) {
					//Digi.logger('(Line 114) ' + jqXHR.status + ': ' + errorThrown, 'error');
					that.handleError(textStatus, errorThrown);
				}
			});
			return true;
		},
		version: '0.2.1'
	};
})(jQuery);

/* ---------------------------------------- /includes/jsbin/analytics.js ---------------------------------------- */
/* BEGIN: Search Tracking
/*-----------------------------*/
function searchTracking(cat, site) {
  var url = window.location.toString();
  var urlArray = url.split('?q=');
  var search = urlArray[1];

  var tracking = '/' + site + '/search/save-search-term.aspx?q=' + search + '&cat=' + cat;
  $.ajax({
    type: 'GET',
    url: tracking,
    dataType: 'script'
  });
}

// WIP: Global analytics functionality

// Global Digitaria object
var Digi = Digi || {};

// Global analytics object
var _gaq = _gaq || [];

(function($, document, window, undefined) {

  var Analytics = function(options) {
    this.init();
  };

  $.extend(Analytics.prototype, {

    defaults: {
      event: 'gaEvent',
      args: 'gaArgs',
      selector: '[data-ga-event]',
      strings: {
        athlete: 'Athlete',
        authenticated: 'Logged-in',
        fan: 'Fan',
        unauthenticated: 'Not logged-in'
      }
    },

    isIframed: window !== parent,

    isLoggedIn: $.cookie('ironfan') !== undefined,

    accountType: function(isAthlete) {
      return (isAthlete ? this.strings.athlete : this.strings.fan);
    },

    athleteName: function(name) {
      return name.dasherize();
    },

    loggedInStatus: function(authenticated) {
      return (this.isLoggedIn ? this.settings.strings.authenticated : this.settings.strings.unauthenticated);
    },

    bindUI: function() {
      var A = this;

      $(document).on('click', this.settings.selector, function(e) {
        e.preventDefault();
        var $_target = $(this) ,
          data = $_target.data(),
          args = (data[A.settings.args] ? data[A.settings.args].split(',') : undefined),
          event = data[A.settings.event];

        // Publish the event
        $.publish('/ga/' + event, args);

        // Sender the user on its way
        if (A.isIframed) {
          parent.location = this.href;
        } else {
          window.location = this.href;
        }
      });
    },

    eventTypes: function() {
      var A = this;
      return {

        followAthlete: function(loggedInStatus, athleteName) {
          _gaq.push(
            ['_setCustomVar', 1, 'Login Status', loggedInStatus, 3],
            ['_trackEvent', 'Account', 'follow athlete', athleteName]
          );
        },

        getAthleteUpdate: function(loggedInStatus, athleteName) {
          _gaq.push(
            ['_setCustomVar', 1, 'Login Status', loggedInStatus, 3],
            ['_trackEvent', 'Account', 'get athlete update', athleteName]
          );
        },

        newsletterClickThrough: function() {
          _gaq.push(['_trackEvent', 'Newsletter', 'click-through']);
        },

        newsletterSubscribe: function() {
          _gaq.push(['_trackEvent', 'Newsletter', 'subscribe']);
        },

        registrationStart: function() {
          _gaq.push(
            ['_trackEvent', 'Account', 'registration start', 'account type unknown'],
            ['_trackPageview', '/ironfan/registration/start']
          );
        },

        registrationComplete: function(accountType) {
          _gaq.push(
            ['_trackEvent', 'Account', 'registration completed', accountType],
            ['_trackPageview', '/ironfan/registration/completion']
          );
        },

        registrationStep: function(accountType, stepName) {
          _gaq.push(
            ['_trackEvent', 'Account', 'registration other steps', accountType],
            ['_trackPageview', '/ironfan/registration/start/' + stepName]
          );
        },

        signIn: function(accountType) {
          _gaq.push(
            ['_setCustomVar', 1, 'Login Status', true, 2],
            ['_setCustomVar', 2, 'Account Type', accountType, 1],
            ['_trackEvent', 'Account', 'sign in', accountType]
          );
        }
      };

    },

    subscribeToEvents: function() {
      var eventTypes = new this.eventTypes();
      for (var event in eventTypes) {
        if (eventTypes.hasOwnProperty(event) && $.isFunction(eventTypes[event])) {
          $.subscribe('/ga/' + event, eventTypes[event]);
        }
      }
    },

    init: function(options) {
      // Build the settings
      this.settings = $.extend({}, this.defaults, options);
      // Add listeners
      this.bindUI();
      this.subscribeToEvents();
    }
  });

  // Give global context
  Digi.analytics = Analytics;

})(jQuery, document, window);
/* ---------------------------------------- /includes/jsbin/jcore.js ---------------------------------------- */
/* static
	jCore v0.2
	Matthew Ausonio
	Last Updated:October 2,2009
	Created:October 10, 2008
	
	Dependent libraries:
		jQuery v1.3.2
	
	This file contains the required scripts for a base Digicore site.
	Includes functionality for common modules such as Poll and Rating. For a full list please refer to Core SVN.
*/
var jCore = {
    // **************************************************************
    // Item Stats Retrieval methods. Do not remove
    // **************************************************************
    jCoreInit: function (shareURL, shareTitle, itemId, pollIdsArray) {
        if (typeof console != "undefined") {
            if (typeof console.log != "undefined") {
                // console.log("Initializing jCore");
                // console.log("---------------------");
                // console.log("shareURL: ");
                // console.log(shareURL);
                // console.log("shareTitle: ");
                // console.log(shareTitle);
                // console.log("itemId: ");
                // console.log(itemId);
                // console.log("pollIdsArray: ");
                // console.log(pollIdsArray);
            }
        }

        // Temporarily set the values until the AJAX handler comes back
        this.shareURL = shareURL; // url of the item/page
        this.shareTitle = shareTitle; // title of the item/page
        this.itemId = itemId; // sitecore id of the item/page
        this.pollIdsArray = pollIdsArray;

        jCore.log(jCore);
        // first thing we do is test to see if cookies is enabled, if it isnt, we alert user to enable cookies.
        this.cookieTest();
        //end cookie test, lets continue

        /* now we check to see if our userID cookie has been set, if not we request a new userID and make the cookie */
        userId = (jCore.readCookie("userID")) ? jCore.readCookie("userID") : "";

        /* debugPath will help us modify ajax calls for development purposes. to trigger put debug=true in url */
        debugPath = (jCore.getUrlParam("debug") == "true") ? "/Html" : "";

        // the blankItemStats is used when we have an error or timeout getting the actual item stats.
        blankItemStats = {
            "clicks": 1446,
            "comments": 0, 			// int : number of comments of the current item
            "votes": 0, 			// int : number of votes of the current item (sometimes refered to as ratings)
            "rating": 3.00, 		// int : the current calculated rating of the current item
            "userVoted": false, 	// boolean : if user has rated current item. based on current itemId and current userID.
            "usersRating": null, // int or null : rating of current item. based on current itemId and current userId.
            "userId": ""			// string : current userId generated by sitecore.
        };
        // make call to item stats.  On callback init the jCore object.
        /*$.ajax({ async: false, type: "GET", url: debugPath + "/Handlers/ItemStats.ajax", data: "id=" + itemId + "&userid=" + userId, dataType: "json", cache: false,
            success: function (updatedItemStatistics) {
                userId = updatedItemStatistics.userId;
                jCore.writeCookie("userID", userId);
                jCore.assignItemStats(shareURL, shareTitle, itemId, updatedItemStatistics, pollIdsArray, debugPath);
            },
            error: function (error) {
                jCore.assignItemStats(shareURL, shareTitle, itemId, blankItemStats, pollIdsArray, debugPath);
            },
            timeout: function (error) {
                jCore.assignItemStats(shareURL, shareTitle, itemId, blankItemStats, pollIdsArray, debugPath);
            }
        });*/
    },
    assignItemStats: function (shareURL, shareTitle, itemId, itemStats, pollIdsArray, debugPath) {
        this.shareURL = shareURL; // url of the item/page
        this.shareTitle = shareTitle; // title of the item/page
        this.itemId = itemId; // sitecore id of the item/page
        this.itemStats = itemStats; // stats on the item
        this.pollIdsArray = new Array(); // array of poll ids for polls on current page
        this.debugPath = debugPath;
        //this goes through polls on the page and initializes
        $(".jcorePoll").each(function (i) {
            jCore.pollIdsArray.push(this.id); // store this poll id in an array for later
            jCore.initPoll(i); // initialize this poll
        });

        // initialize all ratings
        updateRatingStats(itemStats);
    },
    cookieTest: function () {
        var cookieEnabled = (navigator.cookieEnabled) ? true : false
        //if not IE4+ nor NS6+
        if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled) {
            document.cookie = "testcookie"
            cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false
        }
        if (!cookieEnabled) {
            alert("Cookies are required for this site to run properly.  Please enable cookies in your browser settings and reload page.");
            return false;
        }
    },
    // **************************************************************
    // Poll Module methods
    // 
    // **************************************************************
    pollItems: new Array(),
    initPoll: function (i) {
        // set up this poll item. this is done for each poll item on the page.
        this.pollItems[i] = {
            pollId: jCore.pollIdsArray[i],
            pollForm: document.getElementById(jCore.pollIdsArray[i]),
            pollContainer: document.getElementById(jCore.pollIdsArray[i] + "Container"),
            pollUrl: $("#" + jCore.pollIdsArray[i]).attr("action")
        }
        // lets go ahead and store the source code for later use in results.
        jCore.tempPollSource(i, this.pollItems[i].pollContainer);
        //console.log("here");
        // lets request current poll results handler. this will tell us if the user has already submitted to this poll.
        $.ajax({
            type: "GET",
            url: jCore.debugPath + "/Handlers/Poll.ajax",
            dataType: "json",
            cache: false,
            data: "id=" + jCore.pollIdsArray[i] + "&userID=" + jCore.itemStats.userId,
            success: function (pollJSON) {
                if (pollJSON.userClicked) {
                    //console.log("here-AleradySubmit");
                    // user already voted. show results.
                    jCore.showPollResults(i, pollJSON);
                } else {
                    //console.log("Here-subitted " + jCore.pollItems[i].pollId);
                    // user has not voted. attach submit event to form.
                    $("#" + jCore.pollItems[i].pollId).submit(function () {
                        return jCore.submitPoll(i, jCore.pollItems[i].pollId, jCore.pollItems[i].pollForm, jCore.pollItems[i].pollContainer, jCore.pollItems[i].pollurl);
                    });
                }
            },
            error: function (pollJSON) {
                //console.log("fail- " + pollJSON);
            }
        });
    },
    submitPoll: function (i, pollId, pollForm, pollContainer, pollurl) {
        // get currently selection to submit
        var pollValue = $("input:radio:checked", pollForm).val();
        // if there is no selection we stop and alert user.
        if (!pollValue)
            alert("Please select a poll answer");
        else {
            // if we made it this far, we go ahead and submit the poll. on success we re-request the poll results handler
            $.ajax({
                type: "GET",
                url: jCore.debugPath + "/Handlers/PollClick.ajax",
                data: "id=" + pollId + "&choiceId=" + pollValue + "&userid=" + jCore.itemStats.userId,
                cache: false,
                success: function (pollResults) {
                    if (pollResults.processed = true)
                        jCore.getPollResults(i);
                }
            });
        }
        return false;
    },
    getPollResults: function (i) {
        // request results. this is called on a successful poll submission. on success we show results.
        $.ajax({
            type: "GET",
            url: jCore.debugPath + "/Handlers/Poll.ajax",
            dataType: "json",
            cache: false,
            data: "id=" + jCore.pollItems[i].pollId + "&userid=" + jCore.itemStats.userId,
            success: function (pollresults) {
                jCore.showPollResults(i, pollresults);
            }
        });
    },
    showPollResults: function (i, pollresults) {
        var values = [];

        // Go through all of the results, storing their percentages in to the values array
        for (p = 0; p < pollresults.poll.length; p++) {
            values.push(pollresults.poll[p].percentage);
        }

        // Sort the array of values so we go from highest in pos 0 to lowest percentages
        values.sort(function (a, b) {
            return b - a;
        });

        // modify stored source object with percentages from poll results json
        for (p = 0; p < pollresults.poll.length; p++) {
            var perc = pollresults.poll[p].percentage;
            var percadjust = pollresults.poll[p].percentage * .87; // make sure 100% will appear along side colored bar

            // Find the position in values with the same percentage - so we know what position the item should be in
            var pos = -1;
            for (var j = 0; j < values.length; j++) {
                if (pos == -1) {
                    if (values[j] == perc) {
                        pos = j;
                    }
                }
            }

            var iid = pollresults.poll[p].itemId;
            var newVal = jCore.pollItems[i].pollSource[iid];
            if (typeof newVal !== "string") {
                newVal = newVal.html();
            }
            // Replace #P# with the percentage
            newVal = newVal.replace(/#P#/g, perc);
            // Replace #PA# with the percentage adjustment
            newVal = newVal.replace(/#PA#/g, percadjust);
            // Replace #POS# with the position
            newVal = newVal.replace(/#POS#/g, pos);
            if (typeof jCore.pollItems[i].pollSource[iid] == "string") {
                jCore.pollItems[i].pollSource[iid] = newVal;
            } else {
                jCore.pollItems[i].pollSource[iid].html(newVal);
            }
        }

        // create an array to hold final source code for results
        tempSource = new Array;
        for (var qId in jCore.pollItems[i].pollSource) {
            if (typeof jCore.pollItems[i].pollSource[qId] == "string") {
                tempSource.push(jCore.pollItems[i].pollSource[qId]);
            } else {
                tempSource.push(jCore.pollItems[i].pollSource[qId].html());
            }
        }

        // Tack on the total number of votes
        // tempSource.push('<div class="pollTotal"><span class="pollTotalValue">' + pollresults.totalClicks + '</span> <span class="pollTotalLabel">Total Votes. Poll results are not scientific.</span></div>');

        // output final source code for results
        pCont = $(this.pollItems[i].pollContainer);
        pCont.empty();
        for (i = 0, z = tempSource.length; i < z; i++) {
            pCont.append(tempSource[i]);
        }

    },
    tempPollSource: function (p, pollContainer) {
        // new object inside this poll item to store source code for later use in results
        jCore.pollItems[p].pollSource = new Object();
        // if the input is also inside the label, we want to remove it. here we create the reg exp to do that
        inputReg = new RegExp(/<input[^>]*>/);
        // for each label we store a string for later use in results source code.
        $("label", pollContainer).each(function (i) {
            var playerImg, playerName;
            inputFor = document.getElementById($(this).attr("for")).value;
            // cleanSource = this.innerHTML.replace(inputReg, "");
            playerImg = $('img', this).get(0);
            playerName = $(this).find('span').html();
            // playerName = playerName.replace(/<img[^>]*>/, '');
            // jCore.pollItems[p].pollSource[inputFor] = '<div class='pollResultRow pollResultsPos#POS#'><div class='pollResultBar' style='width:#PA#%;'><div></div></div><span>#P#%</span><div>' + playerName + '</div></div>';
            jCore.pollItems[p].pollSource[inputFor] = '<div class="pollResultRowOuter"><div class="pollResultRow pollResultsPos#POS#"><img src="' + playerImg.src + '" /><span class="resultPercent">#P#%</span><div class="pollResultBar" style="width:#PA#%;"><div></div></div><div class="pollResultPlayerName">' + playerName + '</div></div></div>';
            // $('span', jCore.pollItems[p].pollSource[inputFor]).before(playerImg);
            // $('.pollResultRow', jCore.pollItems[p].pollSource[inputFor]).append(playerName);
        });

    },
    // **************************************************************
    // Rating Module methods
    // 
    // **************************************************************
    initRating: function () {

    },
    // **************************************************************
    // Utility methods
    // **************************************************************
    log: function (v) {
        if (window.console)
            console.log(v);
    },
    findPos: function (obj) {
        var curleft = curtop = 0;
        if (obj.offsetParent) {
            do {
                curleft += obj.offsetLeft;
                curtop += obj.offsetTop;
            } while (obj = obj.offsetParent);
            return [curleft, curtop];
        }
    },
    readCookie: function (name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0)
                return c.substring(nameEQ.length, c.length);
        }
        return false;
    },
    writeCookie: function (name, value, days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            var expires = "; expires=" + date.toGMTString();
            document.cookie = name + "=" + value + expires + "; path=/";
        }
        else {
            var expires = "";
            document.cookie = name + "=" + value + expires + "; path=/";
        }
    },
    openWin: function (url, wName, para) {
        if (typeof (arguments[2]) == "object")
            var values = jCore.parameters(arguments[2]);
        else
            var values = para;
        window.open(url, wName, values);
    },
    parameters: function (attributes) {
        var values = [];
        for (attribute in attributes) {
            values.push(attribute + "=" + attributes[attribute].toString());
        }
        return values.join(",");
    },
    getUrlParam: function (name) {
        name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(window.location.href);
        if (results == null)
            return "";
        else
            return results[1];
    }
};
// pointer for function call in each page. Now sent to already existing jCore object.
jCoreInit = function (shareURL, shareTitle, itemId, pollIdsArray) { jCore.jCoreInit(shareURL, shareTitle, itemId, pollIdsArray); }

function prepRatingSystem() {
	/* Find all of the ratings elements */
	$('.ratings').each(function(index, el) {
		/* Find the ul inside them */
		var $_ul=$(el).find('ul');
		/* Find the links inside the ul if there are any (may be spans if not editable) */
		var $_ratingLinks=$(el).find("ul a");
		/* For those links */
		$_ratingLinks.each(function(index, el) {
			/* Store the link and the index */
			var $_this=$(el);
			var _index=index;
			
			/* Bind the mouseover, mouseout and click behaviors */
			$_this.mouseover(function() {
				/* Clear any existing hover ratings */
				$_ul.removeClass('hoverRating1').removeClass('hoverRating2').removeClass('hoverRating3').removeClass('hoverRating4').removeClass('hoverRating5');
				if (!$_ul.is('.disabled')) {
				    $_ul.addClass('hoverRating'+(_index+1));
				}
				
			}).mouseout(function() {
				/* Clear any existing hover ratings */
				$_ul.removeClass('hoverRating1').removeClass('hoverRating2').removeClass('hoverRating3').removeClass('hoverRating4').removeClass('hoverRating5');
			}).click(function(e) {
				e.preventDefault();
				/* Update the rating */
				rateContent(this);
			});
		});
	});
}

/** Function to submit rating */
function rateContent(el) {
	/* Get the url from the link */
	var rateResultPage = $(el).attr("href");	
	/* Submit it via ajax along with the item id, the user id (if there is one). */
	$.ajax({
		type: "GET",
		url: rateResultPage+"&id="+jCore.itemId+"&userid="+jCore.itemStats.userId,
		dataType: "json",
		cache:false,
		success: function(rateJSON){
			/* If we successfully rated the item */
			if(rateJSON.processed == true) {
				/* Get the new (average) rating */
				updateRating();
			} else {
				/* Previous we showed an error, now we just update and call it good */
				updateRating();
				//$(".shareBarRatings").html("Error. Please try again later.");
			}
		}
	});
}
/* Get the latest values for a particular rating */
function updateRating(callback) {
	/*$.ajax({
		type: "GET", 
		url: "/Handlers/ItemStats.ajax", 
		data:"id="+jCore.itemId+"&userid="+jCore.itemStats.userId,
		dataType:"json",
		cache:false,
	    success: function(updatedItemStatistics){
			/* Update the rating details 
			updateRatingStats(updatedItemStatistics);
			// update comment count
			jCore.itemStats.comments = updatedItemStatistics['comments'];
			/* If the user's voted, disable additional rating 
			if (updatedItemStatistics.userVoted) {
				disableRatings();
			}
			if (callback) {
			    callback();
			};
		}
	});*/
}

function updateRatingStats(itemStats) {
	/* If the user has already voted, disable voting */
	if(itemStats.userVoted == true)
		disableRatings();
	/* Find the editable ratings for the page (have a tags not spans for the values) */
	var $_editableRatings=$(".ratings ul a, .ratings ul span span").parents('.ratings');
	/* Remove any previous ratings */
	$_editableRatings.find('ul').removeClass('rating0').removeClass('rating1').removeClass('rating2').removeClass('rating3').removeClass('rating4').removeClass('rating5');
	/* Show the new rating */
	$_editableRatings.find('ul').addClass('rating'+Math.round(itemStats.rating));
	/* Update the number of votes */
	$_editableRatings.find('span.ratingTotalVotes').html("("+itemStats.votes+" Votes)");
}

/* Remove all of the links so the user can't vote a second time */
function disableRatings() {
    $(".shareBarRatings li a").remove();
    $(".ratings ul a").each(function(index, el) {
        var $_el=jQuery(el);
        var oldhtml=$_el.html();
        $_el.parent().html('<span>'+oldhtml+'</span>');
    });
	/* The parents trick finds only the .ratings ul that have an anchor within them so leaves already disabled ones or inactive ones alone */
    $(".ratings ul a, .ratings ul span span").parents('.ratings ul').addClass('disabled').removeClass('hoverRating1').removeClass('hoverRating2').removeClass('hoverRating3').removeClass('hoverRating4').removeClass('hoverRating5');
}
/* ---------------------------------------- /includes/jsbin/mapdata.js ---------------------------------------- */
var northAmerica = {
	region: "North America",
	data: [
		{
			parent: "North America",
			path: "M304.5,160.6c-0.6,0.9-0.7,1.8-1.1,2.7c-0.4,0.9-1.1,1.5-1.2,2.6c-0.1,0.7-0.1,1.7,0.8,1.7c0.8,0,1.1-1.2,1.9-1.3c0.1,0.5-0.6,1.1-0.2,1.5c0.6,0.6,3.2-0.5,4.1-0.5c1-0.1,4.9,0.6,2.8,1.8c-0.7,0.4-1.3,0.7-0.5,1.4c0.9,0.8,1.9,0.3,2.9,0.3c1.6,0.1,1.9,2.4,1.9,3.7c0.1,1.2-0.2,2-1.2,2.7c-1.1,0.7-2.5,0.7-3.6,0.1c-0.5-0.3-1.1-0.6-1.5-0.9c-0.4-0.4-0.7-0.8-1.2-1.1c-0.9-0.5-2.3-0.8-3.3-0.9c-1.5-0.1-3,0-4.4,0.2c-1,0.1-2.7,0.7-3.7,0.4c-2.3-0.7,0.5-3,1-3.7c0.6-0.9,1.2-1.7,1.7-2.6c0.5-0.8,0.2-1.7,0.4-2.7c0.1-0.8,0.3-1.6,0.4-2.4c0.2-1.4,1-2.8,2.3-3.6c0.7-0.5,2.4-1,1.9,0.5L304.5,160.6z"
		},
		{
			parent: "North America",
			path: "M292.8,141.5c-3.7-3.4-4-6.8-4.9-11.4c-0.5-3-1.7-7.7-5.3-8.5c-5.5-1.2-2.5,8.4-6.1,9.5c-12.3,2.1-8.1-14.8-19.3-16.8c-3.2-0.6-10-0.2-10.5,3.7c-0.2,1.7,1.2,5.3,0.5,7.4c-0.6,1.9-3.4,2.3-3,3.7c0.4,1.8,3.2,2.4,3.3,4.2c0.1,1.1,1.9,5.4,1.8,5.9c-0.9,3.7-7.6,6.2-6.2,11.1c0.3,1.2,1.5,1.9,1.9,3.8c0.2,1.4-0.2,3.7-1,4.8c-1.6,2.3-4.3,2.3-6.1-0.4c-1.9-3-2.2-7.4-2.6-10.2c-0.7-5.7-6.4-4.6-10.8-5.3c-6.5-1.1-13.4-5.3-17.8-9.6c-4.1-4-3.9-4.9-3.4-9.9c0.6-6,6.7-6.9,10.9-11.7c3.1-3.6,6.9-6.3,10.7-9.1c4.4-3.2,8.5-4.1,11.5-8.5c1.2-1.7,3.2-3.5,2.6-5.7c-0.9-3.4-8.1-5-10.8-5.7c-5.2-1.4-7.6-2.1-12.3,0.3c-3.7,1.9-6.4,2.8-10.6,3.4c-11.2,1.6-22.8,4.8-34,4.8c-5.5,0-13.2,2.4-18.3,0.7l-1.3-0.7c-1.9,1.6-2.4-0.6-1.5-2c1-1.4,3.1-2.3,1-3.9c-2.3-1.7-6-1.1-8.6-1c-2.9,0.2-6-0.5-8.6-2c-1.5-0.9-3.9-3.5-5.9-3c-1.6,0.4-1.3,2.9-3.5,2.3c-2.4-0.7-2.1-3.7-3.2-5.3c-1.6-2.2-3.1-3.2-5.9-3.5c-2.8-0.3-3.8,0.6-3.9,3.1c-0.1,1.9-0.5,2.3-1.9,3.5c-2.2,1.9-5.7,4.3-8.5,5c-0.8-4.2,8.6-4.3,8.9-7.9c-3.4-0.3-5.6,2.4-8.3,4c-1.6,1-3.3,2.1-4.9,2.9c-3,1.6-5-0.2-7.4-1.9c-3.5-2.5-7.5-3.9-11.6-4.9c-3.2-0.8-6.5-0.9-9.8-1.3c-3-0.3-6-0.8-9.1-0.7c-2.2,0.1-4-0.3-6.2-0.4c-3.1-0.3-6.1-1.3-9.2-1.5c-4.6-0.3-7.6,1.4-11.7,3.1c-0.5,0.2-3.1,0.7-6.6,3.3c-1,0.7-2.3,3.7-3.3,4.6L21.8,84c0,0,0.1,0,0.1,0c-0.9,0.6-2.3,0.6-3.3,0.7c-0.9,0.1-1.8,0.2-2.7,0.3c-0.5,0.1-1.2,0.2-1.6,0.7c-0.7,0.9,0.5,2.3,1.2,2.8c0.9,0.6,1.7,1.3,2.6,1.8c0.8,0.4,1.7,0.6,2.4,1.1c0.4,0.3,0.7,0.7,1.2,0.8c0.5,0.1,1,0.3,1.5,0.3c1,0.1,1.9-0.1,2.8,0.2c1.1,0.3,2.1,1.2,2.8,2.1c0.6,0.8,0.3,1.5-0.4,2.1c-0.9,0.8-2.3,0.5-3.4,0.7c-1,0.2-2.3,0.6-3.2,0c-1-0.6-1.2-1.5-1.4-2.5c-0.4-2.1-3.5-0.5-4.1,0.7c-0.3,0.7,0.2,1.5-0.6,2c-0.9,0.5-2.2,0-3.2,0.1c-1.6,0.2-1.6,1.8-0.6,2.8c1.1,1,4.2,2.4,4.2,2.4c1.4,0.7,1.7,1.4,3,1.2c1.1-0.1,2.2-0.3,3.3-0.7c1.1-0.4,2.2-0.8,3.3-0.8c1.1,0,2.5-0.1,3.1,1c0.5,1,0.7,2.6,0.3,3.6c-0.6,1.7-1.9,2.1-3.5,2.6c-0.6,0.2-1.2,0.4-1.8,0.5c-1,0.1-1.9-0.1-2.9-0.2c-1.9-0.2-2.5,1-2.8,2.6c-0.2,1-1.9,3.4-1.9,4.6c0,1.3,5.2,1.9,4.9,2.6c-0.3,0.7-1.7,0.7-1,1.4c3.8,3.7,5.4,2.9,10.2,4.3c3.8,1.1,8.2,1.2,7.3,6.2c-2.4,14.5-31,12.9-37.2,24.8c-2.4,4.7,3.5,2.1,12.3-3.8c0,0,2.5-3.1,5.3-4.1c2.8-0.9,5.4-1.4,5.4-1.4c9.8-4.6,21.1-9,25.7-17.2c2.9-5.1,5.6-10.7,12.6-11.7c4.1-0.6,7.6,1.7,11,3.6c5.6,3,11.5,5.4,17.3,8.2c10.4,5,19.2,12.4,25.2,22c2.8,4.5,4,10.5,6.2,15.2c2.5,5.4,3.5,8.4,3.5,14.5c0,7.1-1.1,13.9-1.1,21c-0.1,7.6,3.9,11.7,9.7,15.9c4.1,3,8.6,4.8,11.8,8.9c2.5,3.1,4.4,7.3,5.8,11.1c1.8,4.9,2.6,9.8,4.9,14.6c1.6,3.2,4,14.1,8,13.8c2.2-5.5-0.7-8.3-2.4-13.7c-1-3.1-2.3-7.2-4.2-9.9c-1.5-2.1-4-3.4-3.9-6c5.9-1.2,12.5,10,14.9,14.2c2.8,5,5.3,8.8,5.8,14.6c0.4,4.3-0.3,8.7,3.3,11.6c9.8,7.7,22.7,6.5,31.8,14.8c2.9-4.6,3.7-10.3,10.2-12.3c0.7-6.2,1.2-14.3-4.9-8.4c-2.7,2.7-0.8,6.5-6.1,6.9c-5.4,0.5-10.8-3.9-12.7-8c-2.7-5.6-4.1-19.7,0.4-25c3.2-3.7,6-5.1,10.7-5.7c1.6-0.2,3.2,1.8,4.8,1.8c2.1,0,2.5-0.8,4.1-2.1c1.3-1,0.8-2.6,2.1-2.3c2.9,0.7,9,0.3,12.4,2.8c3,2.2,3.1,4.1,3.6,6.5c0.6,2.8,1.7,9.8,5.1,9.5c4.2-0.4,1.6-6.7,0.6-9c-2.9-7-2.7-11.4,2.2-18.1c1.7-2.3,4.6-3.6,6.3-6c2.8-3.9,1.1-7.5,0.3-11.7c-1.2-6.5,10.5-11.1,14.8-15c6.3-5.8,4.4-6,10-10.1l0.3-0.1c0.2,0,0.8-0.6,1.1-0.8c0.7-0.5,1.3-1,2-1.4c1.3-0.8,3.2-1.9,4.8-1.9c2-0.1,1.5,1.4,0.3,2.2c-1.3,0.9-2.3,1.8-3.4,3c-1,1.1-2.2,2.6-0.1,3.3c0.5,0.2,1.2,0.2,1.7,0.1c1-0.2,1.2-0.6,1.7-1.3c1.7-2.1,5.6-1.9,7.1-4.3c0.6-1,0.9-3-0.9-2.6c-0.7,0.2-0.8,0.5-1.7,0.4c-0.7-0.1-1.2-0.4-1.8-0.8c-3.3-2.4-2.8-6.5-2.1-10c0.3-1.3,0.5-2.3-0.6-3.3c-1.1-1-2.4-1.3-3.8-1.2c-1.8,0.2-3.1,1-4.3,2.2c-0.5,0.5-2.8,2.6-3.5,3.5l-1.3,1.5c-0.2-2.8,6.2-9.8,9.4-10.6c3.4-0.9,7,1.6,10.6,1.2c4.1-0.5,14.8-6.4,15.9-11.1C306.7,147.7,296.5,145,292.8,141.5z"
		},
		{
			parent: "North America",
			path: "M229.6,266.8c5.9-4.5,11-1.3,17,1.3c5.7,2.5,12,3.8,17.7,5.9c1.6,0.6,8.2,2.1,8.5,4.2c0.4,3.2-6.9,3.2-9,3.3c-1.4,0.1-4.1,0.5-5.3-0.3c-2.7-1.9-0.2-1.6,0.4-3.4c0.5-1.4,2.3-0.6,1.3-3c-0.5-1.2-2.3-1.8-3.4-1.9c-2.8-0.3-4.7,2.4-7.7,2.4c-4.7,0.1-3.4-2.1-5.3-5.3c-1.3-2.2-4.7-4.9-7.3-4.5c-2.9,0.5-3.6,3.9-6.9,3.2c-0.1-0.5-0.1-1-0.1-1.6"
		},
		{
			parent: "North America",
			path: "M289.1,14.3c0.4,0.1,0.6,0.2,0.6,0.6c-14.1,4.2-28.5,10.8-38.5,21.5c-3,3.2-5.8,6.7-7.3,10.7c-1.2,3.3,0.3,8.2-3.6,8.8c-7.5-1.6-14.3,0.4-21.6,1.2c-6.8,0.7-9.9-4.7-13.8-9.1c-0.8-1-1.2-2-2.4-2.8c-1.1-0.7-3.1-0.1-3.1-1.9c0-3.3,7.8-2,9.8-1.5c4.5,1.1,3.1,3.2,5.5,5.8c2,2.1,6.1,3.1,8.9,3.1c3.6,0,8-1.2,11-3.1c-3.7-2.3-17.2,3.7-14.5-4.3c0.9-2.6,2.8-4.2-1.4-5.2c-2.5-0.6-5.1,0.8-7.6,0.3c-4.7-1-3.2-4.6-5.5-7.3c-2.3-2.8-6-3.3-7.7-7.2c-1.8-4.1,2.2-5.6,5.7-6c3.4-0.4,6.8,1.2,9,3.7c1.7,1.8,1.6,3.3,4.3,4.1c2.5,0.7,6,0.3,8.5,0.2c3.4-0.2,10.9,1,13.2-2.2c-3.3-1.8-9,0.1-12.6,0.4c-3.3,0.3-6,0.1-9.1-1.1c-2.3-0.9-5.7-3.2-3.4-6c1.8-2.3,7-1.8,9.5-2c20.8-1.6,41.6-12.3,62.5-6.7c1.7,0.5,9,5.4,4.2,6.7"
		},
		{
			parent: "North America",
			path: "M229.5,59.6c1.7,5,18.4-4.3,22.3-0.3c1,1,0.7,2.8,1.6,4c0.9,1.2,2.6,1.7,3.9,2.4c3.4,1.5,6.3,2.5,9.2,4.7c2.9,2.2,6.2,3.4,7.9,6.8c1.2,2.4,0.4,4.9,1.3,7.3c2.4,6.6,12.1,3.2,15,8.9c2.1,4.3-6,8.3-9.4,7c-1.4-0.5-2.6-3.1-3.7-3.4c-3-0.8-2.7,2.1-1.5,3.9c1.9,3,7,4.8,6.8,9.2c-0.3,6.3-8.3-0.9-10.7-0.9c-0.2,2.2,3.2,2.1,3.3,4.5c-2.9,0.7-5-1.1-7.6-2.1c-3.1-1.2-6.5-1.5-9.8-1.8c-3.8-0.4-5.4,0.1-8.6,1.8c-2.7,1.4-4.7,0.7-4.3-3c0.7-6.8,12.7-1.8,13.5-6.4c0.5-2.7-5.1-2.8-1.9-6.2c1-1.1,2.4-0.2,3.3-1.8c0.4-0.7,0.2-3.4,0-4.1c-2-6.7-11.3-12.4-18-11.7c-5.9,0.6-11.9,4.1-18.1,1.8c-5.2-2-10.1-8.7-8.3-14.6c1-3.1,10.2-10.9,13.7-7.1c0.3,0.3,0.1,0.4,0.2,0.7L229.5,59.6L229.5,59.6z"
		},
		{
			parent: "North America",
			path: "M210.8,75.2c0.4-0.6-5-3.7-5.4-6.1c-0.6-3.1,1.6-2.7,3.9-4c1.9-1,4.4-2.4,3.3-5.1c-1.1-2.7-4.6-2-7-1.8c-9.3,0.7-0.5,7.3-3,12.5c-1.1,2.2-4.1,2.4-4.3,5.5c-0.2,3.1,3,4.7,5.8,4.9c2.4,0.2,8.9-1.5,7.9-4.8c-0.5-0.1-0.9-0.5-1.2-0.7V75.2z"
		},
		{
			parent: "North America",
			path: "M180.7,76.2c-3-1.7-3.8-5.2-5.4-8.1c-0.8-1.5-2.8-6-4.7-6.4c-3.7-0.6-2,4.6-2.2,6.7c-2.7,0.8-3.5-1.7-3.4-3.9c-1.4-0.4-2.6,0.8-3.1,0.8c-1.9-0.1-1.1-0.7-2.6-1.2c-2.5-0.9-4.1-0.2-2.9,3.1c-3.7,1-2.5-3.7-3.4-5.1c-1.9-3.1-3.9-0.4-6.1,0.8c-3.9,2.2-7.4,4.4-9.4,8.9c2.9,1,6.1,0.7,9.1,0.4c-0.9,0.9-3.5,0.7-4.2,1.9c-1.1,2.1,2.2,1.5,3.6,1.5c3.4-0.2,10.2-2.6,12.3,0.9c-1.7,2.6-13.2-0.5-12.2,3.9c1.5,0.7,4.2,0.4,5.5,1.3c1.7,1.3,0.8,3.3,2.5,4.5c2.5,1.7,9.1-0.3,11.6-1.1c2.6-0.9,6.7-6.4,9.7-4.5c2.1,1.3,1.3,3.4,4.1,4.2c1.5,0.4,4.8,0.5,4.8-1.4c-2-0.8-6.9-1.2-2.8-3.2c2-1,6.4,1.3,7.1-0.5C188.8,79.5,183.2,77.6,180.7,76.2"
		},
		{
			parent: "North America",
			path: "M149.3,58.4c-3.9,0.6-11.7,7-13.2,10.7c-0.6,1.5,0.8,1.4-0.6,2.7c-1.2,1.1-2.1,0.3-3.4,0.7c-3.2,1.2-3.5,3-5.2-0.9c-1.1-2.4-2.6-4.1-2.4-7c0.3-3.8,1.4-6.9,5.3-8.1c2.8-0.9,6.1-1.2,9-0.8c2.8,0.3,4.5,1.9,7.1,2.8c1.4,0.5,3-1.7,4.6-1.7L149.3,58.4z"
		},
		{
			parent: "North America",
			path: "M128.8,49.5c3.5-0.9,7.2-0.2,10.7-1.5c2.5-0.9,2.7-2.5,4.6-4.1c1.6-1.4,3.4-0.9,3.4-3.3c0-1.9-1.1-2.3-3.1-2.5c-4.4-0.3-8.4,4-11.9,6.1c-3.5,2.1-11.5,5-5.2,5.5L128.8,49.5z"
		},
		{
			parent: "North America",
			path: "M192.7,81.5c0.1-0.4-0.2-1.2,0.4-1.3c0.1,0,0.2,0,0.3,0c0.2,0.1,0.1,0.2,0.1,0.3c0.1,0.2,0.3,0.2,0.4,0c0.1-0.2,0-0.5,0.1-0.7c0.2-0.2,0.4-0.3,0.6-0.3c0.2,0,0.4,0,0.6,0.1c0.1,0.2,0.1,0.3,0.1,0.5c0.1,0.4,1,0.1,1.3,0.1c0.6-0.1,1.4,0.2,1.9,0.5c0.7,0.3,1.4,0.8,1.6,1.6c0.1,0.2,0,0.4,0.1,0.6c0,0.1,0.1,0.3,0.1,0.5c-0.1,0.3-0.4,0.4-0.5,0.7c-0.1,0.2-0.2,0.6,0.1,0.7c0.2,0.1,0.5,0,0.7,0c0.1,0,0.4,0,0.4,0.2c0,0.4-1.2,0.5-1.5,0.6c-0.3,0.1-0.6,0-0.9,0c-0.2,0-0.5,0.1-0.7,0.1c-0.3,0-0.5-0.1-0.8-0.2c-0.2,0-0.4,0-0.4,0.2c0,0.3,0.4,0.5,0.3,0.7c-0.1,0.2-0.5,0.2-0.6,0.2c-0.3,0.1-0.5,0.2-0.8,0.1c-0.6,0-1.3-0.4-1.5-0.9c-0.2-0.5-0.2-1.3-0.8-1.5c-0.2-0.1-0.5-0.1-0.6,0.2c-0.2,0.3-0.1,0.5-0.5,0.6c-0.3,0.1-0.7,0-1-0.1c-0.3-0.1-0.6-0.3-0.7-0.7c0-0.1,0-0.2,0-0.3c0,0,0.2-0.7,0.5-1.1C191.7,82.2,192.5,82,192.7,81.5"
		},
		{
			parent: "North America",
			path: "M194.1,71.3c0.5-1.1,3-1,4-1.3c0.7-0.2,0.5-0.5,0.7-1.1c0.2-0.7,0.6-1.2,0.6-1.9c-0.1-1.1-0.6-2.5-2-1.9c-0.2,0.1-0.4,0.4-0.6,0.4c-0.5,0.1-0.6-0.3-0.7-0.8c-0.1-0.4,0.1-0.5-0.3-0.8c-0.2-0.1-0.6-0.1-0.8-0.2c-0.4,0-0.7-0.1-0.8-0.6c-0.1-0.4,0.1-0.5,0.3-0.7c0.5-0.4,1.5-0.2,1.8-0.8c0.4-1-0.2-2.2-1.3-2.4c-1.1-0.2-2.1,0.5-3.1,0.4c-0.1-1.1,2.8-1,2.7-2.1c0-0.5-1.4-0.3-1.7-0.2c-0.7,0.2-1.2,0.8-1.8,1.1c-0.3,0.2-1.2,0-1.4,0.3c-0.5,0.6,0.7,0.5,0.9,0.7c0.6,0.5-0.4,0.7-0.7,0.8c-0.7,0-1,0-1.3-0.7c-0.1-0.2,0-0.5-0.2-0.7c-0.4-0.3-1.4,0.1-1.7,0.3c-0.7,0.4-1.5,1.1-1.7,1.8c-0.3,0.9,0.3,1,1,1.3c0.3,0.1,0.6,0.2,0.9,0.3c0.3,0.1,0.7-0.1,1,0.1c1.3,0.7,0,2.2-0.9,2.5c-0.6,0.2-1.3,0.4-1.9,0.2c-0.6-0.2-0.9-0.8-1.3-1.2c-1.3-1.2-2.7,0.1-2.3,1.7c0.2,0.7,1.1,1.7,1.7,2c0.3,0.1,1.2,0.4,1.5,0.2c0.4-0.2,0-0.7,0.7-0.9c0.5-0.2,1,0.1,1.4,0.5c0.3,0.3,0.4,0.7,0.6,1c0.4,0.4,0.9,0.6,1.5,0.8c0.3,0.1,0.7,0.2,0.9,0.5c0.2,0.3,0.1,0.6,0.3,0.9c0.2,0.6,0.3,1.8,0.7,2.2c0.4,0.5,1.5,0.4,1.9,0c0.4-0.3,0.8-1,1.2-1.2L194.1,71.3z"
		},
		{
			parent: "North America",
			path: "M34.9,306c0,0.3,0.3,0.7-0.1,0.8c-0.1,0.3-0.3,0.4-0.2,0.8c0.1,0.2,0.2,0.4,0.2,0.7c0.1,0.3,0.1,0.6,0.1,0.9c0.1,0.3,0,0.6,0.1,0.9c0,0.3,0.1,0.6,0.4,0.7c0.3,0.1,0.6-0.1,0.8-0.3c0.2-0.2,0.2-0.5,0.4-0.7c0.2-0.2,0.6-0.2,0.9-0.3c0.4-0.2,1.3-0.5,1.4-1c-0.2-0.1-0.6-0.2-0.7-0.3c-0.2-0.2-0.1-0.6-0.1-0.8c-0.1,0-0.3,0-0.3,0.1c0.2-0.6-0.2-0.7-0.6-1c-0.2-0.1-0.3-0.3-0.5-0.4c-0.3-0.2-0.4,0-0.7-0.1c0.1,0-0.1-0.3-0.2-0.3c-0.1-0.1-0.3-0.2-0.5-0.2C35,305.4,34.9,305.7,34.9,306"
		},
		{
			parent: "North America",
			path: "M32.7,302c-0.3-0.1-0.6-0.1-0.6,0.3c0,0.5,0.7,0.4,0.9,0.8c0.3,0.5,0.4,0.8,1.1,0.6c0.2,0,0.6-0.2,0.7-0.4c0-0.2-0.3-0.3-0.5-0.4C33.8,302.6,33.4,302.1,32.7,302"
		},
		{
			parent: "North America",
			path: "M32.1,301.1c-0.2-0.1-0.5,0-0.7,0c-0.3,0-0.3-0.1-0.5-0.2c-0.3-0.2-1.1-0.1-0.7,0.4c0.2,0.2,0.4,0.1,0.7,0.1c0.1,0,0.2,0,0.3,0c0.1,0.1,0.1,0.2,0.2,0.3C31.8,301.9,32.9,301.4,32.1,301.1"
		},
		{
			parent: "North America",
			path: "M28.4,299c-0.2-0.6-0.7-0.7-0.8,0c-0.1,0.4-0.1,0.3-0.5,0.3c-0.4,0-0.3,0.1-0.2,0.4c0.1,0.2,0.7,1,1,1c0.1-0.5,0.3,0.2,0.4,0.3c0.4,0.2,0.8-0.3,0.6-0.6C28.8,299.8,28.6,299.5,28.4,299"
		},
		{
			parent: "North America",
			path: "M22.3,298.1c-0.3-0.1-0.9-0.4-0.7-0.8c0.3-0.5,1.4-1,1.8-0.4c0.2,0.2,0,0.6,0,0.9c-0.1,0.3,0,0.4-0.4,0.5C22.8,298.2,22.5,298.2,22.3,298.1"
		},
		{
			parent: "North America",
			path: "M20.9,297.5c0.2,0.3-0.2,1-0.5,1c0-0.2,0.1-0.5,0.2-0.7c0-0.1,0.1-0.1,0.2-0.2C20.8,297.5,20.9,297.5,20.9,297.5L20.9,297.5z"
		},
		{
			parent: "North America",
			path: "M277.7,278.2c-0.8,0.7-1.6,1.6-0.1,2.6c0.6,0.4,2.1,0.2,2.9,0.2c1.1-0.1,4.2,0.3,4.7-1.4C285.6,278.2,280.1,276.1,277.7,278.2"
		}
	]
};
var southAmerica = {
	region: "South America",
	data: [
		{
			parent: "South America",
			path: "M252.8,312.6c2.7-9.8,15.3-9.9,22.8-7.8c10.1,2.8,16.3,10.7,26.4,13.4c4.4,1.2,9.6,0.2,13.1,3.3c3.9,3.5,2.4,9.3,5.6,13.3c6.8,8.9,20.4,6.6,28.3,13.8c3.1,2.8,7.4,9.1,8.3,13.3c1.2,5.4-2.4,9.6-5.1,13.7c-2.6,4-4.4,6.3-4.8,11.1c-0.6,5.7,1,11.8-1.1,17.2c-4.1,10.7-19.3,10.5-23.6,21.1c-1.7,4.1-0.4,9.4-1.9,13.7c-1.9,5.2-6.2,10.7-10.2,14.4c-2.3,2.1-5.6,5.2-8.4,2.7c-0.5,0.1-2.3,1-2.7,1.2c-0.2,4.3,1,9.1-2.2,12.2c-2.9,2.9-6.7,2.8-10.1,5.8c-6.5,6-8.7,14-12.2,21.4c-0.7,1.5-2.4,2.9-2.3,4.7c0.2,4.3,2.3,0.9,3.9,4c2.7,5.2-2,6-4.2,9.4c-6.2,9.7,1,15.9,10.8,15.4c1.4,5.6-8.8,7.4-12.8,7.1c-5.2-0.4-9.4-3.9-12.6-8.2c-8-10.5-4-30-2.2-42.1c2.2-15.5,4.9-31,7.2-46.6c1.7-11.7,8.9-27.7,4.3-39.6c-3.4-8.7-15.1-11.7-20.2-19.4c-2.4-3.6-2-6.4-2.9-10.5c-1-4.8-3.6-7.3-6.1-11.5c-11.1-18.7,12.7-28.2,14.7-45.3L252.8,312.6z"
		},
		{
			parent: "South America",
			path: "M209.5,293.2c0.2,0.2,0.5,0.4,0.7,0.7c4.6,4.5,8.9,7.7,14.4,11.7c5.7,4.1,10.8,9.9,17.4,12c2.6,0.9,6.1,2.2,8.4-0.4c0.9-1,1.5-2.5,0.8-3.8c-0.4-0.7-2.3-1.3-3.7-1.6l-1.9-2.2c-3-2.2-6.1,0.1-9.5-0.1c-5-0.2-6.2-4.7-6.8-8.9c-0.3-2,0-9.8-1.2-11.1c-2.7-3-7.3,1.8-8.7-2.7c-0.2-0.7,0.1-3.1,0.4-5.9C213.2,282.9,212.5,288.6,209.5,293.2z"
		}
	]
};
var europe = {
	region: "Europe",
	data: [
		{
			parent: "Europe",
			path: "M526.8,77.9c-0.7-0.4-1.4-0.8-2.1-1.1c-7.1-3.6-15.3-1.3-21.7,2.4c-8.5,4.9-16.5,12.7-22.3,20.6c-2.4,3.3-5,6.7-8,9.4c-2.6,2.3-5.9,4.1-8.2,6.8c-4.3,4.9-2.5,16.2,4.2,18.2c3.5,1.1,3.6-2.3,6.5-2.4c3.8-0.2,3.2,6,4.4,8.6c0.9,2,2.8,3.4,2.4,5.7c5.3,1.1,8.8-6.6,10.3-10c0.5-1.1,1.1-2.8,1.9-3.7c1-1.3,1.8-1,3-1.9c3.9-2.9,0-3-2.4-4.3c-6.4-3.3-4.4-11.4,0.6-14.9c2.2-1.6,5.2-1.5,6.7-4.1c1.2-2.1,0.2-4,2.2-5.8c4-3.6,14.1-2.1,9.2,4.7c-2.1,2.9-5.8,3.8-7.6,7c-2.2,3.8-1.2,7.5,2.4,10.1c6.8,4.8,10.9-3.3,17.4-1.2c2.3,0.7,3.8,3,1.5,4.5c-1.9,1.2-6.8,0.2-9,0.3c-2.3,0.1-7.5,0.2-8.1,3.4c-0.5,2.5,5,5.3,0.9,6.8c-3.1,1.1-3.6-3-5.4,0.6c-1.6,3-1,7-3.4,9.9c-2.4,3-5.7,3.4-9.3,4c-3.8,0.7-9.3,2.2-13.2,1.2c-3.1-0.8-4.6-3.7-4.8-6.7c-0.2-2.2-0.1-7.5-3.6-4.3c-2.9,2.6-0.5,7.7-0.1,10.8c0.5,4.3-1.8,3.7-5.4,4.2c-4.5,0.6-6.3,2.5-9.5,5.8c-2,2.1-6.6,7.5-9.6,6.5l-4.6,2.4c-0.6,0.7-1.3,0.7-1.3,1.8c-11.1,0.6,1.1,5.6,2.5,10.5c0.8,2.8,1.3,6.4-1.1,8c-3,2-7.3,1.4-10.7,1.4c-4.7,0-8.5,1.8-8,7c0.1,1.3,0.8,2,1,3c0.4,2.5-0.9,3.1-1.3,5.5c-1.1,7.2,7.1,8.3,12.2,7.2c2.8-0.6,7-1.4,9.2-3.3c2.1-1.9,2.1-4.4,3.1-6.8c1.6-3.7,5.5-5.3,8.2-8c2.3-2.3,0.3-4.3,4-4.5c3.6-0.2,3.2,0.9,6.1-1.6c2-1.7,4.3-2.6,6.7-1c2.1,1.3,4.1,4.5,6.2,6.1c2.1,1.6,3.9,3.5,5.7,5.6c1.8,2.2,3.4,5.1,4.3,7.9c1.6,5-2.7,2.8-6,4.4c1.2,2.2,7.6,0.9,9.1-0.7c2.6-2.7-1.5-5.3-0.9-8.5c2.1-1.1,2.3,1.3,4.2,1.1c0.6-3.8-8-6.5-10.3-9.2c-2.2-2.5-7.7-10.6-2.5-11.5c3.6-0.6,5.6,3.3,7.8,5.6c2.3,2.3,4.3,3.6,6.9,5.4c5.6,3.9,3.1,12.2,8,16.6c1.3,1.2,5,2.1,6.7,1.5c0.6-2.3,0.5-2.4-0.8-4.2c-0.9-1.3-3.4-2.3-2.7-4.2c0.5-1.4,5.1-2.4,6.4-1.9c1.9,0.7,1.8,2.5,2.2,4.2c2,0.6,3-1.5,3.9-2.7c1.6-2.1,2.7-2.7,4.9-4c-2.2-1.7-3.6-2-3.1-4.9c0.5-2.6,1.9-5.5,2.8-8.3c0.7-2.4,2-6.4,5.8-4.9c0.6,0.2,0.9,0.5,1.2,0.9c5.2-17,1.3-19.8-3.7-32.5c-3.1-7.8-1.9-21.1-0.3-27.4c0.2-0.9,0.4-1.9,0.6-2.8c0.6-3.2,0.8-6.2,0.8-9.5C529.8,101.2,529,91.3,526.8,77.9z"
		},
		{
			parent: "Europe",
			path: "M439.8,133c-1,1.4-2.6,2.1-2.7,3.9c2.2,0.6,3-1.6,5.1-1.4c1.6,4-2,7.7,1.6,11.3c0.8,0.8,2,1.1,2.7,2.1c0.7,1.1,0.4,2.5,1,3.7c1.4,2.5,3.5,1.5,5.2,2.7c6.3,4.8-5.1,8.2-8.3,8.9c-2.5,0.5-3.6,1.2-5.6,2.7c-1.6,1.2-3,2.8-5.1,2.5c-1.7-3.8,3.9-5.3,6.1-7c-1-1.2-2.9-1.5-4.3-1c-0.7-1.7-0.1-3.3,0.9-4.5c-0.5,0.1-1.2-0.1-1.7-0.1c0.3-3.5,7.2-2,4.6-6.8c-1.3-2.3-3.3-0.9-4.6-2.1c-1.2-1.1-0.6-3.8-0.8-5.1c-0.4-2.7-2.4-9.5-0.8-12.2c0.6-1,3.4-2.2,4.5-1.9c1.8,0.5,1.8,2.7,2.4,4.3"
		},
		{
			parent: "Europe",
			path: "M426.6,146.8c-0.1,0.3,0,0.6,0.3,0.7c0.8-0.8,3-2.2,4.3-1.6c0,0,2.4,3.7,2.4,3.7c0,2.3-2.7,1.6-3.1,3.4c-0.3,1.4,2.3,3.4,1.6,5.2c-1,2.3-8.3,4.9-9.8,2.2c-1.3-2.2,1.2-2.3,1.3-4.4c0.1-2.2-3.2-1.8-2.8-4.2c2-0.9,7.3-1.8,7.6-4L426.6,146.8z"
		},
		{
			parent: "Europe",
			path: "M532.4,184.7c1,1.5-0.2,3.8,1.2,5.3c1.6,1.7,4.6,0.8,6.6,0.2c1.5-3,2.1-7,1.3-10c-0.8-3-2.8-5.3-4.6-7.4c-1.8-2.1-2.5-7.1-2.6-6.3C533.7,169.8,533.4,181.4,532.4,184.7z"
		},
		{
			parent: "Europe",
			path: "M405.2,255.5c0,0,1-0.4,1-0.8c0.1-0.3,2.1-4.7,3.1-3.9c1,0.8-0.6,1.3-0.9,2.6C408,254.8,407.5,256.9,405.2,255.5z"
		},
		{
			parent: "Europe",
			path: "M399.8,255.4c0,0-1.3,1.3-0.1,1.8c1.2,0.5,2.1-0.8,1.4-1.4C400.4,255.1,399.9,255.1,399.8,255.4z"
		}
	]
};
var middleEast = {
	region: "Middle East",
	data: [
		{
		  parent: "Middle East",
		  path: "M656,310.4l1.2,1.2c0,3.7-0.9,8.6,1.8,11C666.4,320.4,658.9,313,656,310.4z"
		},
		{
		  parent: "Middle East",
		  path: "M937.6,97.3c-4.9-1.7-8.7-3.6-13.1-6.2c-6.4-3.8-12-7.4-19.2-9.9c-3.1-1.1-6.2-3.7-9.6-3.4c0.1,1.4-0.7,2.1-1.2,3.3c-0.1,0.3-0.9,2.9-1,3.1c-1.1,1.4-5.2,1.5-5.2,1.8l-1.3-2.3c3.2-5.6-6.4-1.1-7.6-0.9c-4.4,0.6-8.6-3.4-9.8,3c-2.9,0.2-4.1-5.3-6.1-7c-2.3-2-5.8-3.3-8.9-3c-3.4,0.3-18.3,5.3-17-1.2c0.2-1.2,2.1-1.4,1.3-3.2c-0.4-0.8-3.2-1.8-4.1-2c-2.7-0.6-5.7-0.2-7.1,2.4c-1.1,2.1,0.4,2.5-2.1,3.6c-4.9,2.2-3.5-2.4-4.6-4.5c-1.2-2.2-8.4-3.2-10.1-1.5c-2.5,2.4,0.1,5-5.1,4.6c-3-0.2-7.2-2.6-10.1-1.5c-2.3,0.8-3,3.1-5.8,3.4c-3.9,0.4-7.3-2.9-10.7-4.3c-4.2-1.9-8.9-2.5-13.4-3.6c-4.2-1-7.1-3.1-10.4-5.6c-2-1.5-5.4-2.2-8-1.5c-3.1,0.9-3.5,3-7,2.2c-1.4-0.3-2.3-1.3-3.9-1c-2.4,0.4-2.2,1.7-3.5,3.1c-2.6,2.8-5.3,3.2-9.1,3c2-2.4,5.7-3.3,7.9-5.7c2.4-2.6,3.4-4.2,7-4.8c3.2-0.6,7.5-0.9,7.1-5c-0.4-4-4.8-7.3-8.6-7.3c-3.9-0.1-6.6,3.7-9.5,1.2c-1.1-0.9-1.5-2.7-3-3.7c-1.7-1-4.1-1.7-6.1-1.5c-3.5,0.3-3.2,2.9-5.4,5c-2.2,2.1-5.6,2.3-8.6,2.4c-7.8,0.1-14.9,1.3-22.4,3.9c-1.8,0.6-5.3,2.4-6,4.4c-0.9,2.9,2.6,5.8-3.1,4.9c-3.4-0.5-5.8-2.7-9.2-0.7c-2.4,1.5-4,4.3-2.2,6.7c2.1,2.7,12.5,9.7,5.9,13.6c-2.2-4.7-5.8-10-10.7-12.6c-2-1-5.3-1.6-7,0.5c-1.3,1.5,1.6,9-2.1,7.1c-1.9-1-1.7-7.3-3.1-9.2c-1.9-2.6-7.3-5-10.6-4.6c-2.7,0.4-4.8,5.1-5.9,7.7c-1.6,3.7-2,8.3-2.1,12.2c0,1.4,0.4,3.1-0.6,4.1c-1.1,1.2-4.7,1.6-6.2,1c-2.3-0.9-3.9-3.4-6.3-4.5c-1.9-0.9-3.7-1.5-5.8-1.7c-3.3-0.3-5.4-0.2-7.8-3.4c-1.8-2.5-2.4-5.4-2.4-8.5c0.2-9.5,15.2-11,21.6-14.5c6.9-3.7,9.3-10.8-0.5-11.5c-9.4-0.7-17.7,7.3-24.5,12.8c-3.9,3.2-9.2,9.8-6.7,15.3c1.6,3.7,10.5,6,7.3,11.7c-3.6,6.4-13.3,1.9-17.8,5.7c0.3,0.6,0.9,1.2,1.6,1.5l-3.1,2.1c-2.9,1.3-0.9,5.4-5.4,4.5c-1.7-2.5,0.6-7.6-0.7-9c-0.9-0.9-4-0.4-4.8,0.2c-1.6,1.1-1.4,2.7-1,4.6c0.2,1.1,1.8,3.6,0.8,4.7c-1.3,1.2-2.8-1.2-4.7-1c-3.8,0.4-6.2,4.5-4,7.4c-4.7,2.8-8.3-0.1-12.2-2.2c-4.2-2.3-7.5-3.4-9.9-7.7c5.9,2,9.6,6.6,16.4,5.4c6.1-1,9.6-7.6,2.9-11c-5.2-2.6-11.2-4-16.5-6.2c-3-1.3-5.7-3-8.6-4.6c2.2,13.4,2.9,23.4,3,34.6c0,3.3-0.2,6.3-0.8,9.5c-0.2,0.9-0.4,1.8-0.6,2.8c0,0.1,0,0.1,0,0.2c0,0.2-0.1,0.3-0.1,0.5c-1.5,6.5-2.5,19.1,0.4,26.8c2.4,6.2,4.6,10,5.6,14.3c0.2-0.9,0.8,4.1,2.6,6.2c1.8,2.1,3.9,4.3,4.6,7.4c0.7,3,0.1,7-1.3,10c0.3-0.1,0.5-0.2,0.8-0.2c2.7-0.7,5.5-1.1,8.2-0.1c2.2,0.9,5.9,3.4,5.8,6.1c-0.1,3.1-3.2,3.6-5.8,4.3c-6.1,1.4-11.7-3.4-17.4-0.9c-2,0.9-3.2,2.8-4.8,3.8c-1.8,1.1-4.1,1-5.8,2.7c-4.9,5.1,0.6,10,6,11.2c4.5,1,14-2.2,14.9,3.6c0.4,2.9,0.1,7.4-0.2,10.4c-0.4,4-3.4,5.7-6.9,7.2l0.3,0.5c1.9,3.6,3.6,7.2,4.2,11.4c3.6,2,6.9,9.7,9,12.9c3.7,5.8,8,12.7,9.9,19.5c1.2,4.3,0.9,9,3.8,12.7c6,7.6,11-2.2,16.3-6.6c5.1-4.2,24.1-13.9,23.2-22c0-0.5-0.2-1.9-3-3.6c-1-0.6-2.1-1.6-2.1-2.7c-0.1-1.4,0.8-3.7,0.2-3.7c-0.8,0.1-2,3.5-5.5,5.3c-1.6,0.8-3.2,1-5.1,0.9c-3.2-0.1-2.1-2.4-1.5-3.6c0.3-0.6,0.9-2.4-0.2-3.4c-0.3-0.3-0.8-0.3-1.1-0.1c-0.4,0.3-0.7,1.3-0.7,2.2c0,0.9,0,1.9-0.2,2.5c-0.1,0.3-0.6,0.7-0.9,0.3c-0.5-0.7-0.9-1.6-1.2-2.4c-0.6-1.6-0.9-3.4-2-4.7c-0.6-0.7-1.3-1.3-1.9-2c-1.6-1.9-2.2-4.6-1.5-7c0.2-0.7,0.6-1.4,1.3-1.6c1.4-2,6,0.4,8.9,4.8c1.6,2.5,1.7,6.4,4.2,7.6c0.5,0.2,1,0.4,1.4,0.5l0,0c0.2,0,0.3,0,0.5,0.1c0.2,0,0.3,0,0.5,0c0.6,0,1.3-0.1,1.9-0.3c0.8-0.3,1.5-0.9,2.2-1.3c0.7-0.5,1.5-0.9,2.4-1c1.5-0.1,2,1.2,2.3,2.2c0.1,0.4,0.1,2.1,1.9,2.7c3.7,1.3,12.1-2.4,14.7-2.6c7.8-0.8,12.4,5.5,16.4,11.2c5.3,7.5,5.2,12.9,6.3,22c1.2,10.3,5.7,19.2,9.8,26.7c3.7-5.2,1.8-10.8,3.5-16.5c1.4-4.8,6-9.8,9.3-13.4c5.4-5.9,13.1-12.7,20.8-15.4c3.5-1.2,6.5-0.2,9.1,1.9c2-4.9,5-9.9,1.4-14.8c-3-5-12-2-16-6c-1,0-3-3-4-3c-13-6-36.1-7-35.1-25.1c-4,5-9,2-13-1c-1-1,0-4,0-6c-2,0-5,1-7-1c-1-1-3-3-1-4c15-3,20-17,29.1-25.1c4-4,8-8,13-11c6-5,14-6,21-4c17,3,37.1,6,54.1,1c1-1-6-5-4-6c9-2,19,0,27.1,6c0,1,2,2,1,4c8,0,16,6,18,13c1.8,5.5,6.1,7.6,9.2,11.8c0.1-1-0.1-1.9,0.5-3.1c0.5-1,4.9-4.3,6-4.3c3.7,0,2.4,4.7,6.4,0.9c2.5-2.4,3.7-5.1,5.6-7.8c4.3-6.3,7.8-12.5,10.6-19.6c1.2-2.9,1.7-7.6,0.7-10.7c-0.7-2.1-6.4-5.5-6.8-2.2c-9.2,1.1-5.9-7.3-2.6-11.5c3.6-4.5,7.9-8.9,11.8-13.2c4-4.3,9-2.8,13.8-2.2c5.3,0.7,10.2-2.2,15.2-1.4c0.2,1.8-1.1,3.4-3,3.4c0.7,3.8,9,0.3,10.6-1.3c-1-0.9-2.2-1.1-3.3-0.6c0.2-4.3,10.7-10.8,14.9-10c0.6,2.3-1.7,3.1-1.1,5.4c4.5,2,9.6-6.5,14.3-7.2c-0.2,3.6-6.4,8.3-8.8,10.9c-3,3.2-6.9,6.4-9.2,10.1c-2.6,4.2-4.8,10.4-5.6,15.2c-0.8,4.5,1,8.9,0.9,13.5c2.9-0.7,5.7-6.2,7.5-8.4c1.8-2.3,3.2-4.4,4.2-7.1c1.6-4.5,2.8-9.4,3.9-13.8c1.1-4.5,2-8.2,6.7-10.6c3.8-1.9,8.2-2.7,12.5-2.5c0.8,1.4,0.8,3.1,0.1,4.5c3.2,0.4,3.9-2.1,5.2-4.2c1.4-2.3,2.9-3.6,5.3-4.8c4.7-2.4,10.1-3.5,15-5.3c-0.5-1.1-1.6-3.3-2.7-4.1c-1.8-1.4-3.6-0.9-4.7-3.1c2.1-1.1,6.8-0.8,8.5-2.2c1.3-1,0.2-2.4,1-3.3c2-2,2,0.9,2.9,1.5c1.3,0.8,2.4,1.1,4.1,1.2c3.2,0.1,3.7-0.5,5.9,2c1.7,1.8,5.7,5.4,8.7,3.4c1.3-0.9,0.6-1.7,1-2.6c0.3-0.6,1.6-2.8,1.7-3.4C944.5,98.7,940.2,98.2,937.6,97.3z M591.6,201.6c0,0-3.7,2.3-2.7,3.5s1.8,7.9,0,10.9c-1.8,3-6.4,0.3-9.7-1.7c-3.3-2-3.2-2.5-1.9-7.7c1.3-5.2-0.3-3.3-1.6-5c-1.3-1.7,0,0-2-3.5c-2-3.5-3-4.8-3-4.8l-0.7-4.7c0,0,0.7-3.3,2.5-4.7c1.8-1.3,3.3-2.7,7.9-4c9.2-2.7,10.5,5.3,6.5,5.3c-4,0-4.6,3.4-4.6,3.4s0.1,10.1,6.3,7.5C593,194.2,591.6,201.6,591.6,201.6z"
		},
		{
		  parent: "Middle East",
		  path: "M581.1,256.5c-0.1,0-0.1,0-0.2,0c-0.1,0-0.2,0-0.2,0.1c0,0,0,0.1-0.1,0.1c0,0.2-0.1,0.3-0.1,0.5c0,0,0,0.1,0,0.1c0,0.2,0.1,0.3,0.2,0.5c0.1,0.1,0.1,0.4,0.3,0.4c0.2,0,0.3-0.1,0.3-0.2c0-0.1,0.1-0.1,0.1-0.2c0.1-0.4,0-0.8-0.1-1.2C581.3,256.6,581.2,256.5,581.1,256.5z"
		}
	]
};
var africa = {
	region: "Africa",
	data: [
		{
			parent: "Africa",
			path: "M534.2,238.8c-8.2,3.2-15.4-0.8-22.6-4.3c-3-1.5-5.8-3.7-9.2-1.8c-3.6,2.1-2.3,6.3-5.8,7.6c-8,3.1-20.3-4.4-20.8-12.8c-0.2-2.8,0.4-6.4-1.5-8.6c-2.1-2.3-6.1-1.9-8.3,0.3l-2.4-0.6c-2.6-6.2-27.1,1.2-31.8,4.1c-10,6.1-6.3,20.7-15.2,27.3c-14.3,10.6-17,22.4-15.4,40.6c1.5,17.5,19.1,31,36.7,30.2c7.8-0.4,29.5-10.3,30,3.7c0.1,2.2-2.4,2.9-1.4,5.7c0.4,1,2.7,0.1,3.2,1.3c1,2.1,0.8,2.9,1.2,5.3c1.1,7.4,0.2,8.8,5.5,14.1c7.8,7.7,10.2,17.6,9.2,28.8c-0.5,5.7-3.2,10.9-3.7,16.6c-0.7,9.5,3.6,17.8,6.7,26.2c1.9,5.2,5.2,12.9,5.5,18.4c0.2,3-2,5.8-1.8,8.7c0.5,6.8,7.3,8.7,13.3,8.4c14.8-0.7,22-11.5,28-23.3c2.3-4.4,5.6-8.6,7-13.4c2-6.5-1-13.2,2.1-19.6c2.3-4.7,7.9-7.7,10-12.2c2.2-4.9-0.9-10.7-1.9-15.3c-3.1-15.5,5.5-25.4,12.4-38.5c2.8-5.3,4.4-10.8,7.2-16c2.1-3.9,6.4-7.5,5.4-12.1c-5.9-1.7-9.7-1.2-13.5-5.6c-4.1-4.8-5.8-12-8.9-17.6c-5.3-9.6-16.7-22.5-15.3-34.3c0.4,0.1,0.8,0.3,1.2,0.5c-0.6-4.4-2.5-8.3-4.5-12C534.8,238.5,534.5,238.7,534.2,238.8z"
		},
		{
			parent: "Africa",
			path: "M572.5,387.3c0.8-1.7,0-6.4,2.5-6.4c2.3-0.1,3.3,4.9,3.5,6.4c0.4,3.3-0.6,5.7-1.6,8.6c-2,6-1.9,12.3-3.6,18.3c-1.3,4.9-7,13.9-11.8,7.4c-1.9-2.6-2.4-5.8-2.3-9c0.2-3.2,2.5-4.8,2.9-7.7c0.4-2.8-2.1-4.8-1.6-7.7c0.7-4.1,3.6-2.9,6.3-3.9C569.3,392.5,571.4,389.6,572.5,387.3"
		}
	]
};
var asiaPacific = {
	region: "Asia Pacific",
	data: [
		{
			parent: "Asia Pacific",
			path: "M776.7,189.3c-2-7-10-13-18-13c1-2-1-3-1-4c-8-6-18-8-27.1-6c-2,1,5,5,4,6c-17,5-37.1,2-54.1-1c-7-2-15-1-21,4c-5,3-9,7-13,11c-9,8-14,22-29.1,25.1c-2,1,0,3,1,4c2,2,5,1,7,1c0,2-1,5,0,6c4,3,9,6,13,1c-1,18,21.7,18.9,34.7,25c1,0,3,3,4,3c3.8,4,12.8,1.2,16.2,5.9c3.6,4.9,0.7,10-1.3,15c3.2,2.6,5.7,6.9,7.2,10.6c2.2,5.4,1.4,11.5,3.4,17c2.5,6.9,5.6,11.8,5.4,19.5l2,1.8c0.8,0.9,0.9,3.2,1.3,4.6c0.6,2.2,1.2,4.3,1.8,6.5c0.5,1.8,1.6,2.7,3.3,3.3c0.7,0.2,1.3,0.5,2,0.3c0.8-0.2,0.7-0.8,1.8-0.7c0.2-1-0.9-2.2-1.3-3.1c-0.6-1.2-1-2.1-1.1-3.4c-0.1-1.9,0.1-3.3-0.6-5c-0.8-1.9-2-3-3.3-4.7c-1.9-2.4-4-3.9-5.2-6.8c-1.2-3-0.4-4.8,0.6-7.7c0.4-1.3,0.7-2.5,0.6-3.9c-0.1-1.4-0.8-2.5,0.8-2.9c3-0.7,3.8,2.1,5.1,4.1c0.7,1,1.5,2.3,2.4,3.1c1,0.9,2.2,1.4,2.7,2.7c0.5,1.1,0.6,2.5,0.3,3.6c-0.3,1-1.1,3.5,1.1,2.4c1.3-0.6,0.9-1.7,1.3-2.7c0.2-0.4,0.7-0.9,0.8-1.2c0.3-1-0.2-0.4-0.4-1.2c-0.1-0.5-0.5-0.8,0.3-1c0.8-0.2,0.6,0.6,1.1,0.8c1.2,0.6,2.1,0,3-0.8c2.1-1.8,3.9-3,4.8-5.7c1.2-3.6-0.1-7.4-2.8-9.9c-3.4-3.1-8.6-5.1-7.8-10.6c0.2-1.3,0.8-2.5,1.2-3.7c0.2-0.9,0.5-2,0.9-2.8c0.9-1.6,2.9-3.3,4.6-4.1c2.1-1,4.8-1.3,4.8,1.5c0,1.1,0.1,2.8,1.7,2.2c1.3-0.4,1.1-2.2,2.1-3.1c2.4-2.1,5.8-2,7.2-5l2.8-1.3c2.1,5,8.1-4.7,9.1-6.7c1.2-2.6,1.6-5,3.4-7.3c1.9-2.4,4-4.6,5-7.6c1.9-5.8-2.6-10.4-5.2-15.3c-2-3.8-2.1-6.9,0.5-10.7c1.7-2.4,4.1-2.7,6.2-4.3c-2.3-2.2-11.7,4.4-11.4-3.4c0.1-2.8,7.3-8.9,10.1-7.4c3,1.6-0.6,4,0.1,5.8c1.4,3.6,3.4-2.2,4-2.6c1.7-1.3,3.5-0.5,4.8,1c2.3,2.6,0.1,2.9-0.3,5c3.7,0.8,8-0.2,7.8,4.9c-0.1,3.2-0.6,8.2-3.8,9.7c5-0.1,10.2-5,8.2-9.8c-1.1-2.8-5.4-5.4-6-8.2c-0.6-2.9,2.1-3.1,3.8-4.5c1.2-1,1.5-1.9,1.6-2.7C782.9,197,778.6,194.8,776.7,189.3z"
		},
		{
			parent: "Asia Pacific",
			path: "M814.4,202.2c3.3,2,3.2,3.1,1.8,7c-1.2,3.4,0.4,6.9-0.6,10.3c-0.9,3-5,5.6-7.8,6.6c-1.2,0.4-3.7,0.2-4.6,1c-1.1,1-0.1,3.4-2.9,2.8c-0.4-1-0.7-2.2-0.6-3.3c-2.4-0.9-4.3-0.4-6.5,0.4c-3,1.1-2.1,1.1-1.1,3.6c1.2,3.2-4.3,10.3-5.7,4.9c-0.3-1,0.2-1.8,0.1-2.7c-0.1-1-1.2-1.9-0.8-3.2c0.5-1.4,3.3-2.1,4.4-3.2c2.6-2.6,5-5.2,9.2-5c0.8,1.6,2.9,2,3.9,0.4c1.1-1.6-0.6-3.7,1.3-5.1c0.3,0.6,0.7,0.5,0.7,1.4c2.5-0.8,5.8-4.9,6.5-7.5c0.5-2-1.3-9.4,2.4-8.5L814.4,202.2L814.4,202.2z"
		},
		{
			parent: "Asia Pacific",
			path: "M795,232.5c0,0,0,0.1,0,0.1c0-0.9-0.5-1.3,0.2-2c0.5-0.5,1.2-0.7,1.8-1c0.4-0.2,0.9-0.4,1.1-0.8c0.2-0.3,0.4-1,0.4-1.3c-0.1-0.5-0.5-0.7-0.9-0.8c-0.7-0.1-1.2,0-1.8,0.3c-0.8,0.5-1.5,0.5-2.2,1.2c-0.3,0.3-0.6,0.6-0.7,1c-0.1,0.5,0.1,1.3,0.2,1.8c0.1,0.6,0.4,1.3,0.6,1.8c0.3,0.6,0.7,0.4,1.2,0.2L795,232.5z"
		},
		{
			parent: "Asia Pacific",
			path: "M696.4,322.2c3,0,3.8,0.3,6.1,2.5c1.7,1.6,3.4,3.2,5.1,4.8c2.8,2.6,6.5,5.7,8.1,9.1c0.9,1.9,1,2.5,2.6,4c1.6,1.5,2.9,2.7,3.5,4.9c0.5,1.9,0.5,4.1,0.8,6.1c0.3,2,1.7,4.3-1.2,4.9c-5.3,1-5.9-6.3-7.4-9.1c-0.9-1.7-2.6-2.6-3.8-4.2c-1.1-1.4-1.6-3.6-2.3-5.2c-0.7-1.6-1.1-3.1-2.3-4.4c-1.2-1.2-2.3-2-3.4-3.5c-1.3-1.9-2.5-3.7-4.1-5.2c-1.2-1.1-2.7-1.7-2.4-3.7L696.4,322.2z"
		},
		{
			parent: "Asia Pacific",
			path: "M737.9,351.2c0.3,0.2-1.3-0.8-1.1-0.5c-2.4-1.5-4.4-6.5-4.6-9.1c-0.1-1.1-0.6-5.3,0.3-6c1.6-1.4,3.8,1.3,5.1-0.7c0.5-0.8-0.2-1.7,0.7-2.6c0.7-0.7,2-0.5,2.8-0.9c2.1-0.9,2.8-2.5,4.4-4c1.3-1.2,3.7-1.1,4.8-2.7c1.2-1.9-0.5-3.8,1.6-5.1c2.6-1.7,4.4,0.1,5,2.5c0.2,0.8,0.7,1.6,0.4,2.6c-0.5,1.8-1.6,0.8-2.6,2.2c-0.7,0.9-0.5,4.5-0.2,5.8c0.4,2,2.6,2.4,3,4c0.6,2.2-3,2-3.7,3.7c-0.6,1.4,0.1,4.1,0,5.6c-0.1,2.4-0.8,3.9-2.8,5.4c-2.8,2.2-8.3,3.4-11,0.2L737.9,351.2z"
		},
		{
			parent: "Asia Pacific",
			path: "M722.1,362c0.5,0.2,0.9-0.3,1.2-0.6c0.5-0.6,0.4-1,0.6-1.6c0.4-0.9,2.1-1.1,3-1.1c0.8,0,1.6,0.1,2.4,0.5c0.3,0.2,0.5,0.4,0.8,0.6c0.4,0.3,0.6,0.7,1,1c0.4,0.3,1.4,0.3,1.9,0.5c0.7,0.2,1.3,0.2,2.1,0.2c1.1,0,1.9-0.7,3-0.9c0.9-0.2,2.1-0.2,2.9,0.4c0.9,0.6,0.6,1.8,1.2,2.6c0.7,0.9,1.7,1.1,2.8,1.3c1.1,0.2,1.2,0.4,1.5,1.4c0.2,0.7,0.5,1.3,0.9,1.8c0.1,0.1,0.5,0.7,0.5,0.9c-0.1,0.6-1,0.3-1.5,0.2c-1.5-0.5-3-1.3-4.5-1.7c-1.5-0.3-3.1-0.3-4.6-0.7c-2.9-0.9-5.4-1.8-8.4-2c-1.8-0.2-3.6-0.1-5.3-0.3c-1-0.1-2.5-0.6-2.3-1.9L722.1,362z"
		},
		{
			parent: "Asia Pacific",
			path: "M750.2,368.2c-0.4,0,1.5-0.2,2-0.1c-0.7,2.7,0.8,1.5,2.5,0.6c0.9-0.4,4.9-0.2,4.1,1.7c-0.3,0.7-4.5,1.1-5.3,1.1c-1.1-0.1-3.4-1.5-3.5-2.6c0.1,0,0.3,0,0.4,0"
		},
		{
			parent: "Asia Pacific",
			path: "M760.6,375.6c-1.3,0.5-4.1-1.3-2.4-2.5C759.6,372,762.9,374.6,760.6,375.6"
		},
		{
			parent: "Asia Pacific",
			path: "M768.7,369.1c-0.8-0.8-2.1-0.1-3.1,0c-1,0.2-1.6,0-2.6-0.2c-1.6-0.3-5.3,0.3-1.9,1.3C763.1,370.9,767.6,371.5,768.7,369.1"
		},
		{
			parent: "Asia Pacific",
			path: "M769.4,373.4c0.8-1.1,2.2-1.4,3.1-2.4c1-1.1,1-1.5,2.7-1.9c1.3-0.3,2.8-0.8,4.1-0.9c0.5,1.9-2.3,3.1-3.6,3.8c-1.8,1.1-3,2-4.5,3.6c-1,1.1-2.6,2.8-4.3,2.8c-1.8-0.1-1.4-1.5-0.2-2.2c0.5-0.3,1.1-0.1,1.7-0.6C768.9,375.1,768.9,374,769.4,373.4"
		},
		{
			parent: "Asia Pacific",
			path: "M767,351.5c-0.5-0.7-0.8-1.4-1.6-2c-0.5-0.4-1.7-0.5-2.1-0.9c-1.1-1.4,1.5-1.3,2.6-1.5c0.5-0.1,2.3-0.4,2.5-1.1c0.3-1-0.7-0.6-1.4-0.8c-1.4-0.3-4,0.4-5.2-0.5c-2-1.4-0.3-3.2,1.3-3.7c1.9-0.7,4-0.5,6-0.5c1.8,0,6.2-0.8,6.2-3.4c0-2.2-3.9-1.6-5.1-0.5c-1.8,1.7-3.2,2.8-6.1,2.9c-1.5,0.1-3-1.2-4.3-0.1c-0.7,0.5-1.4,2.5-1.4,3.4c0,2,0.6,2.5-0.5,4.6c-0.5,0.9-2,2.8-1.5,4c0.2,0.5,1.2,0.5,1.5,1.1c0.3,0.5,0,1.5-0.2,2c-0.2,1-1.2,3.1-0.6,4.1c1.4,2.2,4.2-0.8,4.3-2.3c0.1-1.2-0.5-2.3-0.5-3.4c0-1,1.1-2.7,2.4-1.6c1.6,1.2-0.7,4.8,0.9,6.3c1.2,1.1,3.8,0.2,4.5-1.2C769.9,354.6,768,352.9,767,351.5"
		},
		{
			parent: "Asia Pacific",
			path: "M795.3,343.1c2,1.1,0.4,3.6,1.1,5.4c0.6,1.6,2.8,3.5,4.6,3.4c1.9-0.2,2-2.6,3.3-3.7c2.2-1.8,5.8,0.4,7.8,1.5c1.5,0.8,2.8,1.9,4.3,2.6c1.7,0.7,3.6,1.1,5.4,1.7c1.5,0.5,2.9,1,4.3,1.7c1.9,1.1,1.5,1.9,2.2,3.6c0.8,1.9,4.2,2.7,3.7,4.9c-0.3,1.3-1.3,1.9-0.2,3.2c1,1.1,2.3,2.4,3.4,3.4c1.8,1.8,2.1,3.1,2.7,5.3c-2.4,0.3-6.8-2.4-8.7-3.8c-1.3-1-1.7-2.4-3.2-3.4c-1-0.7-3.6-1.8-4.8-1.1c-1.9,1.2,0.4,2.8-2.6,3c-2.5,0.1-4.1-0.4-5.8-1.8c-1-0.8-1.9-1.1-3.4-0.9c-0.6,0.1-3.8,1.5-3.1-0.3c0.4-1.1,2.5-0.8,2.9-2.3c0.3-1.1-0.8-6.3-1.8-7.2c-0.6-0.6-2.2-0.6-3.1-1.1c-1.2-0.6-2.5-1-3.6-1.6c-2.2-1.2-4.4-2.8-6.7-3.9c-0.7-0.3-2.5-0.7-2.3-1.8c0.2-1,2.1-0.8,2.9-0.8c0.3-1.3-0.7-1.4-1.7-1.5c-1.2-0.1-1.7-0.1-2.7-0.6c-1.6-0.7-3.5-2.1-1-3.2C790.5,343.1,794.1,342.4,795.3,343.1"
		},
		{
			parent: "Asia Pacific",
			path: "M762.2,294.8c2,1,3.7,0.1,5.5,1.6c1.5,1.3,1.8,3.8,3.7,4.5c1.9-4.8-1.8-7-6-6.8c-0.4-3.4,6.8-15.2-2.7-12.2C762.3,285.8,756.1,291.8,762.2,294.8"
		},
		{
			parent: "Asia Pacific",
			path: "M777.8,310.6c1.2,2.3-0.5,2.6-1.4,4.1c-1.1,1.8-0.9,2.5-1.4,4.5c-1.4,5.2-6.7,1.5-4.5-1.2c-2.2-2.1-4.9,1.7-6.1-0.8c-0.8-1.7,0.4-3.3,2-4c2.3-1,2.9,0.8,4.8,0.8C774.2,314.1,775,310.8,777.8,310.6"
		},
		{
			parent: "Asia Pacific",
			path: "M752.9,313.1c0.1-3.8,4.6-6.5,6-9.8c1.4,1.5-0.1,4-1.1,5.5C757.4,309.4,752.9,313.2,752.9,313.1"
		},
		{
			parent: "Asia Pacific",
			path: "M823.4,190.8c-1.9-0.8-3.4-1.8-4.1-3.6c-0.6,0.5-1.1,1-1.5,1.6c-1.7,2.8-0.3,4.9-3.6,6.4c-1.7,0.7-4.8,1-2.8,3.6c1.1,1.4,3.5,1.2,5,0.7c0-1.1-0.8-1.8-1.5-2.6c2-2.2,4.4,2.6,6.7,1.3c1.1-0.6,0.6-1.8,1.9-2.5c0.9-0.5,2.8-0.2,3.9-0.5C827.7,192.2,825.6,191.7,823.4,190.8z"
		},
		{
			parent: "Asia Pacific",
			path: "M763.5,258.3c-1.7,1.2-2.2,5.1-2.3,7C760.5,277.4,771.7,252.7,763.5,258.3"
		},
		{
			parent: "Asia Pacific",
			path: "M823,184c0.7-2.4-1.8-4.9-1.9-7.3c-0.1-2.8,1.2-5,4.1-5c0.2-1.8-1.3-2.1-2-3.5c-0.6-1.3-0.7-3.5-0.7-4.9c0.2-3.6,1.1-6.3,0.4-9.9c-0.2-0.2-0.9-0.4-1.1-0.5c0,0.4-0.1,0.3-0.3,0.4c-0.6,2.3-2.4,4.6-2.9,7.1c-0.6,2.7-0.6,5.9-0.4,8.8c0.2,3.5,0.9,6.9,1.1,10.4c0.1,2.2-0.7,4.4-0.4,6.5c0.1,0.6,0.2,1.2,0.5,1.7C820.8,186.6,822.5,185.6,823,184z"
		},
		{
			parent: "Asia Pacific",
			path: "M823.4,191.3c-1.8-0.7-3.2-1.7-3.9-3.2c-0.2,0-0.3,0-0.5-0.1c-0.5,0.4-0.9,0.8-1.1,1.3c-1.7,2.8-0.3,4.9-3.6,6.4c-1.7,0.7-4.8,1-2.8,3.6c1.1,1.4,3.5,1.2,5,0.7c0-1.1-0.8-1.8-1.5-2.6c2-2.2,4.4,2.6,6.7,1.3c1.1-0.6,0.6-1.8,1.9-2.5c0.9-0.5,2.8-0.2,3.9-0.5C827.7,192.7,825.6,192.2,823.4,191.3z"
		}
	]
};
var australia = {
	region: "Australia",
	data: [
		{
			parent: "Australia",
			path: "M821.2,380.9c0.5,1.1,0.4,2.5,0.8,3.7c0.2,0.6,0.5,3,0.9,3.3c1,0.9,1-1.1,2.3-0.7c0.1,2.6,1.7,4.5,1.9,7.2c0.1,1.7,0.3,2.9,0.7,4.4c0.4,1.3,0.2,2.6,1,3.7c1.6,2.3,5.6,2.5,6.8,5c1.6,3.3-1.1,6.4,2.9,8.2c1.4,0.6,2.4,1.1,2.6,2.7c0.1,0.5-0.2,1.3,0,1.8c0.3,0.8,1.3,1.1,1.8,1.7c0.9,1.1,1.2,2.7,1.8,4c0.8,1.6,1.1,3.4,1.1,5.2c0,1.7,0.7,2.6,1.1,4.1c0.5,2.2,0.7,5.5,0.2,7.8c-0.5,2.3-1.4,4.2-3,6c-1.4,1.6-2.7,2.6-3.6,4.6c-1,2.2-1.7,4.6-2.1,6.9c-0.3,2.3,0.1,5.6-1.5,7.3c-0.8,0.9-2,1.8-2.9,2.5c-1.1,0.9-3.2,2.7-4.6,2.9c-2,0.4-4.2-2.1-4.6-3.9c-0.8,0.1-0.8,1.2-1.3,1.8c-1,1.2-2.9,1.4-4.5,1.4c-3.9-0.2-5.8-3.7-8.2-6.3c-1.9-2.1-2.8-3.7-3.3-6.4c-0.2-1.2-0.8-4.1-1.8-4.8c-0.4,0.7-0.7,1.6-1.7,1.8c-0.2-1.5,1.3-2.6,1.5-4c0.2-0.8,0.5-1.2-0.5-1.4c-1.4-0.2-1.8,2-2.5,2.8c-3.5,4.5-7.2-4.6-10-6.4c-2.7-1.8-6.4-3.2-9.6-2.1c-1.8,0.6-3.5,1.6-5.2,2.4c-1.5,0.6-3.4,1.1-4.7,2.2c-1.4,1.1-2,3.1-3.5,4.1c-1.9,1.3-3.4,0.3-5.3-0.1c-2.1-0.4-5.2,0.2-7,1.2c-1.5,0.8-3.2,3.2-5.2,2.9c-2.3-0.4-3-3.4-2.7-5.4c0.2-1.6,0.6-2.7,0.1-4.3c-0.4-1.4-1.1-2.8-1.5-4.2c-1.4-5-1.8-10.2-3.3-15.1c-0.6-2.1-1.4-4.4-1.5-6.6c-0.2-3.2,1.5-4.9,3.2-7.5c3.6-5.6,10.3-7.1,16.1-9.7c2.3-1,3.8-2.3,5.6-4.1c2.8-3,6.4-5.8,8.2-9.6c1.1-2.3,1.2-4.2,4.2-4.7c1.8-0.3,2.9,0.2,3.2,2c0.1,0.4-0.1,1.7,0.1,2c0.9,1.1,2.4-0.1,2.7-1.2c0.5-1.7,0.5-3.2,1.4-4.9c2.1-3.6,8.1-4.9,11.7-3.4c1.3,0.6,3.3,1.2,3.6,2.8c0.3,2-1.7,2.3-2.5,3.7c-0.8,1.4-0.3,3.9,1.1,4.9c1.3,0.8,2.7,0.7,4,1.5c1.4,0.8,2.8,1.7,3.8,2.9c1,1.2,1,2.5,2.9,2c2-0.5,2.5-2.1,3.2-3.8c1.2-2.7,2-5.2,2.1-8.2c0-0.9,0.1-1.8-0.2-2.6c-0.4-1.4-1.6-2.2-2-3.7C814.8,376.7,820.1,378.5,821.2,380.9"
		},
		{
			parent: "Australia",
			path: "M824.2,478.5c-0.2,0-0.4,0-0.6,0c-0.3,1.4,2.4,1.7,3.3,1.8c0.8,0.1,2.2,0.2,2.9,0.1c0.9-0.1,1.6-0.9,2.3-1c1.8-0.2,1.9,2.7,1.8,4.2c-0.1,1.9-1.5,4.1-2.9,5.4c-1.3,1.2-3.5,1.9-4.6,0c-0.8-1.4-0.6-3-1.6-4.4c-1-1.4-6.3-5.7-2.8-6.8c0.6-0.2,1.6,0,2.2,0c0,0.1,0.2,0.7,0.2,0.4L824.2,478.5z"
		},
		{
			parent: "Australia",
			path: "M898,456.9c0,1.7,1.6,3.3,2.3,4.7c0.5,1.2,1.3,2.5,1.7,3.8c0.4,1.3,0.8,3,0.4,4.3c-0.2,0.6-0.5,1.3-0.9,1.8c-0.3,0.4-1.4,1-1.6,1.4c-1,1.9,3.5,3.8,4,5.8c0.3,1.3-1,2.6,0,3.6c0.8,0.7,3.4,0.1,4-0.6c0.6-0.8,0.3-2.6,0.7-3.5c0.4-1,1.2-2,1.8-2.9c1.2-1.7,2.8-3.9,2.8-6c-2.2-0.8-4.6,1.8-6.2,0.1c-0.7-0.7-0.4-1.7-1-2.4c-0.9-1.1-1.4-0.6-1.8-2.2c-0.8-3.7-1.9-7.2-5.8-8.3L898,456.9z"
		},
		{
			parent: "Australia",
			path: "M899.2,482.2c1.6,0.2,2.7-2,2.4,0.9c-0.2,1.6,0.4,3.3-0.9,4.6c-1.1,1.1-2.9,1.9-2.7,3.8c0.4-0.1,0.8,0,1.2-0.1c0.6,1.9-1.7,1.1-2.6,1.2c-1.5,0.1-2.3,0.9-3,2.1c-1,1.9-2.4,7.7-4.8,7.1c-1.3-0.3-1.8-1-3.4-1c-1.1,0.1-2.7,0.8-3.7,0.4c-4-1.8,3.3-7.1,4.8-8.1c2.6-1.9,6.4-3.6,7.2-6.9c0.8-3.2,1.1-7.4,5-8C899.1,479.3,896.9,481.9,899.2,482.2"
		},
		{
			parent: "Australia",
			path: "M885.9,503.4c1.6,0.3-0.8,2.9-1.7,1.2c-0.4-0.8,0.3-0.9,0.4-1.6c0.1-0.6-0.7-1.1,0.1-1.4C885.7,501.3,885.9,502.8,885.9,503.4"
		}
	]
};
/* ---------------------------------------- /includes/jsbin/polyfills.js ---------------------------------------- */
// Production steps of ECMA-262, Edition 5, 15.4.4.19
// Reference: http://es5.github.io/#x15.4.4.19
if (!Array.prototype.map) {
  Array.prototype.map = function(callback, thisArg) {

    var T, A, k;

    if (this === null) {
      throw new TypeError(' this is null or not defined');
    }

    // 1. Let O be the result of calling ToObject passing the |this|
    //    value as the argument.
    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get internal
    //    method of O with the argument "length".
    // 3. Let len be ToUint32(lenValue).
    var len = O.length >>> 0;

    // 4. If IsCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if (typeof callback !== 'function') {
      throw new TypeError(callback + ' is not a function');
    }

    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
    if (arguments.length > 1) {
      T = thisArg;
    }

    // 6. Let A be a new array created as if by the expression new Array(len)
    //    where Array is the standard built-in constructor with that name and
    //    len is the value of len.
    A = new Array(len);

    // 7. Let k be 0
    k = 0;

    // 8. Repeat, while k < len
    while (k < len) {

      var kValue, mappedValue;

      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty internal
      //    method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      if (k in O) {

        // i. Let kValue be the result of calling the Get internal
        //    method of O with argument Pk.
        kValue = O[k];

        // ii. Let mappedValue be the result of calling the Call internal
        //     method of callback with T as the this value and argument
        //     list containing kValue, k, and O.
        mappedValue = callback.call(T, kValue, k, O);

        // iii. Call the DefineOwnProperty internal method of A with arguments
        // Pk, Property Descriptor
        // { Value: mappedValue,
        //   Writable: true,
        //   Enumerable: true,
        //   Configurable: true },
        // and false.

        // In browsers that support Object.defineProperty, use the following:
        // Object.defineProperty(A, k, {
        //   value: mappedValue,
        //   writable: true,
        //   enumerable: true,
        //   configurable: true
        // });

        // For best browser support, use the following:
        A[k] = mappedValue;
      }
      // d. Increase k by 1.
      k++;
    }

    // 9. return A
    return A;
  };
}

// Production steps of ECMA-262, Edition 5, 15.4.4.14
// Reference: http://es5.github.io/#x15.4.4.14
if (!Array.prototype.indexOf) {
  Array.prototype.indexOf = function(searchElement, fromIndex) {

    var k;

    // 1. Let O be the result of calling ToObject passing
    //    the this value as the argument.
    if (this === null) {
      throw new TypeError('"this" is null or not defined');
    }

    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get
    //    internal method of O with the argument "length".
    // 3. Let len be ToUint32(lenValue).
    var len = O.length >>> 0;

    // 4. If len is 0, return -1.
    if (len === 0) {
      return -1;
    }

    // 5. If argument fromIndex was passed let n be
    //    ToInteger(fromIndex); else let n be 0.
    var n = +fromIndex || 0;

    if (Math.abs(n) === Infinity) {
      n = 0;
    }

    // 6. If n >= len, return -1.
    if (n >= len) {
      return -1;
    }

    // 7. If n >= 0, then Let k be n.
    // 8. Else, n<0, Let k be len - abs(n).
    //    If k is less than 0, then let k be 0.
    k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

    // 9. Repeat, while k < len
    while (k < len) {
      var kValue;
      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the
      //    HasProperty internal method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      //    i.  Let elementK be the result of calling the Get
      //        internal method of O with the argument ToString(k).
      //   ii.  Let same be the result of applying the
      //        Strict Equality Comparison Algorithm to
      //        searchElement and elementK.
      //  iii.  If same is true, return k.
      if (k in O && O[k] === searchElement) {
        return k;
      }
      k++;
    }
    return -1;
  };
}

if (!Array.isArray) {
  Array.isArray = function(arg) {
    return Object.prototype.toString.call(arg) === '[object Array]';
  };
}

if (!String.prototype.trim) {
  String.prototype.trim = function () {
    // Make sure we trim BOM and NBSP
    var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
    return this.replace(rtrim, '');
  };
}

if (!String.prototype.decamelize) {
  String.prototype.decamelize = function() {
    return this.replace(/([a-z\d])([A-Z])/g, '$1-$2').toLowerCase();
  };
}

if (!String.prototype.dasherize) {
  String.prototype.dasherize = function() {
    return this
      .decamelize()
      .replace(/[\W_]/g, '-')
      .replace(/-{2,}/g, '-')
      .replace(/^-+|-+$/g, '');
  };
}

/* ---------------------------------------- /includes/jsbin/templates.js ---------------------------------------- */
this["Digi"] = this["Digi"] || {};
this["Digi"]["Templates"] = this["Digi"]["Templates"] || {};

this["Digi"]["Templates"]["triclub_results"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n<!-- Start: Single Result Set -->\n<div class=\"resultSet\">\n	<!-- Start: Title -->\n	<h3>\n		<span class=\"event\">";
  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + ":</span>\n		<span class=\"date\" data-racedate=\"";
  if (helper = helpers.racedate) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.racedate); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "\">";
  if (helper = helpers.racedate) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.racedate); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "</span>\n		<span class=\"separator\">|</span>\n		<span class=\"points\">";
  if (helper = helpers.points) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.points); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + " POINTS</span>\n	</h3>\n	<!-- End: Title -->\n\n	<!-- Start: Results Table -->\n	<table>\n		<thead>\n			<tr>\n				<th class=\"names\">Names</th>\n				<th class=\"points\">Points</th>\n			</tr>\n		</thead>\n		<tbody>\n			";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.athletes), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		</tbody>\n	</table>\n	<!-- End: Results Table -->\n</div>\n<!-- End: Single Result Set -->\n";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n			<tr>\n				<td class=\"names\">";
  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "</td>\n				<td class=\"points\">";
  if (helper = helpers.points) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.points); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + " Points</td>\n			</tr>\n			";
  return buffer;
  }

  stack1 = helpers.each.call(depth0, (depth0 && depth0.events), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { return stack1; }
  else { return ''; }
  });
/* ---------------------------------------- /includes/jsbin/ironman.js ---------------------------------------- */
/*global Digi, _gaq, window, jCore*/
var eventPublisher = eventPublisher || EventPublisher.getInstance();
var hasRun = false;

function initRacesResultsTable() {
  $(document).on('click', '.results-athletes-table thead a', function (e) {
    var $this = $(this),
      href = $this.attr('href');
    e.preventDefault();
    Digi.ajax.getData(href, 'POST');
  });
}

function initNewsFeatureRotator() {
  $('.newsFeatureRotator').each(function () {
    var $scope, $imgs, $imgsList, $links, $linksList, $nextBtn, $prevBtn, $viewport, num, pages, page, activeIndex, timer, isAnim;
    $scope = $(this);
    $imgsList = $('.featureImages', $scope);
    $imgs = $('li', $imgsList);
    $linksList = $('.featureLinks', $scope);
    $links = $('li', $linksList);
    $prevBtn = $('.prevBtn', $scope);
    $nextBtn = $('.nextBtn', $scope);
    $viewport = $('.featureRight .viewport', $scope);
    num = $imgs.length;
    pages = Math.ceil(num / 5);
    page = 1;
    activeIndex = 0;
    isAnim = false;

    $('li:nth-child(5n)', $linksList).addClass('lastOfPage');
    $('li:nth-child(5n + 1)', $linksList).addClass('firstOfPage');
    $('li:last-child', $linksList).addClass('lastOfPage last');

    $('.firstOfPage').each(function (i) {
      $(this).addClass('page-' + (i + 1));
      if (num - (i * 5) <= 5) {
        $(this).addClass('lastPage');
      }
    });

    function checkPaging(i) {
      var $targetLink = $links.eq(i);
      var $activeLink = $('li.active', $linksList);
      var listTop = $linksList.position().top;
      var linkTop = $targetLink.position().top;

      var diff = $activeLink.height() - $targetLink.height();

      if ($targetLink.hasClass('firstOfPage')) {
        $linksList.animate({
          top: -i * $targetLink.height()
        }, 400);
      }
    }

    function gotoIndex(i) {
      isAnim = true;
      clearTimeout(timer);
      if (i > num - 1) {
        i = 0;
      }
      var $targetLink = $links.eq(i);
      var $activeLink = $('li.active', $linksList);

      checkPaging(i);

      $activeLink.removeClass('active');
      $targetLink.addClass('active');

      $imgsList.animate({
        top: -(i * 370)
      }, 400, function () {
        activeIndex = i;

        if (activeIndex < 5) {
          $prevBtn.addClass('disabled');
        } else {
          $prevBtn.removeClass('disabled');
        }

        if (activeIndex >= $('li.lastPage').index()) {
          $nextBtn.addClass('disabled');
        } else {
          $nextBtn.removeClass('disabled');
        }
        isAnim = false;
      });
    }

    if (num > 5) {
      $nextBtn.bind('click', function (e) {
        e.preventDefault();
        if (isAnim) {
          return;
        }
        if (activeIndex < $('li.lastPage').index()) {
          page++;
          gotoIndex($('li.page-' + page, $linksList).index());
        }
      });

      $prevBtn.bind('click', function (e) {
        e.preventDefault();
        if (isAnim) {
          return;
        }
        if (activeIndex >= 5) {
          page--;
          gotoIndex($('li.page-' + page, $linksList).index());
        }
      });
    } else {
      $prevBtn.add($nextBtn).hide();
    }

    $prevBtn.addClass('disabled');
    $nextBtn.removeClass('disabled');

    $links.bind('click', function (e) {
      var $target = $(e.target);
      if (!$target.is('a') && !$target.parent().is('a')) {
        e.preventDefault();
        if (isAnim) {
          return;
        }
        gotoIndex($(this).index());
      }
    });

    function tick() {
      clearTimeout(timer);
      timer = setTimeout(function () {
        gotoIndex(activeIndex + 1);
        tick();
      }, 4000);
    }

    tick();
  });
}

function initNewsSecondaryRotator() {
  $('.newsFeatureRotatorSecondary').each(function () {
    var $scope, $prevBtn, $nextBtn, $viewport, $slides, num, slideW, slideM;

    $scope = $(this);
    $prevBtn = $('.prevBtn', $scope);
    $nextBtn = $('.nextBtn', $scope);
    $viewport = $('.viewport', $scope);
    $slides = $('article', $scope);

    num = $slides.length;
    slideW = $slides.eq(0).width();
    slideM = parseInt($slides.eq(0).css('margin-right'));

    $viewport.width(num * (slideW + slideM));

    function prevButton() {
      var $active = $slides.eq(num - 1);
      $viewport.css('left', -(slideW + slideM));
      $active.clone().prependTo($viewport);
      $active.remove();
      $slides = $('article', $scope);
      $viewport.animate({
        left: '+=' + (slideW + slideM)
      }, 400);
    }

    function nextButton() {
      $viewport.animate({
        left: '-=' + (slideW + slideM)
      }, 400, function () {
        var $active = $slides.eq(0);
        $active.clone().appendTo($viewport);
        $active.remove();
        $viewport.css('left', 0);
        $slides = $('article', $scope);
      });
    }

    $nextBtn.bind('click', function (e) {
      e.preventDefault();
      nextButton();
    });

    $prevBtn.bind('click', function (e) {
      e.preventDefault();
      if ($viewport.is(':animated')) {
        return;
      }
      prevButton();
    });

  });
}

function initMoreRacesPopup() {
  $('.viewMorePopup').each(function () {
    var $scope = $(this);
    var $link = $('.viewMoreLink', $scope);

    $link.bind('click', function (e) {
      e.preventDefault();
      if ($scope.hasClass('open')) {
        $scope.removeClass('open');
        $(this).html($link.data('closed-text') + '<span>&#xF500;</span>');
      } else {
        $scope.addClass('open');
        $(this).html($link.data('open-text') + '<span>&#xF501;</span>');
      }
    });
  });
}

function initGenericSelects() {
  function cancelDrop(e) {
    var $target = $(e.target);

    if (!$target.parents('.genericSelect').length) {
      $('.genericSelect').removeClass('open');
      $('#wrapper').unbind('click');
      e.preventDefault();
    }
  }

  $('.genericSelect .selectedOption').bind('click', function () {
    var $that = $(this).parents('.genericSelect');

    if (!$that.hasClass('open')) {
      $that.addClass('open');
    } else {
      $that.removeClass('open');
    }

    $('#wrapper').bind('click', cancelDrop);
    return false;
  });
}

function scaleEventCardText() {
  var $scope = $('#filterBody');
  var $articles = $('article', $scope);
  var attempts = 0;

  function check(obj, par) {
    if (obj.height() > par.height()) {
      var $h2 = obj.find('h2');
      $h2.css('font-size', '-=1');
      if (attempts < 6) {
        attempts++;
        check(obj, par);
      } else {
        attempts = 0;
        return;
      }
    } else {
      attempts = 0;
      return;
    }
  }

  $articles.each(function () {
    var $that = $(this);
    var $head = $that.find('header');

    check($head, $that);
  });
}

/*
  Method to enable event list filtering.
*/
function initEventFilters() {
  var $filters = $('.eventFilter');
  var $filterTop = $('.filterTop', $filters);
  var $filterBottom = $('.filterBottom', $filters);
  var $resetBtn = $('.clearBtn', $filterBottom);
  var $distToggles = $('.toggleBtn', $filterTop);
  var $list = $('#filterBody');
  var $searchForm = $('#eventSearchForm');
  var $searchBox = $('input', $searchForm);
  var $sortSelect = $('.sortSelect', $filterBottom);

  var searchText = $searchBox.val();
  var searchQuery = '';
  var totalEntries = $('article', $list).length;
  var filterDelay;

  // analytics data
  var tags_selection = '';
  var isNewSet = false;
  var changeArr = [];

  $('#resultsCount').html($list.data('total-events'));

  $('.popupToggleBtn').bind('click', function (e) {
    e.preventDefault();
    var $target = $(this).parents('.filterPopup');

    if ($target.hasClass('open')) {
      $target.removeClass('open');
      $(this).find('.arrow').html('&#xF500;');
    } else {
      $target.addClass('open');
      $(this).find('.arrow').html('&#xF501;');
    }
  });

  $searchBox.bind('focus', function () {
    // hide default search label
    if ($searchBox.val() === searchText) {
      $searchBox.val('');
    }
  });

  $searchBox.bind('blur', function () {
    // show default search label
    if ($searchBox.val() === '') {
      $searchBox.val(searchText);
    }
  });

  function dataReadyHandler(e) {
    // console.log('data ready...');
    totalEntries = e.total;
    eventPublisher.unsubscribe(Digi.ajax, 'dataReady', dataReadyHandler);
  }

  function updateHandler() {
    eventPublisher.publish(Digi.ajax, 'pinsUpdated');
    // if (totalEntries === $('article', $list).length) {

    // } else {

    // }

    eventPublisher.unsubscribe(Digi.ajax, 'contentUpdated', updateHandler);

    if ($('.rail3 .is-sticky').length) {
      $('html,body').scrollTop(500);
    }

    $('.eventList .moduleContentInner').removeClass('loading');
    $list.show();
    $('article', $list).animate({
      opacity: 1
    }, 500);

    setTimeout(function () {
      scaleEventCardText();
    }, 500);

    if (isNewSet) {
      var i;
      // analytics stuff
      for (i = 0; i < changeArr.length; i++) {
        var el;
        switch (changeArr[i]) {
        case 'sortSelect':
          el = $('#sortSelect').get(0);
          _gaq.push(['_trackEvent', 'Event Filter', 'Sort', el.options[el.selectedIndex].text]);
          // console.log(['_trackEvent', 'Event Filter', 'Sort', el.options[el.selectedIndex].text]);
          break;
        case 'areaSelect':
          el = $('#areaSelect').get(0);
          _gaq.push(['_trackEvent', 'Event Filter', 'Region', el.options[el.selectedIndex].text]);
          // console.log(['_trackEvent', 'Event Filter', 'Region', el.options[el.selectedIndex].text]);
          break;
        case 'distanceSelect':
          el = $('#distanceSelect').get(0);
          _gaq.push(['_trackEvent', 'Event Filter', 'Distance', el.options[el.selectedIndex].text]);
          // console.log(['_trackEvent', 'Event Filter', 'Distance', el.options[el.selectedIndex].text]);
          break;
        case 'statusSelect':
          el = $('#statusSelect').get(0);
          _gaq.push(['_trackEvent', 'Event Filter', 'Status', el.options[el.selectedIndex].text]);
          // console.log(['_trackEvent', 'Event Filter', 'Status', el.options[el.selectedIndex].text]);
          break;
        case 'tags':
          _gaq.push(['_trackEvent', 'Event Filter', 'Tag toggle', tags_selection]);
          // console.log(['_trackEvent', 'Event Filter', 'Tag toggle', tags_selection]);
          break;
        }
      }
      // reset data
      tags_selection = '';
      changeArr = [];
      isNewSet = false;
    }
  }

  // method to filter results based on passed string
  function getFilterResults(filters) {
    // html updating is handled in ajax_class.js, so listen for custom events
    eventPublisher.subscribe(Digi.ajax, 'dataReady', dataReadyHandler);
    eventPublisher.subscribe(Digi.ajax, 'contentUpdated', updateHandler);
    // request data from ajax class
    Digi.ajax.getData('/handlers/searchraces.aspx?' + filters, 'GET');
    // show loading gif
    $('.eventList .moduleContentInner').addClass('loading');
  }

  // utility method to write url string
  function buildFilterStr() {
    var d = '',
      l = '',
      rs = '',
      s = '',
      t = '',
      q = '',
      m = '';

    // distance options
    $('.toggleBtn.active').each(function () {
      d += $(this).data('guid') + '|';
    });
    // map region option
    l = $('.mapRegion.active').data('guid');
    // race status options
    $('#statusSelect span.active').each(function () {
      rs += $(this).data('guid') + '|';
    });
    // sort option
    s = $('.sortSelect .options .active').data('value');

    $('.popupOptions .filtersList li span.active').each(function () {
      t += $(this).data('guid') + '|';
    });

    $('.popupDate .dateList li span.active').each(function () {
      m += $(this).data('value') + '|';
    });

    // if value isn't the default text or blank
    if (searchQuery !== searchText && searchQuery !== '') {
      q = '&q=' + searchQuery;
    } else {
      q = '';
    }

    // 'n/a' is used on the backend as the first option's value
    // select2.js doesn't like this value being left blank.
    // if first option selected, don't send query string
    s = (s === 'n/a') ? '' : 's=' + s;
    d = (d === 'n/a') ? '' : '&d=' + d;
    l = (l === 'n/a') ? '' : '&l=' + l;
    rs = (rs === 'n/a') ? '' : '&rs=' + rs;
    t = (s === 'n/a') ? '' : '&t=' + t;
    m = (s === 'n/a') ? '' : '&m=' + m;

    getFilterResults(s + d + rs + t + l + m + q);
  }

  // method to call before each filter query
  function enableFiltering() {
    eventPublisher.publish(Digi.ajax, 'pinsUpdating');
    $('#eventMap').addClass('noFeatures');
    $('.featureCard').removeClass('show').hide();
    buildFilterStr();
  }

  // bind event handlers
  $distToggles.bind('click', function (e) {
    e.preventDefault();
    var $target = $(this);
    var guid = $target.data('guid');
    if ($target.hasClass('active')) {
      $target.removeClass('active');
    } else {
      $target.addClass('active');
    }

    clearTimeout(filterDelay);
    filterDelay = setTimeout(enableFiltering, 1000);
  });

  $('.popupOptions .filtersList li span').bind('click', function (e) {
    e.preventDefault();
    var $target = $(this);
    var guid = $target.data('guid');

    if ($target.hasClass('active')) {
      $target.removeClass('active');
    } else {
      $target.addClass('active');
    }

    clearTimeout(filterDelay);
    filterDelay = setTimeout(enableFiltering, 1000);
  });

  $('.popupDate .dateList li span').bind('click', function (e) {
    e.preventDefault();
    var $target = $(this);

    if ($target.hasClass('active')) {
      $target.removeClass('active');
    } else {
      $target.addClass('active');
    }

    clearTimeout(filterDelay);
    filterDelay = setTimeout(enableFiltering, 1000);
  });

  $('.options li span', $sortSelect).bind('click', function (e) {
    e.preventDefault();
    var $target = $(this);

    $target.parents('.sortSelect').find('.selectedOption').html($target.text() + '<span>&#xF501;</span>');

    $('.options li span.active', $sortSelect).removeClass('active');
    $target.addClass('active');

    $sortSelect.removeClass('open');

    clearTimeout(filterDelay);
    filterDelay = setTimeout(enableFiltering, 1000);
  });

  function resetBtn_clickHandler(e) {
    e.preventDefault();

    $('.toggleBtn.active').removeClass('active');
    $('.popupOptions .filtersList li span.active').removeClass('active');
    $('.popupDate .dateList li span.active').removeClass('active');
    $sortSelect.find('.selectedOption').html($('.options li:eq(0) span', $sortSelect).text() + '<span>&#xF501;</span>');
    $('span.active', $sortSelect).removeClass('active');

    if ($searchBox.val() !== searchText) {
      $searchBox.val(searchText);
    }

    tags_selection = '';
    searchQuery = '';
    changeArr = [];

    enableFiltering();
  }

  $resetBtn.bind('click', resetBtn_clickHandler);

  // display initial results
  // enableFiltering();

  eventPublisher.subscribe('Event Map', 'mapRegionSelected', function () {
    enableFiltering();
  });

  // callback for event search submit
  function search_submitHandler(e) {
    e.preventDefault();
    searchQuery = $searchBox.val();
    _gaq.push(['_trackPageview', '/search_results.html?q=' + searchQuery + '&cat=event']);
    // console.log([ '_trackPageview', '/search_results.html?q=' + searchQuery + '&cat=event' ]);
    enableFiltering();
  }

  $searchForm.bind('submit', search_submitHandler);

} // end initEventFilters()

function initEventMap() {
  var map, NA, SA, EU, ME, AF, AP, AU, $activeRegion, $detailRotator, tickTimer, featureTickTimer;

  // define svg map area
  map = new Raphael('region-global-map', 950, 550);
  map.safari();
  $activeRegion = $('.mapRegion.active');
  $detailRotator = $('.eventDetailRotator');

  function hoverRegion(r, dir) {
    var color = '';
    // set color for over or out events
    if (dir === 'over') {
      color = '#DC0025';
    } else {
      color = '#FFFFFF';
    }
    // animate region color
    r.animate({
      fill: color
    }, 200);
  }

  function switchToRegion(str) {
    $activeRegion.removeClass('active');
    $activeRegion = $('.mapRegion[data-region="' + str + '"]');
    $activeRegion.addClass('active');

    eventPublisher.publish('Event Map', 'mapRegionSelected', {});

    if (str.toLowerCase() !== 'global') {
      $('.uiWrapper').addClass('show');
    } else {
      $('.uiWrapper').removeClass('show');
    }
  }

  $('#zoomOutBtn').bind('click', function (e) {
    $detailRotator.removeClass('open');
    $('.eventPin.active').removeClass('active');
    switchToRegion('global');
    e.preventDefault();
  });

  $('.closeBtn', $detailRotator).bind('click', function (e) {
    e.preventDefault();
    $('#eventRotatorViewport article').hide();
    $('#raceCount').text('');
    $detailRotator.removeClass('open');
    $('.eventPin.active').removeClass('active');
  });

  function buildRegions() {
    var i;
    // define region map sets
    NA = map.set();
    SA = map.set();
    EU = map.set();
    ME = map.set();
    AF = map.set();
    AP = map.set();
    AU = map.set();
    // build paths from svg array for each region map set
    for (i = 0; i < northAmerica.data.length; i++) {
      NA.push(map.path(northAmerica.data[i].path).attr({
        parent: 'North America',
        'cursor': 'pointer',
        'stroke-width': 0,
        'stroke': '#FFF',
        fill: '#FFF'
      }));
    }
    for (i = 0; i < southAmerica.data.length; i++) {
      SA.push(map.path(southAmerica.data[i].path).attr({
        parent: 'South America',
        'cursor': 'pointer',
        'stroke-width': 0,
        'stroke': '#FFF',
        fill: '#FFF'
      }));
    }
    for (i = 0; i < europe.data.length; i++) {
      EU.push(map.path(europe.data[i].path).attr({
        parent: 'Europe',
        'cursor': 'pointer',
        'stroke-width': 0,
        'stroke': '#FFF',
        fill: '#FFF'
      }));
    }
    for (i = 0; i < middleEast.data.length; i++) {
      ME.push(map.path(middleEast.data[i].path).attr({
        parent: 'Middle East',
        'cursor': 'pointer',
        'stroke-width': 0,
        'stroke': '#FFF',
        fill: '#FFF'
      }));
    }
    for (i = 0; i < africa.data.length; i++) {
      AF.push(map.path(africa.data[i].path).attr({
        parent: 'Africa',
        'cursor': 'pointer',
        'stroke-width': 0,
        'stroke': '#FFF',
        fill: '#FFF'
      }));
    }
    for (i = 0; i < asiaPacific.data.length; i++) {
      AP.push(map.path(asiaPacific.data[i].path).attr({
        parent: 'Asia Pacific',
        'cursor': 'pointer',
        'stroke-width': 0,
        'stroke': '#FFF',
        fill: '#FFF'
      }));
    }
    for (i = 0; i < australia.data.length; i++) {
      AU.push(map.path(australia.data[i].path).attr({
        parent: 'Australia',
        'cursor': 'pointer',
        'stroke-width': 0,
        'stroke': '#FFF',
        fill: '#FFF'
      }));
    }
    // listen for events on each region map set
    NA.hover(function () {
      hoverRegion(NA, 'over');
    }, function () {
      hoverRegion(NA, 'out');
    }).click(function () {
      switchToRegion('North America');
    });
    SA.hover(function () {
      hoverRegion(SA, 'over');
    }, function () {
      hoverRegion(SA, 'out');
    }).click(function () {
      switchToRegion('South America');
    });
    EU.hover(function () {
      hoverRegion(EU, 'over');
    }, function () {
      hoverRegion(EU, 'out');
    }).click(function () {
      switchToRegion('Europe');
    });
    ME.hover(function () {
      hoverRegion(ME, 'over');
    }, function () {
      hoverRegion(ME, 'out');
    }).click(function () {
      switchToRegion('Middle East');
    });
    AF.hover(function () {
      hoverRegion(AF, 'over');
    }, function () {
      hoverRegion(AF, 'out');
    }).click(function () {
      switchToRegion('Africa');
    });
    AP.hover(function () {
      hoverRegion(AP, 'over');
    }, function () {
      hoverRegion(AP, 'out');
    }).click(function () {
      switchToRegion('Asia');
    });
    AU.hover(function () {
      hoverRegion(AU, 'over');
    }, function () {
      hoverRegion(AU, 'out');
    }).click(function () {
      switchToRegion('Australia');
    });
  }

  function getRegionByString(str) {
    var obj;
    // return requested svg obj
    switch (str.toLowerCase()) {
    case 'north america':
      obj = NA;
      break;
    case 'south america':
      obj = SA;
      break;
    case 'europe':
      obj = EU;
      break;
    case 'middle east':
      obj = ME;
      break;
    case 'africa':
      obj = AF;
      break;
    case 'asia':
      obj = AP;
      break;
    case 'australia':
      obj = AU;
      break;
    }

    return obj;
  }

  function registerPins() {
    $('#region-global-pins .eventPin').die('mouseenter, mouseleave, click');
    $('.eventPin').die('click');
    // intercept events on global pins to manually simulate events on svg regions
    $('#region-global-pins .eventPin')
      .live('mouseenter', function () {
        // find parent region to force action on
        var $pin = $(this);
        var region = getRegionByString($pin.data('region'));
        hoverRegion(region, 'over');
      })
      .live('mouseleave', function () {
        // find parent region to force action on
        var $pin = $(this);
        var region = getRegionByString($pin.data('region'));
        hoverRegion(region, 'out');
      })
      .live('click', function () {
        // find parent region to force action on
        var $pin = $(this);
        var region = $pin.data('region');
        switchToRegion(region);
      });

    $('.eventPin').live('click', eventPin_clickHandler);
  }

  function onBeforeFilter() {
    $detailRotator.removeClass('open');
  }

  function onAfterFilter() {
    registerPins();
  }

  eventPublisher.subscribe(Digi.ajax, 'pinsUpdating', onBeforeFilter);
  eventPublisher.subscribe(Digi.ajax, 'pinsUpdated', onAfterFilter);

  function liveTick() {
    clearTimeout(tickTimer);
    tickTimer = setTimeout(function () {
      var $parent = $('.eventMapWrapper');

      if ($parent.hasClass('tick-off')) {
        $parent.removeClass('tick-off');
      } else {
        $parent.addClass('tick-off');
      }

      liveTick();
    }, 1000);
  }

  liveTick();

  function reInitEventRotator() {
    var $rotator = $('.eventDetailRotator');

    if (!$rotator.hasClass('initialized')) {
      $rotator.addClass('initialized');
    } else {
      return;
    }

    var $cards = $('#eventRotatorViewport article', $rotator);
    var num = $cards.length;
    var index = num;
    var isAnim = false;
    var $prevBtn = $('.prevBtn', $rotator);
    var $nextBtn = $('.nextBtn', $rotator);
    var $count = $('#raceCount', $rotator);

    $count.text('1/' + num);

    if (num === 1) {
      $nextBtn.addClass('hide').unbind('click');
      $prevBtn.addClass('hide').unbind('click');
    } else {
      $cards.each(function () {
        $(this).css('z-index', index);
        index -= 1;
      });

      $cards.eq(0).addClass('active');

      $nextBtn.removeClass('hide');
      $prevBtn.removeClass('hide');

      $nextBtn.unbind('click');
      $prevBtn.unbind('click');

      $nextBtn.bind('click', function (e) {
        e.preventDefault();

        if (isAnim) {
          return;
        }

        isAnim = true;

        var $active = $('#eventRotatorViewport article.active');

        $cards.each(function () {
          var $that = $(this);
          var newIndex = $that.css('z-index') * 1 + 1;
          $that.css('z-index', newIndex);
          if (newIndex === num) {
            $that.addClass('active');
          }
        });

        $active.animate({
          opacity: 0
        }, 300, function () {
          $active.css('z-index', 1);
          $active.css('opacity', 1);
          $active.removeClass('active');
          isAnim = false;
          $count.text($('#eventRotatorViewport article.active').index() + 1 + '/' + num);
        });

      });

      $prevBtn.bind('click', function (e) {
        e.preventDefault();

        if (isAnim) {
          return;
        }

        isAnim = true;
        var $active = $('#eventRotatorViewport article.active');
        $cards.not($active).each(function () {
          var $that = $(this);
          var newIndex = $that.css('z-index') * 1 - 1;
          if (newIndex === 0) {
            $that.css('z-index', num);
            $that.addClass('active');
          } else {
            $that.css('z-index', newIndex);
          }
        });
        $active.css('z-index', num + 1);
        $active.animate({
          opacity: 0
        }, 300, function () {
          $active.css('z-index', $active.css('z-index') - 2);
          $active.css('opacity', 1);
          $active.removeClass('active');
          isAnim = false;
          $count.text($('#eventRotatorViewport article.active').index() + 1 + '/' + num);
        });

      });
    }
  }

  function eventPin_clickHandler(e) {
    var $target;
    e.preventDefault();
    $target = $(this);

    if ($target.parents('#region-global').length) {
      return;
    }

    eventPublisher.subscribe(Digi.ajax, 'contentUpdated', function () {
      reInitEventRotator();
    });
    // request data from ajax class
    $('.eventDetailRotator').removeClass('initialized');
    Digi.ajax.getData('/handlers/getracecards.aspx?r=' + $target.data('guid'), 'GET');

    $('.eventPin.active').removeClass('active');
    $target.addClass('active');
    $detailRotator.addClass('open');
  }

  function initFeaturedEvents() {
    var $visiblePins = $('.mapRegion.active .eventPin');
    var randomEvents = [];
    var num = 5;
    var activeIndex = -1;
    var $map = $('#eventMap');
    var i;

    if ($visiblePins.length < 5) {
      //randomEvents = $visiblePins;
      return;
    }

    for (i = 0; i < 5; i++) {
      var rand = Math.floor((Math.random() * $visiblePins.length - 1) + 1);
      var $pin = $visiblePins.eq(rand);
      var guid = $pin.data('guid').split('|')[0];
      var $card = $('#filterBody article[data-guid="' + guid + '"]');
      var $obj = $('.featureCard').eq(i);

      $obj.css({
        top: $pin.position().top,
        left: $pin.position().left
      });

      $('img', $obj).attr('src', $card.find('.eventOverlay img').attr('src'));
      $('.owner', $obj).text($card.find('header .eventOwner').text());
      $('.title', $obj).html($card.find('header a h2').html());

      $obj.show();

    }

    function featureTick() {
      if ($map.hasClass('noFeatures')) {
        return;
      }
      var $active = $('.featureCard.show');
      clearTimeout(featureTickTimer);
      featureTickTimer = setTimeout(function () {
        if ($active.length) {
          $active.animate({
            opacity: 0
          }, 300, function () {
            $active.removeClass('show');
          });
          setTimeout(function () {
            var $next = $active.next();
            if ($next.is('.featureCard')) {
              $next.addClass('show').animate({
                opacity: 1
              }, 300, function () {
                featureTick();
              });
            } else {
              $('.featureCard:eq(0)').addClass('show').animate({
                opacity: 1
              }, 300, function () {
                featureTick();
              });
            }
          }, 750);
        } else {
          $('.featureCard:eq(0)').addClass('show').animate({
            opacity: 1
          }, 300, function () {
            featureTick();
          });
        }

      }, 2000);
    }

    featureTick();
  }

  // run initializing methods
  buildRegions();
  registerPins();
  initEventFilters();

  setTimeout(function () {
    initFeaturedEvents();
  }, 1000);

}

/*
  Method to correct sub menu dimensions within the main nav.
*/
function initSubNavLayout() {
  var $mainNav = $('#headerWrapper');
  $('.siteNav .withDropdown', $mainNav).hover(function () {
    $mainNav.addClass('isHovered');
  }, function () {
    $mainNav.removeClass('isHovered');
  });
  var $body = $('body');
  $('.eventNav .withDropdown').hover(function () {
    $body.addClass('navHovered');
  }, function () {
    $body.removeClass('navHovered');
  });

} // end initSubNavLayout()

function initUtilityMenu() {
  var $scope = $('#utilityHandle');
  var $regionLink = $('.regionLink', $scope);

  $regionLink.bind('click', function (e) {
    if ($scope.hasClass('regionActive')) {
      $scope.removeClass('regionActive');
    } else {
      $scope.addClass('regionActive');
    }
    e.preventDefault();
  });

  $('.regionDropdown a', $scope).bind('click', function (e) {
    e.preventDefault();
    var $that = $(this);

    if ($that.attr('href') !== location.origin) {
      $.cookie('no-regional-redirect', 1, {
        expires: 30,
        domain: '.ironman.com'
      });
      if ($that.attr('href').substring(0, 9) === 'http://eu') {
        $.cookie('site-region', 'eu', {
          expires: 30,
          domain: '.ironman.com'
        });
      } else if ($that.attr('href').substring(0, 9) === 'http://ap') {
        $.cookie('site-region', 'ap', {
          expires: 30,
          domain: '.ironman.com'
        });
      } else {
        $.cookie('site-region', '', {
          expires: 30,
          domain: '.ironman.com'
        });
      }
    } else {
      if ($that.attr('href').substring(0, 9) === 'http://ww') {
        $.cookie('site-region', '', {
          expires: 30,
          domain: '.ironman.com'
        });
      }
      if ($.cookie('no-regional-redirect')) {
        $.removeCookie('no-regional-redirect');
      }
    }
    setTimeout("document.location = '" + $that.attr('href') + "'", 250);
  });
}

/*
  Method to allow for tab functionality on all modules where
  tab navigation is present.
*/
function initTabModules() {
  var docLoc = new String(document.location);
  var docLocStart = docLoc.indexOf('#');
  var requestedTab = docLoc.substr(docLocStart + 1);

  $('.moduleTabs:not(".noJs")').each(function () {
    var scope = this;
    // If there is a '#' sign followed by a number on the end of the document.location
    if (docLocStart !== -1) {
      if ($('div.moduleTabContent').eq(requestedTab).length > 0) { // If tab number requested exists
        // Hide all tabs/tab content inactive
        $('.moduleTabsTabs li a').removeClass('active');
        $('div.moduleTabsContent').hide();
        // Make the tab/tab content indicated by the URL param active
        $('.moduleTabsTabs li a').eq(requestedTab).addClass('active');
        $('div.moduleTabsContent').eq(requestedTab).show();
        // Enable any iframes that just have a data-src and not a src within that tab
        $('div.moduleTabsContent').eq(requestedTab).find('iframe[data-src]:not([src])').each(function (index, el) {
          $(el).attr('src', $(el).attr('data-src'));
        });
      }
    }

    $('.moduleTabsTabs li a', scope).click(function () {
      // Get the index of the clicked anchor.
      var index = $('.moduleTabsTabs li a', scope).index(this);
      // Remove active class from all tabs
      $(".moduleTabsTabs li a.active", scope).removeClass('active');
      // Make clicked tab active
      $(this, scope).addClass('active');
      // Hide all content boxes
      $('.moduleTabsContent', scope).hide();
      // Show the content box with the same index as the nav anchor
      $('.moduleTabsContent', scope).eq(index).show();
      // Enable any iframes that just have a data-src and not a src within that tab
      $('.moduleTabsContent', scope).eq(index).find('iframe[data-src]:not([src])').each(function (index, el) {
        $(el).attr('src', $(el).attr('data-src'));
      });
      return false;
    });

    if ($('html').hasClass('lte8')) {
      $('.moduleTabsContent', scope).eq(0).show();
    }
  });
} // end initTabModules()

function initFullFeature() {
  var $scope, $viewport, $slider, $slides, $ui, $prev, $next, $dots, winWidth, isAnimating, featureTimer, pauseTimer, activeIndex;

  $('.fullFeatureRotator').each(function () {
    $scope = $(this);
    $viewport = $('.viewport', $scope);
    $slider = $('.slides', $scope);
    $slides = $('li', $slider);
    $ui = $('.uiWrapper', $scope);
    $prev = $('.prevBtn', $ui);
    $next = $('.nextBtn', $ui);
    $dots = $('.uiDots li', $ui);
    isAnimating = false;
    pauseTimer = false;
    activeIndex = 0;

    if ($slides.length <= 1) {
      return;
    }

    function scale() {
      winWidth = $viewport.width();

      $slider.width(winWidth);
      $slides.width(winWidth).css('left', winWidth);
      $('li:first', $slider).css('left', 0).addClass('active');

      $ui.css({
        'margin-left': -($ui.width() / 2),
        'visibility': 'visible'
      });
    }

    scale();

    function animateTo(index, dir) {
      var dist = index * winWidth;
      var op;
      var $obj;
      var mode;

      if (!isAnimating) {
        isAnimating = true;
      } else {
        return;
      }

      if (dir === 'next') {
        mode = 'single';
        op = '-=' + winWidth;
      } else if (dir === 'prev') {
        mode = 'single';
        op = '+=' + winWidth;
      } else {
        mode = 'abs';
        op = -(winWidth * index);
      }

      if (mode === 'single') {
        $obj = $slides;
        $slides.removeClass('relative');
      } else {
        $obj = $slider;
        $slides.addClass('relative');
        $slides.css('left', '');
        $slider.css({
          'width': $slides.length * winWidth
        });

        $slider.css('left', -($('.active', $ui).index() * winWidth));
      }

      tick();
      $slides.eq(index).addClass('next');

      $obj.animate({
        left: op
      }, 500, function () {
        $('li.active', $scope).removeClass('active');
        $slides.eq(index).addClass('active').removeClass('next');
        $dots.eq(index).addClass('active');
        isAnimating = false;
        $slider.css({
          'left': 0,
          'width': winWidth
        });
        $slides.removeClass('relative');
        $slides.eq(index).css('left', 0);
        $slides.not('.active').css('left', winWidth);

        activeIndex = index;
      });
    }

    function nextHandler() {
      var $target = $(this);
      activeIndex = $('li.active', $ui).index();
      var targetIndex = activeIndex + 1;

      if (targetIndex < $dots.length) {
        animateTo(targetIndex, 'next');
      } else {
        animateTo(0, 'next');
      }

      return false;
    }

    function tick() {
      clearTimeout(featureTimer);
      featureTimer = setTimeout(function () {
        if (pauseTimer) {
          return;
        }
        nextHandler();
        tick();
      }, 5000);
    }

    $('.slideContent, .uiWrapper, .slideImage').hover(function () {
      pauseTimer = true;
    }, function () {
      pauseTimer = false;
      tick();
    });

    $(window).bind('resize', function () {
      scale();
    });

    $('a', $dots).bind('click', function (e) {
      var $target = $(this);
      var targetIndex = $target.parent().index();

      animateTo(targetIndex, 'abs');
      e.preventDefault();
    });

    $prev.bind('click', function (e) {
      var $target = $(this);
      activeIndex = $('li.active', $ui).index();
      var targetIndex = activeIndex - 1;

      $slides.not('.active').css('left', -winWidth);

      if (targetIndex >= 0) {
        animateTo(targetIndex, 'prev');
      } else {
        animateTo($dots.length - 1, 'prev');
      }

      e.preventDefault();
    });

    $next.bind('click', nextHandler);

    tick();
  });

  $('.videoLink', $slides).bind('click', function (e) {
    e.preventDefault();
  });
}

function centerVideoModal() {
  var winWidth, winHeight, $inner, $player;

  winHeight = $(window).height();
  winWidth = $(window).width();
  $inner = $('#lightbox .lightbox-inner');

  $inner.css({
    marginTop: (winHeight / 2) - (600 / 2)
  });
}

function initVideoModal() {
  var $triggers, htmlStr;

  $triggers = $('.videoLink');
  if (!$triggers.length) {
    return;
  }
  // would be optimal if integrated into page from backend
  htmlStr = '<div id="lightbox"><a class="close-btn" href="#">Close</a><div class="lightbox-inner"><iframe id="player" scrolling="no" width="928" height="600"></iframe></div></div>';
  $('body').append(htmlStr);

  $triggers.bind('click', function (e) {
    e.preventDefault();
    var $link, id, videoTitle = 'n/a';

    $link = $(this);
    videoTitle = $link.attr('title');

    id = $link.attr('href');

    // temporary testing
    // id="http://new.livestream.com/accounts/1249127/events/2329533/videos/29156483/player?autoPlay=false&height=600&mute=false&width=928";

    $('#player').attr('src', id);

    $('#lightbox').show();
    centerVideoModal();

    if (videoTitle === 'undefined') {
      _gaq.push(['_trackEvent', 'Video', 'Start', id]);
    } else {
      _gaq.push(['_trackEvent', 'Video', 'Start', videoTitle]);
    }
  });

  $('#lightbox').bind('click', function (e) {
    e.preventDefault();
    $('#player').attr('src', '');
    $('#lightbox').hide();
  });
}

/*
  Method to enable photo gallery modules.
*/
function initPhotoGallery() {
  $('.photoGallery').each(function () {
    var $scope = $(this);
    var $uiContainer = $('.uiContainer', $scope);
    var $imgContainer = $('.imageContainer', $scope);
    var $images = $('img, div', $imgContainer);
    var $overlayNext = $('#overlayNextBtn', $scope);
    var $overlayPrev = $('#overlayPrevBtn', $scope);
    var $next = $('#nextBtn', $scope);
    var $prev = $('#prevBtn', $scope);
    var $caption = $('.caption', $scope);
    var $count = $('.count', $scope);

    var width = $scope.width();
    var totalImages = $images.length;
    var activeIndex = 0;
    var isPlaying = false;
    var isStart = true;
    var isEnd = false;

    // correct dimensions/settings
    $uiContainer.outerWidth(width);
    $imgContainer.width(width * totalImages);
    $prev.addClass('disable');
    $overlayPrev.addClass('disable');
    $caption.text($images.eq(0).attr('caption-text'));
    $count.text('1 of ' + totalImages);

    function nextPrev_clickHandler(e) {
      e.preventDefault();
      // if images are animating
      if (isPlaying) {
        return;
      }
      var id;
      var captionStr = '';
      var num = 1;
      var $target = $(e.target);

      if (!$target.is('a')) {
        // get anchor
        $target = $target.parents('a');
      }

      id = $target.attr('id');

      if (id === 'nextBtn' || id === 'overlayNextBtn') {
        // if end of images
        if (isEnd) {
          return;
        }
        // disable additional clicks
        isPlaying = true;
        // get caption text of next slide
        captionStr = $images.eq(activeIndex + 1).attr('caption-text');
        // get count
        num = activeIndex + 2;
        // slide images left
        $imgContainer.animate({
          left: '-=' + width
        }, 800, function () {
          isPlaying = false;
          activeIndex++;
          // determine if end of images
          if (activeIndex < totalImages - 1) {
            isStart = false;
            $prev.removeClass('disable');
            $overlayPrev.removeClass('disable');
          } else {
            isEnd = true;
            $next.addClass('disable');
            $overlayNext.addClass('disable');
          }
        });
      } else if (id === 'prevBtn' || id === 'overlayPrevBtn') {
        // if start of images
        if (isStart) {
          return;
        }
        // disable additional clicks
        isPlaying = true;
        // get caption text of previous slide
        captionStr = $images.eq(activeIndex - 1).attr('caption-text');
        // get count
        num = activeIndex;
        // slide images right
        $imgContainer.animate({
          left: '+=' + width
        }, 800, function () {
          isPlaying = false;
          activeIndex--;
          // determine if start of images
          if (activeIndex > 0) {
            isEnd = false;
            $next.removeClass('disable');
            $overlayNext.removeClass('disable');
          } else {
            isStart = true;
            $prev.addClass('disable');
            $overlayPrev.addClass('disable');
          }
        });
      }

      $caption.fadeOut(400, function () {
        $caption.text(captionStr);
        $caption.fadeIn(400);
      });

      $count.fadeOut(400, function () {
        $count.text(num + ' of ' + totalImages);
        $count.fadeIn(400);
      });
    }

    $('#prevBtn, #nextBtn, #overlayPrevBtn, #overlayNextBtn').bind('click', nextPrev_clickHandler);
  });
} // end initPhotoGallery()

function initHomeAds() {
  if (!hasRun) {
    hasRun = true;
  } else {
    return;
  }

  var $activeTab = $('.homeTabsTabs .tab.active');
  var defaultTabId = $activeTab.attr('href').substr(1);
  $.ajax({
    url: '/handlers/getdoubleclickadjs.aspx?i=' + defaultTabId,
    dataType: 'script',
    success: function (response) {
      eval(response);
    }
  });
}

function initIFinishedModule() {
  var $scope = $('.iFinished').not('.initialized');
  var $stateDefault = $('.stateDefault', $scope);
  var $stateSelected = $('.stateSelected', $scope);
  var $dropdown;

  // listen for click on dropdown link
  $('.raceSelect', $scope).bind('click', function (e) {
    var $that = $(this);
    $('.raceSelectDropdown', $scope)
      .clone()
      .appendTo('body')
      .show()
      .css({
        top: $that.offset().top,
        left: $that.offset().left
      });

    $dropdown = $('.raceSelectDropdown');

    $('#wrapper').bind('click', cancelDrop);
    // listen for click on inner dropdown list
    $('li a', $dropdown).bind('click', dropClick);
    return false;
  });

  function cancelDrop(e) {
    var $target = $(e.target);

    if (!$target.parents('.raceSelectDropdown').length) {
      $dropdown.hide();
    }

    $('#wrapper').unbind('click');
    e.preventDefault();
  }

  function dropClick(e) {
    var $target = $(e.target);
    if (!$target.is('a')) {
      $target = $target.parents('a');
    }

    $dropdown.hide();
    $scope.addClass('selected');
    $('.raceInfo', $stateSelected).html($('p', $target).html());
    $('.shareBox .shareEventType', $stateSelected).text($('.eventType', $target).text());
    $('.gearBox a', $stateSelected).attr('href', $target.data('store-link'));
    $('.fbBtn', $stateSelected).attr('href', 'https://www.facebook.com/sharer/sharer.php?u=' + $target.data('fb-href'));
    $('.tweetBtn', $stateSelected).attr('href', 'https://twitter.com/share?url=' + $target.attr('href') + '&text=' + $target.data('twittershare-text'));

    $('.reSelectLink').bind('click', resetChoice);
    e.preventDefault();
  }

  function resetChoice(e) {
    $scope.removeClass('selected');
    e.preventDefault();
  }

  $scope.addClass('initialized');
}

function initStartTrainingModule() {
  var $scope = $('.startTraining').not('.initialized');

  $scope.each(function () {
    var $that = $(this);
    var $links = $('.eventTypeMenu a', $that);

    $links.bind('click', function (e) {
      var $target = $(e.target);
      if (!$target.is('a')) {
        $target = $target.parents('a');
      }
      $('.eventTypeMenu li.active', $that).removeClass('active');
      $target.parent().addClass('active');
      var d = $target.attr('guid-value');
      var tabId = $('.filterBody', $that).attr('id').substr(11);
      Digi.ajax.getData('/handlers/searchevents.aspx?ps=6&p=1&design=p2&d=' + d + '&itemId=' + tabId, 'GET');
      e.preventDefault();
    });
    $that.addClass('initialized');
  });

}

function initWhatKindModule() {
  $('.whatKind').each(function () {
    var $that = $(this);
    var $tagline = $('.tagline', $that);
    var $blurb = $('.blurb', $that);
    var $logo = $('.logo', $that);
    var $bg = $('.bg', $that);
    var $detail = $('.whatKindDetail', $that);
    var $links = $('.eventKinds a', $that);
    var index = 0;

    $('.whatKind .eventKinds a')
      .bind('mouseover', function (e) {
        var $target = $(this);
        index = $links.index($target);
        $('#detailDefault').hide();
        $('.whatKindDetail').eq(index + 1).show();
      })
      .bind('mouseout', function (e) {
        $('.whatKindDetail').eq(index + 1).hide();
        $('#detailDefault').show();
      });
  });
}

function callHomeTabModules() {
  initIFinishedModule();
  initWhatKindModule();
  initStartTrainingModule();
  // initHomeAds();
}

function initHomeTabs() {
  var activeId;

  $('.homeTabsTabs').each(function () {
    var $scope = $(this);
    var $tabs = $('.tab', $scope);

    $tabs.bind('click', function (e) {
      var $target = $(this);
      $('.tab.active', $scope).removeClass('active');
      $target.addClass('active');

      if (!$target.hasClass('loaded')) {
        var guid = $target.attr('href').substr(1);
        activeId = guid;
        $('#' + guid).empty();
        getTabData(guid);
      } else {
        showTab($($target.attr('href')));
      }
      e.preventDefault();
    });

  });

  // method to filter results based on passed string
  function getTabData(guid) {
    // html updating is handled in ajax_class.js, so listen for custom events
    eventPublisher.subscribe(Digi.ajax, 'dataReady', dataReadyHandler);
    eventPublisher.subscribe(Digi.ajax, 'contentUpdated', updateHandler);
    // request data from ajax class
    Digi.ajax.getData('/handlers/gethomepage.aspx?i=' + guid, 'GET');
  }

  function dataReadyHandler(e) {
    // console.log('data ready...');
    eventPublisher.unsubscribe(Digi.ajax, 'dataReady', dataReadyHandler);
  }

  function updateHandler(e) {
    // console.log('updated...');

    eventPublisher.unsubscribe(Digi.ajax, 'contentUpdated', updateHandler);
    $('.tab[href="#' + activeId + '"]').addClass('loaded');
    showTab($('#' + activeId));
    // $.ajax({
    //   url: '/handlers/getdoubleclickadjs.aspx?i=' + activeId,
    //   dataType: 'script',
    //   success: function (response) {
    //     eval(response);
    //   }
    // });
  }

  function showTab(obj) {
    $('.homeTabsWrapper .tabContent').hide();
    obj.show();
    callHomeTabModules();
  }
}

/*
  Method to enable History specific modules and functionality.
*/
function initHistoryModules() {
  var $wrapper = $('.slideWrapper');
  var $slideContainer = $('.slides');
  var $slides = $('article', $slideContainer);
  var $tabs = $('.slideTabs li a');

  var contentWidth = $wrapper.width();
  var numSlides = $slides.length;
  var tabWidth = Math.floor(contentWidth / numSlides);
  var remainder = contentWidth - tabWidth * numSlides;
  var activeIndex = 0;
  var isPlaying = false;

  // resize slide container
  $slideContainer.width(contentWidth * numSlides);

  // resize tabs
  $tabs.width(tabWidth);
  if (remainder > 0) {
    $('.active', $('.slideTabs')).width(tabWidth + remainder);
  }

  function tab_clickHandler(e) {
    e.preventDefault();

    if (isPlaying) {
      return;
    } else {
      isPlaying = true;
    }

    var $active = $('.active', $('.slideTabs'));
    var $target = $(e.target);

    if (!$target.is('a')) {
      $target = $target.parents('a');
    }
    // swap active classes
    $active.removeClass('active');
    $target.addClass('active');
    // set new index
    activeIndex = $target.parent().index();

    $slideContainer.animate({
      left: (activeIndex) * contentWidth * -1
    }, 800, function () {
      isPlaying = false;
    });
  }

  // tab click
  $tabs.bind('click', tab_clickHandler);

  $('.galleryThumbs li a').fancybox({
    openEffect: 'none',
    closeEffect: 'none',
    titlePosition: 'over',
    showNavArrow: true,
    padding: 2
  });

  $('.ironmanInspiration .imageLink').fancybox({
    openEffect: 'none',
    closeEffect: 'none',
    titlePosition: 'over',
    showNavArrow: false,
    padding: 2,
    helpers: {
      media: {}
    }
  });
} // end initHistoryModules()

function initResultsModules() {
  // var $iframe = $('#trackerFrame');
  var $form = $('#resultsSearchForm');
  var $applyBtn = $('.applyBtn');
  var rootURL = $form.attr('action');

  $('.eventResults .selectBox').select2();

  function letter_clickHandler(e) {
    // e.preventDefault();

    // var $target = $(e.target);
    // window.location.href = $target.attr('href');
    // // var l = '';

    // if (!$target.hasClass('allLink')) {
    //  l = '&letter=' + $target.attr('alpha-label').toLowerCase();
    // }

    // buildFilterStr(l);
  }

  function buildFilterStr(l) {
    var g = $('#genderSelect').val();
    var c = $('#categorySelect').val();

    g = (g === 'n/a') ? '' : '&sex=' + g;
    c = (c === 'n/a') ? '' : '&division=' + c;

    // $iframe.attr('src', rootURL + g + c + l);
  }

  function apply_clickHandler(e) {
    e.preventDefault();
    buildFilterStr('');
  }

  // $form.bind('submit', search_submitHandler);
  $applyBtn.bind('click', apply_clickHandler);
  // $('.alphaFilters a').bind('click', letter_clickHandler);

  // function search_submitHandler(e) {
  //   e.preventDefault();
  //   var q = $('#resultsSearch', $form).val();
  //   $('#filterResultsForm').submit();
  //   // $iframe.attr('src', rootURL + '&athlete=' + q);
  // }
}

function initResultsModulesIframe() {
  var $iframe = $('#trackerFrame');
  var $form = $('#filterResultsFormOld');
  var $applyBtn = $('.applyBtn');
  var rootURL = $form.attr('action');

  // $('.eventResults .selectBox').select2();

  function letter_clickHandler(e) {
    e.preventDefault();

    var $target = $(e.target);
    var l = '';

    if (!$target.hasClass('allLink')) {
      l = '&letter=' + $target.attr('alpha-label').toLowerCase();
    }

    buildFilterStr(l);
  }
  $('.alphaFilters a').bind('click', letter_clickHandler);

  function buildFilterStr(l) {
    var g = $('#genderSelect').val();
    var c = $('#categorySelect').val();

    g = (g === 'n/a') ? '' : '&sex=' + g;
    c = (c === 'n/a') ? '' : '&division=' + c;


    $iframe.attr("src", rootURL + g + c + l);
  }

  function apply_clickHandler(e) {
    e.preventDefault();
    buildFilterStr('');
  }

  $applyBtn.bind('click', apply_clickHandler);

  function search_submitHandler(e) {
    e.preventDefault();
    var q = $('#eventSearch', $form).val();
    $iframe.attr('src', rootURL + '&athlete=' + q);
  }

  $form.bind('submit', search_submitHandler);
}

/*
  Method to enable search results functionality.
*/
function initSearchModules() {
  $('.selectBox').select2().bind('change', function () {
    window.location = $(this).val();
  });
} // end initSearchModules()

/*
  Method to enable live coverage module functionality.
*/
function initCoverageModules() {

  function getUrlParam(urlStr, param) {
    param = param.replace(/[\[]/, '\\\[').replace(/[\]]/, '\\\]');
    var regexS = '[\\?&]' + param + '=([^&#]*)';
    var regex = new RegExp(regexS);
    var results = regex.exec(urlStr);

    if (results === null) {
      return '';
    } else {
      return results[1];
    }
  }

  $('.coverageLanding .selectBox, .coverageDetail .selectBox').select2();
  $('.liveStream').each(function () {
    var $scope = $(this);
    $('#optionsSelect', $scope).bind('change', function () {
      var id = $(this).val();
      if (id === '' || id === 'n/a') {
        return;
      }

      var $iframe = $('#coverage', $scope);
      var urlStr = $iframe.attr('src');
      var urlRoot = urlStr.split('?')[0];

      var theme = getUrlParam(urlStr, 'ThemeId');
      var url = urlRoot + '?Id=' + id + '&ThemeId=' + theme;

      $iframe.attr('src', url);
    });
  });

  $('.liveBlogAside').each(function () {
    var $scope = $(this);
    $('#optionsSelect', $scope).bind('change', function () {
      var id = $(this).val();
      if (id === '' || id === 'n/a') {
        return;
      }

      var $iframe = $('#coverage', $scope);
      var urlStr = $iframe.attr('src');
      var urlRoot = urlStr.split('?')[0];

      var theme = getUrlParam(urlStr, 'ThemeId');
      var url = urlRoot + '?Id=' + id + '&ThemeId=' + theme;

      $iframe.attr('src', url);
    });
  });
}

/*
  Method to enable Twitter feed for social tab module.
  utilizes jquery.tweet.js
*/
/*function initTweets() {
  if (!jQuery('.tweetsModule').length) {
    return false;
  }
  var $_tweets = jQuery('.tweetsModule').attr('title');
  var relArray = $_tweets.split('|');
  var tweet = relArray[0];
  var numberOfTweets = relArray[1];
  var list = relArray[2];
  if ((typeof tweet == 'undefined') || (tweet.toString() == '')) {
    tweet = 'IronmanTri';
  }
  if ((typeof numberOfTweets == 'undefined') || (numberOfTweets.toString() == '')) {
    numberOfTweets = '3';
  }
  if ((typeof list == 'undefined') || (list.toString() == '')) {
    list = '';
  }

  jQuery('.tweetsModule').attr('title', '');

  jQuery('.tweets').tweet({
    username: tweet,
    list: list,
    join_text: null,
    count: numberOfTweets,
    avatar_size: 48,
    loading_text: 'loading tweets...',
    template: '{avatar}<div class="tweetContent">{text}<div class="tweetInfo">{time} | {reply_action} | {retweet_action}</div></div>'
  }).bind("loaded",function(){
    jQuery(this).find('a').attr('target','_blank').bind('click', clickHandler);
    jQuery(this).find('.tweet_list li').addClass('clear');
  });

  // click handler to allow for tracking replys and retweets
  function clickHandler(e) {
    var $target = jQuery(e.target);

    if ($target.hasClass('tweet_action tweet_reply')) {
      // console.log(['_trackSocial', 'Twitter', 'Reply']);
      _gaq.push(['_trackSocial', 'Twitter', 'Reply']);
    } else if ($target.hasClass('tweet_action tweet_retweet')) {
      // console.log(['_trackSocial', 'Twitter', 'Retweet']);
      _gaq.push(['_trackSocial', 'Twitter', 'Retweet']);
    }
  }

} // end initTweets()
*/
function initTweets() {
  if (jQuery('.tweetsModule').length) {
    var $_tweets = jQuery('.tweetsModule').attr('title');
    // console.log('tweets rel ' + $_tweets);
    var relArray = $_tweets.split('|');
    var tweet = relArray[0];
    var numberOfTweets = relArray[1];
    var list = relArray[2];
    if ((typeof tweet === 'undefined') || (tweet.toString() === '')) {
      tweet = 'lpga';
    }
    if ((typeof numberOfTweets === 'undefined') || (numberOfTweets.toString() === '')) {
      numberOfTweets = '3';
    }
    if ((typeof list === 'undefined') || (list.toString() === '')) {
      list = '';
    }
    // console.log('tweets rel ' + relArray[0]);
    // console.log('tweets rel ' + relArray[1]);
    jQuery('.tweetsModule').attr('title', '');

    jQuery('.tweets').tweet({
      username: tweet,
      list: list,
      join_text: null,
      count: numberOfTweets,
      avatar_size: 48,
      loading_text: 'loading tweets...',
      template: '{avatar}<div class="tweetContent">{text}<div class="tweetInfo">{time} | {reply_action} | {retweet_action}</div></div>'
    }).bind('loaded', function () {
      jQuery(this).find('a').attr('target', '_blank');
      jQuery(this).find('.tweet_list li').addClass('clear');
    });

  }

  var tab = jQuery('.socialTabModule #twitter');
  if (tab.length) {
    $.ajax({
      url: '/handlers/twitterhandler.aspx?th=' + twitterHandle + '&n=' + numTweets,
      contentType: 'application/json; charset=utf-8',
      dataType: 'html',
      success: function (response) {
        tab.find('.tweet_list').html(response);
      }
    });
  }
}

/*
  Method to enable newsletter subscription through the footer.
*/
function initNewsletter() {
  var $form = $('#footerNewsForm');
  var $input = $('#emailAddress', $form);
  var $confirmMsg = $('.footerTop #confirmation');
  var $errorMsg = $('.footerTop #error');

  var width = $form.width();
  var root = location.protocol + '//' + location.host;
  var subscribePath = '/handlers/subscribetomailinglist.aspx';
  var unsubscribePath = '/handlers/unsubscribefrommailinglist.aspx';
  var email = '';

  $form.bind('submit', function (e) {
    e.preventDefault();

    email = $input.val();

    function accept() {
      _gaq.push(['_trackEvent', 'Subscription', 'email']);
      $form.hide();
      $confirmMsg.show();

      $('#dismiss', $confirmMsg).bind('click', function (e) {
        e.preventDefault();
        $confirmMsg.hide();
        $input.val('Enter your Email Address');
        $form.show();
        $('#dismiss', $confirmMsg).unbind('click');
      });

      $('#unsubscribe', $confirmMsg).bind('click', function (e) {
        e.preventDefault();
        $confirmMsg.hide();
        $input.val('Enter your Email Address');
        $form.show();
        $('#unsubscribe', $confirmMsg).unbind('click');

        $.ajax({
          url: root + unsubscribePath + '?emailaddress=' + email + '&action=unsubscribe',
          contentType: 'application/json; charset=utf-8',
          dataType: 'json',
          type: 'GET',
          success: function (json) {
            if (json.processed) {

            } else {

            }
          },
          error: function (thrownError) {

          }
        });
      });
    }

    function reject() {
      $form.hide();
      $errorMsg.show();

      $('#tryAgain', $errorMsg).bind('click', function (e) {
        e.preventDefault();
        $errorMsg.hide();
        $input.val('');
        $form.show();
        $input.focus();
        $('#tryAgain', $confirmMsg).unbind('click');
      });
    }

    if (validateEmail(email)) {
      $.ajax({
        url: root + subscribePath + '?emailaddress=' + email + '&action=subscribe',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        type: "GET",
        success: function (json) {
          if (json.processed) {
            accept();
          } else {
            reject();
          }
        },
        error: function (thrownError) {
          reject();
        }
      });
    } else {
      reject();
    }
  });

  function validateEmail(str) {
    if (/(.+)@(.+){2,}\.(.+){2,}/.test(str)) {
      return true;
    } else {
      return false;
    }
  }
} // end initNewsletter()

/*
  Method to initialize event level language select.
*/
function initEventLangSelect() {
  function addFlags(opt) {
    var $el = $(opt.element);
    var src = $el.data('flag');

    if (typeof src === 'undefined') {
      var firstSrc = $('.eventLangSelect option:eq(0)').attr('data-flag');
      if (typeof firstSrc !== 'undefined') {
        src = firstSrc;
      } else {
        return '<span class="flagSpacer"></span>' + opt.text;
      }
    }
    return '<img class="flag" src="' + src + '"/>' + opt.text;
  }

  // $('#eventLangSelect option').removeAttr('data-flag');
  $('.eventLangSelect').select2({
    dropdownCssClass: 'eventLang',
    formatResult: addFlags,
    formatSelection: addFlags
  }).bind('change', function (e) {
    var url = $('option:selected', this).attr('data-url');
    document.location = url;
  });
} // end initEventLangSelect()

/**
 * Prompt user to view page in their native language.
 */
function initLanguageAlert() {
  var handlerURL, modalHTML;
  // If the user has already seen the popup
  if (jCore.readCookie('languageMessageShown') !== false) {
    // Bail
    return;
  }
  if ($('.langSelect').length && typeof availableLanguages !== 'undefined' && typeof pageId !== 'undefined') {
    handlerURL = '/handlers/getlanguagepopup.aspx';
    if (typeof currentLanguage !== 'undefined') {
      handlerURL = '/' + currentLanguage + handlerURL;
    }
    $.getJSON(
      handlerURL, {
        i: pageId,
        seed: (new Date()).getTime()
      },
      function (data) {
        if ($.inArray(data.DefaultLanguage, availableLanguages) > -1 && data.ErrorMessage === null) {
          // Write the cookie so the user doesn't get asked again
          jCore.writeCookie('languageMessageShown', 'true', false);
          modalHTML = '<div class="language-message">' + data.Message + '</div>';
          modalHTML += '<p><a class="btn btn-ok" href="' + data.Url + '">' + data.confirmText + '</a> <a class="btn btn-cancel" onClick="javascript:$.fancybox.close();">' + data.dismissText + '</a></p>';
          $.fancybox({
            autoHeight: true,
            autoSize: false,
            closeBtn: false,
            closeEffect: 'none',
            content: modalHTML,
            openEffect: 'none',
            padding: 25,
            type: 'html',
            width: 660,
            wrapCSS: 'language-prompt'
          });
        }
      }
    );
  }
}

/*
  Method to track specific links with analytics calls.
*/
function initLinkTracking() {

  // view all sponsor link handler
  $('.sponsorGrid .viewAllLink').click(function (e) {
    e.preventDefault();

    // console.log(['_trackEvent', 'Sponsors', 'view all']);
    _gaq.push(['_trackEvent', 'Sponsors', 'view all']);
    setTimeout('document.location = "' + $(this).attr("href") + '"', 200);
  });

  // store links
  $('a[href*="ironmanstore.com"]').click(function (e) {
    e.preventDefault();

    var link_url = $(this).attr('href');
    var site_category = 'IRONMAN Store';

    track_outbound_link(site_category, link_url);
  });

  // domains not considered external
  var excludeList = '[href*="ironmanstore.com"], [href*="ironman.com"], [href*="ironman.digitaria.com"], [href*="facebook.com"], [href*="twitter.com"], [href*="youtube.com"], [href*="plus.google.com"], [href^="#"]';
  // external links (excluding store)
  $('a').not(excludeList).click(function (e) {
    e.preventDefault();

    var link_url = $(this).attr('href');
    var site_category = 'External Site';
    var link_target = ($(this).attr('target') === '_blank') ? '_blank' : '';

    track_outbound_link(site_category, link_url, link_target);
  });

  // facebook outgoing
  $('a[href*="facebook.com"]').click(function (e) {
    e.preventDefault();

    var $target = $(this);
    var link_url = $target.attr('href');
    var site_category = 'Facebook';

    if ($target.hasClass('socialpopup')) {
      track_social_share(site_category, link_url);
    } else {
      track_social_link(site_category, link_url);
    }
  });

  // twitter outgoing
  $('a[href*="twitter.com"]').click(function (e) {
    e.preventDefault();

    var $target = $(this);
    var link_url = $target.attr('href');
    var site_category = 'Twitter';

    if ($target.hasClass('socialpopup')) {
      track_social_share(site_category, link_url);
    } else {
      track_social_link(site_category, link_url);
    }
  });

  // youtube outgoing
  $('a[href*="youtube.com"]').click(function (e) {
    e.preventDefault();

    var $target = $(this);
    var link_url = $target.attr('href');
    var site_category = 'YouTube';

    if ($target.hasClass('socialpopup')) {
      track_social_share(site_category, link_url);
    } else {
      track_social_link(site_category, link_url);
    }
  });

  // google+ outgoing
  $('a[href*="plus.google.com"]').click(function (e) {
    e.preventDefault();

    var $target = $(this);
    var link_url = $target.attr('href');
    var site_category = 'Google+';

    if ($target.hasClass('socialpopup')) {
      track_social_share(site_category, link_url);
    } else {
      track_social_link(site_category, link_url);
    }
  });

  function track_outbound_link(site_category, link_url, link_target) {
    // console.log(['_trackEvent', 'Outbound', site_category, link_url]);
    _gaq.push(['_trackEvent', 'Outbound', site_category, link_url]);
    if (link_target !== '_blank') {
      setTimeout('document.location = "' + link_url + '"', 200);
    } else {
      setTimeout(function () {
        window.open(link_url, '_blank');
        window.focus();
      }, 200);
    }
  }

  function track_social_link(site_category, link_url) {
    // console.log(['_trackEvent', 'Outbound', 'social', site_category]);

    _gaq.push(['_trackEvent', 'Outbound', 'social', site_category]);
    setTimeout('document.location = "' + link_url + '"', 200);
  }

  var width = 700;
  var height = 450;
  var left = ($(window).width() - width) / 2 + 200;
  var top = ($(window).height() - height) / 2;

  function track_social_share(site_category, link_url) {
    // console.log(['_trackSocial', site_category, 'share']);
    _gaq.push(['_trackSocial', site_category, 'share']);
    window.open(link_url, 'share', ['status=1,width=', width, ',height=', height, ',top=', top, ',left=', left].join(''));
  }
}

function initFormTracking() {
  // header site search
  $('#siteSearchForm').bind('submit', function (e) {
    e.preventDefault();

    var $form = $(this);
    var term = $('input', $form).val();

    _gaq.push(['_trackPageview', '/search_results.html?q=' + term + '&cat=site']);
    // console.log([ '_trackPageview', '/search_results.html?q=' + term + '&cat=site' ]);

    $('#siteSearchForm').unbind('submit');
    setTimeout(function () {
      $form.submit();
    }, 200);
  });

}

function initLiveIndicator() {
  function toggle() {
    $el.toggleClass('highlight');
  }

  var $el = $('.liveIndicator');
  setInterval(toggle, 1500);
}

function fixIOSHover() {
  // iOS hover fix
  if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
    $('.siteNav .withDropdown > a').bind('click', function (e) {
      e.preventDefault();
      return false;
    });

    $('.siteNav .withDropdown .subNavWrapper a, .subPageSubNav li a').bind('touchend', function (e) {
      // console.log('touch end')
      document.location = $(this).attr('href');
    });

    $('html').addClass('isIOS');
    // console.log('ios');
  } else {
    // console.log('notios')
    $('html').addClass('notIOS');
  }
}

function fixIE() {
  if ($.browser.msie && parseInt($.browser.version, 10) === 8) {
    $('.eventDescription:last-child').addClass('useBackdrop');
  }
}

// Parse hash to create key/value pairs
// example of a hash: #register=true&fbuid={1}&fname={2}&lname={3}&email={4}
function parseHash(hash) {
  var result = {};

  hash.replace(/\#?(?:([^=]+)=([^&]*)&?)/g, function () {
    function decode(s) {
      return decodeURIComponent(s).replace(/\+/g, ' ');
    }
    result[decode(arguments[1])] = decode(arguments[2]);
  });

  return result;
}

/**
 * Load into $target, the JSON from url,
 * processed through handlebarsTemplate.
 *
 * @returns {undefined}
 * @param {jQueryElement} $target The target to write the output to.
 * @param {string} url The url to load. Should include ?params
 * @param {function} handlebarsTemplate The precompiled handlebars template.
 * @param {function} success Success callback.
 *
 * @author Nick Davison
 */
function loadJSONIntoHandlebars($target, url, handlebarsTemplate, success) {
  'use strict';
  $target = jQuery($target);
  if ($target.length === 0) {
    console.log('Error in loadJSONIntoHandlebars');
    console.log('Unable to find $target');
    console.log('$target', $target);
    console.log('url', url);
    console.log('handlebarsTemplate', handlebarsTemplate);
    return;
  }
  if (typeof handlebarsTemplate === undefined) {
    console.log('Error in loadJSONIntoHandlebars');
    console.log('handlebarsTemplate is undefined');
    console.log('$target', $target);
    console.log('url', url);
    console.log('handlebarsTemplate', handlebarsTemplate);
    return;
  }
  jQuery.ajax({
    url: url,
    dataType: 'json',
    success: function (data) {
      var html;
      try {
        html = handlebarsTemplate(data);
        $target.html(html);
        if (success !== undefined) {
          success();
        }
      } catch (e) {
        console.log('Error in loadJSONIntoHandlebars');
        console.log(e);
        console.log('data', data);
        console.log('$target', $target);
        console.log('url', url);
        console.log('handlebarsTemplate', handlebarsTemplate);
      }
    },
    error: function (jqXHR, textStatus, errorThrown) {
      console.log('Error in loadJSONIntoHandlebars');
      console.log('Unable to load json');
      console.log('jqXHR', jqXHR);
      console.log('textStatus', textStatus);
      console.log('errorThrown', errorThrown);
      console.log('$target', $target);
      console.log('url', url);
      console.log('handlebarsTemplate', handlebarsTemplate);
    }
  });
}

function getUrlParam(urlStr, param) {
  param = param.replace(/[\[]/, '\\\[').replace(/[\]]/, '\\\]');
  var regexS = '[\\?&]' + param + '=([^&#]*)';
  var regex = new RegExp(regexS);
  var results = regex.exec(urlStr);

  if (results === null) {
    return '';
  } else {
    return results[1];
  }
}

function initRankingTable() {
  // click event handler for table row. opens/closes details
  if ($('.results-athletes-ranking-table, .results-triclub-ranking-table').length) {
    $('.results-athletes-ranking-table, .results-triclub-ranking-table').delegate('tr.odd, tr.even', 'click', function () {
      if ($(this).next().is(':hidden')) {
        $('.results-athletes-ranking-table, .results-triclub-ranking-table').find('tr.more').hide();
        $(this).next().show();
      } else {
        $('.results-athletes-ranking-table, .results-triclub-ranking-table').find('tr.more').hide();
      }
    });

    $('.results-athletes-ranking-table, .results-triclub-ranking-table').find('.more .close').click(function () {
      $(this).parents('tr.more').hide();
      $(this).parents('tr.more').find('.even-more').removeClass('even-more');
    });
  }

  // adds odd/even classes to table rows
  if ($('.results-athletes-table, .results-triclub-table').length) {
    $('.results-athletes-table, .results-triclub-table')
      .not('.results-athletes-ranking-table, .results-triclub-ranking-table')
      .find('table').each(function () {
        $('tr:even', this).addClass('even');
        $('tr:odd', this).addClass('odd');
      });

    $('.results-triclub-ranking-table .moreResults').each(function () {
      $('.resultSet:even', this).addClass('even');
      $('.resultSet:odd', this).addClass('odd');
    });
  }

  // opens table row if 'id' param exists
  if (getUrlParam($(location).attr('href'), 'id') !== '') {
    var id = getUrlParam($(location).attr('href'), 'id');
    var $tr = $('tr[data-id="' + id + '"]');
    $tr.click();
  }

  // more results button for triclubs
  $('.results-triclub-ranking-table .more-wrapper').each(function () {
    var $wrapper = jQuery(this);
    $wrapper.find('.viewAll').click(function (e) {
      var $this = jQuery(this);
      e.preventDefault();
      // Add the even-more class that displays the more region
      $wrapper.addClass('even-more');
      // Ensure Handlebars is present
      if (Digi === undefined) {
        console.log('Digi Handlebars is not present.');
        return;
      }
      if (Digi.Templates === undefined) {
        console.log('Digi.Templates is undefined');
        return;
      }
      if (Digi.Templates.triclub_results === undefined) {
        console.log('Digi.Templates.triclub_results is undefined');
        return;
      }
      // Load the JSON and process it.
      loadJSONIntoHandlebars(
        $wrapper.find('.moreResults'),
        $this.attr('href'),
        Digi.Templates.triclub_results,
        function () {
          // Add odd/even classes
          $wrapper.find('.moreResults .resultSet:even', this).addClass('even');
          $wrapper.find('.moreResults .resultSet:odd', this).addClass('odd');
        }
      );
    });
  });
}

function initResultsAndRankingFilterHandler() {
  if ($('.result-filter-submit').length) {
    $('.result-filter-submit').click(function (e) {
      var $form = $('#filterResultsForm');
      var $ageGroup = $('#categorySelect')[0];
      $('select > option:selected, input', $form).each(function () {
        if ($(this).val() === 'n/a' || $(this).val() === 'n%2Fa') {
          $(this).val('');
        }
      });

      if ($ageGroup) {
        if ($ageGroup.selectedIndex === 0) {
          e.preventDefault();
          alert('Please select a category.');
          return false;
        } else {
          $form.submit();
        }
      } else {
        $form.submit();
      }
    });
  }
}

function initInsertHomeLinkIcon() {
  if ($('.genericSubNav .linkHome').length) {
    $('.genericSubNav .linkHome').prepend('<span class="ss-icon">&#x2302;</span> ');
  }
}

function initSponsorGrid() {
  // position view all sponsor link if only one sponsor
  if ($('.sponsorGrid gridList li').length < 2) {
    $('.sponsorGrid .viewAllLink').css({
      float: 'left',
      clear: 'both'
    });
  }
}

function initRacesResults() {
  $('.rResultswWrap #raceResults').bxSlider({
    minSlides: 5,
    maxSlides: 5,
    mode: 'vertical',
    pager: false,
    infiniteLoop: false,
    prevText: '&#xF500;',
    nextText: '&#xF501;',
  });
}

function initAjaxPopUp(checkURL) {
  console.log(checkURL);
  $.ajax({
    type: 'GET',
    dataType: 'text',
    url: checkURL,
    success: function (data) {
      // console.log('data:' + data);
      if (data.indexOf('no bib number') !== -1) {
        // console.log('response - ' + data.indexOf('no bib number'));
        $('#inline').fancybox({
          wrapCSS: 'language-prompt pdfDownload',
          autoHeight: true,
          autoSize: false,
          closeEffect: 'none',
          padding: 25,
          width: 660
        }).trigger('click');
      }
    }
  });
}

/*
  Global document ready handler
*/
$(document).ready(function () {

  var b = $('body');

  // initialization calls
  initSubNavLayout();
  initUtilityMenu();
  initTabModules();
  initPhotoGallery();
  initNewsFeatureRotator();
  initNewsSecondaryRotator();
  initTweets();
  initNewsletter();
  // initLinkTracking();
  initFormTracking();
  initLiveIndicator();
  initSponsorGrid();
  initRacesResultsTable();
  // initAjaxPopUp();

  if ($('.rResultswWrap').length > 0) {
    initRacesResults();
  }

  // $('.selectBox').select2();

  //check to see if iframe is displayed results page
  if ($('.resultsIFrame').length) {
    initResultsModulesIframe();
  } else {
    initResultsModules();
  }

  initEventLangSelect();
  initLanguageAlert();
  initGenericSelects();
  initMoreRacesPopup();
  initVideoModal();
  initRankingTable();
  initStartTrainingModule();
  initResultsAndRankingFilterHandler();
  initInsertHomeLinkIcon();

  if (b.hasClass('layoutHome')) {
    initFullFeature();
    initHomeTabs();
    callHomeTabModules();
  } else if ($('.fullFeatureRotator').length) {
    initFullFeature();
  }

  // bypass subnavs on iOS
  fixIOSHover();

  // random ie fixes
  fixIE();

  // page specific initializing
  if (b.hasClass('ironmanHistory')) {
    initHistoryModules();
  }
  if (b.hasClass('altIronmanHistory')) {
    initHistoryModules();
  }
  if (b.hasClass('eventListing')) {
    initEventMap();
    scaleEventCardText();
    if ($('html').hasClass('notIOS')) {
      $('.eventFilter').sticky({
        topSpacing: 60
      });
      $('#mainContentCol5 .moduleWrap.adModule:eq(0)').sticky({
        topSpacing: 200
      });
    }
  }
  if (b.hasClass('search')) {
    initSearchModules();
  }
  if (b.hasClass('coverageLanding')) {
    initCoverageModules();
  }

  // Ironfan
  var Ironfan = new Digi.Ironfan();

}); // end ready();
/* ---------------------------------------- /includes/jsbin/livemap.shared.min.js ---------------------------------------- */
/*! Ironman - v0.0.1 - 10/07/2015 @ 7:18PM PDT */

if (this.Digi = this.Digi || {}, this.Digi.Templates = this.Digi.Templates || {}, 
this.Digi.Templates.athlete_infobox = Handlebars.template(function(a, b, c, d, e) {
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var f, g, h, i = "", j = "function", k = this.escapeExpression, l = c.helperMissing;
    return i += '<a href="#" data-id="', (g = c.id) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.id, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '" class="infoBoxAction infoBoxSeeDetailedProgress" ', g = c.debugField || b && b.debugField, 
    h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "id", b && b.id, h) : l.call(b, "debugField", "id", b && b.id, h), 
    (f || 0 === f) && (i += f), i += ">", f = b && b.localized, f = null == f || f === !1 ? f : f.infoBox, 
    f = null == f || f === !1 ? f : f.seeDetailedProgress, f = typeof f === j ? f.apply(b) : f, 
    (f || 0 === f) && (i += f), i += '</a>\n\n<a href="mailto:?subject=', g = c.encodeURIComponent || b && b.encodeURIComponent, 
    h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "Follow On IronFan", h) : l.call(b, "encodeURIComponent", "Follow On IronFan", h), 
    (f || 0 === f) && (i += f), i += "&body=", g = c.encodeURIComponent || b && b.encodeURIComponent, 
    h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "You can follow in real time on IronFan's map here ", h) : l.call(b, "encodeURIComponent", "You can follow in real time on IronFan's map here ", h), 
    (f || 0 === f) && (i += f), g = c.athleteOnMapURLEscaped || b && b.athleteOnMapURLEscaped, 
    h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, b && b.id, h) : l.call(b, "athleteOnMapURLEscaped", b && b.id, h), 
    (f || 0 === f) && (i += f), i += '" target="_blank" data-id="', (g = c.id) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.id, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '" class="infoBoxAction infoBoxShareProgress">', f = b && b.localized, 
    f = null == f || f === !1 ? f : f.infoBox, f = null == f || f === !1 ? f : f.shareProgress, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</a>\n\n<a href="?l=', 
    (g = c.id) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.id, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '" target="_blank" data-id="', (g = c.id) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.id, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '" class="infoBoxAction infoBoxGetEmailUpdates">', f = b && b.localized, 
    f = null == f || f === !1 ? f : f.infoBox, f = null == f || f === !1 ? f : f.getEmailUpdates, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</a>\n\n<a href="?l=', 
    (g = c.id) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.id, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '" target="_blank" data-id="', (g = c.id) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.id, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '" class="infoBoxAction infoBoxGetSMSUpdates">', f = b && b.localized, 
    f = null == f || f === !1 ? f : f.infoBox, f = null == f || f === !1 ? f : f.getSMSUpdates, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += "</a>";
}), this.Digi.Templates.athlete_leader_summary = Handlebars.template(function(a, b, c, d, e) {
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var f, g, h, i = "", j = c.helperMissing, k = this.escapeExpression, l = "function";
    return i += '<!-- Start: Athlete Leader Summary -->\n<div class="athleteLeaderSummary" ', 
    g = c.debug || b && b.debug, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "scope", b, h) : j.call(b, "debug", "scope", b, h), (f || 0 === f) && (i += f), 
    i += '>\n	<!-- Start: Primary -->\n	<div class="primary">\n		<div class="gender" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "Gender", b && b.fullGender, h) : j.call(b, "debugField", "Gender", b && b.fullGender, h), 
    (f || 0 === f) && (i += f), i += ">" + k((g = c.fullGender || b && b.fullGender, 
    h = {
        hash: {},
        data: e
    }, g ? g.call(b, b && b.Gender, h) : j.call(b, "fullGender", b && b.Gender, h))) + " ", 
    f = b && b.localized, f = null == f || f === !1 ? f : f.leaderSummary, f = null == f || f === !1 ? f : f.leader, 
    f = typeof f === l ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n		<div class="name">', 
    (g = c.FirstName) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.FirstName, f = typeof g === l ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + " ", (g = c.LastName) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.LastName, f = typeof g === l ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '</div>\n	</div>\n	<!-- End: Primary -->\n\n	<!-- Start: Secondary -->\n	<div class="secondary">\n\n		<!-- Start: Field - Country -->\n		<div class="field country">\n			<div class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.leaderSummary, f = null == f || f === !1 ? f : f.country, 
    f = typeof f === l ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n			<div class="value" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "IsoCountry", b && b.IsoCountry, h) : j.call(b, "debugField", "IsoCountry", b && b.IsoCountry, h), 
    (f || 0 === f) && (i += f), i += ">", (g = c.IsoCountry) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.IsoCountry, f = typeof g === l ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '</div>\n		</div>\n		<!-- End: Field - Country -->\n\n		<!-- Start: Field - Time -->\n		<div class="field time">\n			<div class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.leaderSummary, f = null == f || f === !1 ? f : f.time, 
    f = typeof f === l ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n			<div class="value" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "RaceTime", b && b.SplitTime, h) : j.call(b, "debugField", "RaceTime", b && b.SplitTime, h), 
    (f || 0 === f) && (i += f), i += ">" + k((g = c.durationNoIdentifiers || b && b.durationNoIdentifiers, 
    h = {
        hash: {},
        data: e
    }, g ? g.call(b, b && b.RaceTime, h) : j.call(b, "durationNoIdentifiers", b && b.RaceTime, h))) + '</div>\n		</div>\n		<!-- End: Field - Time -->\n\n		<!-- Start: Field - Position -->\n		<div class="field position">\n			<div class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.leaderSummary, f = null == f || f === !1 ? f : f.position, 
    f = typeof f === l ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n			<div class="value" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "SplitType", b && b.SplitType, h) : j.call(b, "debugField", "SplitType", b && b.SplitType, h), 
    (f || 0 === f) && (i += f), i += ">", (g = c.SplitType) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.SplitType, f = typeof g === l ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + "</div>\n		</div>\n		<!-- End: Field - Position -->\n\n	</div>\n	<!-- End: Secondary -->\n</div>\n<!-- End: Athlete Leader Summary -->";
}), this.Digi.Templates.athlete_summary = Handlebars.template(function(a, b, c, d, e) {
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var f, g, h, i = "", j = "function", k = this.escapeExpression, l = c.helperMissing;
    return i += '<!-- Start: Athlete Summary -->\n<div class="athleteSummary" data-id="', 
    (g = c.id) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.id, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '" ', g = c.debug || b && b.debug, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "scope", b, h) : l.call(b, "debug", "scope", b, h), (f || 0 === f) && (i += f), 
    i += '>\n	<!-- Start: Primary -->\n	<div class="primary">\n		<div class="pin" style="background-color: ', 
    (g = c.color) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.color, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '">' + k((g = c.firstChar || b && b.firstChar, h = {
        hash: {},
        data: e
    }, g ? g.call(b, b && b.FirstName, h) : l.call(b, "firstChar", b && b.FirstName, h))) + k((g = c.firstChar || b && b.firstChar, 
    h = {
        hash: {},
        data: e
    }, g ? g.call(b, b && b.LastName, h) : l.call(b, "firstChar", b && b.LastName, h))) + '</div>\n		<div class="name" title="', 
    (g = c.FirstName) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.FirstName, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + " ", (g = c.LastName) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.LastName, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '">\n			<span class="firstName" ', g = c.debugField || b && b.debugField, 
    h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "FirstName", b && b.FirstName, h) : l.call(b, "debugField", "FirstName", b && b.FirstName, h), 
    (f || 0 === f) && (i += f), i += ">", (g = c.FirstName) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.FirstName, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '</span>\n			<span class="lastName" ', g = c.debugField || b && b.debugField, 
    h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "LastName", b && b.LastName, h) : l.call(b, "debugField", "LastName", b && b.LastName, h), 
    (f || 0 === f) && (i += f), i += ">", (g = c.LastName) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.LastName, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '</span>\n		</div>\n		<div class="bib">\n			<span class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.bib, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += ':</span>\n			<span class="value" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "BibNumber", b && b.BibNumber, h) : l.call(b, "debugField", "BibNumber", b && b.BibNumber, h), 
    (f || 0 === f) && (i += f), i += ">", (g = c.BibNumber) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.BibNumber, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '</span>\n		</div>\n	</div>\n	<!-- End: Primary -->\n\n	<!-- Start: Secondary -->\n	<div class="secondary">\n\n		<!-- Start: Field - Country -->\n		<div class="field country">\n			<div class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.country, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n			<div class="value" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "IsoCountry", b && b.IsoCountry, h) : l.call(b, "debugField", "IsoCountry", b && b.IsoCountry, h), 
    (f || 0 === f) && (i += f), i += ">", (g = c.IsoCountry) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.IsoCountry, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '</div>\n		</div>\n		<!-- End: Field - Country -->\n\n		<!-- Start: Field - Group -->\n		<div class="field group">\n			<div class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.ageGroup, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n			<div class="value" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "AgeGroup", b && b.AgeGroup, h) : l.call(b, "debugField", "AgeGroup", b && b.AgeGroup, h), 
    (f || 0 === f) && (i += f), i += ">", (g = c.AgeGroup) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.AgeGroup, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '</div>\n		</div>\n		<!-- End: Field - Group -->\n\n		<!-- Start: Field - Distance -->\n		<div class="field distance">\n			<div class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.approxDistance, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n			<div class="value">\n				<span class="latestSplitType" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "LatestSplitType", b && b.LatestSplitType, h) : l.call(b, "debugField", "LatestSplitType", b && b.LatestSplitType, h), 
    (f || 0 === f) && (i += f), i += ">", (g = c.LatestSplitType) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.LatestSplitType, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + "</span>\n				" + k((f = b && b.localized, f = null == f || f === !1 ? f : f.summary, 
    f = null == f || f === !1 ? f : f.after, typeof f === j ? f.apply(b) : f)) + '\n				<span class="distanceFromSplitStart gpsDisciplineDistance" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "GpsDisciplineDistance", b && b.GpsDisciplineDistance, h) : l.call(b, "debugField", "GpsDisciplineDistance", b && b.GpsDisciplineDistance, h), 
    (f || 0 === f) && (i += f), i += ">" + k((g = c.mToLargeUnits || b && b.mToLargeUnits, 
    h = {
        hash: {},
        data: e
    }, g ? g.call(b, b && b.GpsDisciplineDistance, 1e3, h) : l.call(b, "mToLargeUnits", b && b.GpsDisciplineDistance, 1e3, h))) + '</span>\n        <abbr title="', 
    (g = c.largeUnits) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.largeUnits, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + " " + k((f = b && b.localized, f = null == f || f === !1 ? f : f.summary, 
    f = null == f || f === !1 ? f : f.approximate, typeof f === j ? f.apply(b) : f)) + '">', 
    (g = c.largeUnitsShort) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.largeUnitsShort, f = typeof g === j ? g.call(b, {
        hash: {},
        data: e
    }) : g), i += k(f) + '*</abbr>\n			</div>\n		</div>\n		<!-- End: Field - Distance -->\n\n		<!-- Start: Field - Pace -->\n		<div class="field pace">\n			<div class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.approxPace, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n			<div class="value" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "LatestSplitPaceSI or LatestSplitPaceEN", b && b.LatestSplitPaceSI, h) : l.call(b, "debugField", "LatestSplitPaceSI or LatestSplitPaceEN", b && b.LatestSplitPaceSI, h), 
    (f || 0 === f) && (i += f), i += ">\n				" + k((g = c.metricOrImperial || b && b.metricOrImperial, 
    h = {
        hash: {},
        data: e
    }, g ? g.call(b, b && b.LatestSplitPaceSI, b && b.LatestSplitPaceEN, h) : l.call(b, "metricOrImperial", b && b.LatestSplitPaceSI, b && b.LatestSplitPaceEN, h))) + '\n			</div>\n		</div>\n		<!-- End: Field - Pace -->\n\n		<!-- Start: Field - Finish -->\n		<div class="field finish">\n			<div class="title">', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.estFinish, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</div>\n			<div class="value" ', 
    g = c.debugField || b && b.debugField, h = {
        hash: {},
        data: e
    }, f = g ? g.call(b, "FinishTime", b && b.FinishTime, h) : l.call(b, "debugField", "FinishTime", b && b.FinishTime, h), 
    (f || 0 === f) && (i += f), i += ">\n				" + k((g = c.durationNoIdentifiers || b && b.durationNoIdentifiers, 
    h = {
        hash: {},
        data: e
    }, g ? g.call(b, b && b.FinishTime, h) : l.call(b, "durationNoIdentifiers", b && b.FinishTime, h))) + ' <abbr title="' + k((f = b && b.localized, 
    f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.approximate, 
    typeof f === j ? f.apply(b) : f)) + '">*</abbr>\n			</div>\n		</div>\n		<!-- End: Field - Finish -->\n\n	</div>\n	<!-- End: Secondary -->\n\n	<!-- Start: Tertiary -->\n	<div class="tertiary">\n		<div class="expand">\n			<a href="#" title="View More Details"><span>', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.viewMoreDetails, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += '</span></a>\n		</div>\n		<div class="collapse">\n			<a href="#" title="Close Details"><span>', 
    f = b && b.localized, f = null == f || f === !1 ? f : f.summary, f = null == f || f === !1 ? f : f.closeDetails, 
    f = typeof f === j ? f.apply(b) : f, (f || 0 === f) && (i += f), i += "</span></a>\n		</div>\n	</div>\n	<!-- End: Tertiary -->\n</div>\n<!-- End: Athlete Summary -->";
}), this.Digi.Templates.form_email = Handlebars.template(function(a, b, c, d, e) {
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var f, g, h = "", i = "function", j = this.escapeExpression;
    return h += '<form action="?" method="POST">\n	<input type="hidden" name="c" value="', 
    (g = c.ContactId) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.ContactId, f = typeof g === i ? g.call(b, {
        hash: {},
        data: e
    }) : g), h += j(f) + '" />\n	<input type="hidden" name="l" value="', (g = c.LiveResultId) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.LiveResultId, f = typeof g === i ? g.call(b, {
        hash: {},
        data: e
    }) : g), h += j(f) + '" />\n\n	<h2>Email Notifications</h2>\n\n	<p class="preamble">\n		Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.\n	</p>\n\n	<div class="field firstName">\n		<label for="formTextFirstName">First Name</label>\n		<input type="text" id="formTextFirstName" name="firstName" pattern="\\w+" placeholder="" />\n	</div>\n\n	<div class="field lastName">\n		<label for="formTextLastName">Last Name</label>\n		<input type="text" id="formTextLastName" name="lastName" pattern="\\w+" placeholder="" />\n	</div>\n\n	<div class="field email">\n		<label for="formTextEmail">Email Address</label>\n		<input type="text" id="formTextEmail" name="email" pattern="[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\\.[a-zA-Z]{2,4}" placeholder="my.name@provider.com" />\n	</div>\n\n	<p class="legal">\n		Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.\n	</p>\n\n	<div class="submit">\n		<input type="submit" value="Submit" />\n	</div>\n</form>';
}), this.Digi.Templates.form_text = Handlebars.template(function(a, b, c, d, e) {
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var f, g, h = "", i = "function", j = this.escapeExpression;
    return h += '<form action="?" method="POST">\n	<input type="hidden" name="c" value="', 
    (g = c.ContactId) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.ContactId, f = typeof g === i ? g.call(b, {
        hash: {},
        data: e
    }) : g), h += j(f) + '" />\n	<input type="hidden" name="l" value="', (g = c.LiveResultId) ? f = g.call(b, {
        hash: {},
        data: e
    }) : (g = b && b.LiveResultId, f = typeof g === i ? g.call(b, {
        hash: {},
        data: e
    }) : g), h += j(f) + '" />\n\n	<h2>Text Notifications</h2>\n\n	<p class="preamble">\n		Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.\n	</p>\n\n	<div class="field firstName">\n		<label for="formTextFirstName">First Name</label>\n		<input type="text" id="formTextFirstName" name="firstName" pattern="\\w+" placeholder="" />\n	</div>\n\n	<div class="field lastName">\n		<label for="formTextLastName">Last Name</label>\n		<input type="text" id="formTextLastName" name="lastName" pattern="\\w+" placeholder="" />\n	</div>\n\n	<div class="field phone">\n		<label for="formTextPhone">Phone Number</label>\n		<input type="text" id="formTextPhone" name="phone" pattern="\\d{3}.*\\d{3}.*\\d{4}" placeholder="(xxx) - xxx - xxxx" />\n	</div>\n\n	<div class="field provider">\n		<label for="formTextProvider">Provider</label>\n		<select id="formTextProvider" name="provider">\n			<option value="att">AT&amp;T</option>\n			<option value="sprint">Sprint</option>\n			<option value="tmobile">T-Mobile</option>\n			<option value="verizon">Verizon</option>\n			<option value="other">Other</option>\n		</select>\n	</div>\n\n	<div class="submit">\n		<input type="submit" value="Submit" />\n	</div>\n</form>';
}), this.Digi.Templates.leaderboard_athlete_progress = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        var d, e, f, g = "";
        return g += '\n            <img class="profileImg" ', e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "ProfileImagePath", a && a.ProfileImagePath, f) : s.call(a, "debugField", "ProfileImagePath", a && a.ProfileImagePath, f), 
        (d || 0 === d) && (g += d), g += ' src="', (e = c.ProfileImagePath) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.ProfileImagePath, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + '" width="100" alt="">\n          ';
    }
    function g(a, b) {
        var d, e, f, g = "";
        return g += '\n            <img class="profileImg" ', e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "ProfileImagePath", a && a.ProfileImagePath, f) : s.call(a, "debugField", "ProfileImagePath", a && a.ProfileImagePath, f), 
        (d || 0 === d) && (g += d), g += ' src="/Media/profile.jpg" width="100" alt="">\n          ';
    }
    function h(a, b) {
        var d, e, f, g = "";
        return g += '\n              <div class="description-seperate" ', e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "AwaStatus", a && a.AwaStatus, f) : s.call(a, "debugField", "AwaStatus", a && a.AwaStatus, f), 
        (d || 0 === d) && (g += d), g += '><span class="header">All World Athlete</span> ', 
        (e = c.AwaStatus) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.AwaStatus, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + "</div>\n            ";
    }
    function i(a, b) {
        var d, e, f = "";
        return f += "\n          ", d = c["if"].call(a, a && a.IsComplete, {
            hash: {},
            inverse: v.program(10, k, b),
            fn: v.program(8, j, b),
            data: b
        }), (d || 0 === d) && (f += d), f += '\n          <tr class="more-info">\n            <td colspan="5">\n                <div class="more-info-wrapper">\n                    <table class="more-info-expanded">\n                        <thead>\n                            <tr>\n                                <th>', 
        (e = c.largeUnitsShort) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.largeUnitsShort, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += u(d) + "</th>\n                                <th>Split Time</th>\n                                <th>Pace</th>\n                                <th>Race Time</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ", 
        d = c.each.call(a, a && a.SplitList, {
            hash: {},
            inverse: v.noop,
            fn: v.program(15, n, b),
            data: b
        }), (d || 0 === d) && (f += d), f += "\n                        </tbody>\n                    </table>\n                </div>\n            </td>\n          </tr>\n        ";
    }
    function j(a, b) {
        var d, e, f, g = "";
        return g += '\n            <!-- Segment Is Complete -->\n            <tr class="segmentListRow">\n              <td class="title"><div class="event_icon event_icon-' + u((e = c.toLowerCase || a && a.toLowerCase, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.SegmentType, f) : s.call(a, "toLowerCase", a && a.SegmentType, f))) + '">', 
        (e = c.SegmentType) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.SegmentType, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + "</div></td>\n              <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Time", a && a.Time, f) : s.call(a, "debugField", "Time", a && a.Time, f), 
        (d || 0 === d) && (g += d), g += ">" + u((e = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.Time, !0, f) : s.call(a, "durationNoIdentifiers", a && a.Time, !0, f))) + "</td>\n              <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "AveragePaceSI", a && a.AveragePaceSI, f) : s.call(a, "debugField", "AveragePaceSI", a && a.AveragePaceSI, f), 
        (d || 0 === d) && (g += d), g += ">" + u((e = c.metricOrImperial || a && a.metricOrImperial, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.AveragePaceSI, a && a.AveragePaceEN, f) : s.call(a, "metricOrImperial", a && a.AveragePaceSI, a && a.AveragePaceEN, f))) + "</td>\n              <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "ProgressPercent", a && a.ProgressPercent, f) : s.call(a, "debugField", "ProgressPercent", a && a.ProgressPercent, f), 
        (d || 0 === d) && (g += d), g += ">" + u((e = c.progressBar || a && a.progressBar, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.ProgressPercent, f) : s.call(a, "progressBar", a && a.ProgressPercent, f))) + " (" + u((e = c.mToLargeUnits || a && a.mToLargeUnits, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.ProgressDistance, 1e3, f) : s.call(a, "mToLargeUnits", a && a.ProgressDistance, 1e3, f))) + ')</td>\n              <td><a href="#" class="expand expandGroup">&#xF501;</a></td>\n            </tr>\n          ';
    }
    function k(a, b) {
        var d, e = "";
        return e += "\n            ", d = c["if"].call(a, a && a.IsInProgress, {
            hash: {},
            inverse: v.program(13, m, b),
            fn: v.program(11, l, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n          ";
    }
    function l(a, b) {
        var d, e, f, g = "";
        return g += '\n              <!-- Segment Is In Progress, Not Complete -->\n              <tr class="segmentListRow">\n                <td class="title"><div class="event_icon event_icon-' + u((e = c.toLowerCase || a && a.toLowerCase, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.SegmentType, f) : s.call(a, "toLowerCase", a && a.SegmentType, f))) + '">', 
        (e = c.SegmentType) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.SegmentType, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + "</div></td>\n                <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Time", a && a.Time, f) : s.call(a, "debugField", "Time", a && a.Time, f), 
        (d || 0 === d) && (g += d), g += ">In Progress</td>\n                <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "AveragePaceSI", a && a.AveragePaceSI, f) : s.call(a, "debugField", "AveragePaceSI", a && a.AveragePaceSI, f), 
        (d || 0 === d) && (g += d), g += ">---</td>\n                <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "ProgressPercent", a && a.ProgressPercent, f) : s.call(a, "debugField", "ProgressPercent", a && a.ProgressPercent, f), 
        (d || 0 === d) && (g += d), g += '>---</td>\n                <td><a href="#" class="expand expandGroup">&#xF501;</a></td>\n              </tr>\n            ';
    }
    function m(a, b) {
        var d, e, f, g = "";
        return g += '\n              <!-- Segment Had Not Started Yet -->\n              <tr class="segmentListRow">\n                <td class="title"><div class="event_icon event_icon-' + u((e = c.toLowerCase || a && a.toLowerCase, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.SegmentType, f) : s.call(a, "toLowerCase", a && a.SegmentType, f))) + '">', 
        (e = c.SegmentType) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.SegmentType, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + "</div></td>\n                <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Time", a && a.Time, f) : s.call(a, "debugField", "Time", a && a.Time, f), 
        (d || 0 === d) && (g += d), g += ">---</td>\n                <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "AveragePaceSI", a && a.AveragePaceSI, f) : s.call(a, "debugField", "AveragePaceSI", a && a.AveragePaceSI, f), 
        (d || 0 === d) && (g += d), g += ">---</td>\n                <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "ProgressPercent", a && a.ProgressPercent, f) : s.call(a, "debugField", "ProgressPercent", a && a.ProgressPercent, f), 
        (d || 0 === d) && (g += d), g += '>---</td>\n                <td><a href="#" class="expand expandGroup">&#xF501;</a></td>\n              </tr>\n            ';
    }
    function n(a, b) {
        var d, e, f, g = "";
        return g += "\n                                <tr>\n                                  <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Distance", a && a.Distance, f) : s.call(a, "debugField", "Distance", a && a.Distance, f), 
        (d || 0 === d) && (g += d), g += ">" + u((e = c.mToLargeUnits || a && a.mToLargeUnits, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.Distance, f) : s.call(a, "mToLargeUnits", a && a.Distance, f))) + "</td>\n                                  <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "SplitTime", a && a.SplitTime, f) : s.call(a, "debugField", "SplitTime", a && a.SplitTime, f), 
        (d || 0 === d) && (g += d), g += ">" + u((e = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.SplitTime, !0, f) : s.call(a, "durationNoIdentifiers", a && a.SplitTime, !0, f))) + "</td>\n                                  <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "PaceSI", a && a.PaceSI, f) : s.call(a, "debugField", "PaceSI", a && a.PaceSI, f), 
        (d || 0 === d) && (g += d), g += ">" + u((e = c.metricOrImperial || a && a.metricOrImperial, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.PaceSI, a && a.PaceEN, f) : s.call(a, "metricOrImperial", a && a.PaceSI, a && a.PaceEN, f))) + "</td>\n                                  <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "RaceTime", a && a.RaceTime, f) : s.call(a, "debugField", "RaceTime", a && a.RaceTime, f), 
        (d || 0 === d) && (g += d), g += ">" + u((e = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.RaceTime, !0, f) : s.call(a, "durationNoIdentifiers", a && a.RaceTime, !0, f))) + "</td>\n                                </tr>\n                            ";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var o, p, q, r = "", s = c.helperMissing, t = "function", u = this.escapeExpression, v = this;
    return r += "<tr ", p = c.debug || b && b.debug, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "scope", b, q) : s.call(b, "debug", "scope", b, q), (o || 0 === o) && (r += o), 
    r += ' class="more">\n  <td colspan=\'9\'>\n\n    <!-- Start: More Wrapper -->\n    <div class="more-wrapper athlete_summary">\n\n      <div class="main-close segment-close"><span class="ss-icon">&#x2421;</span></div>\n\n      <!-- Start: athlete_summary-topSection -->\n      <div class="athlete_summary-topSection">\n\n        <div class="athlete_information">\n          ', 
    o = c["if"].call(b, b && b.ProfileImagePath, {
        hash: {},
        inverse: v.program(3, g, e),
        fn: v.program(1, f, e),
        data: e
    }), (o || 0 === o) && (r += o), r += '\n          <div class="athlete_information-wrapper">\n            <div class="athlete_name">\n              ', 
    (p = c.FirstName) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.FirstName, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + " ", (p = c.LastName) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.LastName, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '\n              <img alt="" src="/Media/livemap/flags/' + u((p = c.toLowerCase || b && b.toLowerCase, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.IsoCountry, q) : s.call(b, "toLowerCase", b && b.IsoCountry, q))) + '.gif" class="icon-flag">\n              <div class="pin" style="background-color: ' + u((p = c.pinColor || b && b.pinColor, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.id, "#888888", q) : s.call(b, "pinColor", b && b.id, "#888888", q))) + '">' + u((p = c.firstChar || b && b.firstChar, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.FirstName, q) : s.call(b, "firstChar", b && b.FirstName, q))) + u((p = c.firstChar || b && b.firstChar, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.LastName, q) : s.call(b, "firstChar", b && b.LastName, q))) + '</div>\n            </div>\n            <div class="description" ', 
    p = c.debugField || b && b.debugField, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "BibNumber", b && b.BibNumber, q) : s.call(b, "debugField", "BibNumber", b && b.BibNumber, q), 
    (o || 0 === o) && (r += o), r += '><span class="header">Bib</span> ', (p = c.BibNumber) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.BibNumber, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '</div>\n            <div class="description" ', p = c.debugField || b && b.debugField, 
    q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "Gender", b && b.Gender, q) : s.call(b, "debugField", "Gender", b && b.Gender, q), 
    (o || 0 === o) && (r += o), r += '><span class="header">Sex</span> ', (p = c.Gender) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.Gender, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '</div>\n            <div class="description" ', p = c.debugField || b && b.debugField, 
    q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "Age", b && b.Age, q) : s.call(b, "debugField", "Age", b && b.Age, q), 
    (o || 0 === o) && (r += o), r += '><span class="header">Age</span> ', (p = c.Age) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.Age, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '</div>\n            <div class="description" ', p = c.debugField || b && b.debugField, 
    q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "AgeGroup", b && b.AgeGroup, q) : s.call(b, "debugField", "AgeGroup", b && b.AgeGroup, q), 
    (o || 0 === o) && (r += o), r += '><span class="header">Age Group</span> ', (p = c.AgeGroup) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.AgeGroup, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '</div>\n            <div class="description-seperate" ', p = c.debugField || b && b.debugField, 
    q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "Occupation", b && b.Occupation, q) : s.call(b, "debugField", "Occupation", b && b.Occupation, q), 
    (o || 0 === o) && (r += o), r += '><span class="header">Occupation</span> ', (p = c.Occupation) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.Occupation, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + "</div>\n            <!--\n            ", o = c["if"].call(b, b && b.AwaStatus, {
        hash: {},
        inverse: v.noop,
        fn: v.program(5, h, e),
        data: e
    }), (o || 0 === o) && (r += o), r += '\n            -->\n          </div>\n\n<!--          <div class="athlete_information-social">\n            <h3>Current Progress</h3>\n\n            <div class="share">\n              <a href="#" id="lmAthleteDetailsWindowControlsButtonShare"\n                class="addthis_button"\n                title="Share"\n                addthis:title="Follow On IronFan"\n                addthis:description="You can follow in real time on IronFan\'s map"\n                addthis:url="LEAVE BLANK">\n                Share\n              </a>\n            </div>\n\n            <div class="follow">\n              <a href="#" id="lmAthleteDetailsWindowControlsButtonFollow" title="Follow">Follow</a>\n            </div>\n\n            <div class="showOnMap"><a class="showMapLink" href="#mapArea">View On Map</a></div>\n\n          </div>\n-->\n\n\n        </div>\n\n        <div class="athlete_results">\n          <div class="athlete_results-wrapper">\n            <div class="header">Group Rank</div>\n            <div class="value" ', 
    p = c.debugField || b && b.debugField, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "GroupRank", b && b.GroupRank, q) : s.call(b, "debugField", "GroupRank", b && b.GroupRank, q), 
    (o || 0 === o) && (r += o), r += "><span ", p = c.debugField || b && b.debugField, 
    q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "GroupRank", b && b.GroupRank, q) : s.call(b, "debugField", "GroupRank", b && b.GroupRank, q), 
    (o || 0 === o) && (r += o), r += ">" + u((p = c.tripleDash || b && b.tripleDash, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.GroupRank, q) : s.call(b, "tripleDash", b && b.GroupRank, q))) + "</span> / <span ", 
    p = c.debugField || b && b.debugField, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "GroupRankTotal", b && b.GroupRankTotal, q) : s.call(b, "debugField", "GroupRankTotal", b && b.GroupRankTotal, q), 
    (o || 0 === o) && (r += o), r += ">", (p = c.GroupRankTotal) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.GroupRankTotal, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '</span></div>\n          </div>\n          <div class="athlete_results-wrapper">\n            <div class="header">Gender Rank</div>\n            <div class="value" ', 
    o = b && b.localized, o = null == o || o === !1 ? o : o.detailView, o = null == o || o === !1 ? o : o.genderRank, 
    o = typeof o === t ? o.apply(b) : o, (o || 0 === o) && (r += o), r += "><span ", 
    p = c.debugField || b && b.debugField, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "GenderRank", b && b.GenderRank, q) : s.call(b, "debugField", "GenderRank", b && b.GenderRank, q), 
    (o || 0 === o) && (r += o), r += ">" + u((p = c.tripleDash || b && b.tripleDash, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.GenderRank, q) : s.call(b, "tripleDash", b && b.GenderRank, q))) + "</span> / <span ", 
    p = c.debugField || b && b.debugField, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "GenderRankTotal", b && b.GenderRankTotal, q) : s.call(b, "debugField", "GenderRankTotal", b && b.GenderRankTotal, q), 
    (o || 0 === o) && (r += o), r += ">", (p = c.GenderRankTotal) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.GenderRankTotal, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '</span></div>\n          </div>\n          <div class="athlete_results-wrapper">\n            <div class="header">Overall Rank</div>\n            <div class="value" ', 
    p = c.debugField || b && b.debugField, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "OverallRank", b && b.OverallRank, q) : s.call(b, "debugField", "OverallRank", b && b.OverallRank, q), 
    (o || 0 === o) && (r += o), r += "><span ", p = c.debugField || b && b.debugField, 
    q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "OverallRank", b && b.OverallRank, q) : s.call(b, "debugField", "OverallRank", b && b.OverallRank, q), 
    (o || 0 === o) && (r += o), r += ">" + u((p = c.tripleDash || b && b.tripleDash, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.OverallRank, q) : s.call(b, "tripleDash", b && b.OverallRank, q))) + "</span> / <span ", 
    p = c.debugField || b && b.debugField, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "OverallRankTotal", b && b.OverallRankTotal, q) : s.call(b, "debugField", "OverallRankTotal", b && b.OverallRankTotal, q), 
    (o || 0 === o) && (r += o), r += ">", (p = c.OverallRankTotal) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.OverallRankTotal, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '</span></div>\n          </div>\n          <div class="athlete_results-wrapper">\n            <div class="header">Approx Distance</div>\n            <div class="value">\n                <span class="distanceFromSplitStart gpsDisciplineDistance" ', 
    p = c.debugField || b && b.debugField, q = {
        hash: {},
        data: e
    }, o = p ? p.call(b, "GpsDisciplineDistance", b && b.GpsDisciplineDistance, q) : s.call(b, "debugField", "GpsDisciplineDistance", b && b.GpsDisciplineDistance, q), 
    (o || 0 === o) && (r += o), r += ">" + u((p = c.mToLargeUnits || b && b.mToLargeUnits, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.GpsDisciplineDistance, 1e3, q) : s.call(b, "mToLargeUnits", b && b.GpsDisciplineDistance, 1e3, q))) + '</span>\n                <abbr title="', 
    (p = c.largeUnits) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.largeUnits, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + " " + u((o = b && b.localized, o = null == o || o === !1 ? o : o.summary, 
    o = null == o || o === !1 ? o : o.approximate, typeof o === t ? o.apply(b) : o)) + '">', 
    (p = c.largeUnitsShort) ? o = p.call(b, {
        hash: {},
        data: e
    }) : (p = b && b.largeUnitsShort, o = typeof p === t ? p.call(b, {
        hash: {},
        data: e
    }) : p), r += u(o) + '*</abbr>\n            </div>\n          </div>\n          <div class="athlete_results-wrapper">\n            <div class="header">Current Approx Pace</div>\n            <div class="value">' + u((p = c.metricOrImperial || b && b.metricOrImperial, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.LatestSplitPaceSI, b && b.LatestSplitPaceEN, q) : s.call(b, "metricOrImperial", b && b.LatestSplitPaceSI, b && b.LatestSplitPaceEN, q))) + ' <abbr title="' + u((o = b && b.localized, 
    o = null == o || o === !1 ? o : o.summary, o = null == o || o === !1 ? o : o.approximate, 
    typeof o === t ? o.apply(b) : o)) + '">*</abbr></div>\n          </div>\n          <div class="athlete_results-wrapper">\n            <div class="header">Est. Overall Time</div>\n            <div class="value">' + u((p = c.durationNoIdentifiers || b && b.durationNoIdentifiers, 
    q = {
        hash: {},
        data: e
    }, p ? p.call(b, b && b.FinishTime, q) : s.call(b, "durationNoIdentifiers", b && b.FinishTime, q))) + ' <abbr title="' + u((o = b && b.localized, 
    o = null == o || o === !1 ? o : o.summary, o = null == o || o === !1 ? o : o.approximate, 
    typeof o === t ? o.apply(b) : o)) + '">*</abbr></div>\n          </div>\n        </div>\n\n      </div>\n      <!-- End: athlete_summary-topSection -->\n\n      <table class="athlete_segments">\n        <thead>\n          <tr>\n            <th>Segment</th>\n            <th>Time</th>\n            <th>Average Pace</th>\n            <th>Progress</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n        ', 
    o = c.each.call(b, b && b.SegmentList, {
        hash: {},
        inverse: v.noop,
        fn: v.program(7, i, e),
        data: e
    }), (o || 0 === o) && (r += o), r += "\n        </tbody>\n      </table>\n\n    </div>\n    <!-- End: More Wrapper -->\n  </td>\n</tr>\n";
}), this.Digi.Templates.leaderboard_live = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        var d, e, f, h = "";
        return h += "\n\n<div ", e = c.debug || a && a.debug, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "scope", a, f) : v.call(a, "debug", "scope", a, f), (d || 0 === d) && (h += d), 
        h += ' class="leaderboard-table-wrapper" data-pageNum="', (e = c.PageNumber) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.PageNumber, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), h += t(d) + '">\n  <table id="leaderboard-table" class="main-table tablesorter">\n    <thead class="table-heading">\n      <td width="10%">', 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.overallRank, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.bib, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.athlete, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.country, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.currentLocation, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.currentPace, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.currentOverallTime, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.estFinishTime, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      \n    </thead>\n    <tbody>\n\n    \n    ", 
        d = c.each.call(a, a && a.ResultList, {
            hash: {},
            inverse: u.noop,
            fn: u.programWithDepth(2, g, b, a),
            data: b
        }), (d || 0 === d) && (h += d), h += "\n\n      \n\n\n    </tbody>\n  </table>\n\n\n", 
        e = c.pagination || a && a.pagination, f = {
            hash: {},
            inverse: u.noop,
            fn: u.programWithDepth(7, j, b, a),
            data: b
        }, d = e ? e.call(a, a && a.PageNumber, a && a.TotalPageCount, 5, f) : v.call(a, "pagination", a && a.PageNumber, a && a.TotalPageCount, 5, f), 
        (d || 0 === d) && (h += d), h += "\n\n";
    }
    function g(a, b, d) {
        var e, f, g, j = "";
        return j += "\n      \n    ", f = c.alternate || a && a.alternate, g = {
            hash: {},
            inverse: u.program(5, i, b),
            fn: u.program(3, h, b),
            data: b
        }, e = f ? f.call(a, null == b || b === !1 ? b : b.index, 2, g) : v.call(a, "alternate", null == b || b === !1 ? b : b.index, 2, g), 
        (e || 0 === e) && (j += e), j += '\n        <td class="rankNum"><span ', f = c.debugField || a && a.debugField, 
        g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "OverallRank", a && a.OverallRank, g) : v.call(a, "debugField", "OverallRank", a && a.OverallRank, g), 
        (e || 0 === e) && (j += e), j += ">" + t((f = c.tripleDash || a && a.tripleDash, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.OverallRank, g) : v.call(a, "tripleDash", a && a.OverallRank, g))) + "</span> <span ", 
        f = c.debugField || a && a.debugField, g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "OverallRankDelta", a && a.OverallRankDelta, g) : v.call(a, "debugField", "OverallRankDelta", a && a.OverallRankDelta, g), 
        (e || 0 === e) && (j += e), j += ' class="timeDiff">', (f = c.OverallRankDelta) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.OverallRankDelta, e = typeof f === s ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += t(e) + "</span></td>\n        \n        <td ", f = c.debugField || a && a.debugField, 
        g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "BibNumber", a && a.BibNumber, g) : v.call(a, "debugField", "BibNumber", a && a.BibNumber, g), 
        (e || 0 === e) && (j += e), j += ">", (f = c.BibNumber) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.BibNumber, e = typeof f === s ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += t(e) + "</td>\n        \n        <td> <span ", f = c.debugField || a && a.debugField, 
        g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "FirstName", a && a.FirstName, g) : v.call(a, "debugField", "FirstName", a && a.FirstName, g), 
        (e || 0 === e) && (j += e), j += ">", (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === s ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += t(e) + "</span> <span ", f = c.debugField || a && a.debugField, g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "LastName", a && a.LastName, g) : v.call(a, "debugField", "LastName", a && a.LastName, g), 
        (e || 0 === e) && (j += e), j += ">", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === s ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += t(e) + "</span> </td>\n        \n        <td ", f = c.debugField || a && a.debugField, 
        g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "IsoCountry", a && a.IsoCountry, g) : v.call(a, "debugField", "IsoCountry", a && a.IsoCountry, g), 
        (e || 0 === e) && (j += e), j += '><img class="icon-flag" src="/Media/livemap/flags/' + t((f = c.toLowerCase || a && a.toLowerCase, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.IsoCountry, g) : v.call(a, "toLowerCase", a && a.IsoCountry, g))) + '.gif" alt="">', 
        (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === s ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += t(e) + "</td>\n        \n        <td ", f = c.debugField || a && a.debugField, 
        g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "SplitType", a && a.SplitType, g) : v.call(a, "debugField", "SplitType", a && a.SplitType, g), 
        (e || 0 === e) && (j += e), j += ">", (f = c.SplitType) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.SplitType, e = typeof f === s ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += t(e) + " ", e = d && d.localized, e = null == e || e === !1 ? e : e.leaderListLive, 
        e = null == e || e === !1 ? e : e.after, e = typeof e === s ? e.apply(a) : e, (e || 0 === e) && (j += e), 
        j += "<br /><span ", f = c.debugField || a && a.debugField, g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "SplitLocation", a && a.SplitLocation, g) : v.call(a, "debugField", "SplitLocation", a && a.SplitLocation, g), 
        (e || 0 === e) && (j += e), j += ">" + t((f = c.mToLargeUnits || a && a.mToLargeUnits, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.SplitLocation, g) : v.call(a, "mToLargeUnits", a && a.SplitLocation, g))) + " ", 
        (f = c.largeUnitsShort) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.largeUnitsShort, e = typeof f === s ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += t(e) + "</span></td>\n        \n        <td ", f = c.debugField || a && a.debugField, 
        g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "LatestSplitPaceSI or LatestSplitPaceEN", a && a.LatestSplitPaceSI, g) : v.call(a, "debugField", "LatestSplitPaceSI or LatestSplitPaceEN", a && a.LatestSplitPaceSI, g), 
        (e || 0 === e) && (j += e), j += ">" + t((f = c.metricOrImperial || a && a.metricOrImperial, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.LatestSplitPaceSI, a && a.LatestSplitPaceEN, g) : v.call(a, "metricOrImperial", a && a.LatestSplitPaceSI, a && a.LatestSplitPaceEN, g))) + ' </td>\n        \n        <td><div class="rTime" ', 
        f = c.debugField || a && a.debugField, g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "RaceTime", a && a.RaceTime, g) : v.call(a, "debugField", "RaceTime", a && a.RaceTime, g), 
        (e || 0 === e) && (j += e), j += ">" + t((f = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.RaceTime, g) : v.call(a, "durationNoIdentifiers", a && a.RaceTime, g))) + '</div> </td>\n        \n        <td><div class="fTime" ', 
        f = c.debugField || a && a.debugField, g = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "FinishTime", a && a.FinishTime, g) : v.call(a, "debugField", "FinishTime", a && a.FinishTime, g), 
        (e || 0 === e) && (j += e), j += ">" + t((f = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.FinishTime, g) : v.call(a, "durationNoIdentifiers", a && a.FinishTime, g))) + "</div> </td>\n\n        \n      </tr>\n    ";
    }
    function h(a, b) {
        var d, e, f = "";
        return f += '\n        <tr data-id="', (e = c.LiveResultId) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.LiveResultId, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + '" class="odd first-level">\n    ';
    }
    function i(a, b) {
        var d, e, f = "";
        return f += '\n        <tr data-id="', (e = c.LiveResultId) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.LiveResultId, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + '" class="even first-level">\n    ';
    }
    function j(a, b, d) {
        var e, f = "";
        return f += '\n\n  <div class="pagination clear">\n\n  ', e = c.unless.call(a, a && a.startFromFirstPage, {
            hash: {},
            inverse: u.noop,
            fn: u.programWithDepth(8, k, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n  ", e = c.each.call(a, a && a.pages, {
            hash: {},
            inverse: u.noop,
            fn: u.program(10, l, b),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n  ", e = c.unless.call(a, a && a.endAtLastPage, {
            hash: {},
            inverse: u.noop,
            fn: u.programWithDepth(15, o, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n</div>\n\n";
    }
    function k(a, b, c) {
        var d, e = "";
        return e += '\n    <a class="prevPage" href="#"><span>◅</span> ', d = c && c.localized, 
        d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.previous, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (e += d), e += '</a>\n    <span class="ellipsis">...</span>\n  ';
    }
    function l(a, b) {
        var d, e = "";
        return e += "\n    ", d = c["if"].call(a, a && a.isCurrent, {
            hash: {},
            inverse: u.noop,
            fn: u.program(11, m, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n    ", d = c.unless.call(a, a && a.isCurrent, {
            hash: {},
            inverse: u.noop,
            fn: u.program(13, n, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n  ";
    }
    function m(a, b) {
        var d, e, f = "";
        return f += '\n      <a class="pageValue active" data-pagenumber="', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + '" href="#">', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + "</a>\n    ";
    }
    function n(a, b) {
        var d, e, f = "";
        return f += '\n      <a class="pageValue" href="#" data-pagenumber="', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + '" href="#">', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + "</a>\n    ";
    }
    function o(a, b, c) {
        var d, e = "";
        return e += '\n    <span class="ellipsis">...</span>\n    <a class="nextPage" href="#">', 
        d = c && c.localized, d = null == d || d === !1 ? d : d.leaderListLive, d = null == d || d === !1 ? d : d.next, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (e += d), e += " <span>▻</span></a>\n  ";
    }
    function p(a, b, c) {
        var d, e = "";
        return e += '\n  <div class="errorMessage">', d = c && c.localized, d = null == d || d === !1 ? d : d.leaderListLive, 
        d = null == d || d === !1 ? d : d.errorMessage, d = typeof d === s ? d.apply(a) : d, 
        (d || 0 === d) && (e += d), e += "</div>\n";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var q, r = "", s = "function", t = this.escapeExpression, u = this, v = c.helperMissing;
    return q = c["if"].call(b, b && b.ResultList, {
        hash: {},
        inverse: u.programWithDepth(17, p, e, b),
        fn: u.program(1, f, e),
        data: e
    }), (q || 0 === q) && (r += q), r += "\n";
}), this.Digi.Templates.leaderboard_post = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        var d, e, f, h = "";
        return h += "\n\n<div ", e = c.debug || a && a.debug, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "scope", a, f) : v.call(a, "debug", "scope", a, f), (d || 0 === d) && (h += d), 
        h += ' class="leaderboard-table-wrapper" data-pageNum="', (e = c.PageNumber) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.PageNumber, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), h += t(d) + '">\n  <table id="leaderboard-table" class="main-table tablesorter">\n    <thead class="table-heading">\n      <td width="10%">', 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.overallRank, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += '</td>\n      <td width="10%">', 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.bib, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += '</td>\n      <td class="name" width="30%">', 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.athlete, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.country, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.swimTime, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.bikeTime, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.runTime, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.finishTime, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n    </thead>\n    <tbody>\n\n    \n    ", 
        d = c.each.call(a, a && a.ResultList, {
            hash: {},
            inverse: u.noop,
            fn: u.program(2, g, b),
            data: b
        }), (d || 0 === d) && (h += d), h += "\n\n      \n\n\n    </tbody>\n  </table>\n\n\n", 
        e = c.pagination || a && a.pagination, f = {
            hash: {},
            inverse: u.noop,
            fn: u.programWithDepth(7, j, b, a),
            data: b
        }, d = e ? e.call(a, a && a.PageNumber, a && a.TotalPageCount, 5, f) : v.call(a, "pagination", a && a.PageNumber, a && a.TotalPageCount, 5, f), 
        (d || 0 === d) && (h += d), h += "\n\n";
    }
    function g(a, b) {
        var d, e, f, g = "";
        return g += "\n      \n    ", e = c.alternate || a && a.alternate, f = {
            hash: {},
            inverse: u.program(5, i, b),
            fn: u.program(3, h, b),
            data: b
        }, d = e ? e.call(a, null == b || b === !1 ? b : b.index, 2, f) : v.call(a, "alternate", null == b || b === !1 ? b : b.index, 2, f), 
        (d || 0 === d) && (g += d), g += '\n        <td class="rankNum">' + t((e = c.tripleDash || a && a.tripleDash, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.OverallRank, f) : v.call(a, "tripleDash", a && a.OverallRank, f))) + "</td>\n        <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "BibNumber", a && a.BibNumber, f) : v.call(a, "debugField", "BibNumber", a && a.BibNumber, f), 
        (d || 0 === d) && (g += d), g += ">", (e = c.BibNumber) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.BibNumber, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += t(d) + '</td>\n        <td class="name"><span ', e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "FirstName", a && a.FirstName, f) : v.call(a, "debugField", "FirstName", a && a.FirstName, f), 
        (d || 0 === d) && (g += d), g += ">", (e = c.FirstName) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.FirstName, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += t(d) + "</span> <span ", e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "LastName", a && a.LastName, f) : v.call(a, "debugField", "LastName", a && a.LastName, f), 
        (d || 0 === d) && (g += d), g += ">", (e = c.LastName) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.LastName, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += t(d) + "</span></td>\n        <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "IsoCountry", a && a.IsoCountry, f) : v.call(a, "debugField", "IsoCountry", a && a.IsoCountry, f), 
        (d || 0 === d) && (g += d), g += '><img class="icon-flag" src="/Media/livemap/flags/' + t((e = c.toLowerCase || a && a.toLowerCase, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.IsoCountry, f) : v.call(a, "toLowerCase", a && a.IsoCountry, f))) + '.gif" alt="">', 
        (e = c.IsoCountry) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.IsoCountry, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += t(d) + "</td>\n        <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "SwimTime", a && a.SwimTime, f) : v.call(a, "debugField", "SwimTime", a && a.SwimTime, f), 
        (d || 0 === d) && (g += d), g += ">" + t((e = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.SwimTime, f) : v.call(a, "durationNoIdentifiers", a && a.SwimTime, f))) + "</td>\n        <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "BikeTime", a && a.BikeTime, f) : v.call(a, "debugField", "BikeTime", a && a.BikeTime, f), 
        (d || 0 === d) && (g += d), g += ">" + t((e = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.BikeTime, f) : v.call(a, "durationNoIdentifiers", a && a.BikeTime, f))) + "</td>\n        <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "RunTime", a && a.RunTime, f) : v.call(a, "debugField", "RunTime", a && a.RunTime, f), 
        (d || 0 === d) && (g += d), g += ">" + t((e = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.RunTime, f) : v.call(a, "durationNoIdentifiers", a && a.RunTime, f))) + "</td>\n        <td ", 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "FinishTime", a && a.FinishTime, f) : v.call(a, "debugField", "FinishTime", a && a.FinishTime, f), 
        (d || 0 === d) && (g += d), g += ">" + t((e = c.durationNoIdentifiers || a && a.durationNoIdentifiers, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.FinishTime, f) : v.call(a, "durationNoIdentifiers", a && a.FinishTime, f))) + "</td>\n      </tr>\n    ";
    }
    function h(a, b) {
        var d, e, f = "";
        return f += '\n        <tr data-id="', (e = c.LiveResultId) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.LiveResultId, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + '" class="odd first-level">\n    ';
    }
    function i(a, b) {
        var d, e, f = "";
        return f += '\n        <tr data-id="', (e = c.LiveResultId) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.LiveResultId, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + '" class="even first-level">\n    ';
    }
    function j(a, b, d) {
        var e, f = "";
        return f += '\n\n  <div class="pagination clear">\n\n  ', e = c.unless.call(a, a && a.startFromFirstPage, {
            hash: {},
            inverse: u.noop,
            fn: u.programWithDepth(8, k, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n  ", e = c.each.call(a, a && a.pages, {
            hash: {},
            inverse: u.noop,
            fn: u.program(10, l, b),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n  ", e = c.unless.call(a, a && a.endAtLastPage, {
            hash: {},
            inverse: u.noop,
            fn: u.programWithDepth(15, o, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n</div>\n\n";
    }
    function k(a, b, c) {
        var d, e = "";
        return e += '\n    <a class="prevPage" href="#"><span>◅</span> ', d = c && c.localized, 
        d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.previous, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (e += d), e += '</a>\n    <span class="ellipsis">...</span>\n  ';
    }
    function l(a, b) {
        var d, e = "";
        return e += "\n    ", d = c["if"].call(a, a && a.isCurrent, {
            hash: {},
            inverse: u.noop,
            fn: u.program(11, m, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n    ", d = c.unless.call(a, a && a.isCurrent, {
            hash: {},
            inverse: u.noop,
            fn: u.program(13, n, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n  ";
    }
    function m(a, b) {
        var d, e, f = "";
        return f += '\n      <a class="pageValue active" data-pagenumber="', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + '" href="#">', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + "</a>\n    ";
    }
    function n(a, b) {
        var d, e, f = "";
        return f += '\n      <a class="pageValue" href="#" data-pagenumber="', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + '" href="#">', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === s ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += t(d) + "</a>\n    ";
    }
    function o(a, b, c) {
        var d, e = "";
        return e += '\n    <span class="ellipsis">...</span>\n    <a class="nextPage" href="#">', 
        d = c && c.localized, d = null == d || d === !1 ? d : d.leaderListPost, d = null == d || d === !1 ? d : d.next, 
        d = typeof d === s ? d.apply(a) : d, (d || 0 === d) && (e += d), e += " <span>▻</span></a>\n  ";
    }
    function p(a, b, c) {
        var d, e = "";
        return e += '\n  <div class="errorMessage">', d = c && c.localized, d = null == d || d === !1 ? d : d.leaderListPost, 
        d = null == d || d === !1 ? d : d.errorMessage, d = typeof d === s ? d.apply(a) : d, 
        (d || 0 === d) && (e += d), e += "</div>\n";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var q, r = "", s = "function", t = this.escapeExpression, u = this, v = c.helperMissing;
    return q = c["if"].call(b, b && b.ResultList, {
        hash: {},
        inverse: u.programWithDepth(17, p, e, b),
        fn: u.program(1, f, e),
        data: e
    }), (q || 0 === q) && (r += q), r += "\n";
}), this.Digi.Templates.leaderboard_pre = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        var d, e, f, h = "";
        return h += "\n\n<div ", e = c.debug || a && a.debug, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "scope", a, f) : s.call(a, "debug", "scope", a, f), (d || 0 === d) && (h += d), 
        h += ' class="leaderboard-table-wrapper" data-pageNum="', (e = c.PageNumber) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.PageNumber, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), h += u(d) + '">\n  <table id="leaderboard-table" class="main-table tablesorter">\n    <thead class="table-heading">\n      <td width="10%">', 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPre, d = null == d || d === !1 ? d : d.bib, 
        d = typeof d === t ? d.apply(a) : d, (d || 0 === d) && (h += d), h += '</td>\n      <td class="name">', 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPre, d = null == d || d === !1 ? d : d.athlete, 
        d = typeof d === t ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPre, d = null == d || d === !1 ? d : d.ageGroup, 
        d = typeof d === t ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPre, d = null == d || d === !1 ? d : d.country, 
        d = typeof d === t ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      <td>", 
        d = a && a.localized, d = null == d || d === !1 ? d : d.leaderListPre, d = null == d || d === !1 ? d : d.gender, 
        d = typeof d === t ? d.apply(a) : d, (d || 0 === d) && (h += d), h += "</td>\n      \n      \n    </thead>\n    <tbody>\n\n    \n    ", 
        d = c.each.call(a, a && a.ResultList, {
            hash: {},
            inverse: v.noop,
            fn: v.program(2, g, b),
            data: b
        }), (d || 0 === d) && (h += d), h += "\n\n    \n\n    </tbody>\n  </table>\n\n\n", 
        e = c.pagination || a && a.pagination, f = {
            hash: {},
            inverse: v.noop,
            fn: v.programWithDepth(7, j, b, a),
            data: b
        }, d = e ? e.call(a, a && a.PageNumber, a && a.TotalPageCount, 5, f) : s.call(a, "pagination", a && a.PageNumber, a && a.TotalPageCount, 5, f), 
        (d || 0 === d) && (h += d), h += "\n\n";
    }
    function g(a, b) {
        var d, e, f, g = "";
        return g += "\n    ", e = c.alternate || a && a.alternate, f = {
            hash: {},
            inverse: v.program(5, i, b),
            fn: v.program(3, h, b),
            data: b
        }, d = e ? e.call(a, null == b || b === !1 ? b : b.index, 2, f) : s.call(a, "alternate", null == b || b === !1 ? b : b.index, 2, f), 
        (d || 0 === d) && (g += d), g += "\n        <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Bib Number", a && a.BibNumber, f) : s.call(a, "debugField", "Bib Number", a && a.BibNumber, f), 
        (d || 0 === d) && (g += d), g += ">", (e = c.BibNumber) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.BibNumber, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + '</td>\n        <td class="name">\n          <span class="firstName" ', 
        e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "First Name", a && a.FirstName, f) : s.call(a, "debugField", "First Name", a && a.FirstName, f), 
        (d || 0 === d) && (g += d), g += ">", (e = c.FirstName) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.FirstName, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + '</span>\n          <span class="lastName" ', e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Last Name", a && a.LastName, f) : s.call(a, "debugField", "Last Name", a && a.LastName, f), 
        (d || 0 === d) && (g += d), g += ">", (e = c.LastName) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.LastName, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + "</span>\n          \n        </td>\n        <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Age Group", a && a.AgeGroup, f) : s.call(a, "debugField", "Age Group", a && a.AgeGroup, f), 
        (d || 0 === d) && (g += d), g += ">", (e = c.AgeGroup) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.AgeGroup, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + "</td>\n        <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Iso Country", a && a.IsoCountry, f) : s.call(a, "debugField", "Iso Country", a && a.IsoCountry, f), 
        (d || 0 === d) && (g += d), g += '><img class="icon-flag" src="/Media/livemap/flags/' + u((e = c.toLowerCase || a && a.toLowerCase, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.IsoCountry, f) : s.call(a, "toLowerCase", a && a.IsoCountry, f))) + '.gif" alt="">', 
        (e = c.IsoCountry) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.IsoCountry, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + "</td>\n        <td ", e = c.debugField || a && a.debugField, 
        f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "Gender", a && a.Gender, f) : s.call(a, "debugField", "Gender", a && a.Gender, f), 
        (d || 0 === d) && (g += d), g += ">", (e = c.Gender) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.Gender, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + "</td>\n\n        \n      </tr>\n    ";
    }
    function h(a, b) {
        var d, e, f, g = "";
        return g += "\n        <tr ", e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "LiveResultId", a && a.LiveResultId, f) : s.call(a, "debugField", "LiveResultId", a && a.LiveResultId, f), 
        (d || 0 === d) && (g += d), g += ' data-id="', (e = c.LiveResultId) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.LiveResultId, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + '" class="odd first-level">\n    ';
    }
    function i(a, b) {
        var d, e, f, g = "";
        return g += "\n        <tr ", e = c.debugField || a && a.debugField, f = {
            hash: {},
            data: b
        }, d = e ? e.call(a, "LiveResultId", a && a.LiveResultId, f) : s.call(a, "debugField", "LiveResultId", a && a.LiveResultId, f), 
        (d || 0 === d) && (g += d), g += ' data-id="', (e = c.LiveResultId) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.LiveResultId, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += u(d) + '" class="even first-level">\n    ';
    }
    function j(a, b, d) {
        var e, f = "";
        return f += '\n\n  <div class="pagination clear">\n\n  ', e = c.unless.call(a, a && a.startFromFirstPage, {
            hash: {},
            inverse: v.noop,
            fn: v.programWithDepth(8, k, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n  ", e = c.each.call(a, a && a.pages, {
            hash: {},
            inverse: v.noop,
            fn: v.program(10, l, b),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n  ", e = c.unless.call(a, a && a.endAtLastPage, {
            hash: {},
            inverse: v.noop,
            fn: v.programWithDepth(15, o, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n</div>\n\n";
    }
    function k(a, b, c) {
        var d, e = "";
        return e += '\n    <a class="prevPage" href="#"><span>◅</span> ', d = c && c.localized, 
        d = null == d || d === !1 ? d : d.leaderListPre, d = null == d || d === !1 ? d : d.previous, 
        d = typeof d === t ? d.apply(a) : d, (d || 0 === d) && (e += d), e += '</a>\n    <span class="ellipsis">...</span>\n  ';
    }
    function l(a, b) {
        var d, e = "";
        return e += "\n    ", d = c["if"].call(a, a && a.isCurrent, {
            hash: {},
            inverse: v.noop,
            fn: v.program(11, m, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n    ", d = c.unless.call(a, a && a.isCurrent, {
            hash: {},
            inverse: v.noop,
            fn: v.program(13, n, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n  ";
    }
    function m(a, b) {
        var d, e, f = "";
        return f += '\n      <a class="pageValue active" data-pagenumber="', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += u(d) + '" href="#">', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += u(d) + "</a>\n    ";
    }
    function n(a, b) {
        var d, e, f = "";
        return f += '\n      <a class="pageValue" href="#" data-pagenumber="', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += u(d) + '" href="#">', (e = c.page) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.page, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += u(d) + "</a>\n    ";
    }
    function o(a, b, c) {
        var d, e = "";
        return e += '\n    <span class="ellipsis">...</span>\n    <a class="nextPage" href="#">', 
        d = c && c.localized, d = null == d || d === !1 ? d : d.leaderListPre, d = null == d || d === !1 ? d : d.next, 
        d = typeof d === t ? d.apply(a) : d, (d || 0 === d) && (e += d), e += " <span>▻</span></a>\n  ";
    }
    function p(a, b, c) {
        var d, e = "";
        return e += '\n  <div class="errorMessage">', d = c && c.localized, d = null == d || d === !1 ? d : d.leaderListPre, 
        d = null == d || d === !1 ? d : d.errorMessage, d = typeof d === t ? d.apply(a) : d, 
        (d || 0 === d) && (e += d), e += "</div>\n";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var q, r = "", s = c.helperMissing, t = "function", u = this.escapeExpression, v = this;
    return q = c["if"].call(b, b && b.ResultList, {
        hash: {},
        inverse: v.programWithDepth(17, p, e, b),
        fn: v.program(1, f, e),
        data: e
    }), (q || 0 === q) && (r += q), r += "\n";
}), this.Digi.Templates.leaders = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b, d) {
        var e, f, i, j = "";
        return j += '\n		<tr class="', e = c["if"].call(a, a && a.active, {
            hash: {},
            inverse: m.noop,
            fn: m.program(2, g, b),
            data: b
        }), (e || 0 === e) && (j += e), j += " ", e = c["if"].call(a, a && a.added, {
            hash: {},
            inverse: m.noop,
            fn: m.program(4, h, b),
            data: b
        }), (e || 0 === e) && (j += e), j += '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '">\n			<td class="track">\n				<a href="#" class="add" title="' + o((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.leaders, e = null == e || e === !1 ? e : e.trackName, 
        typeof e === n ? e.apply(a) : e)) + " ", (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + " ", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '">', e = d && d.localized, e = null == e || e === !1 ? e : e.leaders, 
        e = null == e || e === !1 ? e : e.add, e = typeof e === n ? e.apply(a) : e, (e || 0 === e) && (j += e), 
        j += '</a>\n				<a href="#" class="remove" title="' + o((e = d && d.localized, e = null == e || e === !1 ? e : e.leaders, 
        e = null == e || e === !1 ? e : e.removeName, typeof e === n ? e.apply(a) : e)) + " ", 
        (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + " ", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '">', e = d && d.localized, e = null == e || e === !1 ? e : e.leaders, 
        e = null == e || e === !1 ? e : e.remove, e = typeof e === n ? e.apply(a) : e, (e || 0 === e) && (j += e), 
        j += '</a>\n			</td>\n			<td class="nameInfo">\n				<div class="name">\n					<span class="firstName" ', 
        f = c.debugField || a && a.debugField, i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "FirstName", a && a.FirstName, i) : p.call(a, "debugField", "FirstName", a && a.FirstName, i), 
        (e || 0 === e) && (j += e), j += ">", (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '</span>\n					<span class="lastName" ', f = c.debugField || a && a.debugField, 
        i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "LastName", a && a.LastName, i) : p.call(a, "debugField", "LastName", a && a.LastName, i), 
        (e || 0 === e) && (j += e), j += ">", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '</span>\n				</div>\n			</td>\n			<td class="bib">\n				<div class="bib">\n					<span class="title">', 
        e = d && d.localized, e = null == e || e === !1 ? e : e.leaders, e = null == e || e === !1 ? e : e.bib, 
        e = typeof e === n ? e.apply(a) : e, (e || 0 === e) && (j += e), j += '</span>\n					<span class="value" ', 
        f = c.debugField || a && a.debugField, i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "BibNumber", a && a.BibNumber, i) : p.call(a, "debugField", "BibNumber", a && a.BibNumber, i), 
        (e || 0 === e) && (j += e), j += ">", (f = c.BibNumber) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.BibNumber, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '</span>\n				</div>\n			</td>\n			<td class="sex">\n				<div class="sex" ', 
        f = c.debugField || a && a.debugField, i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "Gender", a && a.Gender, i) : p.call(a, "debugField", "Gender", a && a.Gender, i), 
        (e || 0 === e) && (j += e), j += ">" + o((f = c.firstChar || a && a.firstChar, i = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.Gender, i) : p.call(a, "firstChar", a && a.Gender, i))) + '</div>\n			</td>\n			<td class="country" ', 
        f = c.debugField || a && a.debugField, i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "IsoCountry", a && a.IsoCountry, i) : p.call(a, "debugField", "IsoCountry", a && a.IsoCountry, i), 
        (e || 0 === e) && (j += e), j += '>\n				<img src="/Media/livemap/flags/', (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '.gif" alt="', (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '" />\n				<span ', f = c.debugField || a && a.debugField, 
        i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "IsoCountry", a && a.IsoCountry, i) : p.call(a, "debugField", "IsoCountry", a && a.IsoCountry, i), 
        (e || 0 === e) && (j += e), j += ">", (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '</span>\n			</td>\n			<td class="pin">\n				<div class="pin" style="background-color: ', 
        (f = c.color) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.color, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '">' + o((f = c.firstChar || a && a.firstChar, i = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.FirstName, i) : p.call(a, "firstChar", a && a.FirstName, i))) + o((f = c.firstChar || a && a.firstChar, 
        i = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.LastName, i) : p.call(a, "firstChar", a && a.LastName, i))) + "</div>\n			</td>\n		</tr>\n		";
    }
    function g(a, b) {
        return "active";
    }
    function h(a, b) {
        return "added";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var i, j, k, l = "", m = this, n = "function", o = this.escapeExpression, p = c.helperMissing;
    return l += "<table ", j = c.debug || b && b.debug, k = {
        hash: {},
        data: e
    }, i = j ? j.call(b, "scope", b, k) : p.call(b, "debug", "scope", b, k), (i || 0 === i) && (l += i), 
    l += '>\n	<thead>\n		<tr>\n			<th class="track">', i = b && b.localized, i = null == i || i === !1 ? i : i.leaders, 
    i = null == i || i === !1 ? i : i.track, i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), 
    l += '</th>\n			<th class="nameInfo">', i = b && b.localized, i = null == i || i === !1 ? i : i.leaders, 
    i = null == i || i === !1 ? i : i.name, i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), 
    l += '</th>\n			<th class="bib">', i = b && b.localized, i = null == i || i === !1 ? i : i.leaders, 
    i = null == i || i === !1 ? i : i.bib, i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), 
    l += '</th>\n			<th class="sex">', i = b && b.localized, i = null == i || i === !1 ? i : i.leaders, 
    i = null == i || i === !1 ? i : i.sex, i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), 
    l += '</th>\n			<th class="country">', i = b && b.localized, i = null == i || i === !1 ? i : i.leaders, 
    i = null == i || i === !1 ? i : i.country, i = typeof i === n ? i.apply(b) : i, 
    (i || 0 === i) && (l += i), l += '</th>\n			<th class="pin">', i = b && b.localized, 
    i = null == i || i === !1 ? i : i.leaders, i = null == i || i === !1 ? i : i.pin, 
    i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), l += "</th>\n		</tr>\n	</thead>\n	<tbody>\n		", 
    i = c.each.call(b, b && b.athletes, {
        hash: {},
        inverse: m.noop,
        fn: m.programWithDepth(1, f, e, b),
        data: e
    }), (i || 0 === i) && (l += i), l += "\n	</tbody>\n</table>";
}), this.Digi.Templates.search = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b, d) {
        var e, f, i, j = "";
        return j += '\n		<tr class="', e = c["if"].call(a, a && a.active, {
            hash: {},
            inverse: m.noop,
            fn: m.program(2, g, b),
            data: b
        }), (e || 0 === e) && (j += e), j += " ", e = c["if"].call(a, a && a.added, {
            hash: {},
            inverse: m.noop,
            fn: m.program(4, h, b),
            data: b
        }), (e || 0 === e) && (j += e), j += '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '">\n			<td class="track">\n				<a href="#" class="add" title="' + o((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.search, e = null == e || e === !1 ? e : e.trackName, 
        typeof e === n ? e.apply(a) : e)) + " ", (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + " ", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '">', e = d && d.localized, e = null == e || e === !1 ? e : e.search, 
        e = null == e || e === !1 ? e : e.add, e = typeof e === n ? e.apply(a) : e, (e || 0 === e) && (j += e), 
        j += '</a>\n				<a href="#" class="remove" title="' + o((e = d && d.localized, e = null == e || e === !1 ? e : e.search, 
        e = null == e || e === !1 ? e : e.removeName, typeof e === n ? e.apply(a) : e)) + " ", 
        (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + " ", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '">', e = d && d.localized, e = null == e || e === !1 ? e : e.search, 
        e = null == e || e === !1 ? e : e.remove, e = typeof e === n ? e.apply(a) : e, (e || 0 === e) && (j += e), 
        j += '</a>\n			</td>\n			<td class="nameInfo">\n				<div class="name">\n					<span class="firstName" ', 
        f = c.debugField || a && a.debugField, i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "FirstName", a && a.FirstName, i) : p.call(a, "debugField", "FirstName", a && a.FirstName, i), 
        (e || 0 === e) && (j += e), j += ">", (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '</span>\n					<span class="lastName" ', f = c.debugField || a && a.debugField, 
        i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "LastName", a && a.LastName, i) : p.call(a, "debugField", "LastName", a && a.LastName, i), 
        (e || 0 === e) && (j += e), j += ">", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '</span>\n				</div>\n			</td>\n			<td class="bib">\n				<div class="bib">\n					<span class="title">', 
        e = d && d.localized, e = null == e || e === !1 ? e : e.search, e = null == e || e === !1 ? e : e.bib, 
        e = typeof e === n ? e.apply(a) : e, (e || 0 === e) && (j += e), j += '</span>\n					<span class="value" ', 
        f = c.debugField || a && a.debugField, i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "BibNumber", a && a.BibNumber, i) : p.call(a, "debugField", "BibNumber", a && a.BibNumber, i), 
        (e || 0 === e) && (j += e), j += ">", (f = c.BibNumber) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.BibNumber, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '</span>\n				</div>\n			</td>\n			<td class="sex">\n				<div class="sex" ', 
        f = c.debugField || a && a.debugField, i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "Gender", a && a.Gender, i) : p.call(a, "debugField", "Gender", a && a.Gender, i), 
        (e || 0 === e) && (j += e), j += ">" + o((f = c.firstChar || a && a.firstChar, i = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.Gender, i) : p.call(a, "firstChar", a && a.Gender, i))) + '</div>\n			</td>\n			<td class="country" ', 
        f = c.debugField || a && a.debugField, i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "IsoCountry", a && a.IsoCountry, i) : p.call(a, "debugField", "IsoCountry", a && a.IsoCountry, i), 
        (e || 0 === e) && (j += e), j += '>\n				<img src="/Media/livemap/flags/', (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '.gif" alt="', (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '" />\n				<span ', f = c.debugField || a && a.debugField, 
        i = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "IsoCountry", a && a.IsoCountry, i) : p.call(a, "debugField", "IsoCountry", a && a.IsoCountry, i), 
        (e || 0 === e) && (j += e), j += ">", (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '</span>\n			</td>\n			<td class="pin">\n				<div class="pin" style="background-color: ', 
        (f = c.color) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.color, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), j += o(e) + '">' + o((f = c.firstChar || a && a.firstChar, i = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.FirstName, i) : p.call(a, "firstChar", a && a.FirstName, i))) + o((f = c.firstChar || a && a.firstChar, 
        i = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.LastName, i) : p.call(a, "firstChar", a && a.LastName, i))) + "</div>\n			</td>\n		</tr>\n		";
    }
    function g(a, b) {
        return "active";
    }
    function h(a, b) {
        return "added";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var i, j, k, l = "", m = this, n = "function", o = this.escapeExpression, p = c.helperMissing;
    return l += "<table ", j = c.debug || b && b.debug, k = {
        hash: {},
        data: e
    }, i = j ? j.call(b, "scope", b, k) : p.call(b, "debug", "scope", b, k), (i || 0 === i) && (l += i), 
    l += '>\n	<thead>\n		<tr>\n			<th class="track">', i = b && b.localized, i = null == i || i === !1 ? i : i.search, 
    i = null == i || i === !1 ? i : i.track, i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), 
    l += '</th>\n			<th class="nameInfo">', i = b && b.localized, i = null == i || i === !1 ? i : i.search, 
    i = null == i || i === !1 ? i : i.name, i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), 
    l += '</th>\n			<th class="bib">', i = b && b.localized, i = null == i || i === !1 ? i : i.search, 
    i = null == i || i === !1 ? i : i.bib, i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), 
    l += '</th>\n			<th class="sex">', i = b && b.localized, i = null == i || i === !1 ? i : i.search, 
    i = null == i || i === !1 ? i : i.sex, i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), 
    l += '</th>\n			<th class="country">', i = b && b.localized, i = null == i || i === !1 ? i : i.search, 
    i = null == i || i === !1 ? i : i.country, i = typeof i === n ? i.apply(b) : i, 
    (i || 0 === i) && (l += i), l += '</th>\n			<th class="pin">', i = b && b.localized, 
    i = null == i || i === !1 ? i : i.search, i = null == i || i === !1 ? i : i.pin, 
    i = typeof i === n ? i.apply(b) : i, (i || 0 === i) && (l += i), l += "</th>\n		</tr>\n	</thead>\n	<tbody>\n		", 
    i = c.each.call(b, b && b.athletes, {
        hash: {},
        inverse: m.noop,
        fn: m.programWithDepth(1, f, e, b),
        data: e
    }), (i || 0 === i) && (l += i), l += "\n	</tbody>\n</table>";
}), this.Digi.Templates.track = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b, d) {
        var e, f, h, i = "";
        return i += '\n		<tr class="', e = c["if"].call(a, a && a.active, {
            hash: {},
            inverse: l.noop,
            fn: l.program(2, g, b),
            data: b
        }), (e || 0 === e) && (i += e), i += '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '">\n			<td class="remove">\n				<a href="#" title="' + n((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.track, e = null == e || e === !1 ? e : e.removeName, 
        typeof e === m ? e.apply(a) : e)) + " ", (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + " ", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '">', e = d && d.localized, e = null == e || e === !1 ? e : e.track, 
        e = null == e || e === !1 ? e : e.remove, e = typeof e === m ? e.apply(a) : e, (e || 0 === e) && (i += e), 
        i += '</a>\n			</td>\n			<td class="onMap" ', f = c.debugField || a && a.debugField, 
        h = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "active", a && a.active, h) : o.call(a, "debugField", "active", a && a.active, h), 
        (e || 0 === e) && (i += e), i += '>\n				<input type="checkbox" name="map', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '" value="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '" ' + n((f = c.checkedSimple || a && a.checkedSimple, h = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.active, h) : o.call(a, "checkedSimple", a && a.active, h))) + ' />\n			</td>\n			<td class="nameInfo">\n				<div class="name">\n					<span class="firstName" ', 
        f = c.debugField || a && a.debugField, h = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "FirstName", a && a.FirstName, h) : o.call(a, "debugField", "FirstName", a && a.FirstName, h), 
        (e || 0 === e) && (i += e), i += ">", (f = c.FirstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.FirstName, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '</span>\n					<span class="lastName" ', f = c.debugField || a && a.debugField, 
        h = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "LastName", a && a.LastName, h) : o.call(a, "debugField", "LastName", a && a.LastName, h), 
        (e || 0 === e) && (i += e), i += ">", (f = c.LastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.LastName, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '</span>\n				</div>\n			</td>\n			<td class="bib">\n				<div class="bib">\n					<span class="title">', 
        e = d && d.localized, e = null == e || e === !1 ? e : e.track, e = null == e || e === !1 ? e : e.bib, 
        e = typeof e === m ? e.apply(a) : e, (e || 0 === e) && (i += e), i += '</span>\n					<span class="value" ', 
        f = c.debugField || a && a.debugField, h = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "BibNumber", a && a.BibNumber, h) : o.call(a, "debugField", "BibNumber", a && a.BibNumber, h), 
        (e || 0 === e) && (i += e), i += ">", (f = c.BibNumber) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.BibNumber, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '</span>\n				</div>\n			</td>\n			<td class="sex">\n				<div class="sex" ', 
        f = c.debugField || a && a.debugField, h = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "Gender", a && a.Gender, h) : o.call(a, "debugField", "Gender", a && a.Gender, h), 
        (e || 0 === e) && (i += e), i += ">" + n((f = c.firstChar || a && a.firstChar, h = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.Gender, h) : o.call(a, "firstChar", a && a.Gender, h))) + '</div>\n			</td>\n			<td class="country" ', 
        f = c.debugField || a && a.debugField, h = {
            hash: {},
            data: b
        }, e = f ? f.call(a, "IsoCountry", a && a.IsoCountry, h) : o.call(a, "debugField", "IsoCountry", a && a.IsoCountry, h), 
        (e || 0 === e) && (i += e), i += '>\n				<img src="/Media/livemap/flags/', (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '.gif" alt="', (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '" />\n				<span>', (f = c.IsoCountry) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.IsoCountry, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '</span>\n			</td>\n			<td class="pin">\n				<div class="pin" style="background-color: ', 
        (f = c.color) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.color, e = typeof f === m ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += n(e) + '">' + n((f = c.firstChar || a && a.firstChar, h = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.FirstName, h) : o.call(a, "firstChar", a && a.FirstName, h))) + n((f = c.firstChar || a && a.firstChar, 
        h = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.LastName, h) : o.call(a, "firstChar", a && a.LastName, h))) + "</div>\n			</td>\n		</tr>\n		";
    }
    function g(a, b) {
        return "active";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var h, i, j, k = "", l = this, m = "function", n = this.escapeExpression, o = c.helperMissing;
    return k += "<table ", i = c.debug || b && b.debug, j = {
        hash: {},
        data: e
    }, h = i ? i.call(b, "scope", b, j) : o.call(b, "debug", "scope", b, j), (h || 0 === h) && (k += h), 
    k += '>\n	<thead>\n		<tr>\n			<th class="remove">', h = b && b.localized, h = null == h || h === !1 ? h : h.track, 
    h = null == h || h === !1 ? h : h.removeFromTrack, h = typeof h === m ? h.apply(b) : h, 
    (h || 0 === h) && (k += h), k += '</th>\n			<th class="onMap">', h = b && b.localized, 
    h = null == h || h === !1 ? h : h.track, h = null == h || h === !1 ? h : h.seenOnMap, 
    h = typeof h === m ? h.apply(b) : h, (h || 0 === h) && (k += h), k += '</th>\n			<th class="nameInfo">', 
    h = b && b.localized, h = null == h || h === !1 ? h : h.track, h = null == h || h === !1 ? h : h.name, 
    h = typeof h === m ? h.apply(b) : h, (h || 0 === h) && (k += h), k += '</th>\n			<th class="bib">', 
    h = b && b.localized, h = null == h || h === !1 ? h : h.track, h = null == h || h === !1 ? h : h.bib, 
    h = typeof h === m ? h.apply(b) : h, (h || 0 === h) && (k += h), k += '</th>\n			<th class="sex">', 
    h = b && b.localized, h = null == h || h === !1 ? h : h.track, h = null == h || h === !1 ? h : h.sex, 
    h = typeof h === m ? h.apply(b) : h, (h || 0 === h) && (k += h), k += '</th>\n			<th class="country">', 
    h = b && b.localized, h = null == h || h === !1 ? h : h.track, h = null == h || h === !1 ? h : h.country, 
    h = typeof h === m ? h.apply(b) : h, (h || 0 === h) && (k += h), k += '</th>\n			<th class="pin">', 
    h = b && b.localized, h = null == h || h === !1 ? h : h.track, h = null == h || h === !1 ? h : h.pin, 
    h = typeof h === m ? h.apply(b) : h, (h || 0 === h) && (k += h), k += "</th>\n		</tr>\n	</thead>\n	<tbody>\n		", 
    h = c.each.call(b, b && b.athletes, {
        hash: {},
        inverse: l.noop,
        fn: l.programWithDepth(1, f, e, b),
        data: e
    }), (h || 0 === h) && (k += h), k += "\n	</tbody>\n</table>";
}), void 0 === LiveMap) var LiveMap = {};

if (LiveMap.Cookies = {
    get: function(a) {
        "use strict";
        var b, c, d, e;
        for (b = a + "=", c = document.cookie.split(";"), d = 0; d < c.length; d += 1) {
            for (e = c[d]; " " === e.charAt(0); ) e = e.substring(1);
            if (-1 !== e.indexOf(b)) return e.substring(b.length, e.length);
        }
        return "";
    },
    set: function(a, b, c, d) {
        "use strict";
        var e, f = "";
        void 0 === b && (b = ""), void 0 !== c && (e = new Date(), e.setTime(e.getTime() + 24 * c * 60 * 60 * 1e3), 
        f = "; expires=" + e.toUTCString()), d = void 0 === d ? "" : "; path=" + d, document.cookie = a + "=" + b + f + d;
    },
    removeCookie: function(a) {
        "use strict";
        LiveMap.Cookies.set(a, "", -1);
    }
}, void 0 === LiveMap) var LiveMap = {};

if (LiveMap.DebugHandlebars = {
    bindDblClick: function(a) {
        "use strict";
        return jQuery("body").on("dblclick", "[data-handlebars-debug-" + a + "]", function() {
            var b, c = jQuery(this);
            try {
                b = c.attr("data-handlebars-debug-" + a), b = JSON.parse(b), console.log(a, b, c);
            } catch (d) {
                console.log(d);
            }
        }), LiveMap.DebugHandlebars;
    },
    init: function() {
        "use strict";
        return void 0 !== LiveMap && void 0 !== LiveMap.vars && void 0 !== LiveMap.vars.debugHandlebars && LiveMap.DebugHandlebars.bindDblClick("scope"), 
        LiveMap.DebugHandlebars;
    }
}, void 0 === LiveMap) var LiveMap = {};

if (LiveMap.MessageDialog = {
    classBodyActive: "messageDialogActive",
    ids: {
        modal: "messageDialogModal",
        outer: "messageDialogOuter",
        inner: "messageDialogInner",
        close: "messageDialogClose",
        content: "messageDialogContent"
    },
    loginUrl: "/triathlon/registration/sign-in.aspx?returnUrl=",
    initialized: !1,
    ensureElement: function(a) {
        "use strict";
        var b = !0;
        return LiveMap.MessageDialog["$" + a] = jQuery(LiveMap.MessageDialog.ids[a]), 0 === LiveMap.MessageDialog["$" + a].length && (b = !1, 
        LiveMap.MessageDialog["$" + a] = jQuery('<div id="' + LiveMap.MessageDialog.ids[a] + '" />')), 
        b;
    },
    addElement: function(a, b) {
        "use strict";
        return LiveMap.MessageDialog["$" + b].append(LiveMap.MessageDialog["$" + a]), LiveMap.MessageDialog;
    },
    initWindow: function() {
        "use strict";
        return LiveMap.MessageDialog.initialized ? LiveMap.MessageDialog : (LiveMap.MessageDialog.ensureElement("modal") || jQuery("body").append(LiveMap.MessageDialog.$modal), 
        LiveMap.MessageDialog.ensureElement("outer") || jQuery("body").append(LiveMap.MessageDialog.$outer), 
        LiveMap.MessageDialog.ensureElement("inner") || LiveMap.MessageDialog.addElement("inner", "outer"), 
        LiveMap.MessageDialog.ensureElement("close") || (LiveMap.MessageDialog.addElement("close", "inner"), 
        LiveMap.MessageDialog.$close.on("click", function(a) {
            a.preventDefault(), LiveMap.MessageDialog.hide();
        })), LiveMap.MessageDialog.$inner.on("click", ".liveMapMessageActionClose", function(a) {
            a.preventDefault(), LiveMap.MessageDialog.hide();
        }), LiveMap.MessageDialog.ensureElement("content") || LiveMap.MessageDialog.addElement("content", "inner"), 
        LiveMap.MessageDialog.initialized = !0, LiveMap.MessageDialog);
    },
    show: function(a, b) {
        "use strict";
        var c, d, e;
        try {
            return LiveMap.MessageDialog.initWindow(), c = jQuery("#" + a), 0 === c.length && LiveMap.MessageDialog.hide(), 
            LiveMap.MessageDialog.$content.empty().append(c.html()), d = document.createElement("a"), 
            d.href = document.location.toString(), void 0 !== b && (d.search = "l=" + b), e = LiveMap.MessageDialog.loginUrl + encodeURIComponent(d.href), 
            LiveMap.MessageDialog.$content.find(".liveMapMessageActionLogin").attr("href", e), 
            jQuery("body").addClass(LiveMap.MessageDialog.classBodyActive), LiveMap.MessageDialog;
        } catch (f) {
            throw console.log("Error in LiveMap.MessageDialog.show"), console.log(f), console.log("form", form), 
            console.log("data", data), f;
        }
    },
    hide: function() {
        "use strict";
        return LiveMap.MessageDialog.initWindow(), jQuery("body").removeClass(LiveMap.MessageDialog.classBodyActive), 
        LiveMap.MessageDialog;
    },
    init: function() {
        "use strict";
        return LiveMap.MessageDialog.initWindow(), LiveMap.MessageDialog;
    }
}, void 0 === LiveMap) var LiveMap = {};

if (LiveMap.RaceTime = {
    domain: null,
    eventId: null,
    frequency: 6e4,
    handler: "/handlers/Live/GetRaceTime.ajax",
    localized: {
        at: "at",
        hoursPlural: "hours",
        hoursSingular: "hour",
        raceStartsIn: "Race starts in",
        raceStartsOn: "Race starts on",
        raceStartsSoon: "Race starts soon",
        raceTime: "Race time"
    },
    serverResponses: [],
    state: "unknown",
    startTime: null,
    startTimeUTCString: null,
    startTimeLocalString: null,
    testMode: !1,
    timezoneOffset: 0,
    timer: null,
    initialized: !1,
    jsonpCallback: function(a, b) {
        "use strict";
        var c;
        return c = a + JSON.stringify(b), c = c.replace(/[^A-Za-z0-9]/g, ""), c.length > 120 && (c = c.substring(0, 120)), 
        c;
    },
    getTimezoneOffset: function() {
        "use strict";
        return LiveMap.RaceTime.initialized || LiveMap.RaceTime.init(), LiveMap.RaceTime.timezoneOffset;
    },
    getOffsetMS: function() {
        "use strict";
        var a;
        return LiveMap.RaceTime.initialized || LiveMap.RaceTime.init(), null === LiveMap.RaceTime.startTime ? void 0 : (a = new Date().getTime(), 
        a - LiveMap.RaceTime.startTime);
    },
    getOffsetS: function() {
        "use strict";
        var a = LiveMap.RaceTime.getOffsetMS();
        return void 0 === a ? void 0 : (a = Math.floor(a / 1e3), LiveMap.RaceTime.offsetSeconds = a, 
        LiveMap.RaceTime.offsetSecondsReadable = LiveMap.Units.durationStringWithIndentifiers(a, !1), 
        a);
    },
    getTimeStringPre: function() {
        "use strict";
        var a, b, c;
        return a = LiveMap.RaceTime.getOffsetS(), "undefined" === a ? "---" : (a > 0 && (a = 0), 
        0 > a && (a = -1 * a), a > 172800 ? (b = new Date(LiveMap.RaceTime.startTime), LiveMap.RaceTime.localized.raceStartsOn + " " + (b.getMonth() + 1) + "/" + b.getDate() + "/" + b.getFullYear() + " " + LiveMap.RaceTime.localized.at + " " + b.getHours() + ":" + LiveMap.Units.leadingZeroes(b.getMinutes(), 2)) : a > 3600 ? (c = Math.round(a / 3600), 
        c > 1 ? LiveMap.RaceTime.localized.raceStartsIn + " " + c + " " + LiveMap.RaceTime.localized.hoursPlural : LiveMap.RaceTime.localized.raceStartsIn + " " + c + " " + LiveMap.RaceTime.localized.hoursSingular) : LiveMap.RaceTime.localized.raceStartsSoon);
    },
    getTimeStringLive: function() {
        "use strict";
        var a;
        return a = LiveMap.RaceTime.getOffsetS(), LiveMap.RaceTime.offsetSeconds = a, "undefined" === a ? "---" : (0 > a && (a = 0), 
        '<span class="title">' + LiveMap.RaceTime.localized.raceTime + '</span> <span class="value">' + LiveMap.Units.durationString(a, !1) + "</span>");
    },
    getTimeStringPost: function() {
        "use strict";
        return "";
    },
    getTimeString: function() {
        "use strict";
        switch (LiveMap.RaceTime.initialized || LiveMap.RaceTime.init(), LiveMap.RaceTime.state) {
          case "post":
            return LiveMap.RaceTime.getTimeStringPost();

          case "live":
            return LiveMap.RaceTime.getTimeStringLive();

          default:
            return LiveMap.RaceTime.getTimeStringPre();
        }
    },
    setBodyClass: function() {
        "use strict";
        return jQuery("body").removeClass("preRace").removeClass("liveRace").removeClass("postRace"), 
        "unknown" === LiveMap.RaceTime.state ? jQuery("body").addClass("preRace") : jQuery("body").addClass(LiveMap.RaceTime.state + "Race"), 
        LiveMap.RaceTime;
    },
    getState: function() {
        "use strict";
        var a = jQuery("body");
        return "unknown" === LiveMap.RaceTime.state ? a.is("liveRace") ? "live" : a.is("postRace") ? "post" : "pre" : LiveMap.RaceTime.state;
    },
    receiveUpdate: function(a, b, c) {
        "use strict";
        var d = "unknown", e = "unknown", f = 0;
        try {
            return LiveMap.RaceTime.serverResponses.push({
                url: b,
                queryParams: c,
                receivedAt: new Date().toString(),
                data: a
            }), void 0 !== a.RaceState && null !== a.RaceState ? d = a.RaceState.toString().toLowerCase() : (console.log("No RaceState from " + LiveMap.RaceTime.handler), 
            console.log("data", a)), void 0 !== a.RaceStartTimeOfDay && null !== a.RaceStartTimeOfDay ? (f = a.RaceStartTimeOfDay, 
            f = 1e3 * LiveMap.Units.cleanTimestamp(f), f -= LiveMap.RaceTime.timezoneOffset) : (console.log("No RaceStartTimeOfDay from " + LiveMap.RaceTime.handler), 
            console.log("data", a)), d !== LiveMap.RaceTime.state && (e = LiveMap.RaceTime.state, 
            LiveMap.RaceTime.state = d, LiveMap.RaceTime.setBodyClass(), jQuery.publish("LiveMap.RaceTime.stateChange", [ d, e ])), 
            f !== LiveMap.RaceTime.startTime && (LiveMap.RaceTime.startTime = f, LiveMap.RaceTime.startTimeUTCString = new Date(f).toUTCString(), 
            LiveMap.RaceTime.startTimeLocalString = new Date(f).toLocaleString(), jQuery.publish("LiveMap.RaceTime.timeChange", [ f ])), 
            LiveMap.RaceTime;
        } catch (g) {
            return console.log("Error in LiveMap.RaceTime.receiveUpdate"), console.log(g), console.log("   data", a), 
            console.log("   LiveMap.RaceTime", LiveMap.RaceTime), LiveMap.RaceTime;
        }
    },
    fakeUpdate: function() {
        var a;
        return console.log("RaceTime.fakeUpdate: In test mode. Generating a fake start time of an hour ago."), 
        void 0 === LiveMap.RaceTime.fakeStart && (LiveMap.RaceTime.fakeStart = new Date().getTime() - 36e4), 
        a = {
            RaceState: "Live",
            RaceStartTimeOfDay: LiveMap.RaceTime.fakeStart
        }, LiveMap.RaceTime.receiveUpdate(a, "fake", "fake"), LiveMap.RaceTime;
    },
    requestUpdate: function() {
        "use strict";
        var a, b;
        return LiveMap.RaceTime.initialized || LiveMap.RaceTime.init(), a = LiveMap.RaceTime.domain + LiveMap.RaceTime.handler, 
        b = {
            e: LiveMap.RaceTime.eventId
        }, LiveMap.RaceTime.testMode ? (LiveMap.RaceTime.fakeUpdate(), LiveMap.RaceTime) : (jQuery.ajax({
            url: a,
            cache: !0,
            dataType: "jsonp",
            data: b,
            error: function(a, b, c) {
                console.log("Error in LiveMap.RaceTime.requestUpdate", {
                    url: LiveMap.RaceTime.domain + LiveMap.RaceTime.handler,
                    e: LiveMap.RaceTime.eventId,
                    jqXHR: a,
                    textStatus: b,
                    errorThrown: c
                });
            },
            jsonpCallback: LiveMap.RaceTime.jsonpCallback(a, b),
            success: function(c) {
                try {
                    LiveMap.RaceTime.receiveUpdate(c, a, b);
                } catch (d) {
                    console.log("Error in RaceTime.requestUpdate.success"), console.log(d);
                }
            },
            type: "GET"
        }), LiveMap.RaceTime);
    },
    cycle: function() {
        "use strict";
        try {
            return window.clearTimeout(LiveMap.RaceTime.timer), LiveMap.RaceTime.requestUpdate(), 
            "post" !== LiveMap.RaceTime.state && (LiveMap.RaceTime.timer = window.setTimeout(LiveMap.RaceTime.cycle, LiveMap.RaceTime.frequency)), 
            LiveMap.RaceTime;
        } catch (a) {
            return console.log("Error in LiveMap.RaceTime.cycle"), console.log(a), LiveMap.RaceTime;
        }
    },
    init: function() {
        "use strict";
        return LiveMap.RaceTime.initialized || (LiveMap.RaceTime.initialized = !0, (null === LiveMap.RaceTime.domain || "" === LiveMap.RaceTime.domain) && (void 0 !== window.domainServicesCached ? LiveMap.RaceTime.domain = window.domainServicesCached : LiveMap.RaceTime.domain = ""), 
        (null === LiveMap.RaceTime.eventId || "" === LiveMap.RaceTime.eventId) && (void 0 !== window.subEventId ? LiveMap.RaceTime.eventId = window.subEventId : LiveMap.RaceTime.eventId = ""), 
        void 0 !== window.timezoneOffset && (LiveMap.RaceTime.timezoneOffset = 1e3 * LiveMap.Units.parseTimezoneOffset(window.timezoneOffset)), 
        LiveMap.RaceTime.cycle()), LiveMap.RaceTime;
    }
}, void 0 === LiveMap) var LiveMap = {};

if (LiveMap.ShareForms = {
    classBodyActive: "shareFormActive",
    ids: {
        modal: "formWindowModal",
        outer: "formWindowOuter",
        inner: "formWindowInner",
        close: "formWindowClose",
        content: "formWindowContent"
    },
    initialized: !1,
    templates: {
        email: "form_email",
        text: "form_text"
    },
    ensureElement: function(a) {
        "use strict";
        var b = !0;
        return LiveMap.ShareForms["$" + a] = jQuery(LiveMap.ShareForms.ids[a]), 0 === LiveMap.ShareForms["$" + a].length && (b = !1, 
        LiveMap.ShareForms["$" + a] = jQuery('<div id="' + LiveMap.ShareForms.ids[a] + '" />')), 
        b;
    },
    addElement: function(a, b) {
        "use strict";
        return LiveMap.ShareForms["$" + b].append(LiveMap.ShareForms["$" + a]), LiveMap.ShareForms;
    },
    initWindow: function() {
        "use strict";
        return LiveMap.ShareForms.initialized ? LiveMap.ShareForms : (LiveMap.ShareForms.ensureElement("modal") || jQuery("body").append(LiveMap.ShareForms.$modal), 
        LiveMap.ShareForms.ensureElement("outer") || jQuery("body").append(LiveMap.ShareForms.$outer), 
        LiveMap.ShareForms.ensureElement("inner") || LiveMap.ShareForms.addElement("inner", "outer"), 
        LiveMap.ShareForms.ensureElement("close") || (LiveMap.ShareForms.addElement("close", "inner"), 
        LiveMap.ShareForms.$close.on("click", function(a) {
            a.preventDefault(), LiveMap.ShareForms.hideForm();
        })), LiveMap.ShareForms.ensureElement("content") || (LiveMap.ShareForms.addElement("content", "inner"), 
        LiveMap.ShareForms.$content.on("submit", "form", function(a) {
            var b = jQuery(this);
            a.preventDefault(), LiveMap.ShareForms.submitForm(b);
        })), LiveMap.ShareForms.initialized = !0, LiveMap.ShareForms);
    },
    validate: function(a) {
        var b = !0;
        return a.find("input, select").each(function() {
            var a, c, d, e, f, g = !0;
            a = jQuery(this), c = a.parents("form .field"), a.is("[pattern]") && (d = a.attr("pattern"), 
            e = new RegExp(d), f = a.val(), e.test(f) || (g = !1, b = !1)), g ? c.removeClass("fieldError") : c.addClass("fieldError");
        }), b;
    },
    submitForm: function(a) {
        "use strict";
        var b, c, d;
        return a = jQuery(a), LiveMap.ShareForms.validate(a) ? (b = a.attr("action"), c = a.attr("method"), 
        c = "post" !== c.toString().toLowerCase() ? "GET" : "POST", d = a.serialize(), jQuery.ajax({
            url: b,
            type: c,
            data: d
        }), this.hideForm(), LiveMap.ShareForms) : LiveMap.ShareForms;
    },
    showForm: function(a, b) {
        "use strict";
        var c;
        try {
            if (LiveMap.ShareForms.initWindow(), void 0 === LiveMap.ShareForms.templates[a]) throw "Invalid form.";
            if (void 0 === Digi.Templates[LiveMap.ShareForms.templates[a]]) throw "Invalid form.";
            return b = jQuery.extend({}, b), c = Digi.Templates[LiveMap.ShareForms.templates[a]](b), 
            LiveMap.ShareForms.$content.empty().append(c), jQuery("body").addClass(LiveMap.ShareForms.classBodyActive), 
            LiveMap.ShareForms;
        } catch (d) {
            throw console.log("Error in LiveMap.ShareForms.showForm"), console.log(d), console.log("form", a), 
            console.log("data", b), d;
        }
    },
    hideForm: function() {
        "use strict";
        return LiveMap.ShareForms.initWindow(), jQuery("body").removeClass(LiveMap.ShareForms.classBodyActive), 
        LiveMap.ShareForms;
    },
    init: function() {
        "use strict";
        return LiveMap.ShareForms.initWindow(), LiveMap.ShareForms;
    }
}, void 0 === LiveMap) var LiveMap = {};

if (LiveMap.Sponsors = {
    randomize: function(a) {
        "use strict";
        var b, c, d = [];
        for (b = window.lmSponsors.concat([]); b.length > 0 && d.length < a; ) c = Math.floor(Math.random() * b.length), 
        d.push(b[c]), b.splice(c, 1);
        return d;
    },
    init: function() {
        "use strict";
        var a, b, c, d;
        if (a = jQuery("#lmSponsors"), 0 !== a.length) for (b = LiveMap.Sponsors.randomize(3), 
        a.empty(), c = 0; c < b.length; c += 1) d = jQuery('<a href="' + b[c].url + '" title="' + b[c].title + '" target="_blank" />'), 
        d.append('<img src="' + b[c].img + '" alt="' + b[c].title + '" />'), a.append(d);
    }
}, void 0 === LiveMap) var LiveMap = {};

LiveMap.Units = {
    M: 1,
    KM: .001,
    MI: 1 / 1609.34,
    MILES: 1 / 1609.34,
    F: 3.28084,
    FT: 3.28084,
    FEET: 3.28084,
    defaultUnits: .001,
    getUnitString: function(a) {
        "use strict";
        switch (void 0 === a && (a = LiveMap.Units.defaultUnits), a) {
          case LiveMap.Units.F:
            return "feet";

          case LiveMap.Units.M:
            return "meters";

          case LiveMap.Units.KM:
            return "kilometers";

          case LiveMap.Units.MI:
            return "miles";

          default:
            return "unknown";
        }
    },
    getShortUnitString: function(a) {
        "use strict";
        switch (void 0 === a && (a = LiveMap.Units.defaultUnits), a) {
          case LiveMap.Units.F:
            return "ft";

          case LiveMap.Units.M:
            return "m";

          case LiveMap.Units.KM:
            return "km";

          case LiveMap.Units.MI:
            return "mi";

          default:
            return "unknown";
        }
    },
    getSmallUnits: function(a) {
        "use strict";
        return void 0 === a && (a = LiveMap.Units.defaultUnits), a === LiveMap.Units.MI || a === LiveMap.Units.FT ? LiveMap.Units.FT : LiveMap.Units.M;
    },
    getDefault: function() {
        "use strict";
        return LiveMap.Units.defaultUnits;
    },
    setDefault: function(a) {
        "use strict";
        return LiveMap.Units.defaultUnits = a, jQuery.publish("LiveMap.UnitChange", [ a, LiveMap.Units.getConst(a) ]), 
        LiveMap.Units;
    },
    isImperial: function(a) {
        "use strict";
        return void 0 === a && (a = LiveMap.Units.defaultUnits), a === LiveMap.Units.MI || a === LiveMap.Units.FT ? !0 : !1;
    },
    isMetric: function(a) {
        "use strict";
        return LiveMap.Units.isImperial(a) === !1 ? !0 : !1;
    },
    getConst: function(a) {
        "use strict";
        var b;
        void 0 === a && (a = LiveMap.Units.getDefault());
        for (b in LiveMap.Units) if (LiveMap.Units.hasOwnProperty(b) && "number" == typeof LiveMap.Units[b] && LiveMap.Units[b] === a) return b;
        return void 0;
    },
    saveToCookie: function(a) {
        "use strict";
        var b;
        return void 0 === a && (a = LiveMap.Units.getDefault()), b = a, "number" == typeof b && (b = LiveMap.Unit.getConst(a), 
        void 0 === b) ? (console.log("Error in LiveMap.Units.saveToCookie"), void console.log("Unable to convert numerical value to constant.")) : (LiveMap.Units.setDefault(LiveMap.Units[b]), 
        LiveMap.Cookies.set("LiveMapUnits", b, 30), b);
    },
    loadFromCookie: function(a) {
        "use strict";
        var b;
        return void 0 === a && (a = "MI"), b = LiveMap.Cookies.get("LiveMapUnits"), "" === b && (b = a), 
        "number" == typeof b && (b = LiveMap.Units.getConst(b), void 0 === b) ? (console.log("Error in LiveMap.Units.loadFromCookie"), 
        console.log("Could not match the numerical value."), "MI") : (LiveMap.Units.setDefault(LiveMap.Units[b]), 
        b);
    },
    setMetric: function() {
        "use strict";
        LiveMap.Units.setDefault(LiveMap.Units.KM);
    },
    setImperial: function() {
        "use strict";
        LiveMap.Units.setDefault(LiveMap.Units.MI);
    },
    dp: function(a, b) {
        "use strict";
        var c;
        return void 0 === b && (b = 0), c = Math.pow(10, b), Math.round(a * c) / c;
    },
    dpWithZeroes: function(a, b) {
        "use strict";
        var c, d, e, f;
        for (void 0 === b && (b = 0), a = LiveMap.Units.dp(a, b), c = Number(a).toString(), 
        d = c.indexOf("."), -1 === d ? (b > 0 && (c += "."), e = b) : e = b + d - c.length + 1, 
        f = 0; e > f; f += 1) c += "0";
        return c;
    },
    leadingZeroes: function(a, b) {
        "use strict";
        for (void 0 === a && (a = 0), void 0 === b && (b = 0), "number" == typeof a && (a = Math.floor(a).toString()); a.length < b; ) a = "0" + a;
        return a;
    },
    parseJSONDate: function(a) {
        "use strict";
        var b, c;
        try {
            if (b = a.match(/^\/Date\(([\-+]*\d+)([\-+]\d\d)?(\d\d)?\)\/$/), void 0 === b || null === b) throw "Unable to convert from JSON Date";
            return void 0 !== b[1] ? b[1] = parseInt(b[1], 10) : b[1] = 0, void 0 !== b[2] ? b[2] = parseInt(b[2], 10) : b[2] = 0, 
            void 0 !== b[3] ? b[3] = parseInt(b[3], 10) : b[3] = 0, c = new Date(b[1] + 36e5 * b[2] + 6e4 * b[3]), 
            c.getTime() / 1e3;
        } catch (d) {
            throw console.log("Error in LiveMap.Units.parseJSONDate"), console.log(d), console.log("jsonDate", a), 
            d;
        }
    },
    getScormParts: function(a) {
        "use strict";
        var b, c;
        try {
            if (b = a.match(/P(((\d{1,4})Y)?((\d{1,2})M)?((\d{1,2})D)?)?(T((\d{1,2})H)?((\d{1,2})M)?((\d{1,2})S)?)/i), 
            !b) throw "Unable to convert from SCORM.";
            return c = {
                fullString: b[0],
                dateString: b[1],
                yearString: b[2],
                year: b[3],
                monthString: b[4],
                month: b[5],
                dayString: b[6],
                day: b[7],
                timeString: b[8],
                hoursString: b[9],
                hours: b[10],
                minutesString: b[11],
                minutes: b[12],
                secondsString: b[13],
                seconds: b[14]
            }, void 0 === c.year ? c.year = 0 : c.year = parseInt(c.year, 10), void 0 === c.month ? c.month = 0 : c.month = parseInt(c.month, 10), 
            void 0 === c.day ? c.day = 0 : c.day = parseInt(c.day, 10), void 0 === c.hours ? c.hours = 0 : c.hours = parseInt(c.hours, 10), 
            void 0 === c.minutes ? c.minutes = 0 : c.minutes = parseInt(c.minutes, 10), void 0 === c.seconds ? c.seconds = 0 : c.seconds = parseInt(c.seconds, 10), 
            c;
        } catch (d) {
            throw console.log("Error in LiveMap.Units.getScormParts"), console.log(d), console.log("scormString", a), 
            d;
        }
    },
    parseScorm: function(a) {
        "use strict";
        var b, c, d;
        try {
            return d = LiveMap.Units.getScormParts(a), 0 === d.year && (d.year = 1970), b = new Date(d.year, d.month, d.day, d.hours, d.minutes, d.seconds), 
            c = new Date(1970, 0, 0, 0, 0, 0), b.setTime(b.getTime() - c.getTime()), b.getTime() / 1e3;
        } catch (e) {
            throw console.log("Error in LiveMap.Units.parseScorm"), console.log(e), console.log("scormString", a), 
            e;
        }
    },
    cleanTimestamp: function(a) {
        "use strict";
        try {
            return void 0 !== a && void 0 !== a.getTime && (a = a.getTime() / 1e3), "string" == typeof a && (a = 0 === a.indexOf("P") ? LiveMap.Units.parseScorm(a) : -1 !== a.indexOf("Date") ? LiveMap.Units.parseJSONDate(a) : parseFloat(a, 10)), 
            a;
        } catch (b) {
            throw console.log("Error in LiveMap.Units.cleanTimestamp"), console.log(b), console.log("timestamp", a), 
            b;
        }
    },
    parseTimezoneOffset: function(a) {
        "use strict";
        var b, c, d, e, f;
        try {
            if (b = a.split(":"), 3 !== b.length) throw "Could not find three:time:parts";
            return c = parseInt(b[0], 10), d = parseInt(b[1], 10), e = parseInt(b[2], 10), f = 3600 * c + 60 * d + e;
        } catch (g) {
            return console.log("Error in LiveMap.Units.parseTimezoneOffset"), console.log(g), 
            console.log("   tz", a), 0;
        }
    },
    durationParts: function(a) {
        "use strict";
        var b, c, d, e, f, g;
        if (void 0 === a && (a = 0), "string" == typeof a) try {
            a = LiveMap.Units.cleanTimestamp(a);
        } catch (h) {
            console.log(h), a = 0;
        }
        return g = 1e3 * a % 1e3, f = Math.floor(a) % 60, b = Math.floor(a / 60), e = b % 60, 
        b = Math.floor(b / 60), d = b % 24, b = Math.floor(b / 24), c = b, {
            d: c,
            h: d,
            m: e,
            s: f,
            ms: g
        };
    },
    durationPartsFormated: function(a) {
        "use strict";
        var b;
        return b = LiveMap.Units.durationParts(a), {
            d: b.d.toString(),
            h: LiveMap.Units.leadingZeroes(b.h, 2),
            m: LiveMap.Units.leadingZeroes(b.m, 2),
            s: LiveMap.Units.leadingZeroes(b.s, 2),
            ms: LiveMap.Units.leadingZeroes(b.ms, 3)
        };
    },
    durationString: function(a, b, c) {
        "use strict";
        var d, e = "";
        return 99999 === a || "99999" === a ? "---" : !c || 0 !== a && "0" !== a ? (0 > a && (e = "-", 
        a = -1 * a), d = LiveMap.Units.durationPartsFormated(a), b !== !0 && (b = !1), "0" !== d.d ? b ? e + d.d + ":" + d.h + ":" + d.m + ":" + d.s + ":" + d.ms : e + d.d + ":" + d.h + ":" + d.m + ":" + d.s : "0" !== d.h ? b ? e + d.h + ":" + d.m + ":" + d.s + ":" + d.ms : e + d.h + ":" + d.m + ":" + d.s : b ? e + d.m + ":" + d.s + ":" + d.ms : e + d.m + ":" + d.s) : "---";
    },
    durationStringWithIndentifiers: function(a, b, c) {
        "use strict";
        var d, e = "";
        return 99999 === a || "99999" === a ? "---" : !c || 0 !== a && "0" !== a ? (0 > a && (e = "-", 
        a = -1 * a), d = LiveMap.Units.durationParts(a), b !== !0 && (b = !1), 0 !== d.d ? b ? e + d.d + "d " + d.h + "h " + d.m + "m " + d.s + "s " + d.ms + "ms" : e + d.d + "d " + d.h + "h " + d.m + "m " + d.s + "s" : 0 !== d.h ? b ? e + d.h + "h " + d.m + "m " + d.s + "s " + d.ms + "ms" : e + d.h + "h " + d.m + "m " + d.s + "s" : b ? e + d.m + "m " + d.s + "s " + d.ms + "ms" : e + d.m + "m " + d.s + "s") : "---";
    },
    durationStringHours: function(a) {
        "use strict";
        var b;
        return 999999 === a ? "---" : (b = a / 3600, b > 0 ? Math.ceil(b) : Math.floor(b));
    },
    convert: function(a, b, c) {
        "use strict";
        return void 0 === b && (b = LiveMap.Units.defaultUnits), LiveMap.Units.dp(a * b, c);
    },
    convertToSmallUnits: function(a, b) {
        "use strict";
        var c = LiveMap.Units.defaultUnits;
        return c = c === LiveMap.Units.MI ? LiveMap.Units.FT : LiveMap.Units.M, LiveMap.Units.dp(a * c, b);
    },
    convertFrom: function(a, b, c, d) {
        "use strict";
        return void 0 === c && (c = LiveMap.Units.defaultUnits), LiveMap.Units.dp(a * c / b, d);
    },
    testCase: function(a, b, c, d) {
        "use strict";
        var e;
        d !== !0 && (d = !1), e = b === c ? "Success!" : "Fail!", b === c && d || console.log(a + "\nReturns", typeof b, b, "expects", typeof c, c + "\n" + e);
    },
    test: function(a) {
        "use strict";
        var b = LiveMap.Units.getDefault();
        LiveMap.Units.setMetric(), LiveMap.Units.testCase("LiveMap.Units.dp(3.142, 2)", LiveMap.Units.dp(3.142, 2), 3.14, a), 
        LiveMap.Units.testCase("LiveMap.Units.dp(3.142, 5)", LiveMap.Units.dp(3.142, 5), 3.142, a), 
        LiveMap.Units.testCase("LiveMap.Units.dpWithZeroes(10, 0)", LiveMap.Units.dpWithZeroes(10, 0), "10", a), 
        LiveMap.Units.testCase("LiveMap.Units.dpWithZeroes(10, 3)", LiveMap.Units.dpWithZeroes(10, 3), "10.000", a), 
        LiveMap.Units.testCase("LiveMap.Units.dpWithZeroes(1, 3)", LiveMap.Units.dpWithZeroes(1, 3), "1.000", a), 
        LiveMap.Units.testCase("LiveMap.Units.dpWithZeroes(1.2, 3)", LiveMap.Units.dpWithZeroes(1.2, 3), "1.200", a), 
        LiveMap.Units.testCase("LiveMap.Units.dpWithZeroes(1.2345, 3)", LiveMap.Units.dpWithZeroes(1.2345, 3), "1.235", a), 
        LiveMap.Units.testCase("LiveMap.Units.convert(800, LiveMap.Units.MI, 1)", LiveMap.Units.convert(800, LiveMap.Units.MI, 1), .5, a), 
        LiveMap.Units.testCase("LiveMap.Units.convert(1200, LiveMap.Units.MI)", LiveMap.Units.convert(1200, LiveMap.Units.MI), 1, a), 
        LiveMap.Units.testCase("LiveMap.Units.convert(1200, LiveMap.Units.MI, 1)", LiveMap.Units.convert(1200, LiveMap.Units.MI, 1), .8, a), 
        LiveMap.Units.testCase("LiveMap.Units.convert(1200, LiveMap.Units.MI, 2)", LiveMap.Units.convert(1200, LiveMap.Units.MI, 2), .75, a), 
        LiveMap.Units.setMetric(), LiveMap.Units.testCase("LiveMap.Units.setMetric();\nLiveMap.Units.convert(16000);", LiveMap.Units.convert(16e3), 16, a), 
        LiveMap.Units.setImperial(), LiveMap.Units.testCase("LiveMap.Units.setImperial();\nLiveMap.Units.convert(16000);", LiveMap.Units.convert(16e3), 10, a), 
        LiveMap.Units.setDefault(LiveMap.Units.FEET), LiveMap.Units.testCase("LiveMap.Units.setDefault(LiveMap.Units.FEET);\nLiveMap.Units.convert(16000);", LiveMap.Units.convert(16e3), 52493, a), 
        LiveMap.Units.setImperial(), LiveMap.Units.testCase("LiveMap.setImperial();\nLiveMap.Units.convertToSmallUnits(10, 0);", LiveMap.Units.convertToSmallUnits(10, 0), 33, a), 
        LiveMap.Units.setMetric(), LiveMap.Units.testCase("LiveMap.setMetric();\nLiveMap.Units.convertToSmallUnits(10, 0);", LiveMap.Units.convertToSmallUnits(10, 0), 10, a), 
        LiveMap.Units.testCase("LiveMap.Units.convertFrom(10, LiveMap.Units.MI, LiveMap.Units.KM, 1)", LiveMap.Units.convertFrom(10, LiveMap.Units.MI, LiveMap.Units.KM, 1), 16, a), 
        LiveMap.Units.testCase("LiveMap.Units.convertFrom(10, LiveMap.Units.KM, LiveMap.Units.MI, 1)", LiveMap.Units.convertFrom(10, LiveMap.Units.KM, LiveMap.Units.MI, 1), 6.3, a), 
        LiveMap.Units.setDefault(b);
    }
}, Handlebars.registerHelper("athleteOnMapURL", function(a) {
    "use strict";
    return LiveMap.AthleteList.athleteUrl(a);
}), Handlebars.registerHelper("athleteOnMapURLEscaped", function(a) {
    "use strict";
    return encodeURIComponent(LiveMap.AthleteList.athleteUrl(a));
}), Handlebars.registerHelper("checkedSimple", function(a) {
    "use strict";
    return a ? 'checked="checked"' : "";
}), Handlebars.registerHelper("dashAllZeroes", function(a) {
    "use strict";
    var b;
    return b = a.toString().match(/[1-9]/g), null === b || void 0 !== b.length && 0 === b.length ? "---" : a;
}), Handlebars.registerHelper("debug", function(a, b) {
    "use strict";
    var c;
    if (void 0 !== LiveMap && void 0 !== LiveMap.vars && LiveMap.vars.debugHandlebars === !0) try {
        return a = a.toString().toLowerCase(), a.replace(/\W+/gi, ""), c = jQuery.extend({}, b), 
        void 0 !== c.localized && delete c.localized, c = JSON.stringify(c), c = c.toString().replace(/\"/g, "&quot;"), 
        "data-handlebars-debug-" + a + '="' + c + '"';
    } catch (d) {
        return console.log(d), "";
    }
    return "";
}), Handlebars.registerHelper("debugField", function(a, b) {
    "use strict";
    var c;
    if (void 0 !== LiveMap && void 0 !== LiveMap.vars && LiveMap.vars.debugHandlebars === !0) try {
        return void 0 === b && (b = "undefined"), null === b && (b = "null"), c = JSON.stringify(b), 
        c = c.toString().replace(/\"/g, "&quot;"), 'title="' + a + ": " + c + '"';
    } catch (d) {
        return console.log(d), "";
    }
    return "";
}), Handlebars.registerHelper("durationNoIdentifiers", function(a, b) {
    "use strict";
    return ("boolean" != typeof b || b !== !0) && (b = !1), LiveMap.Units.durationString(a, !1, b);
}), Handlebars.registerHelper("durationWithIdentifiers", function(a, b) {
    "use strict";
    return ("boolean" != typeof b || b !== !0) && (b = !1), LiveMap.Units.durationStringWithIdentifiers(a, !1, b);
}), Handlebars.registerHelper("encodeURIComponent", function(a) {
    "use strict";
    return encodeURIComponent(a);
}), Handlebars.registerHelper("equals", function(a, b, c) {
    return a === b ? c.fn(this) : c.inverse(this);
}), Handlebars.registerHelper("firstChar", function(a) {
    "use strict";
    return "string" != typeof a && (a = ""), a.substring(0, 1);
}), Handlebars.registerHelper("fullGender", function(a) {
    "use strict";
    return "string" != typeof a && (a = ""), "m" === a.toString().toLowerCase() ? "Male" : "Female";
}), Handlebars.registerHelper("largeUnits", function() {
    "use strict";
    return LiveMap.Units.getUnitString();
}), Handlebars.registerHelper("largeUnitsShort", function() {
    "use strict";
    return LiveMap.Units.getShortUnitString();
}), Handlebars.registerHelper("metricOrImperial", function(a, b) {
    "use strict";
    return LiveMap.Units.isMetric() ? a : b;
}), Handlebars.registerHelper("mToLargeUnits", function(a, b) {
    "use strict";
    if ((void 0 === a || null === a) && (a = "0"), "number" != typeof b && "string" != typeof b && (b = 1), 
    "string" == typeof a) try {
        a = parseFloat(a, 10);
    } catch (c) {
        return console.log(c), "0";
    }
    if ("string" == typeof b) try {
        b = parseFloat(b, 10);
    } catch (c) {
        return console.log(c), "0";
    }
    return a *= b, LiveMap.Units.convert(a, void 0, 1);
}), Handlebars.registerHelper("mToSmallUnits", function(a, b) {
    "use strict";
    if ((void 0 === a || null === a) && (a = "0"), "number" != typeof b && "string" != typeof b && (b = 1), 
    "string" == typeof a) try {
        a = parseFloat(a, 10);
    } catch (c) {
        return console.log(c), "0";
    }
    if ("string" == typeof b) try {
        b = parseFloat(b, 10);
    } catch (c) {
        return console.log(c), "0";
    }
    return a *= b, LiveMap.Units.convertToSmallUnits(a, 0);
}), Handlebars.registerHelper("pinColor", function(a, b) {
    return void 0 === a || null === a || "" === a || 0 === a ? b : void 0 === LiveMap ? b : void 0 === LiveMap.AthleteList ? b : void 0 === LiveMap.AthleteList.idToHex ? b : LiveMap.AthleteList.idToHex(a);
}), Handlebars.registerHelper("selectedSimple", function(a) {
    "use strict";
    return a ? 'selected="selected"' : "";
}), Handlebars.registerHelper("smallUnits", function() {
    "use strict";
    return LiveMap.Units.getUnitString(LiveMap.Units.getSmallUnits());
}), Handlebars.registerHelper("smallUnitsShort", function() {
    "use strict";
    return LiveMap.Units.getShortUnitString(LiveMap.Units.getSmallUnits());
}), Handlebars.registerHelper("tripleDash", function(a) {
    "use strict";
    return 99999 === a || "99999" === a ? "---" : a;
});
//# sourceMappingURL=livemap.shared.min.js.map
/* ---------------------------------------- /includes/jsbin/ironfan.min.js ---------------------------------------- */
/*! Ironman - v0.0.1 - 06/13/2016 @ 2:18PM EDT */

var Digi = Digi || {};

Digi.localized = {
    formats: {
        currency: "$",
        date: "MM/DD/YYYY",
        decimal: ".",
        time: "HH:MM:SS"
    },
    strings: {
        cancel: "Cancel",
        change: "Change",
        changeOrResetPassword: "Change or Set Password",
        confirmNewPassword: "Confirm new password",
        currentPassword: "Current password",
        dob: "Date of Birth",
        emailAddress: "Email Address",
        newPassword: "New password",
        nickname: "Nickname",
        language: "Language",
        saveChanges: "Save Changes",
        selectLanguage: "Select language",
        settings: "Settings",
        username: "Username"
    },
    content: {
        "account-settings": {
            helpText: "Why can't I update this information?"
        },
        "account-profile": {},
        "account-races": {},
        "account-notifications": {
            newsletterLabel: "Check this box if you wish to receive our newsletter."
        },
        "account-followed-athletes": {
            noFollowedAthletesBlurb: 'Add athletes to your favorites list by navigating to the live map during <a href="/triathlon/coverage/live.aspx">event coverage</a>.'
        }
    }
}, Handlebars.registerHelper("log", function(a) {
    console.log(a);
}), Handlebars.registerHelper("checked", function(a, b) {
    return a === b ? " checked" : "";
}), Handlebars.registerHelper("date", function(a, b) {
    var c = moment(a);
    return c.isValid() ? ("string" != typeof b && (b = "M/D/YYYY"), c.format(b)) : a;
}), Handlebars.registerHelper("duration", function(a, b) {
    return $.isNumeric(a) ? (b = b && "string" == typeof b ? b : "seconds", moment().startOf("day").add(a, b).format("HH:mm:ss")) : a;
}), Handlebars.registerHelper("selected", function(a, b) {
    return "string" == typeof b && a.value === b || Array.isArray(b) && -1 !== b.indexOf(a.value) ? " selected" : "";
}), Handlebars.registerHelper("tooltip", function(a) {
    var b;
    return void 0 === a || void 0 !== a && "" === $.trim(a) ? "" : (a = Handlebars.Utils.escapeExpression(a), 
    b = '<a class="form-tip"><span class="tip-text">' + a + "</span></a>", new Handlebars.SafeString(b));
}), Handlebars.registerHelper("plural", function(a, b) {
    return a = b + " " + a, 1 !== b ? a + "s" : a;
}), Handlebars.registerHelper("toLowerCase", function(a) {
    return a.toLowerCase();
}), Handlebars.registerHelper("alternate", function(a, b, c) {
    return ++a % b ? c.inverse(this) : c.fn(this);
}), Handlebars.registerHelper("percentage", function(a) {
    return 100 !== a && (a = 100 * a), a + "%";
}), Handlebars.registerHelper("isComplete", function(a) {
    return a === !0 ? "completed" : "";
}), Handlebars.registerHelper("pagination", function(a, b, c, d) {
    var e, f, g;
    3 === arguments.length && (d = c, c = 5), e = a - Math.floor(c / 2), f = a + Math.floor(c / 2), 
    0 >= e && (f -= e - 1, e = 1), f > b && (f = b, e = f - c + 1 > 0 ? f - c + 1 : 1), 
    g = {
        startFromFirstPage: !1,
        pages: [],
        endAtLastPage: !1
    }, 1 === e && (g.startFromFirstPage = !0);
    for (var h = e; f >= h; h++) g.pages.push({
        page: h,
        isCurrent: h === a
    });
    return f === b && (g.endAtLastPage = !0), d.fn(g);
}), Handlebars.registerHelper("mapPath", function(a) {
    var b, c, d;
    return b = location.href, c = b.replace(/(\?.*)|(#.*)/g, ""), d = c.replace("leaderboard.aspx", "map.aspx") + "?l=" + a;
}), Handlebars.registerHelper("progressBar", function(a) {
    return a.toFixed() + "%";
}), Handlebars.registerHelper("colorValue", function(a) {
    var b = a.toLowerCase().replace("awa", "");
    return b;
}), Handlebars.registerHelper("fullWord", function(a) {
    var b = a.replace("All World Athlete ", "");
    return b;
}), this.Digi = this.Digi || {}, this.Digi.Templates = this.Digi.Templates || {}, 
this.Digi.Templates["account-followed-athletes"] = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        return "open";
    }
    function g(a, b) {
        var d, e, f = "";
        return f += "\n        <p>", (e = c.description) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.description, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + "</p>\n      ";
    }
    function h(a, b) {
        var d, e = "";
        return e += '\n        <div class="legend">\n          <ul>\n            <li class="if-icon-ironman">IRONMAN Finisher</li>\n            <li class="if-icon-professional">Professional Athlete</li>\n            <li class="if-icon-awa awa-gold">All World Athlete Gold</li>\n            <li class="if-icon-awa awa-silver">All World Athlete Silver</li>\n            <li class="if-icon-awa awa-bronze">All World Athlete Bronze</li>\n          </ul>\n        </div>\n        <table class="tablesorter" data-sortlist="[[0,0]]">\n          <thead>\n            <tr>\n              <th class="details" data-sorter="lastName">\n                Name\n              </th>\n              <th class="country">\n                Country\n              </th>\n              <th class="upcoming-races">\n                Upcoming Races\n              </th>\n              <th class="past-races">\n                Past Races\n              </th>\n              <td class="unfollow"></td>\n            </tr>\n          </thead>\n          <tbody>\n            ', 
        d = c.each.call(a, a && a.followedAthletes, {
            hash: {},
            inverse: u.noop,
            fn: u.program(6, i, b),
            data: b
        }), (d || 0 === d) && (e += d), e += '\n          </tbody>\n        </table>\n        <div class="pagination-controls">\n          <div class="pager"></div>\n          <div class="direction">\n            <a class="prev">Previous</a>\n            <a class="next">Next</a>\n          </div>\n        </div>\n      </div>\n    ';
    }
    function i(a, b) {
        var d, e, f = "";
        return f += '\n              <tr>\n                <td>\n                  <a class="details" href="', 
        (e = c.profileUrl) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.profileUrl, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + '">\n                    <div class="athlete-name">\n                      ', 
        (e = c.firstName) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.firstName, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + " ", (e = c.lastName) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.lastName, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + '\n                    </div>\n                    <div class="athlete-club">\n                      ', 
        (e = c.clubName) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.clubName, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + '\n                    </div>\n                    <div class="athlete-awards">\n                      ', 
        d = c["if"].call(a, a && a.isPro, {
            hash: {},
            inverse: u.noop,
            fn: u.program(7, j, b),
            data: b
        }), (d || 0 === d) && (f += d), f += "\n                      ", d = c["if"].call(a, a && a.isIronmanFinisher, {
            hash: {},
            inverse: u.noop,
            fn: u.program(9, k, b),
            data: b
        }), (d || 0 === d) && (f += d), f += "\n                      ", d = c["if"].call(a, a && a.allWorldAthleteStatus, {
            hash: {},
            inverse: u.noop,
            fn: u.program(11, l, b),
            data: b
        }), (d || 0 === d) && (f += d), f += '\n                    </div>\n                  </a>\n                </td>\n                <td class="country">\n                  ', 
        (e = c.iso3) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.iso3, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + '\n                </td>\n                <td class="upcoming-races">\n                  ', 
        (e = c.numberUpcomingRaces) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.numberUpcomingRaces, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + '\n                </td>\n                <td class="past-races">\n                  ', 
        (e = c.numberPastRaces) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.numberPastRaces, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + '\n                </td>\n                <td>\n                  <button class="unfollow cta-link send-request" data-action="delete" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + '">Unfollow</button>\n                </td>\n              </tr>\n            ';
    }
    function j(a, b) {
        return '\n                        <span class="if-icon-professional"></span>\n                      ';
    }
    function k(a, b) {
        return '\n                        <span class="if-icon-ironman"></span>\n                      ';
    }
    function l(a, b) {
        var d, e, f = "";
        return f += '\n                        <span class="if-icon-awa ' + s((d = c.toLowerCase || a && a.toLowerCase, 
        e = {
            hash: {},
            data: b
        }, d ? d.call(a, a && a.allWorldAthleteStatus, e) : t.call(a, "toLowerCase", a && a.allWorldAthleteStatus, e))) + '"></span>\n                      ';
    }
    function m(a, b, d) {
        var e, f = "";
        return f += "\n      " + s(c.log.call(a, (e = a && a.localized, null == e || e === !1 ? e : e.strings), {
            hash: {},
            data: b
        })) + "\n      <p>", e = d && d.localized, e = null == e || e === !1 ? e : e.strings, 
        e = null == e || e === !1 ? e : e.noFollowedAthletesBlurb, e = typeof e === r ? e.apply(a) : e, 
        (e || 0 === e) && (f += e), f += "</p>\n    ";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var n, o, p, q = "", r = "function", s = this.escapeExpression, t = c.helperMissing, u = this, v = c.blockHelperMissing;
    return q += '<div class="module module-header">\n  <div class="module-inner">\n    <div class="message ', 
    p = {
        hash: {},
        inverse: u.noop,
        fn: u.program(1, f, e),
        data: e
    }, (o = c.hasHeaderMessage) ? n = o.call(b, p) : (o = b && b.hasHeaderMessage, n = typeof o === r ? o.call(b, p) : o), 
    c.hasHeaderMessage || (n = v.call(b, n, {
        hash: {},
        inverse: u.noop,
        fn: u.program(1, f, e),
        data: e
    })), (n || 0 === n) && (q += n), q += '">\n      <h2 class="title gamma">' + s((n = b && b.message, 
    n = null == n || n === !1 ? n : n.title, typeof n === r ? n.apply(b) : n)) + '</h2>\n      <p class="supplemental">' + s((n = b && b.message, 
    n = null == n || n === !1 ? n : n.supplemental, typeof n === r ? n.apply(b) : n)) + '</p>\n      <p class="description">' + s((n = b && b.message, 
    n = null == n || n === !1 ? n : n.description, typeof n === r ? n.apply(b) : n)) + '</p>\n      <span class="ss-icon ss-standard ss-close close-message">Close</span>\n    </div>\n  </div>\n</div>\n\n<div class="module module-followed-athletes module-table">\n  <div class="module-inner">\n    <header>\n      <h1 class="title alpha">', 
    (o = c.title) ? n = o.call(b, {
        hash: {},
        data: e
    }) : (o = b && b.title, n = typeof o === r ? o.call(b, {
        hash: {},
        data: e
    }) : o), q += s(n) + "</h1>\n      ", n = c["if"].call(b, b && b.description, {
        hash: {},
        inverse: u.noop,
        fn: u.program(3, g, e),
        data: e
    }), (n || 0 === n) && (q += n), q += '\n    </header>\n    <div class="status">\n      Currently following <span class="athlete-count">' + s((o = c.plural || b && b.plural, 
    p = {
        hash: {},
        data: e
    }, o ? o.call(b, "athlete", (n = b && b.followedAthletes, null == n || n === !1 ? n : n.length), p) : t.call(b, "plural", "athlete", (n = b && b.followedAthletes, 
    null == n || n === !1 ? n : n.length), p))) + "</span>.\n    </div>\n    ", n = c["if"].call(b, (n = b && b.followedAthletes, 
    null == n || n === !1 ? n : n.length), {
        hash: {},
        inverse: u.programWithDepth(13, m, e, b),
        fn: u.program(5, h, e),
        data: e
    }), (n || 0 === n) && (q += n), q += "\n</div>";
}), this.Digi.Templates["account-notifications"] = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        return "open";
    }
    function g(a, b) {
        var d, e, f = "";
        return f += "\n        <p>", (e = c.description) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.description, d = typeof e === m ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += n(d) + "</p>\n      ";
    }
    function h(a, b, d) {
        var e, f, g, h = "";
        return h += '\n\n        \n\n        <div class="module-newsletter-subscription">\n          <header>\n            <h2 class="title beta">Newsletter Subscription</h2>\n          </header>\n          <div class="form-fields">\n            <div class="form-item form-checkbox">\n              <input type="checkbox" name="authorizeNewsletter" id="authorizeNewsletter" ' + n((f = c.checked || a && a.checked, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, !0, (e = a && a.fieldValues, null == e || e === !1 ? e : e.authorizeNewsletter), g) : o.call(a, "checked", !0, (e = a && a.fieldValues, 
        null == e || e === !1 ? e : e.authorizeNewsletter), g))) + '>\n              <label for="authorizeNewsletter">' + n((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.newsletterLabel, 
        typeof e === m ? e.apply(a) : e)) + "</label>\n            </div>\n          </div>\n        </div>\n      ";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var i, j, k, l = "", m = "function", n = this.escapeExpression, o = c.helperMissing, p = this, q = c.blockHelperMissing;
    return l += '<div class="module module-header athlete-profile">\n  <div class="module-inner">\n    <div class="message ', 
    k = {
        hash: {},
        inverse: p.noop,
        fn: p.program(1, f, e),
        data: e
    }, (j = c.hasHeaderMessage) ? i = j.call(b, k) : (j = b && b.hasHeaderMessage, i = typeof j === m ? j.call(b, k) : j), 
    c.hasHeaderMessage || (i = q.call(b, i, {
        hash: {},
        inverse: p.noop,
        fn: p.program(1, f, e),
        data: e
    })), (i || 0 === i) && (l += i), l += '">\n      <h2 class="title gamma">' + n((i = b && b.message, 
    i = null == i || i === !1 ? i : i.title, typeof i === m ? i.apply(b) : i)) + '</h2>\n      <p class="description">' + n((i = b && b.message, 
    i = null == i || i === !1 ? i : i.description, typeof i === m ? i.apply(b) : i)) + '</p>\n      <span class="ss-icon ss-standard ss-close close-message">Close</span>\n    </div>\n    <header>\n      <h1 class="title alpha">', 
    (j = c.title) ? i = j.call(b, {
        hash: {},
        data: e
    }) : (j = b && b.title, i = typeof j === m ? j.call(b, {
        hash: {},
        data: e
    }) : j), l += n(i) + "</h1>\n      ", i = c["if"].call(b, b && b.description, {
        hash: {},
        inverse: p.noop,
        fn: p.program(3, g, e),
        data: e
    }), (i || 0 === i) && (l += i), l += '\n    </header>\n  </div>\n</div>\n\n<div class="module">\n  <form action="', 
    (j = c.handlerUrl) ? i = j.call(b, {
        hash: {},
        data: e
    }) : (j = b && b.handlerUrl, i = typeof j === m ? j.call(b, {
        hash: {},
        data: e
    }) : j), l += n(i) + '" method="get" accept-charset="utf-8" data-form-type="account-notifications">\n    <div class="module-inner">\n\n      ', 
    i = c["with"].call(b, (i = b && b.forms, null == i || i === !1 ? i : i.accountNotifications), {
        hash: {},
        inverse: p.noop,
        fn: p.programWithDepth(5, h, e, b),
        data: e
    }), (i || 0 === i) && (l += i), l += '\n\n      <div class="module-save-changes">\n        <input type="hidden" name="action" value="save">\n        <button class="cta-button" type="submit" autocomplete="off">Save Changes</button> <input class="cta-button transparent" type="reset" value="Cancel">\n      </div>\n\n    </div>\n  </form>\n</div>\n';
}), this.Digi.Templates["account-profile"] = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        return "open";
    }
    function g(a, b) {
        var c, d = "";
        return d += '\n        <a class="cta-link" href="' + z((c = a && a.pageUrls, c = null == c || c === !1 ? c : c.profile, 
        typeof c === y ? c.apply(a) : c)) + '">View Profile &rsaquo;</a>\n      ';
    }
    function h(a, b, d) {
        var e, f = "";
        return f += '\n      <div class="module-photo-bio">\n        <div class="module-inner">\n          <div class="profile-image ', 
        e = c["if"].call(a, (e = a && a.fieldValues, null == e || e === !1 ? e : e.bioImage), {
            hash: {},
            inverse: B.noop,
            fn: B.program(6, i, b),
            data: b
        }), (e || 0 === e) && (f += e), f += '">\n            <span class="ss-icon ss-standard ss-camera icon"></span>\n            <img src="' + z((e = a && a.fieldValues, 
        e = null == e || e === !1 ? e : e.bioImage, typeof e === y ? e.apply(a) : e)) + '">\n            <div class="overlay">\n              <div class="background"></div>\n              <div class="buttons">\n                <a class="cta-button fancybox" href="' + z((e = d && d.pageUrls, 
        e = null == e || e === !1 ? e : e.updatePhoto, typeof e === y ? e.apply(a) : e)) + '" data-fancybox-type="iframe" data-fancybox-width="448" data-fancybox-height="538">', 
        e = c["if"].call(a, (e = a && a.fieldValues, null == e || e === !1 ? e : e.bioImage), {
            hash: {},
            inverse: B.program(10, k, b),
            fn: B.program(8, j, b),
            data: b
        }), (e || 0 === e) && (f += e), f += ' Photo</a>\n                <a class="cta-button alt profile-photo-control" href="' + z((e = d && d.settings, 
        e = null == e || e === !1 ? e : e.profilePhotoHandlerUrl, typeof e === y ? e.apply(a) : e)) + '" data-action="remove">Remove</a>\n              </div>\n            </div>\n          </div>\n          <div class="profile-bio">\n            <h3 class="title gamma">Biography</h3>\n            <div class="form-item">\n              <textarea name="bio" maxlength="1500">' + z((e = a && a.fieldValues, 
        e = null == e || e === !1 ? e : e.bio, typeof e === y ? e.apply(a) : e)) + '</textarea>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="module-athlete-information">\n        <div class="module-inner">\n          <div class="page-content">\n            <h3 class="title column-header beta">Athlete Information</h3>\n          </div>\n          <div class="form-fields">\n            <div class="form-row form-pair">\n              <div class="form-item">\n                <label for="country">Country Representing</label>\n                ', 
        e = c["with"].call(a, (e = a && a.options, null == e || e === !1 ? e : e.country), {
            hash: {},
            inverse: B.noop,
            fn: B.program(12, l, b),
            data: b
        }), (e || 0 === e) && (f += e), f += '\n              </div>\n              <div class="form-item">\n                <label>\n                  Tri Club Affiliation\n                  <input type="hidden" id="triclub" class="bigdrop" name="clubAffiliation" value="' + z((e = a && a.fieldValues, 
        e = null == e || e === !1 ? e : e.clubAffiliation, typeof e === y ? e.apply(a) : e)) + '" data-handler-url="' + z((e = d && d.settings, 
        e = null == e || e === !1 ? e : e.triclubHandlerUrl, typeof e === y ? e.apply(a) : e)) + '">\n                </label>\n              </div>\n            </div>\n            <div class="form-row form-pair">\n              <div class="form-item">\n                <label>\n                  Occupation\n                  <input type="text" name="occupation" value="' + z((e = a && a.fieldValues, 
        e = null == e || e === !1 ? e : e.occupation, typeof e === y ? e.apply(a) : e)) + '">\n                </label>\n              </div>\n              <div class="form-item">\n                <label>\n                  Employer\n                  <input type="text" name="employer" value="' + z((e = a && a.fieldValues, 
        e = null == e || e === !1 ? e : e.employer, typeof e === y ? e.apply(a) : e)) + '">\n                </label>\n              </div>\n            </div>\n            <div class="form-row form-group form-radios inline">\n              <div class="form-label">\n                Gender\n              </div>\n              ', 
        e = c["with"].call(a, a && a.fieldValues, {
            hash: {},
            inverse: B.noop,
            fn: B.program(15, n, b),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n            </div>\n          </div>\n        </div>\n      </div>\n\n      ", 
        e = c["if"].call(a, (e = a && a.fieldValues, null == e || e === !1 ? e : e.awards), {
            hash: {},
            inverse: B.noop,
            fn: B.program(17, o, b),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n\n    ";
    }
    function i(a, b) {
        return "has-image";
    }
    function j(a, b) {
        return "Update";
    }
    function k(a, b) {
        return "Add";
    }
    function l(a, b) {
        var d, e = "";
        return e += '\n                <select name="country" id="country" data-forms-key="accountProfile">\n                  <option value="null">Select country</option>\n                  ', 
        d = c.each.call(a, a && a.options, {
            hash: {},
            inverse: B.noop,
            fn: B.programWithDepth(13, m, b, a),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n                </select>\n                ";
    }
    function m(a, b, d) {
        var e, f, g, h = "";
        return h += '\n                    <option value="', (f = c.value) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.value, e = typeof f === y ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += z(e) + '" ' + z((f = c.selected || a && a.selected, g = {
            hash: {},
            data: b
        }, f ? f.call(a, a, d && d.selectedValue, g) : A.call(a, "selected", a, d && d.selectedValue, g))) + ">", 
        (f = c.text) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.text, e = typeof f === y ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += z(e) + "</option>\n                  ";
    }
    function n(a, b) {
        var d, e, f = "";
        return f += '\n              <div class="form-item form-radio">\n                <input type="radio" name="gender" value="M" id="gender-male" ' + z((d = c.checked || a && a.checked, 
        e = {
            hash: {},
            data: b
        }, d ? d.call(a, "M", a && a.gender, e) : A.call(a, "checked", "M", a && a.gender, e))) + '>\n                <label for="gender-male">Male</label>\n              </div>\n              <div class="form-item form-radio">\n                <input type="radio" name="gender" value="F" id="gender-female" ' + z((d = c.checked || a && a.checked, 
        e = {
            hash: {},
            data: b
        }, d ? d.call(a, "F", a && a.gender, e) : A.call(a, "checked", "F", a && a.gender, e))) + '>\n                <label for="gender-female">Female</label>\n              </div>\n              ';
    }
    function o(a, b) {
        var d, e = "";
        return e += '\n        <div class="module-awards">\n          <div class="module-inner">\n            <header>\n              <h2 class="title beta">My Awards</h2>\n              <p class="suplemental">(These awards are listed on your public proﬁle)</p>\n            </header>\n            <div class="main">\n              <ol class="split-list">\n                ', 
        d = c.each.call(a, (d = a && a.fieldValues, null == d || d === !1 ? d : d.awards), {
            hash: {},
            inverse: B.noop,
            fn: B.program(18, p, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n              </ol>\n            </div>\n          </div>\n        </div>\n      ";
    }
    function p(a, b) {
        var c = "";
        return c += "\n                <li>" + z(typeof a === y ? a.apply(a) : a) + "</li>\n                ";
    }
    function q(a, b) {
        var d, e, f = "";
        return f += '\n      <div class="module-photos">\n        <div class="module-inner">\n          <header>\n            <h2 class="title beta">', 
        (e = c.title) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.title, d = typeof e === y ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += z(d) + '</h2>\n          </header>\n          <div class="main">\n            <div class="items-wrapper">\n              <h3 class="title delta">Recently Added</h3>\n              <div class="items">\n                ', 
        d = c.each.call(a, a && a.items, {
            hash: {},
            inverse: B.noop,
            fn: B.program(21, r, b),
            data: b
        }), (d || 0 === d) && (f += d), f += "\n                ", d = c.unless.call(a, a && a.hasFourItems, {
            hash: {},
            inverse: B.noop,
            fn: B.program(23, s, b),
            data: b
        }), (d || 0 === d) && (f += d), f += '\n              </div>\n            </div>\n          </div>\n          <footer>\n            <a class="cta-button fancybox" href="/html/account-modal-my-photos.thtml" data-fancybox-type="iframe" data-fancybox-width="848">View all Photos</a> <a class="cta-button transparent">Upload Photos</a>\n          </footer>\n        </div>\n      </div>\n    ';
    }
    function r(a, b) {
        var d, e, f = "";
        return f += '\n                  <a class="fancybox item" href="/html/account-modal-my-photos.thtml" data-fancybox-type="iframe" data-fancybox-width="848">\n                    <span class="ss-icon ss-standard icon ss-zoomin"></span>\n                    <img src="', 
        (e = c.url) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.url, d = typeof e === y ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += z(d) + '" title="', (e = c.title) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.title, d = typeof e === y ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += z(d) + '">\n                  </a>\n                ';
    }
    function s(a, b) {
        return '\n                  <a class="item">\n                    <div class="add-item absolute-center">\n                      <span class="ss-icon ss-standard icon ss-camera"></span> Add Photo\n                    </div>\n                  </a>\n                ';
    }
    function t(a, b) {
        var c, d = "";
        return d += '\n      <div class="module-social-networks">\n        <div class="module-inner">\n            <div class="page-content">\n              <h3 class="title column-header beta">Public Social Networks and Posting</h3>\n            </div>\n            <div class="form-fields">\n              <div class="form-row form-pair">\n                <div class="form-item">\n                  <label>\n                    Facebook page url\n                    <input type="text" name="facebookUrl" value="' + z((c = a && a.fieldValues, 
        c = null == c || c === !1 ? c : c.facebookUrl, typeof c === y ? c.apply(a) : c)) + '">\n                  </label>\n                </div>\n                <div class="form-item">\n                  <label>\n                    Twitter Handle\n                    <input type="text" name="twitterUsername" value="' + z((c = a && a.fieldValues, 
        c = null == c || c === !1 ? c : c.twitterUsername, typeof c === y ? c.apply(a) : c)) + '">\n                  </label>\n                </div>\n              </div>\n              <div class="form-row form-pair">\n                <div class="form-item">\n                  <label>\n                    LinkedIn Profile URL\n                    <input type="text" name="linkedinUrl" value="' + z((c = a && a.fieldValues, 
        c = null == c || c === !1 ? c : c.linkedinUrl, typeof c === y ? c.apply(a) : c)) + '">\n                  </label>\n                </div>\n                <div class="form-item">\n                  <label>\n                    Google+ Page URL\n                    <input type="text" name="googlePlusUrl"  value="' + z((c = a && a.fieldValues, 
        c = null == c || c === !1 ? c : c.googlePlusUrl, typeof c === y ? c.apply(a) : c)) + '">\n                  </label>\n                </div>\n              </div>\n              <div class="form-row form-pair">\n                <div class="form-item">\n                  <label>\n                    Instagram Handle\n                    <input type="text" name="instagramUsername" value="' + z((c = a && a.fieldValues, 
        c = null == c || c === !1 ? c : c.instagramUsername, typeof c === y ? c.apply(a) : c)) + '">\n                  </label>\n                </div>\n                <div class="form-item">\n                  <label>\n                    Personal Webpage / Additional Social page\n                    <input type="text" name="additionalUrl" value="' + z((c = a && a.fieldValues, 
        c = null == c || c === !1 ? c : c.additionalUrl, typeof c === y ? c.apply(a) : c)) + '">\n                  </label>\n                </div>\n              </div>\n            </div>\n        </div>\n      </div>\n\n      \n\n      <div class="module-save-changes">\n        <div class="module-inner">\n          <input type="hidden" name="action" value="save">\n          <button class="cta-button" type="submit" autocomplete="off">Save Changes</button> <input class="cta-button transparent" type="reset" value="Cancel">\n        </div>\n      </div>\n    ';
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var u, v, w, x = "", y = "function", z = this.escapeExpression, A = c.helperMissing, B = this, C = c.blockHelperMissing;
    return x += '<div class="module module-header account-profile">\n  <div class="module-inner">\n    <div class="message ', 
    w = {
        hash: {},
        inverse: B.noop,
        fn: B.program(1, f, e),
        data: e
    }, (v = c.hasHeaderMessage) ? u = v.call(b, w) : (v = b && b.hasHeaderMessage, u = typeof v === y ? v.call(b, w) : v), 
    c.hasHeaderMessage || (u = C.call(b, u, {
        hash: {},
        inverse: B.noop,
        fn: B.program(1, f, e),
        data: e
    })), (u || 0 === u) && (x += u), x += '">\n      <h2 class="title gamma">' + z((u = b && b.message, 
    u = null == u || u === !1 ? u : u.title, typeof u === y ? u.apply(b) : u)) + '</h2>\n      <p class="description">' + z((u = b && b.message, 
    u = null == u || u === !1 ? u : u.description, typeof u === y ? u.apply(b) : u)) + '</p>\n      <span class="ss-icon ss-standard ss-close close-message">Close</span>\n    </div>\n    <header>\n      <h2 class="title alpha">', 
    (v = c.title) ? u = v.call(b, {
        hash: {},
        data: e
    }) : (v = b && b.title, u = typeof v === y ? v.call(b, {
        hash: {},
        data: e
    }) : v), x += z(u) + "</h2>\n      ", u = c["if"].call(b, (u = b && b.pageUrls, 
    null == u || u === !1 ? u : u.profile), {
        hash: {},
        inverse: B.noop,
        fn: B.program(3, g, e),
        data: e
    }), (u || 0 === u) && (x += u), x += '\n    </header>\n  </div>\n</div>\n\n<div class="module">\n  <form action="', 
    (v = c.handlerUrl) ? u = v.call(b, {
        hash: {},
        data: e
    }) : (v = b && b.handlerUrl, u = typeof v === y ? v.call(b, {
        hash: {},
        data: e
    }) : v), x += z(u) + '" method="post" accept-charset="utf-8" data-form-type="account-profile">\n    <div class="message">\n      <h3 class="title gamma"></h3>\n      <p class="body"></p>\n    </div>\n    ', 
    u = c["with"].call(b, (u = b && b.forms, null == u || u === !1 ? u : u.accountProfile), {
        hash: {},
        inverse: B.noop,
        fn: B.programWithDepth(5, h, e, b),
        data: e
    }), (u || 0 === u) && (x += u), x += "\n\n    ", u = c["with"].call(b, (u = b && b.slideshows, 
    null == u || u === !1 ? u : u.myPhotos), {
        hash: {},
        inverse: B.noop,
        fn: B.program(20, q, e),
        data: e
    }), (u || 0 === u) && (x += u), x += "\n\n    ", u = c["with"].call(b, (u = b && b.forms, 
    null == u || u === !1 ? u : u.accountProfile), {
        hash: {},
        inverse: B.noop,
        fn: B.program(25, t, e),
        data: e
    }), (u || 0 === u) && (x += u), x += "\n  </form>\n\n</div>";
}), this.Digi.Templates["account-races"] = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        return "open";
    }
    function g(a, b) {
        var c, d = "";
        return d += '\r\n        <a class="cta-link fancybox" href=' + D((c = a && a.pageUrls, 
        c = null == c || c === !1 ? c : c.help, typeof c === C ? c.apply(a) : c)) + ' data-fancybox-type="iframe" data-fancybox-width="448">Incorrect or missing races?</a>\r\n      ';
    }
    function h(a, b) {
        var d, e = "";
        return e += '\r\n          <div class="page-content">\r\n            <h2 class="title column-header beta">Public Visibility</h2>\r\n            <div class="form-row form-pair form-radios visibility-controls group-visibility">\r\n              ', 
        d = c["with"].call(a, a && a.fieldValues, {
            hash: {},
            inverse: E.noop,
            fn: E.program(6, i, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\r\n            </div>\r\n          </div>\r\n        ";
    }
    function i(a, b) {
        var d, e, f, g = "";
        return g += '\r\n                <div class="form-description">\r\n                  <h3 class="title delta">Your races are:\r\n                    <span class="visibility-status ', 
        f = {
            hash: {},
            inverse: E.noop,
            fn: E.program(7, j, b),
            data: b
        }, (e = c.showRaces) ? d = e.call(a, f) : (e = a && a.showRaces, d = typeof e === C ? e.call(a, f) : e), 
        c.showRaces || (d = F.call(a, d, {
            hash: {},
            inverse: E.noop,
            fn: E.program(7, j, b),
            data: b
        })), (d || 0 === d) && (g += d), g += '">\r\n                      ', d = c["if"].call(a, a && a.showRaces, {
            hash: {},
            inverse: E.program(11, l, b),
            fn: E.program(9, k, b),
            data: b
        }), (d || 0 === d) && (g += d), g += '\r\n                    </span>\r\n                  </h3>\r\n                  <p>\r\n                    Hidden races will not appear on your profile, but may appear in public race listings and race results across the website. This setting will also apply to future races that you register for.\r\n                  </p>\r\n                </div>\r\n                <div class="form-item form-radio">\r\n                  <input type="radio" name="showRaces" value="true" id="showRaces-true" ' + D((e = c.checked || a && a.checked, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, !0, a && a.showRaces, f) : G.call(a, "checked", !0, a && a.showRaces, f))) + '>\r\n                  <label for="showRaces-true" class="control" data-action="visible" data-value="true">Show all races on my profile</label>\r\n                </div>\r\n                <div class="form-item form-radio">\r\n                  <input type="radio" name="showRaces" value="false" id="showRaces-false" ' + D((e = c.checked || a && a.checked, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, !1, a && a.showRaces, f) : G.call(a, "checked", !1, a && a.showRaces, f))) + '>\r\n                  <label for="showRaces-false" class="control" data-action="visible" data-value="false">Hide all races on my profile</label>\r\n                </div>\r\n              ';
    }
    function j(a, b) {
        return "visible";
    }
    function k(a, b) {
        return "\r\n                        visible\r\n                      ";
    }
    function l(a, b) {
        return "\r\n                        hidden\r\n                      ";
    }
    function m(a, b) {
        var d, e = "";
        return e += '\r\n      <table>\r\n        <thead>\r\n          <th class="date">\r\n            Date\r\n          </th>\r\n          <th class="name">\r\n            Race Name\r\n          </th>\r\n          <th class="visibility">\r\n            Profile Visibility\r\n          </th>\r\n        </thead>\r\n        <tbody>\r\n          ', 
        d = c.each.call(a, a && a.upcomingRaces, {
            hash: {},
            inverse: E.noop,
            fn: E.program(14, n, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\r\n        </tbody>\r\n      </table>\r\n    ";
    }
    function n(a, b) {
        var d, e, f, g = "";
        return g += '\r\n            <tr class="item visibility-item ', f = {
            hash: {},
            inverse: E.noop,
            fn: E.program(7, j, b),
            data: b
        }, (e = c.visible) ? d = e.call(a, f) : (e = a && a.visible, d = typeof e === C ? e.call(a, f) : e), 
        c.visible || (d = F.call(a, d, {
            hash: {},
            inverse: E.noop,
            fn: E.program(7, j, b),
            data: b
        })), (d || 0 === d) && (g += d), g += '">\r\n              <td>\r\n                ' + D((e = c.date || a && a.date, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.date, f) : G.call(a, "date", a && a.date, f))) + '\r\n              </td>\r\n              <td class="name">\r\n                ', 
        (e = c.title) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.title, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += D(d) + '\r\n              </td>\r\n              <td>\r\n                <div class="visibility-controls item-visibility">\r\n                  <a class="control if-icon-visible hide" data-action="visible" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += D(d) + '" data-value="false">Visible <span class="help-text">(Hide)</span></a>\r\n                  <a class="control if-icon-hidden show" data-action="visible" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += D(d) + '" data-value="true">Hidden <span class="help-text">(Show)</span></a>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ';
    }
    function o(a, b) {
        return '\r\n      <p>\r\n        <em>You have no upcoming races. <a href="/events/triathlon-races.aspx">Register for one today!</a></em>\r\n      </p>\r\n    ';
    }
    function p(a, b) {
        var d, e = "";
        return e += '\r\n      <table class="tablesorter">\r\n        <thead>\r\n          <th class="date" data-sorter="date">\r\n            Date\r\n          </th>\r\n          <th class="name" data-sorter="text">\r\n            Race Name\r\n          </th>\r\n          <th data-sorter="duration">\r\n            Finish Time\r\n          </th>\r\n          <th data-sorter="number" data-string="min">\r\n            Points\r\n          </th>\r\n          <th data-sorter="rank">\r\n            Overall Rank\r\n          </th>\r\n          <th class="visibility" data-sorter="false">\r\n            Profile Visibility\r\n          </th>\r\n        </thead>\r\n        <tbody>\r\n          ', 
        d = c.each.call(a, a && a.pastRaces, {
            hash: {},
            inverse: E.noop,
            fn: E.program(19, q, b),
            data: b
        }), (d || 0 === d) && (e += d), e += '\r\n        </tbody>\r\n      </table>\r\n      <div class="pagination-controls">\r\n        <div class="pager"></div>\r\n        <div class="direction">\r\n          <a class="prev">Previous</a>\r\n          <a class="next">Next</a>\r\n        </div>\r\n      </div>\r\n    ';
    }
    function q(a, b) {
        var d, e, f, g = "";
        return g += '\r\n            <tr class="item visibility-item ', f = {
            hash: {},
            inverse: E.noop,
            fn: E.program(7, j, b),
            data: b
        }, (e = c.visible) ? d = e.call(a, f) : (e = a && a.visible, d = typeof e === C ? e.call(a, f) : e), 
        c.visible || (d = F.call(a, d, {
            hash: {},
            inverse: E.noop,
            fn: E.program(7, j, b),
            data: b
        })), (d || 0 === d) && (g += d), g += '">\r\n              <td>\r\n                ' + D((e = c.date || a && a.date, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.date, f) : G.call(a, "date", a && a.date, f))) + '\r\n              </td>\r\n              <td class="name">\r\n                ', 
        (e = c.title) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.title, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += D(d) + "\r\n              </td>\r\n              <td>\r\n                " + D((e = c.duration || a && a.duration, 
        f = {
            hash: {},
            data: b
        }, e ? e.call(a, a && a.finishTime, f) : G.call(a, "duration", a && a.finishTime, f))) + "\r\n              </td>\r\n              <td>\r\n                ", 
        (e = c.points) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.points, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += D(d) + "\r\n              </td>\r\n              <td>\r\n                ", 
        (e = c.overallRank) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.overallRank, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += D(d) + '\r\n              </td>\r\n              <td>\r\n                <div class="visibility-controls item-visibility">\r\n                  <a class="control if-icon-visible hide" data-action="visible" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += D(d) + '" data-value="false">Visible <span class="help-text">(Hide)</span></a>\r\n                  <a class="control if-icon-hidden show" data-action="visible" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += D(d) + '" data-value="true">Hidden <span class="help-text">(Show)</span></a>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ';
    }
    function r(a, b) {
        return "\r\n      <p>\r\n        <em>You have no past races.</a></em>\r\n      </p>\r\n    ";
    }
    function s(a, b) {
        var d, e = "";
        return e += "\r\n  ", d = c["if"].call(a, (d = a && a.slides, null == d || d === !1 ? d : d.length), {
            hash: {},
            inverse: E.noop,
            fn: E.programWithDepth(24, t, b, a),
            data: b
        }), (d || 0 === d) && (e += d), e += "\r\n";
    }
    function t(a, b, d) {
        var e, f, g = "";
        return g += '\r\n    <div class="module if-gallery album visibility-wrapper ', e = c["if"].call(a, d && d.galleryModalUrl, {
            hash: {},
            inverse: E.noop,
            fn: E.program(25, u, b),
            data: b
        }), (e || 0 === e) && (g += e), g += '" data-gallery-name="' + D((e = null == b || b === !1 ? b : b.key, 
        typeof e === C ? e.apply(a) : e)) + '">\r\n      <div class="module-inner">\r\n        <header>\r\n          <h2 class="title beta">', 
        (f = c.categoryTitle) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.categoryTitle, e = typeof f === C ? f.call(a, {
            hash: {},
            data: b
        }) : f), g += D(e) + '</h2>\r\n        </header>\r\n        <div class="main">\r\n          ', 
        e = c["if"].call(a, a && a.description, {
            hash: {},
            inverse: E.noop,
            fn: E.program(27, v, b),
            data: b
        }), (e || 0 === e) && (g += e), g += '\r\n          <ul class="bxslider slides">\r\n            ', 
        e = c.each.call(a, a && a.slides, {
            hash: {},
            inverse: E.noop,
            fn: E.programWithDepth(29, w, b, d),
            data: b
        }), (e || 0 === e) && (g += e), g += "\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ";
    }
    function u(a, b) {
        return "has-modal-url";
    }
    function v(a, b) {
        var d, e, f = "";
        return f += '\r\n            <div class="page-content">\r\n              ', (e = c.description) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.description, d = typeof e === C ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += D(d) + "\r\n            </div>\r\n          ";
    }
    function w(a, b, d) {
        var e, f = "";
        return f += '\r\n              <li class="slide">\r\n                ', e = c.each.call(a, a, {
            hash: {},
            inverse: E.noop,
            fn: E.programWithDepth(30, x, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\r\n              </li>\r\n            ";
    }
    function x(a, b, d) {
        var e, f, g, h = "";
        return h += '\r\n                  <div class="fancybox item visibility-item ', 
        g = {
            hash: {},
            inverse: E.noop,
            fn: E.program(7, j, b),
            data: b
        }, (f = c.visible) ? e = f.call(a, g) : (f = a && a.visible, e = typeof f === C ? f.call(a, g) : f), 
        c.visible || (e = F.call(a, e, {
            hash: {},
            inverse: E.noop,
            fn: E.program(7, j, b),
            data: b
        })), (e || 0 === e) && (h += e), h += '" data-href="' + D((e = d && d.galleryModalUrl, 
        typeof e === C ? e.apply(a) : e)) + "?id=", (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === C ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += D(e) + '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === C ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += D(e) + '" data-type="iframe">\r\n                    <div class="item-inner">\r\n                      <div class="item-image">\r\n                        <img src="', 
        (f = c.url) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.url, e = typeof f === C ? f.call(a, {
            hash: {},
            data: b
        }) : f), (e || 0 === e) && (h += e), h += '" title="', (f = c.title) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.title, e = typeof f === C ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += D(e) + '">\r\n                      </div>\r\n                      <div class="item-description">\r\n                        <div class="date">\r\n                          ' + D((f = c.date || a && a.date, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.date, "MMMM D, YYYY", g) : G.call(a, "date", a && a.date, "MMMM D, YYYY", g))) + '\r\n                        </div>\r\n                        <h3 class="title gamma">', 
        (f = c.title) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.title, e = typeof f === C ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += D(e) + '</h3>\r\n                        <div class="item-count">\r\n                          ' + D((f = c.plural || a && a.plural, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, "Photo", a && a.length, g) : G.call(a, "plural", "Photo", a && a.length, g))) + '\r\n                        </div>\r\n                        <div class="cta-link if-icon-chevron-right">View Album</div>\r\n                      </div>\r\n                      <div class="visibility-controls item-visibility">\r\n                        <a class="control if-icon-visible hide" data-action="visible" data-id="', 
        (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === C ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += D(e) + '" data-value="false">Visible <span class="help-text">(Hide)</span></a>\r\n                        <a class="control if-icon-hidden show" data-action="visible" data-id="', 
        (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === C ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += D(e) + '" data-value="true">Hidden <span class="help-text">(Show)</span></a>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ';
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var y, z, A, B = "", C = "function", D = this.escapeExpression, E = this, F = c.blockHelperMissing, G = c.helperMissing;
    return B += '<div class="module module-header settings">\r\n  <div class="module-inner">\r\n    <div class="message ', 
    A = {
        hash: {},
        inverse: E.noop,
        fn: E.program(1, f, e),
        data: e
    }, (z = c.hasHeaderMessage) ? y = z.call(b, A) : (z = b && b.hasHeaderMessage, y = typeof z === C ? z.call(b, A) : z), 
    c.hasHeaderMessage || (y = F.call(b, y, {
        hash: {},
        inverse: E.noop,
        fn: E.program(1, f, e),
        data: e
    })), (y || 0 === y) && (B += y), B += '">\r\n      <h2 class="title gamma">' + D((y = b && b.message, 
    y = null == y || y === !1 ? y : y.title, typeof y === C ? y.apply(b) : y)) + '</h2>\r\n      <p class="description">' + D((y = b && b.message, 
    y = null == y || y === !1 ? y : y.description, typeof y === C ? y.apply(b) : y)) + '</p>\r\n      <span class="ss-icon ss-standard ss-close close-message">Close</span>\r\n    </div>\r\n    <header>\r\n      <h2 class="title alpha">', 
    (z = c.title) ? y = z.call(b, {
        hash: {},
        data: e
    }) : (z = b && b.title, y = typeof z === C ? z.call(b, {
        hash: {},
        data: e
    }) : z), B += D(y) + "</h2>\r\n      ", y = c["if"].call(b, (y = b && b.pageUrls, 
    null == y || y === !1 ? y : y.help), {
        hash: {},
        inverse: E.noop,
        fn: E.program(3, g, e),
        data: e
    }), (y || 0 === y) && (B += y), B += '\r\n    </header>\r\n  </div>\r\n</div>\r\n\r\n<div class="module module-races-form visibility-wrapper" data-visibility-handler-url="', 
    (z = c.handlerUrl) ? y = z.call(b, {
        hash: {},
        data: e
    }) : (z = b && b.handlerUrl, y = typeof z === C ? z.call(b, {
        hash: {},
        data: e
    }) : z), B += D(y) + '">\r\n  <div class="module-inner">\r\n    <div class="column-row columns-3-1">\r\n      <div class="column">\r\n        ', 
    y = c["with"].call(b, (y = b && b.forms, null == y || y === !1 ? y : y.myRaces), {
        hash: {},
        inverse: E.noop,
        fn: E.program(5, h, e),
        data: e
    }), (y || 0 === y) && (B += y), B += '\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="module module-table visibility-wrapper">\r\n  <div class="module-inner">\r\n    <div class="page-content">\r\n      <h2 class="title column-header beta">Upcoming Races (' + D((y = b && b.upcomingRaces, 
    y = null == y || y === !1 ? y : y.length, typeof y === C ? y.apply(b) : y)) + ")</h2>\r\n    </div>\r\n    ", 
    y = c["if"].call(b, b && b.upcomingRaces, {
        hash: {},
        inverse: E.program(16, o, e),
        fn: E.program(13, m, e),
        data: e
    }), (y || 0 === y) && (B += y), B += '\r\n  </div>\r\n</div>\r\n\r\n<div class="module module-table visibility-wrapper">\r\n  <div class="module-inner">\r\n    <div class="page-content">\r\n      <h2 class="title column-header beta">Past Races (' + D((y = b && b.pastRaces, 
    y = null == y || y === !1 ? y : y.length, typeof y === C ? y.apply(b) : y)) + ")</h2>\r\n    </div>\r\n    ", 
    y = c["if"].call(b, b && b.pastRaces, {
        hash: {},
        inverse: E.program(21, r, e),
        fn: E.program(18, p, e),
        data: e
    }), (y || 0 === y) && (B += y), B += "\r\n  </div>\r\n</div>\r\n\r\n", y = c.each.call(b, b && b.slideshows, {
        hash: {},
        inverse: E.noop,
        fn: E.program(23, s, e),
        data: e
    }), (y || 0 === y) && (B += y), B;
}), this.Digi.Templates["account-settings"] = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b) {
        return "open";
    }
    function g(a, b, d) {
        var e, f, g = "";
        return g += '\n        <h2 class="title alpha">', (f = c.firstName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.firstName, e = typeof f === q ? f.call(a, {
            hash: {},
            data: b
        }) : f), g += r(e) + " ", (f = c.lastName) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.lastName, e = typeof f === q ? f.call(a, {
            hash: {},
            data: b
        }) : f), g += r(e) + "</h2>\n        <dl>\n          <dt>" + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.dob, 
        typeof e === q ? e.apply(a) : e)) + ":</dt>\n          \n          <dd>", (f = c.dobMonth) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.dobMonth, e = typeof f === q ? f.call(a, {
            hash: {},
            data: b
        }) : f), g += r(e) + "/", (f = c.dobDay) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.dobDay, e = typeof f === q ? f.call(a, {
            hash: {},
            data: b
        }) : f), g += r(e) + "/", (f = c.dobYear) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.dobYear, e = typeof f === q ? f.call(a, {
            hash: {},
            data: b
        }) : f), g += r(e) + "</dd>\n        </dl>\n      ";
    }
    function h(a, b, c) {
        var d, e = "";
        return e += '\n        <p>\n          <a class="fancybox" href="' + r((d = a && a.pageUrls, 
        d = null == d || d === !1 ? d : d.help, typeof d === q ? d.apply(a) : d)) + '" data-fancybox-type="iframe" data-fancybox-width="448">' + r((d = c && c.localized, 
        d = null == d || d === !1 ? d : d.strings, d = null == d || d === !1 ? d : d.helpText, 
        typeof d === q ? d.apply(a) : d)) + "</a>\n        </p>\n      ";
    }
    function i(a, b, d) {
        var e, f, g, h = "";
        return h += '\n          <form action="' + r((e = d && d.handlerUrl, typeof e === q ? e.apply(a) : e)) + '" method="get" accept-charset="utf-8" data-form-type="account-settings">\n            <div class="page-content">\n              <h3 class="title column-header beta">' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.settings, 
        typeof e === q ? e.apply(a) : e)) + '</h3>\n            </div>\n            <div class="message">\n              <h3 class="title gamma"></h3>\n              <p class="description"></p>\n            </div>\n            <div class="form-fields">\n              <div class="form-row form-pair">\n                <div class="form-item">\n                  <label>\n                    ' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.nickname, 
        typeof e === q ? e.apply(a) : e)) + " " + r((f = c.tooltip || a && a.tooltip, g = {
            hash: {},
            data: b
        }, f ? f.call(a, (e = a && a.tooltips, null == e || e === !1 ? e : e.nickname), g) : s.call(a, "tooltip", (e = a && a.tooltips, 
        null == e || e === !1 ? e : e.nickname), g))) + '\n                    <input type="text" name="nickname" value="' + r((e = a && a.fieldValues, 
        e = null == e || e === !1 ? e : e.nickname, typeof e === q ? e.apply(a) : e)) + '">\n                  </label>\n                </div>\n                <div class="form-item">\n                  <label>\n                    ' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.username, 
        typeof e === q ? e.apply(a) : e)) + " " + r((f = c.tooltip || a && a.tooltip, g = {
            hash: {},
            data: b
        }, f ? f.call(a, (e = a && a.tooltips, null == e || e === !1 ? e : e.username), g) : s.call(a, "tooltip", (e = a && a.tooltips, 
        null == e || e === !1 ? e : e.username), g))) + '\n                    <input type="text" name="username" value="' + r((e = a && a.fieldValues, 
        e = null == e || e === !1 ? e : e.username, typeof e === q ? e.apply(a) : e)) + '">\n                  </label>\n                </div>\n              </div>\n              <div class="form-row form-pair">\n                <div class="form-item">\n                  <label>\n                    ' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.emailAddress, 
        typeof e === q ? e.apply(a) : e)) + " " + r((f = c.tooltip || a && a.tooltip, g = {
            hash: {},
            data: b
        }, f ? f.call(a, (e = a && a.tooltips, null == e || e === !1 ? e : e.emailAddress), g) : s.call(a, "tooltip", (e = a && a.tooltips, 
        null == e || e === !1 ? e : e.emailAddress), g))) + '\n                    <input type="text" name="emailAddress" value="' + r((e = a && a.fieldValues, 
        e = null == e || e === !1 ? e : e.emailAddress, typeof e === q ? e.apply(a) : e)) + '">\n                  </label>\n                </div>\n                <div class="form-item">\n                  <label for="language">' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.language, 
        typeof e === q ? e.apply(a) : e)) + "  " + r((f = c.tooltip || a && a.tooltip, g = {
            hash: {},
            data: b
        }, f ? f.call(a, (e = a && a.tooltips, null == e || e === !1 ? e : e.language), g) : s.call(a, "tooltip", (e = a && a.tooltips, 
        null == e || e === !1 ? e : e.language), g))) + "</label>\n                  ", 
        e = c["with"].call(a, (e = a && a.options, null == e || e === !1 ? e : e.language), {
            hash: {},
            inverse: t.noop,
            fn: t.programWithDepth(8, j, b, d),
            data: b
        }), (e || 0 === e) && (h += e), h += '\n                </div>\n              </div>\n              <div class="form-row form-group inline">\n                <input type="hidden" name="action" value="save">\n                <div class="form-item">\n                  <button class="cta-button" type="submit" autocomplete="off">' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.saveChanges, 
        typeof e === q ? e.apply(a) : e)) + '</button>\n                </div>\n                <div class="form-item">\n                  <input class="cta-button transparent" type="reset" value="' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.cancel, 
        typeof e === q ? e.apply(a) : e)) + '">\n                </div>\n              </div>\n            </div>\n          </form>\n        ';
    }
    function j(a, b, d) {
        var e, f = "";
        return f += '\n                  <select name="language" id="language" data-forms-key="accountSettings">\n                    <option value="null">' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.selectLanguage, 
        typeof e === q ? e.apply(a) : e)) + "</option>\n                    ", e = c.each.call(a, a && a.options, {
            hash: {},
            inverse: t.noop,
            fn: t.programWithDepth(9, k, b, a),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n                  </select>\n                  ";
    }
    function k(a, b, d) {
        var e, f, g, h = "";
        return h += '\n                      <option value="', (f = c.value) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.value, e = typeof f === q ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += r(e) + '" ' + r((f = c.selected || a && a.selected, g = {
            hash: {},
            data: b
        }, f ? f.call(a, a, d && d.selectedValue, g) : s.call(a, "selected", a, d && d.selectedValue, g))) + ">", 
        (f = c.text) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.text, e = typeof f === q ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += r(e) + "</option>\n                    ";
    }
    function l(a, b, d) {
        var e, f, g = "";
        return g += '\n      <div class="column">\n        <form id="accountPassword" class="alt" action="', 
        (f = c.passwordHandlerUrl) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.passwordHandlerUrl, e = typeof f === q ? f.call(a, {
            hash: {},
            data: b
        }) : f), g += r(e) + '" method="post" accept-charset="utf-8" data-form-type="account-change-password">\n          <div class="page-content">\n            <h3 class="title column-header beta">' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.changeOrResetPassword, 
        typeof e === q ? e.apply(a) : e)) + '</h3>\n          </div>\n          <div class="message">\n            <h3 class="title gamma"></h3>\n            <p class="description"></p>\n          </div>\n          <div class="form-fields">\n            <div class="form-row">\n              <div class="form-item">\n                <label>\n                  ' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.currentPassword, 
        typeof e === q ? e.apply(a) : e)) + '\n                  <input type="password" name="currentPassword">\n                </label>\n              </div>\n            </div>\n            <div class="form-row">\n              <div class="form-item">\n                <label>\n                  ' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.newPassword, 
        typeof e === q ? e.apply(a) : e)) + '\n                  <input type="password" name="newPassword">\n                </label>\n              </div>\n            </div>\n            <div class="form-row">\n              <div class="form-item">\n                <label>\n                  ' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.confirmNewPassword, 
        typeof e === q ? e.apply(a) : e)) + '\n                  <input type="password" name="confirmNewPassword">\n                </label>\n              </div>\n            </div>\n            <div class="form-row center">\n              <div class="form-item">\n                <input type="hidden" name="action" value="save">\n                <button class="cta-button" type="submit" autocomplete="off">' + r((e = d && d.localized, 
        e = null == e || e === !1 ? e : e.strings, e = null == e || e === !1 ? e : e.change, 
        typeof e === q ? e.apply(a) : e)) + "</button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n      ";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var m, n, o, p = "", q = "function", r = this.escapeExpression, s = c.helperMissing, t = this, u = c.blockHelperMissing;
    return p += '<div class="module module-header settings">\n  <div class="module-inner">\n    <div class="message ', 
    o = {
        hash: {},
        inverse: t.noop,
        fn: t.program(1, f, e),
        data: e
    }, (n = c.hasHeaderMessage) ? m = n.call(b, o) : (n = b && b.hasHeaderMessage, m = typeof n === q ? n.call(b, o) : n), 
    c.hasHeaderMessage || (m = u.call(b, m, {
        hash: {},
        inverse: t.noop,
        fn: t.program(1, f, e),
        data: e
    })), (m || 0 === m) && (p += m), p += '">\n      <h2 class="title gamma">' + r((m = b && b.message, 
    m = null == m || m === !1 ? m : m.title, typeof m === q ? m.apply(b) : m)) + '</h2>\n      <p class="description">' + r((m = b && b.message, 
    m = null == m || m === !1 ? m : m.description, typeof m === q ? m.apply(b) : m)) + '</p>\n      <span class="ss-icon ss-standard ss-close close-message">Close</span>\n    </div>\n    <header>\n      ', 
    m = c["with"].call(b, (m = b && b.forms, m = null == m || m === !1 ? m : m.accountSettings, 
    null == m || m === !1 ? m : m.fieldValues), {
        hash: {},
        inverse: t.noop,
        fn: t.programWithDepth(3, g, e, b),
        data: e
    }), (m || 0 === m) && (p += m), p += "\n      ", m = c["if"].call(b, (m = b && b.pageUrls, 
    null == m || m === !1 ? m : m.help), {
        hash: {},
        inverse: t.noop,
        fn: t.programWithDepth(5, h, e, b),
        data: e
    }), (m || 0 === m) && (p += m), p += '\n    </header>\n  </div>\n</div>\n\n<div class="module module-settings-forms">\n  <div class="module-inner">\n    <div class="column-row columns-2-1">\n      <div class="column">\n        ', 
    m = c["with"].call(b, (m = b && b.forms, null == m || m === !1 ? m : m.accountSettings), {
        hash: {},
        inverse: t.noop,
        fn: t.programWithDepth(7, i, e, b),
        data: e
    }), (m || 0 === m) && (p += m), p += "\n      </div>\n\n      ", m = c.unless.call(b, b && b.isSocial, {
        hash: {},
        inverse: t.noop,
        fn: t.programWithDepth(11, l, e, b),
        data: e
    }), (m || 0 === m) && (p += m), p += "\n    </div>\n  </div>\n</div>\n";
}), this.Digi.Templates.album = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b, d) {
        var e, f, l = "";
        return l += '\n  <div class="moduleWrapper module modal if-gallery album ', e = c["if"].call(a, d && d.showVisibilityControls, {
            hash: {},
            inverse: t.noop,
            fn: t.program(2, g, b),
            data: b
        }), (e || 0 === e) && (l += e), l += " ", e = c["if"].call(a, d && d.galleryModalUrl, {
            hash: {},
            inverse: t.noop,
            fn: t.program(4, h, b),
            data: b
        }), (e || 0 === e) && (l += e), l += " ", e = c["if"].call(a, d && d.galleryUrl, {
            hash: {},
            inverse: t.noop,
            fn: t.program(6, i, b),
            data: b
        }), (e || 0 === e) && (l += e), l += '" data-gallery-name="' + s((e = null == b || b === !1 ? b : b.key, 
        typeof e === r ? e.apply(a) : e)) + '">\n    <header>\n      <h2 class="modal-title title alpha">', 
        (f = c.categoryTitle) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.categoryTitle, e = typeof f === r ? f.call(a, {
            hash: {},
            data: b
        }) : f), l += s(e) + '</h2>\n    </header>\n    <div class="main">\n      ', e = c["if"].call(a, a && a.description, {
            hash: {},
            inverse: t.noop,
            fn: t.program(8, j, b),
            data: b
        }), (e || 0 === e) && (l += e), l += "\n      ", e = c["if"].call(a, (e = a && a.slides, 
        null == e || e === !1 ? e : e.length), {
            hash: {},
            inverse: t.program(15, o, b),
            fn: t.programWithDepth(10, k, b, a),
            data: b
        }), (e || 0 === e) && (l += e), l += "\n    </div>\n  </div>\n";
    }
    function g(a, b) {
        return "visibility-wrapper";
    }
    function h(a, b) {
        return "has-modal-url";
    }
    function i(a, b) {
        return "has-gallery-url";
    }
    function j(a, b) {
        var d, e, f = "";
        return f += '\n        <div class="page-content">\n          ', (e = c.description) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.description, d = typeof e === r ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + "\n        </div>\n      ";
    }
    function k(a, b, d) {
        var e, f = "";
        return f += '\n        <ul class="bxslider slides">\n          ', e = c.each.call(a, a && a.slides, {
            hash: {},
            inverse: t.noop,
            fn: t.programWithDepth(11, l, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n        </ul>\n      ";
    }
    function l(a, b, d) {
        var e, f = "";
        return f += '\n            <li class="slide">\n              ', e = c.each.call(a, a, {
            hash: {},
            inverse: t.noop,
            fn: t.programWithDepth(12, m, b, d),
            data: b
        }), (e || 0 === e) && (f += e), f += "\n            </li>\n          ";
    }
    function m(a, b, d) {
        var e, f, g, h = "";
        return h += '\n                <div class="item visibility-item ', g = {
            hash: {},
            inverse: t.noop,
            fn: t.program(13, n, b),
            data: b
        }, (f = c.visible) ? e = f.call(a, g) : (f = a && a.visible, e = typeof f === r ? f.call(a, g) : f), 
        c.visible || (e = u.call(a, e, {
            hash: {},
            inverse: t.noop,
            fn: t.program(13, n, b),
            data: b
        })), (e || 0 === e) && (h += e), h += '" data-href="' + s((e = d && d.galleryUrl, 
        typeof e === r ? e.apply(a) : e)) + '" data-id="', (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === r ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += s(e) + '" data-show-profile-controls="' + s((e = d && d.showProfileControls, 
        typeof e === r ? e.apply(a) : e)) + '" data-show-visibility-controls="' + s((e = d && d.showVisibilityControls, 
        typeof e === r ? e.apply(a) : e)) + '">\n                  <div class="item-inner">\n                    <div class="item-image">\n                      <img src="', 
        (f = c.url) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.url, e = typeof f === r ? f.call(a, {
            hash: {},
            data: b
        }) : f), (e || 0 === e) && (h += e), h += '" title="', (f = c.title) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.title, e = typeof f === r ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += s(e) + '">\n                    </div>\n                    <div class="item-description">\n                      <div class="date">\n                        ' + s((f = c.date || a && a.date, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, a && a.date, "MMMM D, YYYY", g) : v.call(a, "date", a && a.date, "MMMM D, YYYY", g))) + '\n                      </div>\n                      <h3 class="title gamma">\n                        ', 
        (f = c.title) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.title, e = typeof f === r ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += s(e) + '\n                      </h3>\n                      <div class="item-count">\n                        ' + s((f = c.plural || a && a.plural, 
        g = {
            hash: {},
            data: b
        }, f ? f.call(a, "Photo", a && a.length, g) : v.call(a, "plural", "Photo", a && a.length, g))) + '\n                      </div>\n                      <div class="cta-link if-icon-chevron-right">View Album</div>\n                    </div>\n                    <div class="visibility-controls item-visibility">\n                      <a class="control if-icon-visible hide" data-action="visible" data-id="', 
        (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === r ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += s(e) + '" data-value="false">Visible <span class="help-text">(Hide)</span></a>\n                      <a class="control if-icon-hidden show" data-action="visible" data-id="', 
        (f = c.id) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.id, e = typeof f === r ? f.call(a, {
            hash: {},
            data: b
        }) : f), h += s(e) + '" data-value="true">Hidden <span class="help-text">(Show)</span></a>\n                    </div>\n                  </div>\n                </div>\n              ';
    }
    function n(a, b) {
        return "visible";
    }
    function o(a, b) {
        return '\n        <div class="page-content">\n          <p>There are no photos to display.</p>\n        </div>\n      ';
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var p, q = "", r = "function", s = this.escapeExpression, t = this, u = c.blockHelperMissing, v = c.helperMissing;
    return p = c.each.call(b, b && b.slideshows, {
        hash: {},
        inverse: t.noop,
        fn: t.programWithDepth(1, f, e, b),
        data: e
    }), (p || 0 === p) && (q += p), q += "\n";
}), this.Digi.Templates["gallery-detail"] = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b, d) {
        var e, f, i = "";
        return i += '\n  <div class="moduleWrapper module modal if-gallery detail visibility-wrapper ', 
        e = c["if"].call(a, d && d.galleryModalUrl, {
            hash: {},
            inverse: m.noop,
            fn: m.program(2, g, b),
            data: b
        }), (e || 0 === e) && (i += e), i += '" data-gallery-name="' + p((e = null == b || b === !1 ? b : b.key, 
        typeof e === n ? e.apply(a) : e)) + '">\n    <header>\n      <h2 class="modal-title title alpha">', 
        (f = c.title) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.title, e = typeof f === n ? f.call(a, {
            hash: {},
            data: b
        }) : f), i += p(e) + '</h2>\n    </header>\n    <div class="main">\n      <div class="cta-links visibility-controls group-visibility">\n        <a class="control if-icon-visible show-all" data-action="visible" data-value="true">Show all photos</a>\n        <a class="control if-icon-hidden hide-all" data-action="visible" data-value="false">Hide all photos</a>\n      </div>\n      <ul class="bxslider slides">\n        ', 
        e = c.each.call(a, a && a.slides, {
            hash: {},
            inverse: m.noop,
            fn: m.program(4, h, b),
            data: b
        }), (e || 0 === e) && (i += e), i += "\n      </ul>\n    </div>\n  </div>\n";
    }
    function g(a, b) {
        return "has-modal-url";
    }
    function h(a, b) {
        var d, e = "";
        return e += '\n        <li class="slide">\n          ', d = c.each.call(a, a, {
            hash: {},
            inverse: m.noop,
            fn: m.program(5, i, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n        </li>\n        ";
    }
    function i(a, b) {
        var d, e, f, g = "";
        return g += '\n            <div class="item visibility-item ', f = {
            hash: {},
            inverse: m.noop,
            fn: m.program(6, j, b),
            data: b
        }, (e = c.visible) ? d = e.call(a, f) : (e = a && a.visible, d = typeof e === n ? e.call(a, f) : e), 
        c.visible || (d = o.call(a, d, {
            hash: {},
            inverse: m.noop,
            fn: m.program(6, j, b),
            data: b
        })), (d || 0 === d) && (g += d), g += '">\n              <div class="item-image">\n                <img src="', 
        (e = c.url) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.url, d = typeof e === n ? e.call(a, {
            hash: {},
            data: b
        }) : e), (d || 0 === d) && (g += d), g += '" title="', (e = c.text) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.text, d = typeof e === n ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += p(d) + '">\n              </div>\n              <div class="cta-links visibility-controls item-visibility">\n                <a class="control if-icon-visible show" data-action="visible" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === n ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += p(d) + '" data-value="false">Visible <span class="help-text">(Hide)</span></a>\n                <a class="control if-icon-hidden hide" data-action="visible" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === n ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += p(d) + '" data-value="true">Hidden <span class="help-text">(Show)</span></a>\n              </div>\n            </div>\n          ';
    }
    function j(a, b) {
        return "visible";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var k, l = "", m = this, n = "function", o = c.blockHelperMissing, p = this.escapeExpression;
    return k = c.each.call(b, b && b.slideshows, {
        hash: {},
        inverse: m.noop,
        fn: m.programWithDepth(1, f, e, b),
        data: e
    }), (k || 0 === k) && (l += k), l += "\n";
}), this.Digi.Templates.gallery = Handlebars.template(function(a, b, c, d, e) {
    function f(a, b, d) {
        var e, f, n, o = "";
        return o += '\n  <div class="moduleWrapper module modal if-gallery ', e = c["if"].call(a, d && d.showVisibilityControls, {
            hash: {},
            inverse: u.noop,
            fn: u.program(2, g, b),
            data: b
        }), (e || 0 === e) && (o += e), o += " ", e = c["if"].call(a, d && d.showProfileControls, {
            hash: {},
            inverse: u.noop,
            fn: u.program(4, h, b),
            data: b
        }), (e || 0 === e) && (o += e), o += " ", e = c["if"].call(a, d && d.galleryModalUrl, {
            hash: {},
            inverse: u.noop,
            fn: u.program(6, i, b),
            data: b
        }), (e || 0 === e) && (o += e), o += '" data-gallery-name="' + s((e = null == b || b === !1 ? b : b.key, 
        typeof e === t ? e.apply(a) : e)) + '">\n    <header>\n      <h2 class="modal-title title alpha">', 
        (f = c.categoryTitle) ? e = f.call(a, {
            hash: {},
            data: b
        }) : (f = a && a.categoryTitle, e = typeof f === t ? f.call(a, {
            hash: {},
            data: b
        }) : f), o += s(e) + '</h2>\n      <div class="gallery-details">\n        ', e = c["if"].call(a, a && a.date, {
            hash: {},
            inverse: u.noop,
            fn: u.program(8, j, b),
            data: b
        }), (e || 0 === e) && (o += e), o += "\n        ", e = c["if"].call(a, a && a.title, {
            hash: {},
            inverse: u.noop,
            fn: u.program(10, k, b),
            data: b
        }), (e || 0 === e) && (o += e), o += '\n        <div class="visibility-counters">\n          ' + s((f = c.plural || a && a.plural, 
        n = {
            hash: {},
            data: b
        }, f ? f.call(a, "Photo", (e = a && a.items, null == e || e === !1 ? e : e.length), n) : r.call(a, "plural", "Photo", (e = a && a.items, 
        null == e || e === !1 ? e : e.length), n))) + ' (<span class="counter visible">' + s((e = a && a.counters, 
        e = null == e || e === !1 ? e : e.visible, typeof e === t ? e.apply(a) : e)) + '</span> visible, <span class="counter hidden">' + s((e = a && a.counters, 
        e = null == e || e === !1 ? e : e.hidden, typeof e === t ? e.apply(a) : e)) + '</span> hidden)\n        </div>\n      </div>\n      <div class="cta-links visibility-controls group-visibility">\n        <a class="control if-icon-visible show-all" data-action="visible" data-value="true">Album is Hidden <span class="help-text">(Show)</span></a>\n        <a class="control if-icon-hidden hide-all" data-action="visible" data-value="false">Album is Visible <span class="help-text">(Hide)</span></a>\n      </div>\n      ', 
        e = c["if"].call(a, a && a.purchaseUrl, {
            hash: {},
            inverse: u.noop,
            fn: u.program(12, l, b),
            data: b
        }), (e || 0 === e) && (o += e), o += '\n    </header>\n    <div class="main">\n      <ul class="bxslider slides">\n        ', 
        e = c.each.call(a, a && a.slides, {
            hash: {},
            inverse: u.noop,
            fn: u.program(14, m, b),
            data: b
        }), (e || 0 === e) && (o += e), o += "\n      </ul>\n    </div>\n  </div>\n";
    }
    function g(a, b) {
        return "visibility-wrapper";
    }
    function h(a, b) {
        return "show-profile-controls";
    }
    function i(a, b) {
        return "has-modal-url";
    }
    function j(a, b) {
        var d, e, f = "";
        return f += '\n          <div class="date">\n            ' + s((d = c.date || a && a.date, 
        e = {
            hash: {},
            data: b
        }, d ? d.call(a, a && a.date, "MMMM D, YYYY", e) : r.call(a, "date", a && a.date, "MMMM D, YYYY", e))) + "\n          </div>\n        ";
    }
    function k(a, b) {
        var d, e, f = "";
        return f += '\n          <h3 class="title beta">\n            ', (e = c.title) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.title, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + "\n          </h3>\n        ";
    }
    function l(a, b) {
        var d, e, f = "";
        return f += '\n        <a class="purchase-link cta-button" href="', (e = c.purchaseUrl) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.purchaseUrl, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), f += s(d) + '">Purchase on <span class="no-transform">FinisherPix</span></a>\n      ';
    }
    function m(a, b) {
        var d, e = "";
        return e += '\n        <li class="slide">\n          ', d = c.each.call(a, a, {
            hash: {},
            inverse: u.noop,
            fn: u.program(15, n, b),
            data: b
        }), (d || 0 === d) && (e += d), e += "\n        </li>\n        ";
    }
    function n(a, b) {
        var d, e, f, g = "";
        return g += '\n            <div class="item visibility-item ', f = {
            hash: {},
            inverse: u.noop,
            fn: u.program(16, o, b),
            data: b
        }, (e = c.visible) ? d = e.call(a, f) : (e = a && a.visible, d = typeof e === t ? e.call(a, f) : e), 
        c.visible || (d = v.call(a, d, {
            hash: {},
            inverse: u.noop,
            fn: u.program(16, o, b),
            data: b
        })), (d || 0 === d) && (g += d), g += '" data-item-index="' + s((d = null == b || b === !1 ? b : b.index, 
        typeof d === t ? d.apply(a) : d)) + '">\n              <div class="item-inner">\n                <div class="item-image">\n                  <img src="', 
        (e = c.url) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.url, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), (d || 0 === d) && (g += d), g += '" title="', (e = c.text) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.text, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += s(d) + '">\n                </div>\n                <div class="cta-links visibility-controls item-visibility">\n                  <a class="control if-icon-visible hide hide-text" data-action="visible" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += s(d) + '" data-value="false">Visible</a>\n                  <a class="control if-icon-hidden show hide-text" data-action="visible" data-id="', 
        (e = c.id) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.id, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += s(d) + '" data-value="true">Hidden</a>\n                </div>\n                <div class="cta-button profile-photo-control" data-action="set" data-url="', 
        (e = c.url) ? d = e.call(a, {
            hash: {},
            data: b
        }) : (e = a && a.url, d = typeof e === t ? e.call(a, {
            hash: {},
            data: b
        }) : e), g += s(d) + '">Set photo</div>\n              </div>\n            </div>\n          ';
    }
    function o(a, b) {
        return "visible";
    }
    this.compilerInfo = [ 4, ">= 1.0.0" ], c = this.merge(c, a.helpers), e = e || {};
    var p, q = "", r = c.helperMissing, s = this.escapeExpression, t = "function", u = this, v = c.blockHelperMissing;
    return p = c.each.call(b, b && b.slideshows, {
        hash: {},
        inverse: u.noop,
        fn: u.programWithDepth(1, f, e, b),
        data: e
    }), (p || 0 === p) && (q += p), q += "\n";
});

var ironfanLeaderboard = function(a) {
    "use strict";
    function b(a, b) {
        var c;
        return c = a + JSON.stringify(b), c = c.replace(/[^A-Za-z0-9]/g, ""), c.length > 120 && (c = c.substring(0, 120)), 
        c;
    }
    function c() {
        a("#leaderboard-table table").tablesorter({
            widgets: [ "zebra" ],
            widgetOptions: {
                zebra: [ "even", "odd" ]
            }
        });
    }
    function d() {
        a(".tab-units label.active").removeClass("active"), a(".tab-units input:checked").parent().addClass("active");
    }
    function e() {
        var c, d = "", e = window.subEventId;
        void 0 !== window.domainServices && (d = window.domainServices), void 0 !== window.domainServicesCached && (d = window.domainServicesCached), 
        c = d + "/Handlers/Live/GetAgeGroupList.ajax?e=" + e, a.ajax({
            url: c,
            type: "GET",
            cache: !0,
            dataType: "jsonp",
            jsonpCallback: b(c, {}),
            success: function(b) {
                var c = '<option value="all" checked>All</option>';
                a.each(b, function(a, b) {
                    c += '<option value="' + b.AgeGroupName + '">' + b.AgeGroupName + "</option>";
                }), a(".athleteCategory select").html(c), a(".athleteCategory select").select2();
            }
        });
    }
    function f(a) {
        var b, c, d;
        try {
            for (b = 0; b < a.SegmentList.length; b += 1) c = a.SegmentList[b], d = parseFloat(c.ProgressPercent, 10), 
            c.IsComplete ? (c.IsStarted = !0, c.IsInProgress = !1) : 0 >= d ? (c.IsStarted = !1, 
            c.IsInProgress = !1) : (c.IsStarted = !0, c.IsInProgress = !0);
        } catch (e) {
            console.log("Error in processLeaderboardsData"), console.log(e), console.log({
                data: a,
                i: b,
                segment: c,
                percent: d
            });
        }
    }
    function g(c, d) {
        var e, g = "";
        void 0 !== window.domainServices && (g = window.domainServices), void 0 !== window.domainServicesCached && (g = window.domainServicesCached), 
        e = g + "/Handlers/Live/GetLiveResult.ajax?id=" + d, a.ajax({
            type: "GET",
            url: e,
            cache: !0,
            dataType: "jsonp",
            jsonpCallback: b(e, {}),
            success: function(a) {
                var b;
                f(a), b = Digi.Templates.leaderboard_athlete_progress(jQuery.extend({}, LiveMap.content, a)), 
                c.after(b), u();
            }
        });
    }
    function h(b) {
        var c, d;
        b.preventDefault(), c = a(this), d = c.closest("tr").prev("tr"), v(d), c.closest(".more").remove();
    }
    function i(b) {
        var c, d, e;
        b.preventDefault(), c = a(this), d = c.closest(".segmentListRow"), e = d.next(".more-info"), 
        v(c), v(e), v(d);
    }
    function j(b) {
        var c, d, e;
        b.preventDefault(), c = a(this), d = c.closest(".segment-event-row"), e = d.find(".more-info"), 
        v(e, "remove"), v(d, "remove");
    }
    function k() {
        a("html, body").animate({
            scrollTop: a("#leaderboard-table").offset().top
        }, 500);
    }
    function l(d, e) {
        var f, g = "", h = window.subEventId;
        void 0 !== window.domainServices && (g = window.domainServices), void 0 !== window.domainServicesCached && (g = window.domainServicesCached), 
        "" === d && (d = 1), f = g + "/Handlers/Live/GetLeaderList.ajax?e=" + h + "&p=" + d + "&ps=25", 
        a.ajax({
            type: "GET",
            url: f,
            cache: !0,
            dataType: "jsonp",
            data: e,
            jsonpCallback: b(f, e),
            success: function(a) {
                var b;
                b = Digi.Templates.leaderboard_live(jQuery.extend({}, LiveMap.content, a)), jQuery("#leaderboard-table").html(b), 
                t(), c(), u(), y(), x();
            }
        });
    }
    function m(d, e) {
        var f, g = "", h = window.subEventId;
        void 0 !== window.domainServices && (g = window.domainServices), void 0 !== window.domainServicesCached && (g = window.domainServicesCached), 
        "" === d && (d = 1), f = g + "/Handlers/Live/GetLeaderList.ajax?e=" + h + "&p=" + d + "&ps=25", 
        a.ajax({
            type: "GET",
            url: f,
            cache: !0,
            dataType: "jsonp",
            data: e,
            jsonpCallback: b(f, e),
            success: function(a) {
                var b;
                b = Digi.Templates.leaderboard_pre(jQuery.extend({}, LiveMap.content, a)), jQuery("#leaderboard-table").html(b), 
                c(), u(), y(), x();
            }
        });
    }
    function n(d, e) {
        var f, g = "", h = window.subEventId;
        void 0 !== window.domainServices && (g = window.domainServices), void 0 !== window.domainServicesCached && (g = window.domainServicesCached), 
        "" === d && (d = 1), f = g + "/Handlers/Live/GetLeaderList.ajax?e=" + h + "&p=" + d + "&ps=25", 
        a.ajax({
            type: "GET",
            url: f,
            cache: !0,
            dataType: "jsonp",
            data: e,
            jsonpCallback: b(f, e),
            success: function(a) {
                var b;
                b = Digi.Templates.leaderboard_post(jQuery.extend({}, LiveMap.content, a)), jQuery("#leaderboard-table").html(b), 
                t(), c(), u(), y(), x();
            }
        });
    }
    function o(b, c, d) {
        var e, f, g = b.split(" ");
        void 0 === d && (d = a(".leaderboard-filter").serializeArray(), e = r(d, [ {
            from: "all",
            to: ""
        }, {
            from: "Find an athlete by name or bib #",
            to: ""
        } ]), f = a.param(e, !0), d = f), a.each(g, function(a, b) {
            "preRace" === b ? m(c, d) : "liveRace" === b ? l(c, d) : "postRace" === b && n(c, d);
        });
    }
    function p() {
        var b, c, d, e;
        0 !== a(".leaderboard-filter").length && (b = a(".leaderboard-filter").serializeArray(), 
        c = r(b, [ {
            from: "all",
            to: ""
        }, {
            from: "Find an athlete by name or bib #",
            to: ""
        } ]), d = a.param(c, !0), e = a("body").attr("class"), o(e, 1, d));
    }
    function q() {
        0 !== a(".leaderboard-filter").length && jQuery.subscribe("LiveMap.RaceTime.stateChange", function(a) {
            console.log("Race state change", a), p();
        });
    }
    var r, s, t, u, v, w, x, y;
    return r = function(a, b) {
        var c, d, e = {};
        for (void 0 === b && (b = []), c = 0; c < a.length; c += 1) for (e[a[c].name] = a[c].value, 
        d = 0; d < b.length; d += 1) e[a[c].name] === b[d].from && (e[a[c].name] = b[d].to);
        return e;
    }, t = function() {
        a(".showMapLink").on("click", function(a) {
            return a.stopPropagation(), !0;
        }), a(".showMap").on({
            mouseenter: function(b) {
                a(this).closest("tr").hasClass("odd") ? a(".first-level.odd:hover").css("background", "#f2f2f2") : a(".first-level.even:hover").css("background-color", "#FFFFFF"), 
                a(".first-level:hover").css("color", "#000");
            },
            mouseleave: function(b) {
                a(".first-level").attr("style", "");
            }
        }), a(".leaderboard .leaderboard-table-wrapper").on("click", ".first-level", function(b) {
            b.preventDefault();
            var c = a(this), d = c.attr("data-id");
            "showMap" !== b.target.className && "showMapLink" !== b.target.className && (c.hasClass("active") ? (v(c), 
            c.next("tr.more").remove()) : (v(a(".first-level"), "remove"), a(".leaderboard-table-wrapper tr.more").remove(), 
            v(c), g(c, d)));
        });
    }, u = function() {
        a(".more-wrapper").off("click", ".main-close", h), a(".more-wrapper").on("click", ".main-close", h), 
        a([ "#lmAthleteDetails", ".leaderboard .resultsListing" ].join(", ")).off("click", ".segmentListRow .expand", i), 
        a([ "#lmAthleteDetails", ".leaderboard .resultsListing" ].join(", ")).on("click", ".segmentListRow .expand", i), 
        a([ "#lmAthleteDetails", ".leaderboard .resultsListing" ].join(", ")).off("click", ".more-info .segment-close", j), 
        a([ "#lmAthleteDetails", ".leaderboard .resultsListing" ].join(", ")).on("click", ".more-info .segment-close", j);
    }, v = function(a, b) {
        a.hasClass("active") || "remove" === b ? a.removeClass("active") : a.addClass("active");
    }, x = function() {
        a(".leaderboard .pagination").on("click", "a", function(b) {
            b.preventDefault();
            var c = a(this), d = c.attr("data-pagenumber"), e = a("body").attr("class");
            c.is(".prevPage") && (d = parseInt(a(".pageValue.active").attr("data-pagenumber"), 10) - 1), 
            c.is(".nextPage") && (d = parseInt(a(".pageValue.active").attr("data-pagenumber"), 10) + 1), 
            o(e, d), k();
        });
    }, w = function() {
        a(".leaderboard-filter").find("select, input").on("change keyup", p);
    }, s = function() {
        var b;
        b = LiveMap.Units.loadFromCookie("MI"), a(".tab-units input[value=" + b + "]").prop("checked", !0), 
        d(), a(".tab-units input").on("change", function() {
            var b, c = a(this), e = a(".leaderboard-table-wrapper").attr("data-pageNum"), f = a("body").attr("class"), g = a(".leaderboard-filter").serializeArray(), h = r(g, [ {
                from: "all",
                to: ""
            }, {
                from: "Find an athlete by name or bib #",
                to: ""
            } ]), i = a.param(h, !0);
            c.is(":checked") && (d(), b = c.val(), LiveMap.Units.saveToCookie(b), o(f, e, i));
        });
    }, y = function() {
        a(".profile-updates .module").on("click", ".cta-button", function(b) {
            b.preventDefault();
            var c = a(this), d = c.attr("data-id"), e = c.attr("data-name").dasherize(), f = c.attr("data-subscribe");
            "text" === f ? LiveMap.ShareForms.showForm("text", d) : "email" === f && LiveMap.ShareForms.showForm("email", d), 
            a.publish("/ga/getAthleteUpdate", [ e ]);
        });
    }, {
        init: function() {
            a(document).ajaxComplete(function() {
                a(".livemap").length && (u(), y());
            }), q(), a(".leaderboardLiveTableResults").length && (a(".fieldCounty select").select2(), 
            e(), w(), s(), u()), a(".leaderboard.liveRace").length && l(), a(".leaderboard.preRace").length && m(), 
            a(".leaderboard.postRace").length && n(), a("#lmAthleteDetailsWindow").length && u(), 
            a(".athleteProfile").length && y(), jQuery("a.table-key-info-learn").click(function(a) {
                a.preventDefault(), LiveMap.MessageDialog.show("liveMapMessageEstimates");
            }), (a(".leaderboard").length || a(".livemap").length) && (LiveMap.RaceTime.initialized || (void 0 !== LiveMap.vars ? LiveMap.RaceTime.testMode = LiveMap.vars.testMode : -1 !== document.location.toString().indexOf("testMode=true") && (LiveMap.RaceTime.testMode = !0), 
            LiveMap.RaceTime.init()), setInterval(function() {
                a(".raceTime").html(LiveMap.RaceTime.getTimeString());
            }, 1e3));
        }
    };
}(jQuery);

jQuery(ironfanLeaderboard.init);

var ironfanAthleteProfile = function(a) {
    "use strict";
    var b = (void 0 !== a.cookie("ironfan"), function() {
        a(".record-wrapper").on("click", ".record-title", function(b) {
            b.preventDefault(), a(".record-wrapper.active").removeClass("active"), a(this).parent().addClass("active");
        });
    }), c = function() {
        a(".athleteProfile .leaderboard-table-wrapper").on("click", ".first-level", function(b) {
            b.preventDefault();
            var c = a(this);
            c.hasClass("active") || (d(a(".leaderboard-table-wrapper .first-level.active")), 
            d(a(".leaderboard-table-wrapper tr.more.active")), d(c), d(c.next("tr.more")));
        });
    }, d = function(a, b) {
        a.hasClass("active") ? a.removeClass("active") : a.addClass("active");
    }, e = function() {
        a(".athleteProfile .more-wrapper").on("click", ".main-close", function(b) {
            b.preventDefault();
            var c = a(this), e = c.closest("tr").prev("tr");
            d(e), d(c.closest(".more"));
        }), a(".athleteProfile .segment-event").on("click", ".expand", function(b) {
            b.preventDefault();
            var c = a(this), e = c.closest(".segment-event-row"), f = e.find(".more-info");
            d(f), d(e);
        }), a(".athleteProfile .more-info").on("click", ".segment-close", function(b) {
            b.preventDefault();
            var c = a(this), e = c.closest(".segment-event-row"), f = c.closest(".more-info");
            d(f), d(e);
        });
    };
    return {
        init: function() {
            b(), e(), c();
        }
    };
}(jQuery);

jQuery(ironfanAthleteProfile.init);

var Digi = Digi || {}, eventPublisher = window.eventPublisher || EventPublisher.getInstance();

!function(a, b, c, d) {
    var e = function(a) {
        this.init(a);
    };
    a.extend(e.prototype, {
        defaults: {
            busyClass: "busy",
            errorClass: "error",
            errorElement: "label",
            ignoreClass: ".ignore",
            itemsPerSlide: 1,
            itemWrapperClass: "item",
            namespace: ".ironfan",
            nextText: "Next",
            openClass: "open",
            validClass: "valid",
            strings: {
                athlete: "Athlete",
                authenticated: "Logged-in",
                fan: "Fan",
                unauthenticated: "Not logged-in"
            }
        },
        ajaxOptions: {
            dataType: "jsonp"
        },
        isIframed: parent !== c,
        isLoggedIn: a.cookie("ironfan") !== d,
        validatorOptions: {
            "account-deactivate": {
                rules: {
                    emailAddress: {
                        required: !0,
                        unicodeEmail: !0
                    }
                },
                messages: {
                    emailAddress: {
                        required: "Email address is required",
                        unicodeEmail: "Email must be in a valid format"
                    }
                }
            },
            "account-forgot-password": {
                rules: {
                    emailAddress: {
                        required: !0,
                        unicodeEmail: !0
                    }
                },
                messages: {
                    emailAddress: {
                        required: "Email address is required",
                        unicodeEmail: "Email must be in a valid format"
                    }
                }
            },
            "account-change-password": {
                rules: {
                    currentPassword: "required",
                    newPassword: {
                        required: !0,
                        strongPassword: !0
                    },
                    confirmNewPassword: {
                        equalTo: 'input[name="newPassword"]'
                    }
                },
                messages: {
                    currentPassword: "Current password is required",
                    newPassword: {
                        required: "New password is required",
                        strongPassword: "Password must be a minimum of 8 characters, maximum of 30 characters, and include a minimum of one upper case, one lower case, one number, and one of the following special characters: !@#$%^&*()-_+=,.?"
                    },
                    confirmNewPassword: "New passwords do not match"
                }
            },
            "account-profile": {
                rules: {
                    facebookUrl: {
                        url: !0
                    },
                    linkedinUrl: {
                        url: !0
                    },
                    googlePlusUrl: {
                        url: !0
                    },
                    additionalUrl: {
                        url: !0
                    }
                },
                messages: {
                    facebookUrl: "Invalid URL",
                    linkedinUrl: "Invalid URL",
                    googlePlusUrl: "Invalid URL",
                    additionalUrl: "Invalid URL"
                }
            },
            "account-registration-1": {
                rules: {
                    firstName: "required",
                    lastName: "required",
                    emailAddress: {
                        required: !0,
                        unicodeEmail: !0
                    },
                    password: {
                        required: !0,
                        strongPassword: !0
                    },
                    confirmPassword: {
                        equalTo: 'input[name="password"]'
                    }
                },
                messages: {
                    firstName: "First Name is required",
                    lastName: "Last Name is required",
                    emailAddress: {
                        required: "Email address is required",
                        unicodeEmail: "Email must be in a valid format"
                    },
                    password: {
                        required: "Password is required",
                        strongPassword: "Password must be a minimum of 8 characters, maximum of 30 characters, and include a minimum of one upper case, one lower case, one number, and one of the following special characters: !@#$%^&*()-_+=,.?"
                    },
                    confirmPassword: "Passwords do not match"
                }
            },
            "account-registration-2": {
                rules: {
                    username: "required",
                    birthMonth: {
                        required: !0,
                        digits: !0,
                        maxlength: 2,
                        range: [ 1, 12 ]
                    },
                    birthDay: {
                        required: !0,
                        digits: !0,
                        maxlength: 2,
                        range: [ 1, 31 ]
                    },
                    birthYear: {
                        selectCheck: !0
                    }
                },
                messages: {
                    username: "Username is required",
                    birthMonth: "Date of birth is required",
                    birthDay: "Date of birth is required",
                    birthYear: "Date of birth is required"
                },
                groups: {
                    birthDate: "birthMonth birthDay birthYear"
                }
            },
            "account-registration-additional-information": {
                rules: {
                    country: {
                        selectCheck: !0
                    },
                    emailAddress: {
                        unicodeEmail: !0
                    },
                    gender: "required"
                },
                messages: {
                    country: "Country is required",
                    emailAddress: {
                        unicodeEmail: "Email must be in a valid format"
                    },
                    gender: "Gender is required"
                }
            },
            "account-registration-athlete-check": {
                rules: {
                    athlete: "required"
                },
                messages: {
                    athlete: "Please indicate if you are an Ironman athlete."
                }
            },
            "account-registration-verification": {
                rules: {
                    athlete: "required",
                    verificationCode: "required"
                },
                messages: {
                    athlete: "Please indicate if you are an Ironman athlete.",
                    verificationCode: "Verification code is required"
                }
            },
            "account-reset-password": {
                rules: {
                    newPassword: {
                        required: !0,
                        strongPassword: !0
                    },
                    confirmNewPassword: {
                        equalTo: 'input[name="newPassword"]'
                    }
                },
                messages: {
                    newPassword: {
                        required: "New password is required",
                        strongPassword: "Password must be a minimum of 8 characters, maximum of 30 characters, and include a minimum of one upper case, one lower case, one number, and one of the following special characters: !@#$%^&*()-_+=,.?"
                    },
                    confirmNewPassword: "New passwords do not match"
                }
            },
            "account-settings": {
                rules: {
                    emailAddress: {
                        required: !0,
                        unicodeEmail: !0
                    },
                    username: "required"
                },
                messages: {
                    emailAddress: {
                        required: "Email is required",
                        unicodeEmail: "Email must be in a valid format"
                    },
                    username: "Username is required"
                }
            },
            "account-sign-in": {
                rules: {
                    username: "required",
                    password: "required"
                },
                messages: {
                    username: "Username is required",
                    password: "Password is required"
                }
            }
        },
        validators: [],
        init: function(b) {
            this.settings = a.extend({}, this.defaults, b), this.addValidatorMethods(), this.setValidatorDefaults(), 
            this.setUpForms(), a(this.settings.namespace + " .module textarea[maxlength]").maxLength();
        },
        accountType: function(a) {
            var b = this;
            return a.isAthlete ? b.settings.strings.athlete : b.settings.strings.fan;
        },
        addValidatorMethods: function() {
            a.validator.addMethod("selectCheck", function(a, b, c) {
                return this.optional(b) || "null" !== a;
            }), a.validator.addMethod("strongPassword", function(a, b, c) {
                return this.optional(b) || /(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#\$%^&*\(\)\-_+=,\.\?]).{8,30}/.test(a);
            }), a.validator.addMethod("unicodeEmail", function(a, b) {
                return this.optional(b) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a);
            });
        },
        athleteName: function(a) {
            return a.dasherize();
        },
        lock: function(b, c) {
            var d = a(b), e = d.find(":input");
            c = c || !1, d.toggleClass(this.settings.busyClass, c), e.not(":submit").prop("readonly", c), 
            e.filter(":submit").toggleClass(this.settings.busyClass, c).prop("disabled", c);
        },
        loggedInStatus: function(a) {
            return this.isLoggedIn ? this.settings.strings.authenticated : this.settings.strings.unauthenticated;
        },
        handleResponse: function(a) {
            var b = this, d = a[0], e = a.data("jqxhr");
            e.done(function(e, f, g) {
                switch (b.trackEvent(a, e, "after-submit"), e.status) {
                  case "error":
                    b.hideStatusModal(), b.lock(d, !1), b.publish("modalFormDidChange"), b.showFieldErrors(d, e), 
                    b.showMessage(d, e, f);
                    break;

                  case "redirect":
                    b.isIframed ? parent.location = e.url : c.location = e.url;
                    break;

                  case "success":
                    b.hideFieldErrors(d), b.lock(d, !1), b.publish("modalFormDidChange"), b.showMessage(d, e, f);
                }
            }).fail(function(a, c, e) {
                b.showMessage(d, null, c, e);
            });
        },
        handleSubmission: function(b) {
            var c, d = this;
            this.lock(b, !0), this.hideMessage(b), this.showStatusModal(b), c = a(b).ajaxSubmit(this.ajaxOptions), 
            d.handleResponse(c);
        },
        hideFieldErrors: function(b) {
            var c = a(b).find("." + this.settings.errorClass);
            c.length && (c.filter(":input").removeClass(this.settings.errorClass), c.filter("label").remove());
        },
        hideMessage: function(b) {
            var c = a(b).find(".message");
            c.hasClass(this.settings.openClass) && c.removeClass(this.settings.errorClass + " " + this.settings.openClass).find(".title, .body").empty();
        },
        hideStatusModal: function() {
            a.fancybox.close();
        },
        highlightField: function(b, c, d) {
            var e = this;
            a(b).addClass(c).removeClass(d), a(b).closest(".form-item").addClass(c), setTimeout(function() {
                e.publish("modalFormDidChange");
            }, 100);
        },
        placeError: function(a, b) {
            var c = b.closest(".form-group"), d = b;
            c.length ? d = c.find(".form-item:last") : b.is("select") && (d = b.closest(".form-item").find(".select2-container")), 
            a.insertAfter(d);
        },
        resetForm: function(b, c) {
            a(b).get(0).reset(), this.validators[c].resetForm !== d && this.validators[c].resetForm(), 
            this.publish("resetSelect2");
        },
        publish: function(a) {
            this.isIframed && eventPublisher.publish("Ironfan", a);
        },
        setUpForms: function() {
            var b = this;
            a(this.settings.namespace + " .module form").each(function(c) {
                var d, e = a(this), f = e.data("form-type");
                f && "undefined" != typeof b.validatorOptions[f] ? d = e.validate(b.validatorOptions[f]) : (a(this).ajaxForm(b.ajaxOptions), 
                d = {}), b.validators.push(d), e.on("click", 'input[type="reset"]', function(a) {
                    a.preventDefault(), b.resetForm(e, c);
                });
            });
        },
        setValidatorDefaults: function() {
            var b = this;
            a.validator.setDefaults({
                errorClass: b.settings.errorClass,
                errorPlacement: b.placeError,
                ignore: b.settings.ignoreClass,
                highlight: function() {
                    b.highlightField();
                },
                unhighlight: function() {
                    b.unHighlightField();
                },
                validClass: b.settings.validClass,
                submitHandler: function(a) {
                    b.handleSubmission(a);
                }
            });
        },
        showFieldErrors: function(b, c) {
            var d, e, f, g;
            if (c.errorList) {
                this.hideFieldErrors();
                for (var h = c.errorList.length - 1; h >= 0; h--) f = c.errorList[h].field, g = c.errorList[h].error, 
                d = a(b).find('[name="' + f + '"]'), this.highlightField(d, this.settings.errorClass, this.settings.validClass), 
                g && "" !== g && (e = a("<" + this.settings.errorElement + ' id="' + f + '-error" class="error" for="' + f + '">' + g + "</" + this.settings.errorElement + ">"), 
                this.placeError(e, d));
            }
        },
        showMessage: function(b, c, d, e) {
            var f, g;
            if (c && c.hasOwnProperty("message")) if ("header" === c.message.type ? (f = a(this.settings.namespace + " .module-header .message"), 
            g = !0) : f = a(b).find(".message"), "object" == typeof c.message) for (var h in c.message) f.find("." + h).html(c.message[h]); else f.find(".title").html(c.message); else e && f.find(".title").html(e);
            (e || c && "error" === c.status) && f.addClass(this.settings.errorClass), f.addClass(this.settings.openClass), 
            g && a.scrollTo(f, 300);
        },
        showStatusModal: function(b) {
            var c, d, e, f, g, h, i, j, k, l = this, m = a(b), n = m.data("status-modal-conditions"), o = m.data("status-modal");
            if (o && (e = !0, n)) {
                n = n.split("|");
                for (var p = n.length - 1; p >= 0; p--) d = n[p].split(":"), h = d[0], j = d[1], 
                c = a(b).find('[name="' + h + '"]'), f = c.is(":radio") || c.is(":checkbox") ? c.filter(":checked").val() : c.val(), 
                f !== j && (e = !1);
            }
            e && (i = m.data("status-modal-type"), g = m.data("status-modal-height") || "auto", 
            k = m.data("status-modal-width") || "auto", a.fancybox({
                autoSize: !1,
                closeBtn: !1,
                closeClick: !1,
                closeEffect: "none",
                fitToView: !1,
                height: g,
                href: o,
                iframe: {
                    scrolling: !1,
                    preload: !1
                },
                openEffect: "none",
                padding: 0,
                parent: l.settings.namespace + " .module:last",
                scrolling: !1,
                type: i,
                width: k
            }));
        },
        stepName: function(a, b) {
            return b;
        },
        analyticsOptions: {
            "account-registration-1": {
                "after-submit": {
                    condition: "status",
                    value: "redirect",
                    event: "registrationStart"
                }
            },
            "account-registration-2": {
                "after-submit": {
                    condition: "status",
                    value: "redirect",
                    event: "registrationStep",
                    arguments: "accountType, stepName"
                }
            },
            "account-registration-verification": {
                "after-submit": {
                    condition: "status",
                    value: "redirect",
                    event: "registrationComplete",
                    arguments: "accountType"
                }
            },
            "account-sign-in": {
                "after-submit": {
                    condition: "status",
                    value: "redirect",
                    event: "signIn",
                    arguments: "accountType"
                }
            }
        },
        trackEvent: function(b, c, e) {
            var f, g, h, i = this, j = b.data("form-type"), k = [];
            if (this.analyticsOptions[j] && this.analyticsOptions[j][e] && (h = this.analyticsOptions[j][e], 
            c[h.condition] === h.value)) {
                if (h.arguments !== d) {
                    g = h.arguments.split(",");
                    for (var l = 0; l < g.length; l++) f = a.trim(g[l]), a.isFunction(i[f]) ? k.push(i[f].call(i, c, j)) : k.push(c[f]);
                }
                a.publish("/ga/" + h.event, k);
            }
        },
        unHighlightField: function(b, c, d) {
            a(b).removeClass(c).addClass(d), a(b).closest(".form-item").removeClass(c), this.publish("modalFormDidChange");
        }
    }), Digi.ironfanForms = e;
}($, document, window, void 0);

var Digi = Digi || {}, eventPublisher = eventPublisher || EventPublisher.getInstance();

!function(a, b, c, d) {
    var e = function() {
        this.init();
    };
    a.extend(e.prototype, {
        defaults: {
            allHiddenClass: "all-hidden",
            allVisibleClass: "all-visible",
            busyClass: "busy",
            closingClass: "closing",
            disabledClass: "disabled",
            galleryWrapperClass: "if-gallery",
            itemsPerSlide: 1,
            namespace: ".ironfan",
            nextClass: "next",
            nextText: "Next",
            openClass: "open",
            paginationControls: ".pagination-controls",
            prevClass: "prev",
            prevText: "Previous",
            selectedClass: "selected",
            visibleClass: "visible",
            visibilityControls: ".visibility-controls .control",
            visibilityCounters: ".visibility-counters .counter",
            visibilityItem: ".visibility-item",
            visibilityStatus: ".visibility-status",
            visibilityWrapper: ".visibility-wrapper"
        },
        init: function() {
            var b = this, d = a("#outlet"), e = d.data(), f = c.location.search.replace(/^\?/, ""), g = a.deparam(f) || {};
            this.settings = a.extend({}, this.defaults, e, g), d.length ? this.renderPage(d, this.settings, function() {
                b.afterRender();
            }) : this.afterRender();
        },
        afterRender: function() {
            this.accountModals = this.initModals(), this.accountForms = new Digi.ironfanForms(), 
            this.analytics = new Digi.analytics(), this.hideNavigation(".my-profile"), this.initAccountLinks(), 
            this.initAccountMessages(), this.initFollowedAthletes(), this.initGalleries(), this.initMisc(), 
            this.initProfilePhotoControls(), this.initTables(), this.initVisibilityControls(), 
            this.initSelects();
        },
        hideNavigation: function(b) {
            var c, d = a(this.settings.namespace + " .account-navigation");
            return this.pageData && this.pageData.isAthlete || !d.length ? !1 : (c = d.find(b), 
            void (c.length && c.hide()));
        },
        initAccountLinks: function() {
            a("body").toggleClass("is-logged-in", a.cookie("ironfan") !== d);
        },
        initAccountMessages: function() {
            var b = this;
            a(this.settings.namespace + " .close-message").click(function() {
                var c = a(this).closest(".message");
                c.addClass(b.settings.closingClass), setTimeout(function() {
                    c.removeClass(b.settings.openClass + " " + b.settings.closingClass);
                }, 350);
            });
        },
        initFollowedAthletes: function() {
            var b = this, c = a(this.settings.namespace + " .module-followed-athletes");
            if (!c.length) return !1;
            var d = function() {
                c.on("click", ".unfollow", f);
            }, e = function(a, b, c, d) {
                var e = d.closest("tr"), f = e.closest(".tablesorter");
                "success" === a.status && (e.remove(), f.length && f.trigger("update").trigger("sorton", f.get(0).config.sortList).trigger("appendCache").trigger("applyWidgets"));
            }, f = function() {
                var c, d = a(this), f = d.data(), g = {
                    url: b.settings.handlerUrl,
                    data: f,
                    dataType: "jsonp"
                };
                c = a.ajax(g), c.done(function(a, b, c) {
                    e(a, b, c, d);
                });
            };
            !function() {
                d();
            }();
        },
        initGalleries: function(b) {
            var d, e = this, f = "cubic-bezier(0.23, 1, 0.32, 1)", g = a(this.settings.namespace + " .if-gallery"), h = {};
            if (!g.length) return !1;
            var i = function() {
                g.on("click", ".item-image, .item-description", function() {
                    var b, f, g, i, j, k, l, m, n, o = e.settings.galleryModalUrl, p = e.settings.galleryUrl;
                    return o || !p ? !1 : (b = a(this).closest(".item"), j = b.data(), k = j.itemIndex, 
                    i = b.closest(".if-gallery").data("gallery-name"), g = h[i].gallery, o = e.settings.galleryModalUrl, 
                    m = {}, n = "", a.isNumeric(k) && (f = g.getCurrentSlide(), l = e.settings.itemsPerSlide, 
                    d = f * l + k, m.startSlide = d), j && (j.hasOwnProperty("id") && (m.id = j.id), 
                    j.hasOwnProperty("showProfileControls") && (m.showProfileControls = j.showProfileControls), 
                    j.hasOwnProperty("showVisibilityControls") && (m.showVisibilityControls = j.showVisibilityControls)), 
                    m && (p += "?" + a.param(m)), void (c.location = p));
                });
            }, j = function() {
                return e.settings.startSlide || 0;
            }, k = function() {
                var b, c, d, g;
                a(".if-gallery .slides").each(function() {
                    b = a(this), d = b.closest(".if-gallery").data(), g = e.pageData.slideshows[d.galleryName], 
                    g.slides.length > 1 && (c = b.children(), c.children().equalizeHeights(), h[d.galleryName] = {}, 
                    h[d.galleryName].gallery = b.bxSlider({
                        easing: f,
                        hideControlOnEnd: !0,
                        infiniteLoop: !1,
                        nextText: e.settings.nextText,
                        prevText: e.settings.prevText,
                        onSliderLoad: function() {
                            e.pub("modalDidOpen");
                        },
                        startSlide: j()
                    }), h[d.galleryName].itemsPerSlide = d.itemsPerSlide);
                });
            };
            !function() {
                k(), i();
            }();
        },
        initMisc: function() {
            a(this.settings.namespace + " .split-list").splitLists();
        },
        initModals: function() {
            var b, d, e, f, g, h, i = this, j = function() {
                f && a(".close-fancybox").click(function() {
                    parent.$.fancybox.close();
                }), a(".fancybox").click(m), b.on("click", "a", function(b) {
                    b.preventDefault();
                    var d = a(this).attr("href").replace("#", "");
                    "" !== d && (/^services/.test(this.hostname) ? parent.location = this.href : this.hostname !== location.hostname ? c.open(this.href, "_blank") : c.location = this.href);
                });
            }, k = function() {
                return b.height();
            }, l = function() {
                return d.hasClass(g);
            }, m = function(b) {
                b.preventDefault();
                var c, d = a(this).data(), e = this.href;
                if (e && "#" !== e && (h.options.href = e), d) for (var f in d) d.hasOwnProperty(f) && (c = f.replace("fancybox", "").toLowerCase(), 
                h.options[c] = d[f]);
                h.options.type && "iframe" === h.options.type && (h.options.iframe = {
                    scrolling: !1,
                    preload: !1
                }), h.settings = a.extend({}, h.defaults, h.options), a.fancybox(h.settings), a.fancybox.showLoading();
            }, n = function() {
                e.height.css({
                    height: k()
                }), e.width.css({
                    width: i.settings.modalWidth
                }), setTimeout(function() {
                    parent.$.fancybox.reposition(), l() || (parent.$.fancybox.hideLoading(), d.addClass(g));
                }, 350);
            };
            !function() {
                b = a(".module.modal"), d = parent.$(".fancybox-wrap"), e = {
                    height: d.find(".fancybox-inner, .fancybox-iframe"),
                    width: d.find(".fancybox-inner").andSelf()
                }, f = parent !== c, g = "modal-is-ready", h = {
                    defaults: {
                        autoResize: !1,
                        closeClick: !1,
                        closeEffect: "none",
                        fitToView: !1,
                        height: 0,
                        openEffect: "none",
                        padding: 0,
                        parent: ".moduleWrapper .module:last",
                        scrolling: !1
                    },
                    options: {},
                    settings: {}
                }, i.sub("modalDidOpen", n), i.sub("modalFormDidChange", n), f && i.pub("modalDidOpen"), 
                j();
            }();
        },
        initProfilePhotoControls: function() {
            var b, c, e, f, g, h, i, j, k = this, l = a(this.settings.namespace + " .profile-photo-control");
            if (!l.length) return !1;
            var m = function() {
                l.on("click", function(b) {
                    return b.preventDefault(), c = a(this), h ? !1 : (i = c.data(), h = !0, e.length && (g = c.closest(".item"), 
                    f.removeClass(k.settings.selectedClass), g.addClass(k.settings.busyClass)), j = a.ajax(k.settings.profilePhotoHandlerUrl, {
                        data: i,
                        dataType: "jsonp"
                    }), void j.done(function(a) {
                        h = !1, a.hasOwnProperty("status") && ("redirect" === a.status || "success" === a.status && o());
                    }));
                });
            }, n = function() {
                e.length && f.has('img[src="' + b.attr("src") + '"]').addClass(k.settings.selectedClass);
            }, o = function() {
                i.url ? b.attr("src", i.url) : b.removeAttr("src"), b.closest(".profile-image").toggleClass("has-image", i.url !== d), 
                e.length && g.addClass(k.settings.selectedClass).removeClass(k.settings.busyClass);
            };
            !function() {
                e = l.first().closest(".if-gallery"), e.length && (f = e.find(".item")), b = parent.$(".module-photo-bio .profile-image img"), 
                m(), n();
            }();
        },
        initTables: function() {
            var b, c = this, d = {
                container: a(c.settings.paginationControls),
                output: "",
                size: 10,
                cssNext: "." + c.settings.nextClass,
                cssPrev: "." + c.settings.prevClass,
                cssDisabled: c.settings.disabledClass
            }, e = {
                fixedHeight: !0,
                sortList: [ [ 0, 1 ] ],
                debug: !1
            }, f = a(this.settings.namespace + " .tablesorter");
            if (!f.length) return !1;
            var g = function() {
                a.tablesorter.addParser({
                    id: "duration",
                    is: !1,
                    format: function(a, b, c, d) {
                        var e = moment(a, "hh:mm:ss");
                        return e.isValid() ? e.unix() : a;
                    },
                    parsed: !1,
                    type: "numeric"
                }), a.tablesorter.addParser({
                    id: "rank",
                    is: !1,
                    format: function(a, b, c, d) {
                        return -1 !== a.indexOf("/") ? parseInt(a.split("/")[0], 10) : a;
                    },
                    parsed: !1,
                    type: "numeric"
                }), a.tablesorter.addParser({
                    id: "twoDigitYear",
                    is: !1,
                    format: function(a, b, c, d) {
                        var e = moment(a, "M/D/YY");
                        return e.isValid() ? e.unix() : a;
                    },
                    parsed: !1,
                    type: "numeric"
                }), a.tablesorter.addParser({
                    id: "lastName",
                    is: !1,
                    format: function(a, b, c, d) {
                        var e = a.split(/\r\n|\r|\n/g).shift().split(" ").pop();
                        return e;
                    },
                    parsed: !1,
                    type: "text"
                });
            }, h = function() {
                d.container.on("click", ".pager-link", function() {
                    f.trigger("pageSet", a(this).data("page-index") + 1);
                });
            }, i = function(a) {
                for (var c = "", e = 0; e < a.totalPages; e++) c += '<div class="pager-item"><a class="pager-link' + (e === a.page ? " active" : "") + '" data-page-index="' + e + '">' + (e + 1) + "</a></div>";
                b = d.container.find(".pager").html(c).find(".pager-link");
            }, j = function() {
                f.bind("pagerChange pagerComplete pagerInitialized pageMoved", l).tablesorter(e).tablesorterPager(d);
            }, k = function(a) {
                b.removeClass("active").filter('[data-page-index="' + a.page + '"]').addClass("active");
            }, l = function(a, b) {
                switch (a.type) {
                  case "pagerChange":
                    break;

                  case "pagerComplete":
                    k(b);
                    break;

                  case "pagerInitialized":
                    i(b), h();
                    break;

                  case "pageMoved":                }
            };
            !function() {
                g(), j(), h();
            }();
        },
        initVisibilityControls: function() {
            var b, c, e, f = this, g = a(this.settings.namespace + " " + this.settings.visibilityControls);
            if (!g.length || !this.settings.hasOwnProperty("handlerUrl") && !this.settings.hasOwnProperty("visibilityHandlerUrl")) return !1;
            var h = function() {
                g.on("click", function(b) {
                    b.stopPropagation(), "label" !== b.target.tagName.toLowerCase() && b.preventDefault(), 
                    j(a(this));
                });
            }, i = function(a) {
                return a.hasClass(f.settings.busyClass);
            }, j = function(d) {
                var g, h = d.data(), i = o(d, h);
                return i ? !1 : (b = d.closest(f.settings.visibilityWrapper), c = b.data(), g = c.visibilityHandlerUrl ? c.visibilityHandlerUrl : f.settings.visibilityHandlerUrl || f.settings.handlerUrl, 
                e = a.ajax(g, {
                    data: h,
                    dataType: "jsonp"
                }), e.done(function(a) {
                    a.hasOwnProperty("status") && "redirect" === a.status || o(d, h, a);
                }), void e.fail(function(a, b, c) {
                    o(d, h, !1, !0);
                }));
            }, k = function(a, b) {
                a.toggleClass(f.settings.busyClass, b);
            }, l = function(a, c, d) {
                var e, g = !c.hasOwnProperty("id");
                "success" === d.status && (e = c.value, g ? b.toggleClass(f.settings.allVisibleClass, e).toggleClass(f.settings.allHiddenClass, !e) : a.closest(f.settings.visibilityItem).toggleClass(f.settings.visibleClass, e), 
                m(b), n(b, e));
            }, m = function(b) {
                var c, d, e, g = b.find(f.settings.namespace + " " + f.settings.visibilityCounters);
                return g.length ? (c = b.find(f.settings.visibilityItem), e = c.filter("." + f.settings.visibleClass).length, 
                d = c.length - e, void g.each(function() {
                    a(this).text(a(this).hasClass(f.settings.visibleClass) ? e : d);
                })) : !1;
            }, n = function(a, b) {
                var c = a.find(f.settings.visibilityStatus);
                c.toggleClass(f.settings.visibleClass, b).html(b ? "visible" : "hidden");
            }, o = function(a, b, c, e) {
                return c === d && e === d ? i(a) ? !0 : (k(a, !0), !1) : (k(a), void l(a, b, c));
            };
            !function() {
                h();
            }();
        },
        initSelects: function() {
            var b, c = a("#triclub");
            a(this.settings.namespace + " .module select").select2(), c.length && (b = c.data("handler-url"), 
            a("#triclub").select2({
                allowClear: !0,
                placeholder: "Enter 3 or more characters",
                minimumInputLength: 3,
                quietMillis: 100,
                ajax: {
                    url: b,
                    data: function(a, b) {
                        return {
                            q: a,
                            ps: 10,
                            p: b
                        };
                    },
                    dataType: "jsonp",
                    results: function(b, c) {
                        var d = 10 * c < b.TotalCount;
                        return a.each(b.ResultList, function(a, b) {
                            b.id = b.ClubId, b.text = b.Name;
                        }), {
                            results: b.ResultList,
                            more: d
                        };
                    }
                },
                initSelection: function(c, d) {
                    var e = a(c).val();
                    console.log("id: ", e), "" !== e && a.ajax(b, {
                        data: {
                            id: e
                        },
                        dataType: "jsonp"
                    }).done(function(a) {
                        a.id = a.ClubId, a.text = a.Name, d({
                            results: [ a ]
                        });
                    });
                },
                formatSelection: function(a, b) {
                    return a.results ? a.results[0].text : a.text;
                }
            }));
        },
        pub: function(a) {
            eventPublisher.publish("Ironfan", a);
        },
        renderPage: function(b, e, f) {
            var g, h, i, j = this, k = {}, l = {};
            if (!j.settings.hasOwnProperty("handlebarsTemplate")) return !1;
            var m = function(a) {
                o(), "function" == typeof a && a.call();
            }, n = function() {
                h = j.settings.handlebarsTemplate, g = Digi.Templates[h], l.strings = a.extend({}, Digi.localized.strings, Digi.localized.content[h]), 
                l.formats = Digi.localized.formats || {}, b.html(g(a.extend({}, k, {
                    settings: j.settings
                }, {
                    localized: l
                }))), c.setTimeout(function() {
                    m(f);
                }, 0);
            }, o = function() {
                b.on("click", 'input[type="reset"]', t), j.sub("resetSelect2", u);
            }, p = function() {
                var b = {};
                c.pageData ? (console.log("Using dummy data"), q(c.pageData)) : (j.settings.id && (b.id = j.settings.id), 
                i = a.ajax(j.settings.handlerUrl, {
                    data: b,
                    dataType: "jsonp"
                }), i.done(q).fail(function(a, b, c) {
                    console.log(a, b, c);
                }));
            }, q = function(b) {
                k = a.extend({}, j.settings, b), j.pageData = k, k.hasOwnProperty("status") && "redirect" === k.status, 
                r(), n();
            }, r = function() {
                s(), w(), v();
            }, s = function() {
                var a, b, c, e;
                if (k !== d && k.hasOwnProperty("slideshows")) {
                    k.galleryModalUrl = j.settings.galleryModalUrl, k.galleryUrl = j.settings.galleryUrl, 
                    k.showProfileControls = j.settings.showProfileControls === !0 || "true" === j.settings.showProfileControls, 
                    k.showVisibilityControls = j.settings.showVisibilityControls !== !1 && "false" !== j.settings.showVisibilityControls && "" !== j.settings.showVisibilityControls;
                    for (c in k.slideshows) for (b = k.slideshows[c], b.slides = [], b.slide = [], a = b.items.length, 
                    b.hasFourItems = a >= 4, b.handlerUrl = j.settings.handlerUrl || "", b.counters = {
                        hidden: 0,
                        visible: 0
                    }, e = 0; a > e; e++) b.slide.push(b.items[e]), (e + 1) % j.settings.itemsPerSlide !== 0 && e + 1 !== a || (b.slides.push(b.slide), 
                    b.slide = []), b.items[e].visible ? b.counters.visible++ : b.counters.hidden++;
                }
            }, t = function() {
                u();
            }, u = function() {
                var b, c, e;
                a("select").each(function() {
                    b = a(this).data("forms-key"), c = a(this).attr("name"), e = "null", k !== d && k.hasOwnProperty("forms") && k.forms.hasOwnProperty(b) && k.forms[b].options.hasOwnProperty(c) && (e = k.forms[b].options[c].selectedValue || "null"), 
                    a(this).select2("val", e);
                });
            }, v = function() {
                var a, b, c;
                if (k !== d && k.hasOwnProperty("forms")) for (b in k.forms) {
                    a = k.forms[b];
                    for (c in a.options) a.fieldValues.hasOwnProperty(c) && (k.forms[b].options[c].selectedValue = a.fieldValues[c]);
                }
            }, w = function() {
                k !== d && k.hasOwnProperty("message") && (k.hasHeaderMessage = k.message !== d && "header" === k.message.type);
            };
            !function() {
                o(), p();
            }();
        },
        sub: function(a, b) {
            eventPublisher.subscribe("Ironfan", a, b);
        }
    }), Digi.Ironfan = e;
}(jQuery, document, window), void 0 === window.LiveMap && (LiveMap = {}), LiveMap.content = {
    localized: {
        infoBox: {
            seeDetailedProgress: "See Detailed Progress",
            shareProgress: "Share Progress",
            getEmailUpdates: "Get Email Updates",
            getSMSUpdates: "Get Text Alerts"
        },
        leaders: {
            pin: "Pin",
            name: "Name/Info",
            country: '<abbr title="Country">CTRY</abbr>',
            seenOnMap: "On Map",
            removeFromTrack: "Remove<br />From List",
            track: "Add To<br />Favorites",
            bib: "BIB #",
            sex: "Gender",
            trackName: "Follow",
            add: "Add",
            track: "Follow",
            onTrackList: "On<br />Favorites",
            removeName: "Remove",
            remove: "Remove"
        },
        leaderSummary: {
            leader: "Leader",
            country: "Country",
            time: "Time",
            position: "Position"
        },
        search: {
            pin: "Pin",
            name: "Name/Info",
            country: '<abbr title="Country">CTRY</abbr>',
            seenOnMap: "On Map",
            removeFromTrack: "Remove<br />From List",
            track: "Add To<br />Favorites",
            bib: "BIB #",
            sex: "Gender",
            trackName: "Follow",
            add: "Add",
            track: "Follow",
            onTrackList: "On<br />Favorites",
            removeName: "Remove",
            remove: "Remove"
        },
        summary: {
            bib: "BIB",
            country: "Country",
            ageGroup: "Age Group",
            approxDistance: '<abbr title="Approximate">Approx</abbr> Distance',
            approximate: "(approximate)",
            approxPace: '<abbr title="Approximate">Approx</abbr> Pace',
            perHourApprox: "per hour (approximate)",
            estFinish: '<abbr title="Estimated">Est.</abbr> Finish',
            viewMoreDetails: "View More Details",
            closeDetails: "Close Details"
        },
        track: {
            pin: "Pin",
            name: "Name/Info",
            country: '<abbr title="Country">CTRY</abbr>',
            seenOnMap: "On Map",
            removeFromTrack: "Remove<br />From List",
            track: "Add To<br />Favorites",
            bib: "BIB #",
            sex: "Gender",
            trackName: "Follow",
            add: "Add",
            track: "Follow",
            onTrackList: "On<br />Favorites",
            removeName: "Remove",
            remove: "Remove"
        },
        leaderListPre: {
            bib: "BIB#",
            athlete: "Athlete",
            ageGroup: "Age Group",
            country: "Country",
            gender: "Gender",
            subscribe: "Subscribe<br />To Updates",
            email: "Email",
            text: "Text",
            viewProfile: "View Profile",
            showOnMap: "Follow",
            previous: "Previous",
            next: "Next",
            errorMessage: "No athletes matched your search. Please try widening your search to find more results."
        },
        leaderListLive: {
            overallRank: "Overall<br />Rank",
            bib: "BIB#",
            athlete: "Athlete",
            country: "Country",
            currentLocation: "Current Location",
            currentPace: "Current<br />Pace",
            currentOverallTime: "Current<br />Overall Time",
            estFinishTime: "Estimated<br />Finish Time",
            showOnMap: "Follow",
            after: "after",
            previous: "Previous",
            next: "Next",
            errorMessage: "No athletes matched your search. Please try widening your search to find more results."
        },
        leaderListPost: {
            overallRank: "Overall Rank",
            bib: "BIB#",
            athlete: "Athlete",
            country: "Country",
            swimTime: "Swim Time",
            bikeTime: "Bike Time",
            runTime: "Run Time",
            finishTime: "Finish Time",
            after: "after",
            previous: "Previous",
            next: "Next",
            errorMessage: "No athletes matched your search. Please try widening your search to find more results."
        },
        detailView: {
            viewProfile: "View Profile",
            age: "Age",
            ageGroup: "Age Group",
            occupation: "Occupation",
            agr: "AGR",
            previousRace: "Previous Race(s)",
            triClub: "Tri Club",
            currentRanking: "Ranking",
            overallRank: "Overall Rank",
            groupRank: "Group Rank",
            genderRank: "Gender Rank",
            subscribe: "Subscribe to Updates",
            email: "Email",
            text: "Text",
            estimatedProgress: "Estimated Progress",
            shareCurrentProgress: "Share",
            favoriteCurrentProgress: "Favorite",
            finalResults: "Final Results",
            sharefinalResults: "Share",
            favoriteFinalResults: "Favorite",
            view: "View My Official Event Results",
            segment: "Segment",
            time: "Time",
            avgPace: "Average Pace",
            progress: "Progress",
            compare: "Compare by Averages",
            avgProPace: "Avg. Pro Pace",
            avgAgeGroupProPace: "Avg. Age Group Pace",
            avgGroupLeaderPace: "Avg. Group Leader Pace",
            currently: "Led by",
            timeMats: "Time Mats",
            timeMat: "Time Mat",
            pace: "Pace",
            raceTime: "Race Time"
        },
        mapMarkers: {
            mat: "Timing Mat",
            segmentEnd: "Discipline End",
            segmentStart: "Discipline Start",
            raceEnd: "Race End",
            raceStart: "Race Start"
        }
    }
};
//# sourceMappingURL=ironfan.min.js.map
/* ---------------------------------------- /includes/jsbin/underscore-min.js ---------------------------------------- */
//     Underscore.js 1.8.2
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=d(e,i,4);var o=!w(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=b(r,e);for(var u=null!=t&&t.length,i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t){var r=S.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||o,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=S[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var e=this,u=e._,i=Array.prototype,o=Object.prototype,a=Function.prototype,c=i.push,l=i.slice,f=o.toString,s=o.hasOwnProperty,p=Array.isArray,h=Object.keys,v=a.bind,g=Object.create,y=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):e._=m,m.VERSION="1.8.2";var d=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},b=function(n,t,r){return null==n?m.identity:m.isFunction(n)?d(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return b(n,t,1/0)};var x=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var l=o[c];t&&r[l]!==void 0||(r[l]=i[l])}return r}},_=function(n){if(!m.isObject(n))return{};if(g)return g(n);y.prototype=n;var t=new y;return y.prototype=null,t},j=Math.pow(2,53)-1,w=function(n){var t=n&&n.length;return"number"==typeof t&&t>=0&&j>=t};m.each=m.forEach=function(n,t,r){t=d(t,r);var e,u;if(w(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=w(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=b(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(b(t)),r)},m.every=m.all=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r){return w(n)||(n=m.values(n)),m.indexOf(n,t,"number"==typeof r&&r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=w(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=b(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=w(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=b(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=w(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(w(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=b(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var A=function(n){return function(t,r,e){var u={};return r=b(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=A(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=A(function(n,t,r){n[r]=t}),m.countBy=A(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):w(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:w(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=b(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var k=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=n&&n.length;a>o;o++){var c=n[o];if(w(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=k(c,t,r));var l=0,f=c.length;for(u.length+=f;f>l;)u[i++]=c[l++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return k(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){if(null==n)return[];m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=b(r,e));for(var u=[],i=[],o=0,a=n.length;a>o;o++){var c=n[o],l=r?r(c,o,n):c;t?(o&&i===l||u.push(c),i=l):r?m.contains(i,l)||(i.push(l),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(k(arguments,!0,!0))},m.intersection=function(n){if(null==n)return[];for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=k(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,"length").length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=n&&n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.indexOf=function(n,t,r){var e=0,u=n&&n.length;if("number"==typeof r)e=0>r?Math.max(0,u+r):r;else if(r&&u)return e=m.sortedIndex(n,t),n[e]===t?e:-1;if(t!==t)return m.findIndex(l.call(n,e),m.isNaN);for(;u>e;e++)if(n[e]===t)return e;return-1},m.lastIndexOf=function(n,t,r){var e=n?n.length:0;if("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1)),t!==t)return m.findLastIndex(l.call(n,0,e),m.isNaN);for(;--e>=0;)if(n[e]===t)return e;return-1},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=b(r,e,1);for(var u=r(t),i=0,o=n.length;o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var O=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=_(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(v&&n.bind===v)return v.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return O(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return O(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var l=m.now();a||r.leading!==!1||(a=l);var f=t-(l-a);return e=this,u=arguments,0>=f||f>t?(o&&(clearTimeout(o),o=null),a=l,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,f)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var l=m.now()-o;t>l&&l>=0?e=setTimeout(c,t-l):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),S=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(h)return h(n);var t=[];for(var e in n)m.has(n,e)&&t.push(e);return F&&r(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var e in n)t.push(e);return F&&r(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=b(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=x(m.allKeys),m.extendOwn=m.assign=x(m.keys),m.findKey=function(n,t,r){t=b(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=d(t,r)):(u=k(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var l=u[a],f=o[l];e(f,l,o)&&(i[l]=f)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(k(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=x(m.allKeys,!0),m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var E=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=f.call(n);if(u!==f.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!E(n[c],t[c],r,e))return!1}else{var l,s=m.keys(n);if(c=s.length,m.keys(t).length!==c)return!1;for(;c--;)if(l=s[c],!m.has(t,l)||!E(n[l],t[l],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return E(n,t)},m.isEmpty=function(n){return null==n?!0:w(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=p||function(n){return"[object Array]"===f.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return f.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===f.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&s.call(n,t)},m.noConflict=function(){return e._=u,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=function(n){return function(t){return null==t?void 0:t[n]}},m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=d(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=m.invert(M),I=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=I(M),m.unescape=I(N),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var B=0;m.uniqueId=function(n){var t=++B+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,K=function(n){return"\\"+R[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||T).source,(t.interpolate||T).source,(t.evaluate||T).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(q,K),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},l=t.variable||"obj";return c.source="function("+l+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var z=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return c.apply(n,arguments),z(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=i[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],z(this,r)}}),m.each(["concat","join","slice"],function(n){var t=i[n];m.prototype[n]=function(){return z(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
//# sourceMappingURL=underscore-min.map
/* ---------------------------------------- /includes/jsbin/backbone-min.js ---------------------------------------- */
(function(t,e){if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(i,r,s){t.Backbone=e(t,s,i,r)})}else if(typeof exports!=="undefined"){var i=require("underscore");e(t,exports,i)}else{t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}})(this,function(t,e,i,r){var s=t.Backbone;var n=[];var a=n.push;var o=n.slice;var h=n.splice;e.VERSION="1.1.2";e.$=r;e.noConflict=function(){t.Backbone=s;return this};e.emulateHTTP=false;e.emulateJSON=false;var u=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);r.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var s=this;var n=i.once(function(){s.off(t,n);e.apply(this,arguments)});n._callback=e;return this.on(t,n,r)},off:function(t,e,r){var s,n,a,o,h,u,l,f;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r){this._events=void 0;return this}o=t?[t]:i.keys(this._events);for(h=0,u=o.length;h<u;h++){t=o[h];if(a=this._events[t]){this._events[t]=s=[];if(e||r){for(l=0,f=a.length;l<f;l++){n=a[l];if(e&&e!==n.callback&&e!==n.callback._callback||r&&r!==n.context){s.push(n)}}}if(!s.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t];var r=this._events.all;if(i)f(i,e);if(r)f(r,arguments);return this},stopListening:function(t,e,r){var s=this._listeningTo;if(!s)return this;var n=!e&&!r;if(!r&&typeof e==="object")r=this;if(t)(s={})[t._listenId]=t;for(var a in s){t=s[a];t.off(e,r,this);if(n||i.isEmpty(t._events))delete this._listeningTo[a]}return this}};var l=/\s+/;var c=function(t,e,i,r){if(!i)return true;if(typeof i==="object"){for(var s in i){t[e].apply(t,[s,i[s]].concat(r))}return false}if(l.test(i)){var n=i.split(l);for(var a=0,o=n.length;a<o;a++){t[e].apply(t,[n[a]].concat(r))}return false}return true};var f=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],o=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,o);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e);return}};var d={listenTo:"on",listenToOnce:"once"};i.each(d,function(t,e){u[e]=function(e,r,s){var n=this._listeningTo||(this._listeningTo={});var a=e._listenId||(e._listenId=i.uniqueId("l"));n[a]=e;if(!s&&typeof r==="object")s=this;e[t](r,s,this);return this}});u.bind=u.on;u.unbind=u.off;i.extend(e,u);var p=e.Model=function(t,e){var r=t||{};e||(e={});this.cid=i.uniqueId("c");this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)r=this.parse(r,e)||{};r=i.defaults({},r,i.result(this,"defaults"));this.set(r,e);this.changed={};this.initialize.apply(this,arguments)};i.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,r){var s,n,a,o,h,u,l,c;if(t==null)return this;if(typeof t==="object"){n=t;r=e}else{(n={})[t]=e}r||(r={});if(!this._validate(n,r))return false;a=r.unset;h=r.silent;o=[];u=this._changing;this._changing=true;if(!u){this._previousAttributes=i.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in n)this.id=n[this.idAttribute];for(s in n){e=n[s];if(!i.isEqual(c[s],e))o.push(s);if(!i.isEqual(l[s],e)){this.changed[s]=e}else{delete this.changed[s]}a?delete c[s]:c[s]=e}if(!h){if(o.length)this._pending=r;for(var f=0,d=o.length;f<d;f++){this.trigger("change:"+o[f],this,c[o[f]],r)}}if(u)return this;if(!h){while(this._pending){r=this._pending;this._pending=false;this.trigger("change",this,r)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:true}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!i.isEmpty(this.changed);return i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):false;var e,r=false;var s=this._changing?this._previousAttributes:this.attributes;for(var n in t){if(i.isEqual(s[n],e=t[n]))continue;(r||(r={}))[n]=e}return r},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var r=t.success;t.success=function(i){if(!e.set(e.parse(i,t),t))return false;if(r)r(e,i,t);e.trigger("sync",e,i,t)};q(this,t);return this.sync("read",this,t)},save:function(t,e,r){var s,n,a,o=this.attributes;if(t==null||typeof t==="object"){s=t;r=e}else{(s={})[t]=e}r=i.extend({validate:true},r);if(s&&!r.wait){if(!this.set(s,r))return false}else{if(!this._validate(s,r))return false}if(s&&r.wait){this.attributes=i.extend({},o,s)}if(r.parse===void 0)r.parse=true;var h=this;var u=r.success;r.success=function(t){h.attributes=o;var e=h.parse(t,r);if(r.wait)e=i.extend(s||{},e);if(i.isObject(e)&&!h.set(e,r)){return false}if(u)u(h,t,r);h.trigger("sync",h,t,r)};q(this,r);n=this.isNew()?"create":r.patch?"patch":"update";if(n==="patch")r.attrs=s;a=this.sync(n,this,r);if(s&&r.wait)this.attributes=o;return a},destroy:function(t){t=t?i.clone(t):{};var e=this;var r=t.success;var s=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(i){if(t.wait||e.isNew())s();if(r)r(e,i,t);if(!e.isNew())e.trigger("sync",e,i,t)};if(this.isNew()){t.success();return false}q(this,t);var n=this.sync("delete",this,t);if(!t.wait)s();return n},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||M();if(this.isNew())return t;return t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=i.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;if(!r)return true;this.trigger("invalid",this,r,i.extend(e,{validationError:r}));return false}});var v=["keys","values","pairs","invert","pick","omit"];i.each(v,function(t){p.prototype[t]=function(){var e=o.call(arguments);e.unshift(this.attributes);return i[t].apply(i,e)}});var g=e.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,i.extend({silent:true},e))};var m={add:true,remove:true,merge:true};var y={add:true,remove:false};i.extend(g.prototype,u,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:false},e,y))},remove:function(t,e){var r=!i.isArray(t);t=r?[t]:i.clone(t);e||(e={});var s,n,a,o;for(s=0,n=t.length;s<n;s++){o=t[s]=this.get(t[s]);if(!o)continue;delete this._byId[o.id];delete this._byId[o.cid];a=this.indexOf(o);this.models.splice(a,1);this.length--;if(!e.silent){e.index=a;o.trigger("remove",o,this,e)}this._removeReference(o,e)}return r?t[0]:t},set:function(t,e){e=i.defaults({},e,m);if(e.parse)t=this.parse(t,e);var r=!i.isArray(t);t=r?t?[t]:[]:i.clone(t);var s,n,a,o,h,u,l;var c=e.at;var f=this.model;var d=this.comparator&&c==null&&e.sort!==false;var v=i.isString(this.comparator)?this.comparator:null;var g=[],y=[],_={};var b=e.add,w=e.merge,x=e.remove;var E=!d&&b&&x?[]:false;for(s=0,n=t.length;s<n;s++){h=t[s]||{};if(h instanceof p){a=o=h}else{a=h[f.prototype.idAttribute||"id"]}if(u=this.get(a)){if(x)_[u.cid]=true;if(w){h=h===o?o.attributes:h;if(e.parse)h=u.parse(h,e);u.set(h,e);if(d&&!l&&u.hasChanged(v))l=true}t[s]=u}else if(b){o=t[s]=this._prepareModel(h,e);if(!o)continue;g.push(o);this._addReference(o,e)}o=u||o;if(E&&(o.isNew()||!_[o.id]))E.push(o);_[o.id]=true}if(x){for(s=0,n=this.length;s<n;++s){if(!_[(o=this.models[s]).cid])y.push(o)}if(y.length)this.remove(y,e)}if(g.length||E&&E.length){if(d)l=true;this.length+=g.length;if(c!=null){for(s=0,n=g.length;s<n;s++){this.models.splice(c+s,0,g[s])}}else{if(E)this.models.length=0;var k=E||g;for(s=0,n=k.length;s<n;s++){this.models.push(k[s])}}}if(l)this.sort({silent:true});if(!e.silent){for(s=0,n=g.length;s<n;s++){(o=g[s]).trigger("add",o,this,e)}if(l||E&&E.length)this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,s=this.models.length;r<s;r++){this._removeReference(this.models[r],e)}e.previousModels=this.models;this._reset();t=this.add(t,i.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){if(i.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(i.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(i.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var r=this;t.success=function(i){var s=t.reset?"reset":"set";r[s](i,t);if(e)e(r,i,t);r.trigger("sync",r,i,t)};q(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var r=this;var s=e.success;e.success=function(t,i){if(e.wait)r.add(t,e);if(s)s(t,i,e)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{};e.collection=this;var r=new this.model(t,e);if(!r.validationError)return r;this.trigger("invalid",this,r.validationError,e);return false},_addReference:function(t,e){this._byId[t.cid]=t;if(t.id!=null)this._byId[t.id]=t;if(!t.collection)t.collection=this;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(_,function(t){g.prototype[t]=function(){var e=o.call(arguments);e.unshift(this.models);return i[t].apply(i,e)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(t){g.prototype[t]=function(e,r){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,r)}});var w=e.View=function(t){this.cid=i.uniqueId("view");t||(t={});i.extend(this,i.pick(t,E));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var x=/^(\S+)\s*(.*)$/;var E=["model","collection","el","id","attributes","className","tagName","events"];i.extend(w.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,i){if(this.$el)this.undelegateEvents();this.$el=t instanceof e.$?t:e.$(t);this.el=this.$el[0];if(i!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=i.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(!i.isFunction(r))r=this[t[e]];if(!r)continue;var s=e.match(x);var n=s[1],a=s[2];r=i.bind(r,this);n+=".delegateEvents"+this.cid;if(a===""){this.$el.on(n,r)}else{this.$el.on(n,a,r)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var t=i.extend({},i.result(this,"attributes"));if(this.id)t.id=i.result(this,"id");if(this.className)t["class"]=i.result(this,"className");var r=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(r,false)}else{this.setElement(i.result(this,"el"),false)}}});e.sync=function(t,r,s){var n=T[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:n,dataType:"json"};if(!s.url){a.url=i.result(r,"url")||M()}if(s.data==null&&r&&(t==="create"||t==="update"||t==="patch")){a.contentType="application/json";a.data=JSON.stringify(s.attrs||r.toJSON(s))}if(s.emulateJSON){a.contentType="application/x-www-form-urlencoded";a.data=a.data?{model:a.data}:{}}if(s.emulateHTTP&&(n==="PUT"||n==="DELETE"||n==="PATCH")){a.type="POST";if(s.emulateJSON)a.data._method=n;var o=s.beforeSend;s.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",n);if(o)return o.apply(this,arguments)}}if(a.type!=="GET"&&!s.emulateJSON){a.processData=false}if(a.type==="PATCH"&&k){a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var h=s.xhr=e.ajax(i.extend(a,s));r.trigger("request",r,h,s);return h};var k=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var $=e.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var S=/\((.*?)\)/g;var H=/(\(\?)?:\w+/g;var A=/\*\w+/g;var I=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend($.prototype,u,{initialize:function(){},route:function(t,r,s){if(!i.isRegExp(t))t=this._routeToRegExp(t);if(i.isFunction(r)){s=r;r=""}if(!s)s=this[r];var n=this;e.history.route(t,function(i){var a=n._extractParameters(t,i);n.execute(s,a);n.trigger.apply(n,["route:"+r].concat(a));n.trigger("route",r,a);e.history.trigger("route",n,r,a)});return this},execute:function(t,e){if(t)t.apply(this,e)},navigate:function(t,i){e.history.navigate(t,i);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=i.result(this,"routes");var t,e=i.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(I,"\\$&").replace(S,"(?:$1)?").replace(H,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)");return new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return i.map(r,function(t,e){if(e===r.length-1)return t||null;return t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[];i.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var R=/^[#\/]|\s+$/g;var O=/^\/+|\/+$/g;var P=/msie [\w.]+/;var C=/\/$/;var j=/#.*$/;N.started=false;i.extend(N.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(C,"");if(!t.indexOf(i))t=t.slice(i.length)}else{t=this.getHash()}}return t.replace(R,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=true;this.options=i.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment();var s=document.documentMode;var n=P.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);this.root=("/"+this.root+"/").replace(O,"/");if(n&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow;this.navigate(r)}if(this._hasPushState){e.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!n){e.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=r;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else if(this._hasPushState&&this.atRoot()&&o.hash){this.fragment=this.getHash().replace(R,"");this.history.replaceState({},document.title,this.root+this.fragment)}}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);N.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return i.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!N.started)return false;if(!e||e===true)e={trigger:!!e};var i=this.root+(t=this.getFragment(t||""));t=t.replace(j,"");if(this.fragment===t)return;this.fragment=t;if(t===""&&i!=="/")i=i.slice(0,-1);if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});e.history=new N;var U=function(t,e){var r=this;var s;if(t&&i.has(t,"constructor")){s=t.constructor}else{s=function(){return r.apply(this,arguments)}}i.extend(s,r,e);var n=function(){this.constructor=s};n.prototype=r.prototype;s.prototype=new n;if(t)i.extend(s.prototype,t);s.__super__=r.prototype;return s};p.extend=g.extend=$.extend=w.extend=N.extend=U;var M=function(){throw new Error('A "url" property or function must be specified')};var q=function(t,e){var i=e.error;e.error=function(r){if(i)i(t,r,e);t.trigger("error",t,r,e)}};return e});
//# sourceMappingURL=backbone-min.map